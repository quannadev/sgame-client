
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/_smartfox/gui/UtilsUI.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '36367CtJ7JH0IcN1lK1XCUM', 'UtilsUI');
// _smartfox/gui/UtilsUI.js

"use strict";

var UtilsUI = {};

UtilsUI.loadImageLink = function (link, sprite, complete) {
  if (!sprite) {
    console.log("Loi sprite");
    return;
  }

  cc.loader.load({
    url: link,
    type: 'png'
  }, function (err, texture) {
    if (err) {
      console.log(err);
      return;
    }

    if (cc.isValid(sprite)) sprite.spriteFrame = new cc.SpriteFrame(texture);
    if (complete) complete(sprite);
  });
};

UtilsUI.loadImageRes = function (sprite, url) {
  cc.loader.loadRes(url, cc.SpriteFrame, function (err, spriteFrame) {
    if (err) {
      console.log(err);
      return;
    }

    if (cc.isValid(sprite)) {
      sprite.spriteFrame = spriteFrame;
      sprite.node.active = true;
    }
  });
};

UtilsUI.loadPlist = function (sprite, url, name) {
  cc.loader.loadRes(url, cc.SpriteAtlas, function (err, atlas) {
    if (err) {
      return;
    }

    var frame = atlas.getSpriteFrame(name);

    if (cc.isValid(sprite)) {
      sprite.spriteFrame = frame;
      sprite.node.active = true;
    }
  });
};

UtilsUI.addDotToNumber = function (value) {
  if (value <= 0) return 0;
  return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
};

UtilsUI.formatCurrency = function (money) {
  if (money <= 0) return 0;

  if (!mm.KythanhUserVariable.isBet()) {
    return Math.floor(money / 500);
  }

  if (money >= Math.pow(10, 4) && money < Math.pow(10, 6)) {
    return money / Math.pow(10, 3) + "K";
  } else if (money >= Math.pow(10, 6) && money < Math.pow(10, 9)) {
    money = Math.floor(money / Math.pow(10, 4)) / 100;
    return money + "M";
  } else if (money >= Math.pow(10, 9) && money < Math.pow(10, 12)) {
    money = Math.floor(money / Math.pow(10, 7)) / 100;
    return money + "B";
  } else if (money >= Math.pow(10, 12) && money <= Math.pow(10, 15)) {
    money = Math.floor(money / Math.pow(10, 10)) / 100;
    return money + "Q";
  } else if (money >= Math.pow(10, 15)) {
    money = Math.floor(money / Math.pow(10, 13)) / 100;
    return money + "~~";
  }

  return Utils.addDotToNumber(money);
};

UtilsUI.formatNumber = function (number, point) {
  var numberPoint = Math.pow(10, point);
  number = number / numberPoint;
  number = Math.floor(number);
  number = number * numberPoint;
  return number;
};

UtilsUI.formatTimeToString = function (time) {
  var minute = Math.floor(time / 60);
  var seconds = Math.floor(time % 60);

  if (minute < 10) {
    minute = "0" + minute;
  }

  if (seconds < 10) seconds = "0" + seconds;
  return minute + ":" + seconds;
};

UtilsUI.convertTimeStampToDate = function (timeStamp) {
  var date = new Date(timeStamp);
  var year = date.getFullYear();
  var month = date.getMonth();
  var day = date.getDay();
  var hours = date.getHours();
  var minutes = "0" + date.getMinutes();
  var seconds = "0" + date.getSeconds(); // return hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);

  return day + "/" + month + "/" + year;
};

UtilsUI.convertTimeStampToTime = function (timeStamp, language) {
  //+ " " + Language.LANGUAGE()["txt_minute"];
  var date = new Date(timeStamp);
  var year = date.getFullYear();
  var month = date.getMonth();
  var day = date.getDay();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var seconds = date.getSeconds();
  return day + "/" + month + "/" + year;
};

UtilsUI.convertDateToTimestamp = function (myDate) {
  myDate = myDate.split("-");
  if (myDate.length != 3) return null;
  var newDate = myDate[1] + "/" + myDate[0] + "/" + myDate[2];
  var time = new Date(newDate).getTime();
  return time;
};

UtilsUI.formatText = function (text, maxLength) {
  if (text == undefined || text == null || text == '') return "Error: Empty";
  if (maxLength === undefined) maxLength = 10;
  var pre = "";
  if (text.length >= maxLength) pre = "..";
  text = text.substring(0, maxLength - pre.length);
  text += pre;
  return text;
};

UtilsUI.formatRelativeTime = function (seconds) {
  if (!Number.isInteger(seconds) || +seconds <= 0) {
    return '0 day';
  } else {
    var days = Math.floor(seconds / (24 * 60 * 60));
    return days + ' days';
  }
};

module.exports = UtilsUI;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcX3NtYXJ0Zm94XFxndWlcXFV0aWxzVUkuanMiXSwibmFtZXMiOlsiVXRpbHNVSSIsImxvYWRJbWFnZUxpbmsiLCJsaW5rIiwic3ByaXRlIiwiY29tcGxldGUiLCJjb25zb2xlIiwibG9nIiwiY2MiLCJsb2FkZXIiLCJsb2FkIiwidXJsIiwidHlwZSIsImVyciIsInRleHR1cmUiLCJpc1ZhbGlkIiwic3ByaXRlRnJhbWUiLCJTcHJpdGVGcmFtZSIsImxvYWRJbWFnZVJlcyIsImxvYWRSZXMiLCJub2RlIiwiYWN0aXZlIiwibG9hZFBsaXN0IiwibmFtZSIsIlNwcml0ZUF0bGFzIiwiYXRsYXMiLCJmcmFtZSIsImdldFNwcml0ZUZyYW1lIiwiYWRkRG90VG9OdW1iZXIiLCJ2YWx1ZSIsInRvU3RyaW5nIiwicmVwbGFjZSIsImZvcm1hdEN1cnJlbmN5IiwibW9uZXkiLCJtbSIsIkt5dGhhbmhVc2VyVmFyaWFibGUiLCJpc0JldCIsIk1hdGgiLCJmbG9vciIsInBvdyIsIlV0aWxzIiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwicG9pbnQiLCJudW1iZXJQb2ludCIsImZvcm1hdFRpbWVUb1N0cmluZyIsInRpbWUiLCJtaW51dGUiLCJzZWNvbmRzIiwiY29udmVydFRpbWVTdGFtcFRvRGF0ZSIsInRpbWVTdGFtcCIsImRhdGUiLCJEYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERheSIsImhvdXJzIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjb252ZXJ0VGltZVN0YW1wVG9UaW1lIiwibGFuZ3VhZ2UiLCJjb252ZXJ0RGF0ZVRvVGltZXN0YW1wIiwibXlEYXRlIiwic3BsaXQiLCJsZW5ndGgiLCJuZXdEYXRlIiwiZ2V0VGltZSIsImZvcm1hdFRleHQiLCJ0ZXh0IiwibWF4TGVuZ3RoIiwidW5kZWZpbmVkIiwicHJlIiwic3Vic3RyaW5nIiwiZm9ybWF0UmVsYXRpdmVUaW1lIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwiZGF5cyIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBS0EsT0FBTyxHQUFJLEVBQWhCOztBQUNBQSxPQUFPLENBQUNDLGFBQVIsR0FBd0IsVUFBVUMsSUFBVixFQUFnQkMsTUFBaEIsRUFBd0JDLFFBQXhCLEVBQWtDO0FBQ3RELE1BQUcsQ0FBQ0QsTUFBSixFQUFXO0FBQ1BFLElBQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZLFlBQVo7QUFDQTtBQUNIOztBQUNEQyxFQUFBQSxFQUFFLENBQUNDLE1BQUgsQ0FBVUMsSUFBVixDQUFlO0FBQUNDLElBQUFBLEdBQUcsRUFBRVIsSUFBTjtBQUFZUyxJQUFBQSxJQUFJLEVBQUU7QUFBbEIsR0FBZixFQUF5QyxVQUFVQyxHQUFWLEVBQWVDLE9BQWYsRUFBd0I7QUFDN0QsUUFBR0QsR0FBSCxFQUFPO0FBQ0hQLE1BQUFBLE9BQU8sQ0FBQ0MsR0FBUixDQUFZTSxHQUFaO0FBQ0E7QUFDSDs7QUFDRCxRQUFHTCxFQUFFLENBQUNPLE9BQUgsQ0FBV1gsTUFBWCxDQUFILEVBQ0lBLE1BQU0sQ0FBQ1ksV0FBUCxHQUFxQixJQUFJUixFQUFFLENBQUNTLFdBQVAsQ0FBbUJILE9BQW5CLENBQXJCO0FBQ0osUUFBR1QsUUFBSCxFQUNJQSxRQUFRLENBQUNELE1BQUQsQ0FBUjtBQUNQLEdBVEQ7QUFVSCxDQWZEOztBQWdCQUgsT0FBTyxDQUFDaUIsWUFBUixHQUF1QixVQUFTZCxNQUFULEVBQWlCTyxHQUFqQixFQUFxQjtBQUN4Q0gsRUFBQUEsRUFBRSxDQUFDQyxNQUFILENBQVVVLE9BQVYsQ0FBa0JSLEdBQWxCLEVBQXVCSCxFQUFFLENBQUNTLFdBQTFCLEVBQXVDLFVBQVVKLEdBQVYsRUFBZUcsV0FBZixFQUE0QjtBQUMvRCxRQUFHSCxHQUFILEVBQU87QUFDSFAsTUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlNLEdBQVo7QUFDQTtBQUNIOztBQUNELFFBQUdMLEVBQUUsQ0FBQ08sT0FBSCxDQUFXWCxNQUFYLENBQUgsRUFBc0I7QUFDbEJBLE1BQUFBLE1BQU0sQ0FBQ1ksV0FBUCxHQUFxQkEsV0FBckI7QUFDQVosTUFBQUEsTUFBTSxDQUFDZ0IsSUFBUCxDQUFZQyxNQUFaLEdBQXFCLElBQXJCO0FBQ0g7QUFDSixHQVREO0FBVUgsQ0FYRDs7QUFZQXBCLE9BQU8sQ0FBQ3FCLFNBQVIsR0FBb0IsVUFBU2xCLE1BQVQsRUFBaUJPLEdBQWpCLEVBQXNCWSxJQUF0QixFQUEyQjtBQUMzQ2YsRUFBQUEsRUFBRSxDQUFDQyxNQUFILENBQVVVLE9BQVYsQ0FBa0JSLEdBQWxCLEVBQXVCSCxFQUFFLENBQUNnQixXQUExQixFQUF1QyxVQUFVWCxHQUFWLEVBQWVZLEtBQWYsRUFBc0I7QUFDekQsUUFBR1osR0FBSCxFQUFPO0FBQ0g7QUFDSDs7QUFDRCxRQUFJYSxLQUFLLEdBQUdELEtBQUssQ0FBQ0UsY0FBTixDQUFxQkosSUFBckIsQ0FBWjs7QUFDQSxRQUFHZixFQUFFLENBQUNPLE9BQUgsQ0FBV1gsTUFBWCxDQUFILEVBQXNCO0FBQ2xCQSxNQUFBQSxNQUFNLENBQUNZLFdBQVAsR0FBcUJVLEtBQXJCO0FBQ0F0QixNQUFBQSxNQUFNLENBQUNnQixJQUFQLENBQVlDLE1BQVosR0FBcUIsSUFBckI7QUFDSDtBQUNKLEdBVEQ7QUFVSCxDQVhEOztBQVlBcEIsT0FBTyxDQUFDMkIsY0FBUixHQUF5QixVQUFTQyxLQUFULEVBQWdCO0FBQ3JDLE1BQUdBLEtBQUssSUFBSSxDQUFaLEVBQ0ksT0FBTyxDQUFQO0FBQ0osU0FBT0EsS0FBSyxDQUFDQyxRQUFOLEdBQWlCQyxPQUFqQixDQUF5Qix1QkFBekIsRUFBa0QsR0FBbEQsQ0FBUDtBQUNILENBSkQ7O0FBS0E5QixPQUFPLENBQUMrQixjQUFSLEdBQXlCLFVBQVVDLEtBQVYsRUFDekI7QUFDSSxNQUFHQSxLQUFLLElBQUksQ0FBWixFQUNJLE9BQU8sQ0FBUDs7QUFDSixNQUFHLENBQUNDLEVBQUUsQ0FBQ0MsbUJBQUgsQ0FBdUJDLEtBQXZCLEVBQUosRUFBbUM7QUFDL0IsV0FBT0MsSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssR0FBRyxHQUFuQixDQUFQO0FBQ0g7O0FBQ0QsTUFBR0EsS0FBSyxJQUFJSSxJQUFJLENBQUNFLEdBQUwsQ0FBUyxFQUFULEVBQWEsQ0FBYixDQUFULElBQTRCTixLQUFLLEdBQUdJLElBQUksQ0FBQ0UsR0FBTCxDQUFTLEVBQVQsRUFBYSxDQUFiLENBQXZDLEVBQXVEO0FBQ25ELFdBQU9OLEtBQUssR0FBQ0ksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLENBQVosQ0FBTixHQUF1QixHQUE5QjtBQUNILEdBRkQsTUFFTyxJQUFHTixLQUFLLElBQUlJLElBQUksQ0FBQ0UsR0FBTCxDQUFTLEVBQVQsRUFBWSxDQUFaLENBQVQsSUFBMkJOLEtBQUssR0FBR0ksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLENBQVosQ0FBdEMsRUFBcUQ7QUFDeEROLElBQUFBLEtBQUssR0FBR0ksSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssR0FBQ0ksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLENBQVosQ0FBakIsSUFBaUMsR0FBekM7QUFDQSxXQUFPTixLQUFLLEdBQUcsR0FBZjtBQUNILEdBSE0sTUFHRCxJQUFHQSxLQUFLLElBQUlJLElBQUksQ0FBQ0UsR0FBTCxDQUFTLEVBQVQsRUFBWSxDQUFaLENBQVQsSUFBMkJOLEtBQUssR0FBR0ksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLEVBQVosQ0FBdEMsRUFBc0Q7QUFDeEROLElBQUFBLEtBQUssR0FBR0ksSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssR0FBQ0ksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLENBQVosQ0FBakIsSUFBaUMsR0FBekM7QUFDQSxXQUFPTixLQUFLLEdBQUcsR0FBZjtBQUNILEdBSEssTUFHQSxJQUFHQSxLQUFLLElBQUlJLElBQUksQ0FBQ0UsR0FBTCxDQUFTLEVBQVQsRUFBWSxFQUFaLENBQVQsSUFBNEJOLEtBQUssSUFBSUksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLEVBQVosQ0FBeEMsRUFBd0Q7QUFDMUROLElBQUFBLEtBQUssR0FBR0ksSUFBSSxDQUFDQyxLQUFMLENBQVdMLEtBQUssR0FBQ0ksSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFZLEVBQVosQ0FBakIsSUFBa0MsR0FBMUM7QUFDQSxXQUFRTixLQUFLLEdBQUcsR0FBaEI7QUFDSCxHQUhLLE1BR0EsSUFBR0EsS0FBSyxJQUFJSSxJQUFJLENBQUNFLEdBQUwsQ0FBUyxFQUFULEVBQWEsRUFBYixDQUFaLEVBQTZCO0FBQy9CTixJQUFBQSxLQUFLLEdBQUdJLElBQUksQ0FBQ0MsS0FBTCxDQUFXTCxLQUFLLEdBQUNJLElBQUksQ0FBQ0UsR0FBTCxDQUFTLEVBQVQsRUFBWSxFQUFaLENBQWpCLElBQWtDLEdBQTFDO0FBQ0EsV0FBT04sS0FBSyxHQUFDLElBQWI7QUFDSDs7QUFDRCxTQUFPTyxLQUFLLENBQUNaLGNBQU4sQ0FBcUJLLEtBQXJCLENBQVA7QUFDSCxDQXZCRDs7QUF3QkFoQyxPQUFPLENBQUN3QyxZQUFSLEdBQXNCLFVBQVVDLE1BQVYsRUFBa0JDLEtBQWxCLEVBQXlCO0FBQzNDLE1BQUlDLFdBQVcsR0FBR1AsSUFBSSxDQUFDRSxHQUFMLENBQVMsRUFBVCxFQUFhSSxLQUFiLENBQWxCO0FBQ0FELEVBQUFBLE1BQU0sR0FBR0EsTUFBTSxHQUFDRSxXQUFoQjtBQUNBRixFQUFBQSxNQUFNLEdBQUdMLElBQUksQ0FBQ0MsS0FBTCxDQUFXSSxNQUFYLENBQVQ7QUFDQUEsRUFBQUEsTUFBTSxHQUFHQSxNQUFNLEdBQUNFLFdBQWhCO0FBQ0EsU0FBT0YsTUFBUDtBQUNILENBTkQ7O0FBT0F6QyxPQUFPLENBQUM0QyxrQkFBUixHQUE2QixVQUFTQyxJQUFULEVBQWM7QUFDdkMsTUFBSUMsTUFBTSxHQUFHVixJQUFJLENBQUNDLEtBQUwsQ0FBV1EsSUFBSSxHQUFDLEVBQWhCLENBQWI7QUFDQSxNQUFJRSxPQUFPLEdBQUdYLElBQUksQ0FBQ0MsS0FBTCxDQUFXUSxJQUFJLEdBQUMsRUFBaEIsQ0FBZDs7QUFDQSxNQUFJQyxNQUFNLEdBQUcsRUFBYixFQUFpQjtBQUNiQSxJQUFBQSxNQUFNLEdBQUcsTUFBSUEsTUFBYjtBQUNIOztBQUNELE1BQUdDLE9BQU8sR0FBRyxFQUFiLEVBQ0lBLE9BQU8sR0FBRyxNQUFJQSxPQUFkO0FBQ0osU0FBT0QsTUFBTSxHQUFDLEdBQVAsR0FBV0MsT0FBbEI7QUFDSCxDQVREOztBQVVBL0MsT0FBTyxDQUFDZ0Qsc0JBQVIsR0FBZ0MsVUFBVUMsU0FBVixFQUFxQjtBQUNqRCxNQUFJQyxJQUFJLEdBQUcsSUFBSUMsSUFBSixDQUFTRixTQUFULENBQVg7QUFDQSxNQUFJRyxJQUFJLEdBQUdGLElBQUksQ0FBQ0csV0FBTCxFQUFYO0FBQ0EsTUFBSUMsS0FBSyxHQUFFSixJQUFJLENBQUNLLFFBQUwsRUFBWDtBQUNBLE1BQUlDLEdBQUcsR0FBSU4sSUFBSSxDQUFDTyxNQUFMLEVBQVg7QUFDQSxNQUFJQyxLQUFLLEdBQUdSLElBQUksQ0FBQ1MsUUFBTCxFQUFaO0FBQ0EsTUFBSUMsT0FBTyxHQUFHLE1BQU1WLElBQUksQ0FBQ1csVUFBTCxFQUFwQjtBQUNBLE1BQUlkLE9BQU8sR0FBRyxNQUFNRyxJQUFJLENBQUNZLFVBQUwsRUFBcEIsQ0FQaUQsQ0FRakQ7O0FBQ0EsU0FBT04sR0FBRyxHQUFHLEdBQU4sR0FBWUYsS0FBWixHQUFvQixHQUFwQixHQUEwQkYsSUFBakM7QUFDSCxDQVZEOztBQVdBcEQsT0FBTyxDQUFDK0Qsc0JBQVIsR0FBZ0MsVUFBVWQsU0FBVixFQUFxQmUsUUFBckIsRUFBK0I7QUFBQztBQUM1RCxNQUFJZCxJQUFJLEdBQUcsSUFBSUMsSUFBSixDQUFTRixTQUFULENBQVg7QUFDQSxNQUFJRyxJQUFJLEdBQUdGLElBQUksQ0FBQ0csV0FBTCxFQUFYO0FBQ0EsTUFBSUMsS0FBSyxHQUFFSixJQUFJLENBQUNLLFFBQUwsRUFBWDtBQUNBLE1BQUlDLEdBQUcsR0FBSU4sSUFBSSxDQUFDTyxNQUFMLEVBQVg7QUFFQSxNQUFJQyxLQUFLLEdBQU9SLElBQUksQ0FBQ1MsUUFBTCxFQUFoQjtBQUNBLE1BQUlDLE9BQU8sR0FBS1YsSUFBSSxDQUFDVyxVQUFMLEVBQWhCO0FBQ0EsTUFBSWQsT0FBTyxHQUFLRyxJQUFJLENBQUNZLFVBQUwsRUFBaEI7QUFDQSxTQUFPTixHQUFHLEdBQUcsR0FBTixHQUFZRixLQUFaLEdBQW9CLEdBQXBCLEdBQTBCRixJQUFqQztBQUNILENBVkQ7O0FBV0FwRCxPQUFPLENBQUNpRSxzQkFBUixHQUFnQyxVQUFVQyxNQUFWLEVBQWtCO0FBQzlDQSxFQUFBQSxNQUFNLEdBQUNBLE1BQU0sQ0FBQ0MsS0FBUCxDQUFhLEdBQWIsQ0FBUDtBQUNBLE1BQUdELE1BQU0sQ0FBQ0UsTUFBUCxJQUFpQixDQUFwQixFQUNJLE9BQU8sSUFBUDtBQUNKLE1BQUlDLE9BQU8sR0FBQ0gsTUFBTSxDQUFDLENBQUQsQ0FBTixHQUFVLEdBQVYsR0FBY0EsTUFBTSxDQUFDLENBQUQsQ0FBcEIsR0FBd0IsR0FBeEIsR0FBNEJBLE1BQU0sQ0FBQyxDQUFELENBQTlDO0FBQ0EsTUFBSXJCLElBQUksR0FBRyxJQUFJTSxJQUFKLENBQVNrQixPQUFULEVBQWtCQyxPQUFsQixFQUFYO0FBQ0EsU0FBT3pCLElBQVA7QUFDSCxDQVBEOztBQVFBN0MsT0FBTyxDQUFDdUUsVUFBUixHQUFxQixVQUFTQyxJQUFULEVBQWVDLFNBQWYsRUFBMEI7QUFDM0MsTUFBR0QsSUFBSSxJQUFJRSxTQUFSLElBQXFCRixJQUFJLElBQUksSUFBN0IsSUFBcUNBLElBQUksSUFBSSxFQUFoRCxFQUNJLE9BQU8sY0FBUDtBQUNKLE1BQUlDLFNBQVMsS0FBS0MsU0FBbEIsRUFDSUQsU0FBUyxHQUFHLEVBQVo7QUFDSixNQUFJRSxHQUFHLEdBQUcsRUFBVjtBQUNBLE1BQUdILElBQUksQ0FBQ0osTUFBTCxJQUFlSyxTQUFsQixFQUNJRSxHQUFHLEdBQUcsSUFBTjtBQUNKSCxFQUFBQSxJQUFJLEdBQUdBLElBQUksQ0FBQ0ksU0FBTCxDQUFlLENBQWYsRUFBa0JILFNBQVMsR0FBR0UsR0FBRyxDQUFDUCxNQUFsQyxDQUFQO0FBQ0FJLEVBQUFBLElBQUksSUFBSUcsR0FBUjtBQUNBLFNBQU9ILElBQVA7QUFDSCxDQVhEOztBQVlBeEUsT0FBTyxDQUFDNkUsa0JBQVIsR0FBNkIsVUFBUzlCLE9BQVQsRUFBa0I7QUFDM0MsTUFBSSxDQUFDK0IsTUFBTSxDQUFDQyxTQUFQLENBQWlCaEMsT0FBakIsQ0FBRCxJQUErQixDQUFDQSxPQUFELElBQVksQ0FBL0MsRUFBbUQ7QUFDL0MsV0FBTyxPQUFQO0FBQ0gsR0FGRCxNQUVRO0FBQ0osUUFBSWlDLElBQUksR0FBRzVDLElBQUksQ0FBQ0MsS0FBTCxDQUFXVSxPQUFPLElBQUksS0FBSyxFQUFMLEdBQVUsRUFBZCxDQUFsQixDQUFYO0FBRUEsV0FBT2lDLElBQUksR0FBRyxPQUFkO0FBQ0g7QUFDSixDQVJEOztBQVNBQyxNQUFNLENBQUNDLE9BQVAsR0FBaUJsRixPQUFqQiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsibGV0ICBVdGlsc1VJID0gIHt9O1xyXG5VdGlsc1VJLmxvYWRJbWFnZUxpbmsgPSBmdW5jdGlvbiAobGluaywgc3ByaXRlLCBjb21wbGV0ZSkge1xyXG4gICAgaWYoIXNwcml0ZSl7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJMb2kgc3ByaXRlXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNjLmxvYWRlci5sb2FkKHt1cmw6IGxpbmssIHR5cGU6ICdwbmcnfSwgZnVuY3Rpb24gKGVyciwgdGV4dHVyZSkge1xyXG4gICAgICAgIGlmKGVycil7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYy5pc1ZhbGlkKHNwcml0ZSkpXHJcbiAgICAgICAgICAgIHNwcml0ZS5zcHJpdGVGcmFtZSA9IG5ldyBjYy5TcHJpdGVGcmFtZSh0ZXh0dXJlKTtcclxuICAgICAgICBpZihjb21wbGV0ZSlcclxuICAgICAgICAgICAgY29tcGxldGUoc3ByaXRlKTtcclxuICAgIH0pO1xyXG59O1xyXG5VdGlsc1VJLmxvYWRJbWFnZVJlcyA9IGZ1bmN0aW9uKHNwcml0ZSwgdXJsKXtcclxuICAgIGNjLmxvYWRlci5sb2FkUmVzKHVybCwgY2MuU3ByaXRlRnJhbWUsIGZ1bmN0aW9uIChlcnIsIHNwcml0ZUZyYW1lKSB7XHJcbiAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjYy5pc1ZhbGlkKHNwcml0ZSkpe1xyXG4gICAgICAgICAgICBzcHJpdGUuc3ByaXRlRnJhbWUgPSBzcHJpdGVGcmFtZTtcclxuICAgICAgICAgICAgc3ByaXRlLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59O1xyXG5VdGlsc1VJLmxvYWRQbGlzdCA9IGZ1bmN0aW9uKHNwcml0ZSwgdXJsLCBuYW1lKXtcclxuICAgIGNjLmxvYWRlci5sb2FkUmVzKHVybCwgY2MuU3ByaXRlQXRsYXMsIGZ1bmN0aW9uIChlcnIsIGF0bGFzKSB7XHJcbiAgICAgICAgaWYoZXJyKXtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZnJhbWUgPSBhdGxhcy5nZXRTcHJpdGVGcmFtZShuYW1lKTtcclxuICAgICAgICBpZihjYy5pc1ZhbGlkKHNwcml0ZSkpe1xyXG4gICAgICAgICAgICBzcHJpdGUuc3ByaXRlRnJhbWUgPSBmcmFtZTtcclxuICAgICAgICAgICAgc3ByaXRlLm5vZGUuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuVXRpbHNVSS5hZGREb3RUb051bWJlciA9IGZ1bmN0aW9uKHZhbHVlKSB7XHJcbiAgICBpZih2YWx1ZSA8PSAwKVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgcmV0dXJuIHZhbHVlLnRvU3RyaW5nKCkucmVwbGFjZSgvXFxCKD89KFxcZHszfSkrKD8hXFxkKSkvZywgXCIuXCIpO1xyXG59O1xyXG5VdGlsc1VJLmZvcm1hdEN1cnJlbmN5ID0gZnVuY3Rpb24gKG1vbmV5KVxyXG57XHJcbiAgICBpZihtb25leSA8PSAwKVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgaWYoIW1tLkt5dGhhbmhVc2VyVmFyaWFibGUuaXNCZXQoKSl7XHJcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IobW9uZXkgLyA1MDApO1xyXG4gICAgfVxyXG4gICAgaWYobW9uZXkgPj0gTWF0aC5wb3coMTAsIDQpICYmIG1vbmV5IDwgTWF0aC5wb3coMTAsIDYpKXtcclxuICAgICAgICByZXR1cm4gbW9uZXkvTWF0aC5wb3coMTAsMykgKyBcIktcIjtcclxuICAgIH1lbHNlICBpZihtb25leSA+PSBNYXRoLnBvdygxMCw2KSAmJiBtb25leSA8IE1hdGgucG93KDEwLDkpKXtcclxuICAgICAgICBtb25leSA9IE1hdGguZmxvb3IobW9uZXkvTWF0aC5wb3coMTAsNCkpLzEwMDtcclxuICAgICAgICByZXR1cm4gbW9uZXkgKyBcIk1cIjtcclxuICAgIH1lbHNlIGlmKG1vbmV5ID49IE1hdGgucG93KDEwLDkpICYmIG1vbmV5IDwgTWF0aC5wb3coMTAsMTIpKXtcclxuICAgICAgICBtb25leSA9IE1hdGguZmxvb3IobW9uZXkvTWF0aC5wb3coMTAsNykpLzEwMDtcclxuICAgICAgICByZXR1cm4gbW9uZXkgKyBcIkJcIjtcclxuICAgIH1lbHNlIGlmKG1vbmV5ID49IE1hdGgucG93KDEwLDEyKSAmJiBtb25leSA8PSBNYXRoLnBvdygxMCwxNSkpe1xyXG4gICAgICAgIG1vbmV5ID0gTWF0aC5mbG9vcihtb25leS9NYXRoLnBvdygxMCwxMCkpLzEwMDtcclxuICAgICAgICByZXR1cm4gIG1vbmV5ICsgXCJRXCI7XHJcbiAgICB9ZWxzZSBpZihtb25leSA+PSBNYXRoLnBvdygxMCwgMTUpKXtcclxuICAgICAgICBtb25leSA9IE1hdGguZmxvb3IobW9uZXkvTWF0aC5wb3coMTAsMTMpKS8xMDA7XHJcbiAgICAgICAgcmV0dXJuIG1vbmV5K1wifn5cIjtcclxuICAgIH1cclxuICAgIHJldHVybiBVdGlscy5hZGREb3RUb051bWJlcihtb25leSk7XHJcbn07XHJcblV0aWxzVUkuZm9ybWF0TnVtYmVyPSBmdW5jdGlvbiAobnVtYmVyLCBwb2ludCkge1xyXG4gICAgbGV0IG51bWJlclBvaW50ID0gTWF0aC5wb3coMTAsIHBvaW50KTtcclxuICAgIG51bWJlciA9IG51bWJlci9udW1iZXJQb2ludDtcclxuICAgIG51bWJlciA9IE1hdGguZmxvb3IobnVtYmVyKTtcclxuICAgIG51bWJlciA9IG51bWJlcipudW1iZXJQb2ludDtcclxuICAgIHJldHVybiBudW1iZXI7XHJcbn07XHJcblV0aWxzVUkuZm9ybWF0VGltZVRvU3RyaW5nID0gZnVuY3Rpb24odGltZSl7XHJcbiAgICBsZXQgbWludXRlID0gTWF0aC5mbG9vcih0aW1lLzYwKTtcclxuICAgIGxldCBzZWNvbmRzID0gTWF0aC5mbG9vcih0aW1lJTYwKTtcclxuICAgIGlmIChtaW51dGUgPCAxMCkge1xyXG4gICAgICAgIG1pbnV0ZSA9IFwiMFwiK21pbnV0ZTtcclxuICAgIH1cclxuICAgIGlmKHNlY29uZHMgPCAxMClcclxuICAgICAgICBzZWNvbmRzID0gXCIwXCIrc2Vjb25kcztcclxuICAgIHJldHVybiBtaW51dGUrXCI6XCIrc2Vjb25kcztcclxufTtcclxuVXRpbHNVSS5jb252ZXJ0VGltZVN0YW1wVG9EYXRlPSBmdW5jdGlvbiAodGltZVN0YW1wKSB7XHJcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWVTdGFtcCk7XHJcbiAgICBsZXQgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcclxuICAgIGxldCBtb250aD0gZGF0ZS5nZXRNb250aCgpO1xyXG4gICAgbGV0IGRheSAgPSBkYXRlLmdldERheSgpO1xyXG4gICAgbGV0IGhvdXJzID0gZGF0ZS5nZXRIb3VycygpO1xyXG4gICAgbGV0IG1pbnV0ZXMgPSBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpO1xyXG4gICAgbGV0IHNlY29uZHMgPSBcIjBcIiArIGRhdGUuZ2V0U2Vjb25kcygpO1xyXG4gICAgLy8gcmV0dXJuIGhvdXJzICsgJzonICsgbWludXRlcy5zdWJzdHIoLTIpICsgJzonICsgc2Vjb25kcy5zdWJzdHIoLTIpO1xyXG4gICAgcmV0dXJuIGRheSArIFwiL1wiICsgbW9udGggKyBcIi9cIiArIHllYXI7XHJcbn07XHJcblV0aWxzVUkuY29udmVydFRpbWVTdGFtcFRvVGltZT0gZnVuY3Rpb24gKHRpbWVTdGFtcCwgbGFuZ3VhZ2UpIHsvLysgXCIgXCIgKyBMYW5ndWFnZS5MQU5HVUFHRSgpW1widHh0X21pbnV0ZVwiXTtcclxuICAgIGxldCBkYXRlID0gbmV3IERhdGUodGltZVN0YW1wKTtcclxuICAgIGxldCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xyXG4gICAgbGV0IG1vbnRoPSBkYXRlLmdldE1vbnRoKCk7XHJcbiAgICBsZXQgZGF5ICA9IGRhdGUuZ2V0RGF5KCk7XHJcblxyXG4gICAgbGV0IGhvdXJzICAgPSAgIGRhdGUuZ2V0SG91cnMoKTtcclxuICAgIGxldCBtaW51dGVzID0gICBkYXRlLmdldE1pbnV0ZXMoKTtcclxuICAgIGxldCBzZWNvbmRzID0gICBkYXRlLmdldFNlY29uZHMoKTtcclxuICAgIHJldHVybiBkYXkgKyBcIi9cIiArIG1vbnRoICsgXCIvXCIgKyB5ZWFyO1xyXG59O1xyXG5VdGlsc1VJLmNvbnZlcnREYXRlVG9UaW1lc3RhbXA9IGZ1bmN0aW9uIChteURhdGUpIHtcclxuICAgIG15RGF0ZT1teURhdGUuc3BsaXQoXCItXCIpO1xyXG4gICAgaWYobXlEYXRlLmxlbmd0aCAhPSAzKVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgbGV0IG5ld0RhdGU9bXlEYXRlWzFdK1wiL1wiK215RGF0ZVswXStcIi9cIitteURhdGVbMl07XHJcbiAgICBsZXQgdGltZSA9IG5ldyBEYXRlKG5ld0RhdGUpLmdldFRpbWUoKTtcclxuICAgIHJldHVybiB0aW1lO1xyXG59O1xyXG5VdGlsc1VJLmZvcm1hdFRleHQgPSBmdW5jdGlvbih0ZXh0LCBtYXhMZW5ndGgpIHtcclxuICAgIGlmKHRleHQgPT0gdW5kZWZpbmVkIHx8IHRleHQgPT0gbnVsbCB8fCB0ZXh0ID09ICcnKVxyXG4gICAgICAgIHJldHVybiBcIkVycm9yOiBFbXB0eVwiO1xyXG4gICAgaWYgKG1heExlbmd0aCA9PT0gdW5kZWZpbmVkKVxyXG4gICAgICAgIG1heExlbmd0aCA9IDEwO1xyXG4gICAgbGV0IHByZSA9IFwiXCI7XHJcbiAgICBpZih0ZXh0Lmxlbmd0aCA+PSBtYXhMZW5ndGgpXHJcbiAgICAgICAgcHJlID0gXCIuLlwiO1xyXG4gICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIG1heExlbmd0aCAtIHByZS5sZW5ndGgpO1xyXG4gICAgdGV4dCArPSBwcmU7XHJcbiAgICByZXR1cm4gdGV4dDtcclxufTtcclxuVXRpbHNVSS5mb3JtYXRSZWxhdGl2ZVRpbWUgPSBmdW5jdGlvbihzZWNvbmRzKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoc2Vjb25kcykgfHwgKCtzZWNvbmRzIDw9IDApKSB7XHJcbiAgICAgICAgcmV0dXJuICcwIGRheSdcclxuICAgIH0gZWxzZSAge1xyXG4gICAgICAgIGxldCBkYXlzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gKDI0ICogNjAgKiA2MCkpO1xyXG5cclxuICAgICAgICByZXR1cm4gZGF5cyArICcgZGF5cydcclxuICAgIH1cclxufTtcclxubW9kdWxlLmV4cG9ydHMgPSBVdGlsc1VJOyJdfQ==