
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/_smartfox/gui/VozBaseComponent.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '5c257J0xqFK/rnC395+zKFq', 'VozBaseComponent');
// _smartfox/gui/VozBaseComponent.js

"use strict";

cc.VozBaseComponent = cc.Class({
  "extends": cc.Component,
  statics: {},
  properties: {
    _data: null
  },
  onLoad: function onLoad() {
    cc.debug.setDisplayStats(false);
  },
  updateUserVariable: function updateUserVariable(event) {},
  eventBackDevice: function eventBackDevice() {},
  setting: function setting(prefab, list) {
    if (!prefab || !list) {
      return;
    }
  },
  _getUIFromIndex: function _getUIFromIndex(from) {
    var scene = cc.director.getScene();

    if (!Number.isInteger(from)) {
      from = scene.childrenCount - 1;
    }

    if (from < 0) {
      from += scene.childrenCount;
    }

    if (from < 0 || from > scene.childrenCount - 1) {
      cc.log('_getUIFromIndex error, from = ' + from + '!');
      return;
    }

    for (var index = from; index >= 0; index--) {
      var element = scene.children[index];

      if (element.name.startsWith('UI')) {
        return element;
      }
    }
  },
  _setOption: function _setOption(node, option) {
    if (option && option.data !== undefined && option.data !== null) {
      var script = node.getComponent(node.name);

      if (script) {
        script._data = option.data;
      }
    }

    node._pop = !!(option && option.pop);
  },
  //pop: true -> khi call back() -> Chi destroy UI dau, UI sau van Active True
  //pop: false-> khi call back() -> Destroy UI dau, Ui sau chuyen tu Active False -> True
  show: function show(name, option, complete) {
    var _this = this;

    if (!name || name === '') {
      cc.error('name is empty!');
      return;
    }

    var scene = cc.director.getScene();
    var node = cc.find(name, scene);

    if (node) {
      node.active = false;

      this._setOption(node, option);

      node.setSiblingIndex(-1);
      node.active = true;

      if (!node._pop) {
        var ui = this._getUIFromIndex(-2);

        if (ui) {
          ui.active = false;
        }
      } // this.setLanguage(option,node);


      if (complete) complete();
      var jsUI = node.getComponent(node.name);
      if (jsUI) jsUI.resume();
      return;
    }

    if (option && option.src !== undefined && option.src !== null) {
      name = option.src + "/" + name;
    }

    cc.loader.loadRes(name, function (err, prefab) {
      if (err) {
        console.log(err);
        return;
      }

      if (cc.find(name, scene)) {
        if (complete) complete();
        return;
      }

      cc.loader.setAutoReleaseRecursively(prefab, true);
      var node = cc.instantiate(prefab);

      if (!node) {
        cc.error('prefab instantiation failed!');
      } else {
        var _ui = _this._getUIFromIndex(-1);

        if (_ui) {
          _ui.active = !!(option && option.pop);
        }

        _this._setOption(node, option);

        scene.addChild(node); // this.setLanguage(option,node);

        if (complete) complete();
      }
    });
  },
  hide: function hide(name) {
    if (!name || name === '') {
      this.node.active = false;
    } else {
      var node = cc.find(name);

      if (node) {
        node.active = false;
      }
    }
  },
  refresh: function refresh() {},
  getUIFromName: function getUIFromName(name) {
    if (!name || !name.startsWith('UI')) {
      return;
    }

    var scene = cc.director.getScene();
    return cc.find(name, scene);
  },
  goTo: function goTo(name, exclude) {
    var ui = this.getUIFromName(name);

    if (ui) {
      var index = ui.getSiblingIndex();

      if (exclude) {
        ui = this._getUIFromIndex(index - 1);

        if (ui) {
          index = ui.getSiblingIndex();
        } else {
          return;
        }
      }

      var scene = cc.director.getScene();

      for (var i = scene.childrenCount - 1; i > index; i--) {
        var element = scene.children[i];
        element.destroy();
      }

      ui.active = true;
    }
  },
  back: function back() {
    var ui = this._getUIFromIndexBack(-1);

    if (ui) {
      ui.destroy();
      ui = this._getUIFromIndex(ui.getSiblingIndex() - 1);

      if (ui) {
        ui.active = true;
        var jsUI = ui.getComponent(ui.name);
        if (jsUI) jsUI.resume();
      }
    }
  },
  _getUIFromIndexBack: function _getUIFromIndexBack(from) {
    var scene = cc.director.getScene();

    if (!Number.isInteger(from)) {
      from = scene.childrenCount - 1;
    }

    if (from < 0) {
      from += scene.childrenCount;
    }

    if (from < 0 || from > scene.childrenCount - 1) {
      cc.log('_getUIFromIndex error, from = ' + from + '!');
      return;
    }

    for (var index = from; index >= 0; index--) {
      var element = scene.children[index];

      if (element.name.startsWith('UI') && cc.currentUI != element.name) {
        return element;
      }
    }
  },
  resume: function resume() {},
  getPositionInOtherNode: function getPositionInOtherNode(currentNode, nodeTo) {
    //nodeFrom: Node hiện tại, cần chuyển sang tạo độ của node khác
    //nodeTo  : Không gian tạo độ nút mới của nodeFrom4
    // Hiểu đơn giản: Chuyển tọa độ thằng nodeFrom ra ngoài cùng (Con của Scene). Sau đó thì add nó làm con của nodeTo
    if (currentNode.parent == null) {
      var _pos = currentNode.convertToWorldSpaceAR(currentNode.getPosition());

      return nodeTo.convertToNodeSpaceAR(_pos);
    }

    var pos = currentNode.parent.convertToWorldSpaceAR(currentNode.getPosition());
    return nodeTo.convertToNodeSpaceAR(pos);
  },
  setLanguage: function setLanguage(option, currentNode) {
    var srcName = "portal";

    if (option && option.src !== undefined && option.src !== null) {
      srcName = option.src;
    }

    var currentLanguage = require(srcName + 'Language');

    currentLanguage.changeLanguage(currentNode);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcX3NtYXJ0Zm94XFxndWlcXFZvekJhc2VDb21wb25lbnQuanMiXSwibmFtZXMiOlsiY2MiLCJWb3pCYXNlQ29tcG9uZW50IiwiQ2xhc3MiLCJDb21wb25lbnQiLCJzdGF0aWNzIiwicHJvcGVydGllcyIsIl9kYXRhIiwib25Mb2FkIiwiZGVidWciLCJzZXREaXNwbGF5U3RhdHMiLCJ1cGRhdGVVc2VyVmFyaWFibGUiLCJldmVudCIsImV2ZW50QmFja0RldmljZSIsInNldHRpbmciLCJwcmVmYWIiLCJsaXN0IiwiX2dldFVJRnJvbUluZGV4IiwiZnJvbSIsInNjZW5lIiwiZGlyZWN0b3IiLCJnZXRTY2VuZSIsIk51bWJlciIsImlzSW50ZWdlciIsImNoaWxkcmVuQ291bnQiLCJsb2ciLCJpbmRleCIsImVsZW1lbnQiLCJjaGlsZHJlbiIsIm5hbWUiLCJzdGFydHNXaXRoIiwiX3NldE9wdGlvbiIsIm5vZGUiLCJvcHRpb24iLCJkYXRhIiwidW5kZWZpbmVkIiwic2NyaXB0IiwiZ2V0Q29tcG9uZW50IiwiX3BvcCIsInBvcCIsInNob3ciLCJjb21wbGV0ZSIsImVycm9yIiwiZmluZCIsImFjdGl2ZSIsInNldFNpYmxpbmdJbmRleCIsInVpIiwianNVSSIsInJlc3VtZSIsInNyYyIsImxvYWRlciIsImxvYWRSZXMiLCJlcnIiLCJjb25zb2xlIiwic2V0QXV0b1JlbGVhc2VSZWN1cnNpdmVseSIsImluc3RhbnRpYXRlIiwiYWRkQ2hpbGQiLCJoaWRlIiwicmVmcmVzaCIsImdldFVJRnJvbU5hbWUiLCJnb1RvIiwiZXhjbHVkZSIsImdldFNpYmxpbmdJbmRleCIsImkiLCJkZXN0cm95IiwiYmFjayIsIl9nZXRVSUZyb21JbmRleEJhY2siLCJjdXJyZW50VUkiLCJnZXRQb3NpdGlvbkluT3RoZXJOb2RlIiwiY3VycmVudE5vZGUiLCJub2RlVG8iLCJwYXJlbnQiLCJwb3MiLCJjb252ZXJ0VG9Xb3JsZFNwYWNlQVIiLCJnZXRQb3NpdGlvbiIsImNvbnZlcnRUb05vZGVTcGFjZUFSIiwic2V0TGFuZ3VhZ2UiLCJzcmNOYW1lIiwiY3VycmVudExhbmd1YWdlIiwicmVxdWlyZSIsImNoYW5nZUxhbmd1YWdlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBQSxFQUFFLENBQUNDLGdCQUFILEdBQXNCRCxFQUFFLENBQUNFLEtBQUgsQ0FBUztBQUMzQixhQUFTRixFQUFFLENBQUNHLFNBRGU7QUFFM0JDLEVBQUFBLE9BQU8sRUFBRSxFQUZrQjtBQUkzQkMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLEtBQUssRUFBUztBQUROLEdBSmU7QUFPM0JDLEVBQUFBLE1BUDJCLG9CQU9uQjtBQUNKUCxJQUFBQSxFQUFFLENBQUNRLEtBQUgsQ0FBU0MsZUFBVCxDQUF5QixLQUF6QjtBQUNILEdBVDBCO0FBVTNCQyxFQUFBQSxrQkFWMkIsOEJBVVJDLEtBVlEsRUFVRixDQUV4QixDQVowQjtBQWEzQkMsRUFBQUEsZUFiMkIsNkJBYVYsQ0FFaEIsQ0FmMEI7QUFnQjNCQyxFQUFBQSxPQWhCMkIsbUJBZ0JuQkMsTUFoQm1CLEVBZ0JYQyxJQWhCVyxFQWdCTDtBQUNsQixRQUFJLENBQUNELE1BQUQsSUFBVyxDQUFDQyxJQUFoQixFQUFzQjtBQUNsQjtBQUNIO0FBQ0osR0FwQjBCO0FBcUIzQkMsRUFBQUEsZUFyQjJCLDJCQXFCWEMsSUFyQlcsRUFxQkw7QUFDbEIsUUFBTUMsS0FBSyxHQUFHbEIsRUFBRSxDQUFDbUIsUUFBSCxDQUFZQyxRQUFaLEVBQWQ7O0FBQ0EsUUFBSSxDQUFDQyxNQUFNLENBQUNDLFNBQVAsQ0FBaUJMLElBQWpCLENBQUwsRUFBNkI7QUFDekJBLE1BQUFBLElBQUksR0FBR0MsS0FBSyxDQUFDSyxhQUFOLEdBQXNCLENBQTdCO0FBQ0g7O0FBQ0QsUUFBSU4sSUFBSSxHQUFHLENBQVgsRUFBYztBQUNWQSxNQUFBQSxJQUFJLElBQUlDLEtBQUssQ0FBQ0ssYUFBZDtBQUNIOztBQUNELFFBQUtOLElBQUksR0FBRyxDQUFSLElBQWVBLElB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QyxXQWxNTyxFQWtNTTtBQUM3QixRQUFJUSxPQUFPLEdBQUcsUUFBZDs7QUFDQSxRQUFJNUMsTUFBTSxJQUFLQSxNQUFNLENBQUNnQixHQUFQLEtBQWVkLFNBQTFCLElBQXlDRixNQUFNLENBQUNnQixHQUFQLEtBQWUsSUFBNUQsRUFBbUU7QUFDL0Q0QixNQUFBQSxPQUFPLEdBQUc1QyxNQUFNLENBQUNnQixHQUFqQjtBQUNIOztBQUNELFFBQUk2QixlQUFlLEdBQUdDLE9BQU8sQ0FBQ0YsT0FBTyxHQUFDLFVBQVQsQ0FBN0I7O0FBQ0FDLElBQUFBLGVBQWUsQ0FBQ0UsY0FBaEIsQ0FBK0JYLFdBQS9CO0FBQ0g7QUF6TTBCLENBQVQsQ0FBdEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNjLlZvekJhc2VDb21wb25lbnQgPSBjYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcbiAgICBzdGF0aWNzOiB7XHJcbiAgICB9LFxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIF9kYXRhICAgICAgIDogbnVsbCxcclxuICAgIH0sXHJcbiAgICBvbkxvYWQoKXtcclxuICAgICAgICBjYy5kZWJ1Zy5zZXREaXNwbGF5U3RhdHMoZmFsc2UpO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZVVzZXJWYXJpYWJsZShldmVudCl7XHJcblxyXG4gICAgfSxcclxuICAgIGV2ZW50QmFja0RldmljZSgpe1xyXG5cclxuICAgIH0sXHJcbiAgICBzZXR0aW5nKHByZWZhYiwgbGlzdCkge1xyXG4gICAgICAgIGlmICghcHJlZmFiIHx8ICFsaXN0KSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBfZ2V0VUlGcm9tSW5kZXgoZnJvbSkge1xyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKTtcclxuICAgICAgICBpZiAoIU51bWJlci5pc0ludGVnZXIoZnJvbSkpIHtcclxuICAgICAgICAgICAgZnJvbSA9IHNjZW5lLmNoaWxkcmVuQ291bnQgLSAxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmcm9tIDwgMCkge1xyXG4gICAgICAgICAgICBmcm9tICs9IHNjZW5lLmNoaWxkcmVuQ291bnRcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKChmcm9tIDwgMCkgfHwgKGZyb20gPiBzY2VuZS5jaGlsZHJlbkNvdW50IC0gMSkpIHtcclxuICAgICAgICAgICAgY2MubG9nKCdfZ2V0VUlGcm9tSW5kZXggZXJyb3IsIGZyb20gPSAnICsgZnJvbSArICchJyk7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBpbmRleCA9IGZyb207IGluZGV4ID49IDA7IGluZGV4LS0pIHtcclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSBzY2VuZS5jaGlsZHJlbltpbmRleF07XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50Lm5hbWUuc3RhcnRzV2l0aCgnVUknKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnRcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgX3NldE9wdGlvbihub2RlLCBvcHRpb24pIHtcclxuICAgICAgICBpZiAob3B0aW9uICYmIChvcHRpb24uZGF0YSAhPT0gdW5kZWZpbmVkKSAmJiAob3B0aW9uLmRhdGEgIT09IG51bGwpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjcmlwdCA9IG5vZGUuZ2V0Q29tcG9uZW50KG5vZGUubmFtZSk7XHJcbiAgICAgICAgICAgIGlmIChzY3JpcHQpIHtcclxuICAgICAgICAgICAgICAgIHNjcmlwdC5fZGF0YSA9IG9wdGlvbi5kYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbm9kZS5fcG9wID0gISEob3B0aW9uICYmIG9wdGlvbi5wb3ApO1xyXG4gICAgfSxcclxuICAgIC8vcG9wOiB0cnVlIC0+IGtoaSBjYWxsIGJhY2soKSAtPiBDaGkgZGVzdHJveSBVSSBkYXUsIFVJIHNhdSB2YW4gQWN0aXZlIFRydWVcclxuICAgIC8vcG9wOiBmYWxzZS0+IGtoaSBjYWxsIGJhY2soKSAtPiBEZXN0cm95IFVJIGRhdSwgVWkgc2F1IGNodXllbiB0dSBBY3RpdmUgRmFsc2UgLT4gVHJ1ZVxyXG4gICAgc2hvdyhuYW1lLCBvcHRpb24sIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgaWYgKCFuYW1lIHx8IG5hbWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIGNjLmVycm9yKCduYW1lIGlzIGVtcHR5IScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHNjZW5lID0gY2MuZGlyZWN0b3IuZ2V0U2NlbmUoKTtcclxuICAgICAgICBjb25zdCBub2RlID0gY2MuZmluZChuYW1lLCBzY2VuZSk7XHJcbiAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgbm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5fc2V0T3B0aW9uKG5vZGUsIG9wdGlvbik7XHJcbiAgICAgICAgICAgIG5vZGUuc2V0U2libGluZ0luZGV4KC0xKTtcclxuICAgICAgICAgICAgbm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICBpZiAoIW5vZGUuX3BvcCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IHVpID0gdGhpcy5fZ2V0VUlGcm9tSW5kZXgoLTIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdWkuYWN0aXZlID0gZmFsc2VcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyB0aGlzLnNldExhbmd1YWdlKG9wdGlvbixub2RlKTtcclxuICAgICAgICAgICAgaWYoY29tcGxldGUpXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZSgpO1xyXG4gICAgICAgICAgICBsZXQganNVSSA9IG5vZGUuZ2V0Q29tcG9uZW50KG5vZGUubmFtZSk7XHJcbiAgICAgICAgICAgIGlmKGpzVUkpXHJcbiAgICAgICAgICAgICAgICBqc1VJLnJlc3VtZSgpO1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG9wdGlvbiAmJiAob3B0aW9uLnNyYyAhPT0gdW5kZWZpbmVkKSAmJiAob3B0aW9uLnNyYyAhPT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgbmFtZSA9IG9wdGlvbi5zcmMrXCIvXCIrIG5hbWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNjLmxvYWRlci5sb2FkUmVzKG5hbWUsIChlcnIsIHByZWZhYikgPT4ge1xyXG4gICAgICAgICAgICBpZihlcnIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2MuZmluZChuYW1lLCBzY2VuZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmKGNvbXBsZXRlKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbXBsZXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYy5sb2FkZXIuc2V0QXV0b1JlbGVhc2VSZWN1cnNpdmVseShwcmVmYWIsIHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2MuaW5zdGFudGlhdGUocHJlZmFiKTtcclxuICAgICAgICAgICAgaWYgKCFub2RlKSB7XHJcbiAgICAgICAgICAgICAgICBjYy5lcnJvcigncHJlZmFiIGluc3RhbnRpYXRpb24gZmFpbGVkIScpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgdWkgPSB0aGlzLl9nZXRVSUZyb21JbmRleCgtMSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodWkpIHtcclxuICAgICAgICAgICAgICAgICAgICB1aS5hY3RpdmUgPSAhIShvcHRpb24gJiYgb3B0aW9uLnBvcCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRPcHRpb24obm9kZSwgb3B0aW9uKTtcclxuICAgICAgICAgICAgICAgIHNjZW5lLmFkZENoaWxkKG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gdGhpcy5zZXRMYW5ndWFnZShvcHRpb24sbm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZihjb21wbGV0ZSkgY29tcGxldGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGhpZGUobmFtZSkge1xyXG4gICAgICAgIGlmICghbmFtZSB8fCBuYW1lID09PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2VcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBub2RlID0gY2MuZmluZChuYW1lKTtcclxuICAgICAgICAgICAgaWYgKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUuYWN0aXZlID0gZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZWZyZXNoKCl7XHJcblxyXG4gICAgfSxcclxuICAgIGdldFVJRnJvbU5hbWUobmFtZSkge1xyXG4gICAgICAgIGlmICghbmFtZSB8fCAhbmFtZS5zdGFydHNXaXRoKCdVSScpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpO1xyXG4gICAgICAgIHJldHVybiBjYy5maW5kKG5hbWUsIHNjZW5lKVxyXG4gICAgfSxcclxuXHJcbiAgICBnb1RvKG5hbWUsIGV4Y2x1ZGUpIHtcclxuICAgICAgICBsZXQgdWkgPSB0aGlzLmdldFVJRnJvbU5hbWUobmFtZSk7XHJcbiAgICAgICAgaWYgKHVpKSB7XHJcbiAgICAgICAgICAgIGxldCBpbmRleCA9IHVpLmdldFNpYmxpbmdJbmRleCgpO1xyXG4gICAgICAgICAgICBpZiAoZXhjbHVkZSkge1xyXG4gICAgICAgICAgICAgICAgdWkgPSB0aGlzLl9nZXRVSUZyb21JbmRleChpbmRleCAtIDEpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHVpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB1aS5nZXRTaWJsaW5nSW5kZXgoKVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBzY2VuZSA9IGNjLmRpcmVjdG9yLmdldFNjZW5lKCk7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzY2VuZS5jaGlsZHJlbkNvdW50IC0gMTsgaSA+IGluZGV4OyBpLS0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVsZW1lbnQgPSBzY2VuZS5jaGlsZHJlbltpXTtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuZGVzdHJveSgpXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdWkuYWN0aXZlID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcblxyXG4gICAgYmFjaygpIHtcclxuICAgICAgICBsZXQgdWkgPSB0aGlzLl9nZXRVSUZyb21JbmRleEJhY2soLTEpO1xyXG4gICAgICAgIGlmICh1aSkge1xyXG4gICAgICAgICAgICB1aS5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgIHVpID0gdGhpcy5fZ2V0VUlGcm9tSW5kZXgodWkuZ2V0U2libGluZ0luZGV4KCkgLSAxKTtcclxuICAgICAgICAgICAgaWYgKHVpKSB7XHJcbiAgICAgICAgICAgICAgICB1aS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGpzVUkgPSB1aS5nZXRDb21wb25lbnQodWkubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZihqc1VJKVxyXG4gICAgICAgICAgICAgICAgICAgIGpzVUkucmVzdW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgX2dldFVJRnJvbUluZGV4QmFjayhmcm9tKSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBjYy5kaXJlY3Rvci5nZXRTY2VuZSgpO1xyXG4gICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihmcm9tKSkge1xyXG4gICAgICAgICAgICBmcm9tID0gc2NlbmUuY2hpbGRyZW5Db3VudCAtIDFcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZyb20gPCAwKSB7XHJcbiAgICAgICAgICAgIGZyb20gKz0gc2NlbmUuY2hpbGRyZW5Db3VudFxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKGZyb20gPCAwKSB8fCAoZnJvbSA+IHNjZW5lLmNoaWxkcmVuQ291bnQgLSAxKSkge1xyXG4gICAgICAgICAgICBjYy5sb2coJ19nZXRVSUZyb21JbmRleCBlcnJvciwgZnJvbSA9ICcgKyBmcm9tICsgJyEnKTtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGluZGV4ID0gZnJvbTsgaW5kZXggPj0gMDsgaW5kZXgtLSkge1xyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9IHNjZW5lLmNoaWxkcmVuW2luZGV4XTtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQubmFtZS5zdGFydHNXaXRoKCdVSScpICYmIGNjLmN1cnJlbnRVSSAhPSBlbGVtZW50Lm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtZW50XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgcmVzdW1lKCl7XHJcbiAgICB9LFxyXG4gICAgZ2V0UG9zaXRpb25Jbk90aGVyTm9kZShjdXJyZW50Tm9kZSwgbm9kZVRvKSB7XHJcbiAgICAgICAgLy9ub2RlRnJvbTogTm9kZSBoaeG7h24gdOG6oWksIGPhuqduIGNodXnhu4NuIHNhbmcgdOG6oW8gxJHhu5kgY+G7p2Egbm9kZSBraMOhY1xyXG4gICAgICAgIC8vbm9kZVRvICA6IEtow7RuZyBnaWFuIHThuqFvIMSR4buZIG7DunQgbeG7m2kgY+G7p2Egbm9kZUZyb200XHJcbiAgICAgICAgLy8gSGnhu4N1IMSRxqFuIGdp4bqjbjogQ2h1eeG7g24gdOG7jWEgxJHhu5kgdGjhurFuZyBub2RlRnJvbSByYSBuZ2/DoGkgY8O5bmcgKENvbiBj4bunYSBTY2VuZSkuIFNhdSDEkcOzIHRow6wgYWRkIG7DsyBsw6BtIGNvbiBj4bunYSBub2RlVG9cclxuICAgICAgICBpZiAoY3VycmVudE5vZGUucGFyZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgbGV0IHBvcyA9IGN1cnJlbnROb2RlLmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjdXJyZW50Tm9kZS5nZXRQb3NpdGlvbigpKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5vZGVUby5jb252ZXJ0VG9Ob2RlU3BhY2VBUihwb3MpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcG9zID0gY3VycmVudE5vZGUucGFyZW50LmNvbnZlcnRUb1dvcmxkU3BhY2VBUihjdXJyZW50Tm9kZS5nZXRQb3NpdGlvbigpKTtcclxuICAgICAgICByZXR1cm4gbm9kZVRvLmNvbnZlcnRUb05vZGVTcGFjZUFSKHBvcyk7XHJcbiAgICB9LFxyXG4gICAgc2V0TGFuZ3VhZ2Uob3B0aW9uLCBjdXJyZW50Tm9kZSkge1xyXG4gICAgICAgIGxldCBzcmNOYW1lID0gXCJwb3J0YWxcIjtcclxuICAgICAgICBpZiAob3B0aW9uICYmIChvcHRpb24uc3JjICE9PSB1bmRlZmluZWQpICYmIChvcHRpb24uc3JjICE9PSBudWxsKSkge1xyXG4gICAgICAgICAgICBzcmNOYW1lID0gb3B0aW9uLnNyYztcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGN1cnJlbnRMYW5ndWFnZSA9IHJlcXVpcmUoc3JjTmFtZSsnTGFuZ3VhZ2UnKTtcclxuICAgICAgICBjdXJyZW50TGFuZ3VhZ2UuY2hhbmdlTGFuZ3VhZ2UoY3VycmVudE5vZGUpO1xyXG4gICAgfVxyXG59KTtcclxuIl19