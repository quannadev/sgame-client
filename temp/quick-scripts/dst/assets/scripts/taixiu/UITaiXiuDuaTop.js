
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/taixiu/UITaiXiuDuaTop.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '4808cF0F4ZKL7GtszlZ74j6', 'UITaiXiuDuaTop');
// scripts/taixiu/UITaiXiuDuaTop.js

"use strict";

var Listview = require('Listview');

cc.Class({
  "extends": cc.VozBaseComponent,
  properties: {
    theLeContent: cc.Node,
    lbTheLeContent: cc.Label,
    rankContent: cc.Node,
    lbTime: cc.Label,
    lbAccount: cc.Label,
    lbValue: cc.Label,
    lbVinhDanh: cc.Label,
    lbLichSu: cc.Label,
    listview: Listview,
    listBgLeft: [cc.SpriteFrame],
    listBgTop: [cc.SpriteFrame],
    listTabLef: [cc.Sprite],
    listTabTop: [cc.Sprite],
    _tabLeft: 0,
    _tabTop: "TheLe",
    _listTheLe: []
  },
  onLoad: function onLoad() {
    this._listTheLe = ["Thể lệ đua top Tài Xỉu:\n" + "Hàng ngày, hệ thống sẽ lọc ra 50 người chơi có số tiền cược tổng các phiên tài xỉu cao nhất trong ngày để trao thưởng.\n" + "Lưu ý: Chỉ ghi nhận tiền cược sau khi được cân cửa, phần tiền trả lại sẽ không được tính.\n" + "Thời gian trao thưởng: 00h01 ngày hôm sau\n" + "Cách thức nhận thưởng: Hệ thống tự động cộng vào tài khoản người chơi", "Khi thắng game, người chơi muốn tán lộc cho anh em chơi cùng có thể vào chức năng tán lộc để chuyển tiền vào quỹ lộc. \n" + "Một lần tối đa 10 triệu Coin\n" + "Không giới hạn số lần tán lộc", "Người chơi khi hết tiền có thể vào chức năng rút lộc để nhận lộc từ người chơi khác.\n" + "Giới hạn 10 phút 1 lần\n" + "Chỉ những user đã từng tiêu tiền mới được rút lộc\n" + "1 lần rút lộc tương đương ngẫu nhiên 1-10% giá trị quỹ"];
  },
  onEnable: function onEnable() {
    this._tabLeft = 0;
    this._tabTop = this._data;

    if (this.node.zIndex <= cc.lastZIndex) {
      this.node.zIndex = cc.lastZIndex;
    }

    this.requestData();
    this.setUITab();
  },
  setUITab: function setUITab() {
    var self = this;
    Promise.all(this.listTabLef.map(function (bgNode, index) {
      if (self._tabLeft == index) bgNode.spriteFrame = self.listBgLeft[1];else bgNode.spriteFrame = self.listBgLeft[0];
    }));
    Promise.all(this.listTabTop.map(function (bgNode, index) {
      if (bgNode.node.name == self._tabTop) bgNode.spriteFrame = self.listBgTop[1];else bgNode.spriteFrame = self.listBgTop[0];
    }));
  },
  requestData: function requestData() {
    switch (this._tabTop) {
      case "TheLe":
        {
          this.theLeContent.active = true;
          this.rankContent.active = false;
          if (this._tabLeft == 0) this.setTextDuaTop();else this.setTextTanRut();
          this.lbTheLeContent.string = this._listTheLe[this._tabLeft];
          break;
        }

      case "VinhDanh":
        {
          this.lbTime.string = "STT";
          this.lbAccount.string = "TÊN TÀI KHOẢN";
          this.lbValue.string = "TRỊ GIÁ";
          this.theLeContent.active = false;
          this.rankContent.active = true;

          switch (this._tabLeft) {
            case 0:
              {
                this.setTextDuaTop();
                mm.Loading.show();
                var topBetRequest = new TaiXiuRequest.TopBetRequest();
                SmartFoxSDK.TaiXiuController.ZoneInstance.send(topBetRequest.toSRequest());
                break;
              }

            case 1:
              {
                this.setTextTanRut();
                mm.Loading.show();
                var rankTanLocRequest = new TaiXiuRequest.RankTanLocRequest();
                SmartFoxSDK.TaiXiuController.ZoneInstance.send(rankTanLocRequest.toSRequest());
                break;
              }

            case 2:
              {
                this.setTextTanRut();
                mm.Loading.show();
                var rankRutLocRequest = new TaiXiuRequest.RankRutLocRequest();
                SmartFoxSDK.TaiXiuController.ZoneInstance.send(rankRutLocRequest.toSRequest());
                break;
              }
          }

          break;
        }

      case "LichSu":
        {
          this.theLeContent.active = false;
          this.rankContent.active = true;
          this.lbTime.string = "THỜI GIAN";
          this.lbAccount.string = "TÊN TÀI KHOẢN";
          this.lbValue.string = "TRỊ GIÁ";

          switch (this._tabLeft) {
            case 0:
              {
                this.setTextDuaTop();
                this.lbAccount.string = "TÊN TÀI KHOẢN";
                this.lbValue.string = "PHẦN THƯỞNG";
                this.lbTime.string = "STT";
                mm.Loading.show();
                var topRewardResRequest = new TaiXiuRequest.TopRewardResRequest();
                SmartFoxSDK.TaiXiuController.ZoneInstance.send(topRewardResRequest.toSRequest());
                break;
              }

            case 1:
              {
                this.setTextTanRut();
                mm.Loading.show();
                var historyTanLocRequest = new TaiXiuRequest.HistoryTanLocRequest();
                SmartFoxSDK.TaiXiuController.ZoneInstance.send(historyTanLocRequest.toSRequest());
                this.rankContent.active = true;
                break;
              }

            case 2:
              {
                this.setTextTanRut();
                mm.Loading.show();
                var historyRutLocRequest = new TaiXiuRequest.HistoryRutLocRequest();
                SmartFoxSDK.TaiXiuController.ZoneInstance.send(historyRutLocRequest.toSRequest());
                this.rankContent.active = true;
                break;
              }
          }

          break;
        }
    }
  },
  setTextTanRut: function setTextTanRut() {
    this.lbVinhDanh.string = "VINH DANH";
    this.lbLichSu.string = "LỊCH SỬ";
  },
  setTextDuaTop: function setTextDuaTop() {
    this.lbVinhDanh.string = "TOP CƯỢC";
    this.lbLichSu.string = "THƯỞNG TOP";
  },
  updateDataList: function updateDataList(listData) {
    this.listRank = this.removeChimmoi(listData);
    this.listview.numItems = this.listRank.length;
    mm.Loading.hide();
  },
  removeChimmoi: function removeChimmoi(listData) {
    var listUser = [];

    if (listData.length > 0) {
      var isNumber = typeof listData[0].time == "number";
      var index = 1;

      for (var i = 0; i < listData.length; i++) {
        if (listData[i].account.indexOf("chimmoi") < 0) {
          listUser.push(listData[i]);

          if (isNumber) {
            listData[i].time = index++;
          }
        }
      }
    }

    return listUser;
  },
  eventClose: function eventClose() {
    this.back();
  },
  onListRender: function onListRender(item, idx) {
    var rank = this.listRank[idx];
    item.getComponent(item.name).init(rank, idx);
  },
  onListSelected: function onListSelected(item, selectedId, lastSelectedId, val) {
    if (!item) return;
    var list = item.listItem._list;
    var str = 'Danh sách hoạt động hiện tại là:' + list.node.name + '，Lựa chọn hiện tại là：' + selectedId + '，Lựa chọn cuối cùng là：' + lastSelectedId;

    if (list.selectedMode == 2) {
      //Nếu nó là chế độ đa lựa chọn
      str += '，Giá trị hiện tại：' + val;
    }
  },
  eventTabLeft: function eventTabLeft(event, data) {
    this._tabLeft = parseInt(data);
    this.requestData();
    this.setUITab();
  },
  eventTheLe: function eventTheLe() {
    this._tabTop = "TheLe";
    this.requestData();
    this.setUITab();
  },
  eventRank: function eventRank() {
    this._tabTop = "VinhDanh";
    this.requestData();
    this.setUITab();
  },
  eventHistory: function eventHistory() {
    this._tabTop = "LichSu";
    this.requestData();
    this.setUITab();
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL3RhaXhpdS9VSVRhaVhpdUR1YVRvcC5qcyJdLCJuYW1lcyI6WyJMaXN0dmlldyIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiVm96QmFzZUNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJ0aGVMZUNvbnRlbnQiLCJOb2RlIiwibGJUaGVMZUNvbnRlbnQiLCJMYWJlbCIsInJhbmtDb250ZW50IiwibGJUaW1lIiwibGJBY2NvdW50IiwibGJWYWx1ZSIsImxiVmluaERhbmgiLCJsYkxpY2hTdSIsImxpc3R2aWV3IiwibGlzdEJnTGVmdCIsIlNwcml0ZUZyYW1lIiwibGlzdEJnVG9wIiwibGlzdFRhYkxlZiIsIlNwcml0ZSIsImxpc3RUYWJUb3AiLCJfdGFiTGVmdCIsIl90YWJUb3AiLCJfbGlzdFRoZUxlIiwib25Mb2FkIiwib25FbmFibGUiLCJfZGF0YSIsIm5vZGUiLCJ6SW5kZXgiLCJsYXN0WkluZGV4IiwicmVxdWVzdERhdGEiLCJzZXRVSVRhYiIsInNlbGYiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwiYmdOb2RlIiwiaW5kZXgiLCJzcHJpdGVGcmFtZSIsIm5hbWUiLCJhY3RpdmUiLCJzZXRUZXh0RHVhVG9wIiwic2V0VGV4dFRhblJ1dCIsInN0cmluZyIsIm1tIiwiTG9hZGluZyIsInNob3ciLCJ0b3BCZXRSZXF1ZXN0IiwiVGFpWGl1UmVxdWVzdCIsIlRvcEJldFJlcXVlc3QiLCJTbWFydEZveFNESyIsIlRhaVhpdUNvbnRyb2xsZXIiLCJab25lSW5zdGFuY2UiLCJzZW5kIiwidG9TUmVxdWVzdCIsInJhbmtUYW5Mb2NSZXF1ZXN0IiwiUmFua1RhbkxvY1JlcXVlc3QiLCJyYW5rUnV0TG9jUmVxdWVzdCIsIlJhbmtSdXRMb2NSZXF1ZXN0IiwidG9wUmV3YXJkUmVzUmVxdWVzdCIsIlRvcFJld2FyZFJlc1JlcXVlc3QiLCJoaXN0b3J5VGFuTG9jUmVxdWVzdCIsIkhpc3RvcnlUYW5Mb2NSZXF1ZXN0IiwiaGlzdG9yeVJ1dExvY1JlcXVlc3QiLCJIaXN0b3J5UnV0TG9jUmVxdWVzdCIsInVwZGF0ZURhdGFMaXN0IiwibGlzdERhdGEiLCJsaXN0UmFuayIsInJlbW92ZUNoaW1tb2kiLCJudW1JdGVtcyIsImxlbmd0aCIsImhpZGUiLCJsaXN0VXNlciIsImlzTnVtYmVyIiwidGltZSIsImkiLCJhY2NvdW50IiwiaW5kZXhPZiIsInB1c2giLCJldmVudENsb3NlIiwiYmFjayIsIm9uTGlzdFJlbmRlciIsIml0ZW0iLCJpZHgiLCJyYW5rIiwiZ2V0Q29tcG9uZW50IiwiaW5pdCIsIm9uTGlzdFNlbGVjdGVkIiwic2VsZWN0ZWRJZCIsImxhc3RTZWxlY3RlZElkIiwidmFsIiwibGlzdCIsImxpc3RJdGVtIiwiX2xpc3QiLCJzdHIiLCJzZWxlY3RlZE1vZGUiLCJldmVudFRhYkxlZnQiLCJldmVudCIsImRhdGEiLCJwYXJzZUludCIsImV2ZW50VGhlTGUiLCJldmVudFJhbmsiLCJldmVudEhpc3RvcnkiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBTUEsUUFBUSxHQUFHQyxPQUFPLENBQUMsVUFBRCxDQUF4Qjs7QUFDQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLGdCQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxZQUFZLEVBQUlKLEVBQUUsQ0FBQ0ssSUFEWDtBQUVSQyxJQUFBQSxjQUFjLEVBQUlOLEVBQUUsQ0FBQ08sS0FGYjtBQUdSQyxJQUFBQSxXQUFXLEVBQUtSLEVBQUUsQ0FBQ0ssSUFIWDtBQUlSSSxJQUFBQSxNQUFNLEVBQVVULEVBQUUsQ0FBQ08sS0FKWDtBQUtSRyxJQUFBQSxTQUFTLEVBQU9WLEVBQUUsQ0FBQ08sS0FMWDtBQU1SSSxJQUFBQSxPQUFPLEVBQVNYLEVBQUUsQ0FBQ08sS0FOWDtBQU9SSyxJQUFBQSxVQUFVLEVBQU1aLEVBQUUsQ0FBQ08sS0FQWDtBQVFSTSxJQUFBQSxRQUFRLEVBQVFiLEVBQUUsQ0FBQ08sS0FSWDtBQVNSTyxJ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RixHQUE4Rix5QkFBOUYsR0FBMEhDLGNBQXBJOztBQUNBLFFBQUlFLElBQUksQ0FBQ0ksWUFBTCxJQUFxQixDQUF6QixFQUE0QjtBQUFFO0FBQzFCRCxNQUFBQSxHQUFHLElBQUksdUJBQXVCSixHQUE5QjtBQUNIO0FBQ0osR0ExTEk7QUEyTExNLEVBQUFBLFlBM0xLLHdCQTJMUUMsS0EzTFIsRUEyTGVDLElBM0xmLEVBMkxvQjtBQUNyQixTQUFLN0UsUUFBTCxHQUFnQjhFLFFBQVEsQ0FBQ0QsSUFBRCxDQUF4QjtBQUNBLFNBQUtwRSxXQUFMO0FBQ0EsU0FBS0MsUUFBTDtBQUNILEdBL0xJO0FBZ01McUUsRUFBQUEsVUFoTUssd0JBZ01RO0FBQ1QsU0FBSzlFLE9BQUwsR0FBZSxPQUFmO0FBQ0EsU0FBS1EsV0FBTDtBQUNBLFNBQUtDLFFBQUw7QUFDSCxHQXBNSTtBQXFNTHNFLEVBQUFBLFNBck1LLHVCQXFNTztBQUNSLFNBQUsvRSxPQUFMLEdBQWUsVUFBZjtBQUNBLFNBQUtRLFdBQUw7QUFDQSxTQUFLQyxRQUFMO0FBQ0gsR0F6TUk7QUEwTUx1RSxFQUFBQSxZQTFNSywwQkEwTVU7QUFDWCxTQUFLaEYsT0FBTCxHQUFlLFFBQWY7QUFDQSxTQUFLUSxXQUFMO0FBQ0EsU0FBS0MsUUFBTDtBQUNIO0FBOU1JLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IExpc3R2aWV3ID0gcmVxdWlyZSgnTGlzdHZpZXcnKTtcbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Wb3pCYXNlQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICB0aGVMZUNvbnRlbnQgIDogY2MuTm9kZSxcbiAgICAgICAgbGJUaGVMZUNvbnRlbnQgIDogY2MuTGFiZWwsXG4gICAgICAgIHJhbmtDb250ZW50ICAgOiBjYy5Ob2RlLFxuICAgICAgICBsYlRpbWUgICAgICAgIDogY2MuTGFiZWwsXG4gICAgICAgIGxiQWNjb3VudCAgICAgOiBjYy5MYWJlbCxcbiAgICAgICAgbGJWYWx1ZSAgICAgICA6IGNjLkxhYmVsLFxuICAgICAgICBsYlZpbmhEYW5oICAgIDogY2MuTGFiZWwsXG4gICAgICAgIGxiTGljaFN1ICAgICAgOiBjYy5MYWJlbCxcbiAgICAgICAgbGlzdHZpZXcgICAgICA6IExpc3R2aWV3LFxuICAgICAgICBsaXN0QmdMZWZ0ICAgIDogW2NjLlNwcml0ZUZyYW1lXSxcbiAgICAgICAgbGlzdEJnVG9wICAgICA6IFtjYy5TcHJpdGVGcmFtZV0sXG4gICAgICAgIGxpc3RUYWJMZWYgICAgOiBbY2MuU3ByaXRlXSxcbiAgICAgICAgbGlzdFRhYlRvcCAgICA6IFtjYy5TcHJpdGVdLFxuICAgICAgICBfdGFiTGVmdCAgICAgIDogMCxcbiAgICAgICAgX3RhYlRvcCAgICAgICA6IFwiVGhlTGVcIixcbiAgICAgICAgX2xpc3RUaGVMZSAgICA6IFtdXG4gICAgfSxcbiAgICBvbkxvYWQoKSB7XG4gICAgICB0aGlzLl9saXN0VGhlTGUgPSBbXG4gICAgICAgICAgXCJUaOG7gyBs4buHIMSRdWEgdG9wIFTDoGkgWOG7iXU6XFxuXCIgK1xuICAgICAgICAgIFwiSMOgbmcgbmfDoHksIGjhu4cgdGjhu5FuZyBz4bq9IGzhu41jIHJhIDUwIG5nxrDhu51pIGNoxqFpIGPDsyBz4buRIHRp4buBbiBjxrDhu6NjIHThu5VuZyBjw6FjIHBoacOqbiB0w6BpIHjhu4l1IGNhbyBuaOG6pXQgdHJvbmcgbmfDoHkgxJHhu4MgdHJhbyB0aMaw4bufbmcuXFxuXCIgK1xuICAgICAgICAgIFwiTMawdSDDvTogQ2jhu4kgZ2hpIG5o4bqtbiB0aeG7gW4gY8aw4bujYyBzYXUga2hpIMSRxrDhu6NjIGPDom4gY+G7rWEsIHBo4bqnbiB0aeG7gW4gdHLhuqMgbOG6oWkgc+G6vSBraMO0bmcgxJHGsOG7o2MgdMOtbmguXFxuXCIgK1xuICAgICAgICAgIFwiVGjhu51pIGdpYW4gdHJhbyB0aMaw4bufbmc6IDAwaDAxIG5nw6B5IGjDtG0gc2F1XFxuXCIgK1xuICAgICAgICAgIFwiQ8OhY2ggdGjhu6ljIG5o4bqtbiB0aMaw4bufbmc6IEjhu4cgdGjhu5FuZyB04buxIMSR4buZbmcgY+G7mW5nIHbDoG8gdMOgaSBraG/huqNuIG5nxrDhu51pIGNoxqFpXCIsXG4gICAgICAgICAgXCJLaGkgdGjhuq9uZyBnYW1lLCBuZ8aw4budaSBjaMahaSBtdeG7kW4gdMOhbiBs4buZYyBjaG8gYW5oIGVtIGNoxqFpIGPDuW5nIGPDsyB0aOG7gyB2w6BvIGNo4bupYyBuxINuZyB0w6FuIGzhu5ljIMSR4buDIGNodXnhu4NuIHRp4buBbiB2w6BvIHF14bu5IGzhu5ljLiBcXG5cIiArXG4gICAgICAgICAgXCJN4buZdCBs4bqnbiB04buRaSDEkWEgMTAgdHJp4buHdSBDb2luXFxuXCIgK1xuICAgICAgICAgIFwiS2jDtG5nIGdp4bubaSBo4bqhbiBz4buRIGzhuqduIHTDoW4gbOG7mWNcIixcbiAgICAgICAgICBcIk5nxrDhu51pIGNoxqFpIGtoaSBo4bq/dCB0aeG7gW4gY8OzIHRo4buDIHbDoG8gY2jhu6ljIG7Eg25nIHLDunQgbOG7mWMgxJHhu4Mgbmjhuq1uIGzhu5ljIHThu6sgbmfGsOG7nWkgY2jGoWkga2jDoWMuXFxuXCIgK1xuICAgICAgICAgIFwiR2nhu5tpIGjhuqFuIDEwIHBow7p0IDEgbOG6p25cXG5cIiArXG4gICAgICAgICAgXCJDaOG7iSBuaOG7r25nIHVzZXIgxJHDoyB04burbmcgdGnDqnUgdGnhu4FuIG3hu5tpIMSRxrDhu6NjIHLDunQgbOG7mWNcXG5cIiArXG4gICAgICAgICAgXCIxIGzhuqduIHLDunQgbOG7mWMgdMawxqFuZyDEkcawxqFuZyBuZ+G6q3Ugbmhpw6puIDEtMTAlIGdpw6EgdHLhu4sgcXXhu7lcIlxuICAgICAgXTtcbiAgICB9LFxuICAgIG9uRW5hYmxlKCl7XG4gICAgICAgIHRoaXMuX3RhYkxlZnQgPSAwO1xuICAgICAgICB0aGlzLl90YWJUb3AgID0gdGhpcy5fZGF0YTtcbiAgICAgICAgaWYgKHRoaXMubm9kZS56SW5kZXggPD0gY2MubGFzdFpJbmRleCl7XG4gICAgICAgICAgICB0aGlzLm5vZGUuekluZGV4ID0gY2MubGFzdFpJbmRleDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlcXVlc3REYXRhKCk7XG4gICAgICAgIHRoaXMuc2V0VUlUYWIoKTtcbiAgICB9LFxuICAgIHNldFVJVGFiKCkge1xuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubGlzdFRhYkxlZi5tYXAoZnVuY3Rpb24oYmdOb2RlLCBpbmRleCl7XG4gICAgICAgICAgICBpZiAoc2VsZi5fdGFiTGVmdCA9PSBpbmRleClcbiAgICAgICAgICAgICAgICBiZ05vZGUuc3ByaXRlRnJhbWUgPSBzZWxmLmxpc3RCZ0xlZnRbMV07XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYmdOb2RlLnNwcml0ZUZyYW1lID0gc2VsZi5saXN0QmdMZWZ0WzBdO1xuICAgICAgICB9KSlcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5saXN0VGFiVG9wLm1hcChmdW5jdGlvbihiZ05vZGUsIGluZGV4KXtcbiAgICAgICAgICAgIGlmIChiZ05vZGUubm9kZS5uYW1lID09IHNlbGYuX3RhYlRvcClcbiAgICAgICAgICAgICAgICBiZ05vZGUuc3ByaXRlRnJhbWUgPSBzZWxmLmxpc3RCZ1RvcFsxXTtcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBiZ05vZGUuc3ByaXRlRnJhbWUgPSBzZWxmLmxpc3RCZ1RvcFswXTtcbiAgICAgICAgfSkpXG4gICAgfSxcbiAgICByZXF1ZXN0RGF0YSgpIHtcbiAgICAgICAgc3dpdGNoICh0aGlzLl90YWJUb3Ape1xuICAgICAgICAgICAgY2FzZSBcIlRoZUxlXCI6IHtcbiAgICAgICAgICAgICAgICB0aGlzLnRoZUxlQ29udGVudC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHRoaXMucmFua0NvbnRlbnQuYWN0aXZlICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLl90YWJMZWZ0ID09MClcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUZXh0RHVhVG9wKCk7XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHRUYW5SdXQoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmxiVGhlTGVDb250ZW50LnN0cmluZyA9ICB0aGlzLl9saXN0VGhlTGVbdGhpcy5fdGFiTGVmdF07XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXNlIFwiVmluaERhbmhcIjoge1xuICAgICAgICAgICAgICAgIHRoaXMubGJUaW1lLnN0cmluZyAgICAgID0gXCJTVFRcIjtcbiAgICAgICAgICAgICAgICB0aGlzLmxiQWNjb3VudC5zdHJpbmcgICA9IFwiVMOKTiBUw4BJIEtIT+G6ok5cIjtcbiAgICAgICAgICAgICAgICB0aGlzLmxiVmFsdWUuc3RyaW5nICAgICA9IFwiVFLhu4ogR0nDgVwiO1xuICAgICAgICAgICAgICAgIHRoaXMudGhlTGVDb250ZW50LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucmFua0NvbnRlbnQuYWN0aXZlICA9IHRydWU7XG4gICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLl90YWJMZWZ0KXtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHREdWFUb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tLkxvYWRpbmcuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRvcEJldFJlcXVlc3QgID0gbmV3IFRhaVhpdVJlcXVlc3QuVG9wQmV0UmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU21hcnRGb3hTREsuVGFpWGl1Q29udHJvbGxlci5ab25lSW5zdGFuY2Uuc2VuZCh0b3BCZXRSZXF1ZXN0LnRvU1JlcXVlc3QoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dFRhblJ1dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW0uTG9hZGluZy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcmFua1RhbkxvY1JlcXVlc3QgID0gbmV3IFRhaVhpdVJlcXVlc3QuUmFua1RhbkxvY1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNtYXJ0Rm94U0RLLlRhaVhpdUNvbnRyb2xsZXIuWm9uZUluc3RhbmNlLnNlbmQocmFua1RhbkxvY1JlcXVlc3QudG9TUmVxdWVzdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRUZXh0VGFuUnV0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBtbS5Mb2FkaW5nLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCByYW5rUnV0TG9jUmVxdWVzdCA9IG5ldyBUYWlYaXVSZXF1ZXN0LlJhbmtSdXRMb2NSZXF1ZXN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBTbWFydEZveFNESy5UYWlYaXVDb250cm9sbGVyLlpvbmVJbnN0YW5jZS5zZW5kKHJhbmtSdXRMb2NSZXF1ZXN0LnRvU1JlcXVlc3QoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhc2UgXCJMaWNoU3VcIjoge1xuICAgICAgICAgICAgICAgIHRoaXMudGhlTGVDb250ZW50LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHRoaXMucmFua0NvbnRlbnQuYWN0aXZlICA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5sYlRpbWUuc3RyaW5nICAgICAgPSBcIlRI4bucSSBHSUFOXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5sYkFjY291bnQuc3RyaW5nICAgPSBcIlTDik4gVMOASSBLSE/huqJOXCI7XG4gICAgICAgICAgICAgICAgdGhpcy5sYlZhbHVlLnN0cmluZyAgICAgPSBcIlRS4buKIEdJw4FcIjtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX3RhYkxlZnQpe1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dER1YVRvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYkFjY291bnQuc3RyaW5nICAgPSBcIlTDik4gVMOASSBLSE/huqJOXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxiVmFsdWUuc3RyaW5nICAgICA9IFwiUEjhuqZOIFRIxq/hu55OR1wiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5sYlRpbWUuc3RyaW5nICAgICAgPSBcIlNUVFwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW0uTG9hZGluZy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgdG9wUmV3YXJkUmVzUmVxdWVzdCA9IG5ldyBUYWlYaXVSZXF1ZXN0LlRvcFJld2FyZFJlc1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNtYXJ0Rm94U0RLLlRhaVhpdUNvbnRyb2xsZXIuWm9uZUluc3RhbmNlLnNlbmQodG9wUmV3YXJkUmVzUmVxdWVzdC50b1NSZXF1ZXN0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHRUYW5SdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1tLkxvYWRpbmcuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGhpc3RvcnlUYW5Mb2NSZXF1ZXN0ID0gbmV3IFRhaVhpdVJlcXVlc3QuSGlzdG9yeVRhbkxvY1JlcXVlc3QoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIFNtYXJ0Rm94U0RLLlRhaVhpdUNvbnRyb2xsZXIuWm9uZUluc3RhbmNlLnNlbmQoaGlzdG9yeVRhbkxvY1JlcXVlc3QudG9TUmVxdWVzdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmFua0NvbnRlbnQuYWN0aXZlICA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dFRhblJ1dCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW0uTG9hZGluZy5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaGlzdG9yeVJ1dExvY1JlcXVlc3QgPSBuZXcgVGFpWGl1UmVxdWVzdC5IaXN0b3J5UnV0TG9jUmVxdWVzdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgU21hcnRGb3hTREsuVGFpWGl1Q29udHJvbGxlci5ab25lSW5zdGFuY2Uuc2VuZChoaXN0b3J5UnV0TG9jUmVxdWVzdC50b1NSZXF1ZXN0KCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yYW5rQ29udGVudC5hY3RpdmUgID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICBzZXRUZXh0VGFuUnV0KCl7XG4gICAgICAgIHRoaXMubGJWaW5oRGFuaC5zdHJpbmcgPSBcIlZJTkggREFOSFwiO1xuICAgICAgICB0aGlzLmxiTGljaFN1LnN0cmluZyAgID0gXCJM4buKQ0ggU+G7rFwiO1xuICAgIH0sXG4gICAgc2V0VGV4dER1YVRvcCgpe1xuICAgICAgICB0aGlzLmxiVmluaERhbmguc3RyaW5nID0gXCJUT1AgQ8av4buiQ1wiO1xuICAgICAgICB0aGlzLmxiTGljaFN1LnN0cmluZyAgID0gXCJUSMav4bueTkcgVE9QXCI7XG4gICAgfSxcbiAgICB1cGRhdGVEYXRhTGlzdChsaXN0RGF0YSkge1xuICAgICAgICB0aGlzLmxpc3RSYW5rICAgICAgICAgICAgPSAgdGhpcy5yZW1vdmVDaGltbW9pKGxpc3REYXRhKTtcbiAgICAgICAgdGhpcy5saXN0dmlldy5udW1JdGVtcyAgID0gdGhpcy5saXN0UmFuay5sZW5ndGg7XG4gICAgICAgIG1tLkxvYWRpbmcuaGlkZSgpO1xuICAgIH0sXG4gICAgcmVtb3ZlQ2hpbW1vaShsaXN0RGF0YSkge1xuICAgICAgICBsZXQgbGlzdFVzZXIgPSBbXTtcbiAgICAgICAgaWYgKGxpc3REYXRhLmxlbmd0aCA+IDApe1xuICAgICAgICAgICAgbGV0IGlzTnVtYmVyID0gdHlwZW9mIChsaXN0RGF0YVswXS50aW1lKSA9PSBcIm51bWJlclwiO1xuICAgICAgICAgICAgbGV0IGluZGV4ID0gMTtcbiAgICAgICAgICAgIGZvciAobGV0IGk9IDA7IGkgPGxpc3REYXRhLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgICAgICBpZiAobGlzdERhdGFbaV0uYWNjb3VudC5pbmRleE9mKFwiY2hpbW1vaVwiKTwwKXtcbiAgICAgICAgICAgICAgICAgICAgbGlzdFVzZXIucHVzaChsaXN0RGF0YVtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpc051bWJlcil7XG4gICAgICAgICAgICAgICAgICAgICAgICBsaXN0RGF0YVtpXS50aW1lID1pbmRleCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBsaXN0VXNlcjtcbiAgICB9LFxuICAgIGV2ZW50Q2xvc2UoKSB7XG4gICAgICAgIHRoaXMuYmFjaygpO1xuICAgIH0sXG4gICAgb25MaXN0UmVuZGVyKGl0ZW0sIGlkeCkge1xuICAgICAgICBsZXQgcmFuayA9IHRoaXMubGlzdFJhbmtbaWR4XTtcbiAgICAgICAgaXRlbS5nZXRDb21wb25lbnQoaXRlbS5uYW1lKS5pbml0KHJhbmssIGlkeCk7XG4gICAgfSxcbiAgICBvbkxpc3RTZWxlY3RlZChpdGVtLCBzZWxlY3RlZElkLCBsYXN0U2VsZWN0ZWRJZCwgdmFsKSB7XG4gICAgICAgIGlmICghaXRlbSlcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgbGV0IGxpc3QgPSBpdGVtLmxpc3RJdGVtLl9saXN0O1xuICAgICAgICBsZXQgc3RyID0gJ0Rhbmggc8OhY2ggaG/huqF0IMSR4buZbmcgaGnhu4duIHThuqFpIGzDoDonICsgbGlzdC5ub2RlLm5hbWUgKyAn77yMTOG7sWEgY2jhu41uIGhp4buHbiB04bqhaSBsw6DvvJonICsgc2VsZWN0ZWRJZCArICfvvIxM4buxYSBjaOG7jW4gY3Xhu5FpIGPDuW5nIGzDoO+8micgKyBsYXN0U2VsZWN0ZWRJZDtcbiAgICAgICAgaWYgKGxpc3Quc2VsZWN0ZWRNb2RlID09IDIpIHsgLy9O4bq/dSBuw7MgbMOgIGNo4bq/IMSR4buZIMSRYSBs4buxYSBjaOG7jW5cbiAgICAgICAgICAgIHN0ciArPSAn77yMR2nDoSB0cuG7iyBoaeG7h24gdOG6oWnvvJonICsgdmFsO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBldmVudFRhYkxlZnQoZXZlbnQsIGRhdGEpe1xuICAgICAgICB0aGlzLl90YWJMZWZ0ID0gcGFyc2VJbnQoZGF0YSk7XG4gICAgICAgIHRoaXMucmVxdWVzdERhdGEoKTtcbiAgICAgICAgdGhpcy5zZXRVSVRhYigpO1xuICAgIH0sXG4gICAgZXZlbnRUaGVMZSgpIHtcbiAgICAgICAgdGhpcy5fdGFiVG9wID0gXCJUaGVMZVwiO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhKCk7XG4gICAgICAgIHRoaXMuc2V0VUlUYWIoKTtcbiAgICB9LFxuICAgIGV2ZW50UmFuaygpIHtcbiAgICAgICAgdGhpcy5fdGFiVG9wID0gXCJWaW5oRGFuaFwiO1xuICAgICAgICB0aGlzLnJlcXVlc3REYXRhKCk7XG4gICAgICAgIHRoaXMuc2V0VUlUYWIoKTtcbiAgICB9LFxuICAgIGV2ZW50SGlzdG9yeSgpIHtcbiAgICAgICAgdGhpcy5fdGFiVG9wID0gXCJMaWNoU3VcIjtcbiAgICAgICAgdGhpcy5yZXF1ZXN0RGF0YSgpO1xuICAgICAgICB0aGlzLnNldFVJVGFiKCk7XG4gICAgfVxufSk7XG4iXX0=