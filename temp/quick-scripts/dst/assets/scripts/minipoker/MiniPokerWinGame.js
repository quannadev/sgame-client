
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/minipoker/MiniPokerWinGame.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '828d9yDIAJGU4V0lAKsZzMt', 'MiniPokerWinGame');
// scripts/minipoker/MiniPokerWinGame.js

"use strict";

var self;

var Helper = require("Helper");

cc.Class({
  "extends": cc.VozBaseComponent,
  properties: {
    lbMoneyWin: cc.Label,
    lbNumberWin: cc.Label,
    animationWin: cc.Node,
    winText: cc.Node
  },
  onLoad: function onLoad() {
    self = this;
  },
  init: function init(obj) {
    this.MNPK = obj;
  },
  runWinGame: function runWinGame() {
    var _this = this;

    this.winText.active = false;

    if (this.MNPK.isNoHu) {
      this.runNoHu();
    } else {
      if (this.MNPK.winMoney > 0) {
        if (this.MNPK.handWinType > 0) {
          this.winText.active = true;
          Promise.all(this.winText.children.map(function (text, index) {
            text.active = false;
          })).then(function (result) {
            self.winText.children[_this.MNPK.handWinType].active = true;
          });
          this.lbMoneyWin.node.y = -50;
        } else this.lbMoneyWin.node.y = 0;

        this.MNPK.setMoneyWin(this.MNPK.winMoney);
        this.lbMoneyWin.node.active = true;
        Helper.numberTo(this.lbMoneyWin, 0, this.MNPK.winMoney, 1200, true, function () {
          self.MNPK.updateChipAll();
          self.scheduleOnce(function () {
            self.lbMoneyWin.node.active = false;
            self.winText.active = false;
            self.checkRunAgainWin();
          }, 1);
        });
        this.MNPK.winMoney = 0;
      } else {
        this.MNPK.autoQuay();
      }
    }
  },
  checkRunAgainWin: function checkRunAgainWin() {
    if (this.MNPK.winMoney > 0 || this.MNPK.isNoHu || this.MNPK.isAuto) this.runWinGame();
  },
  runNoHu: function runNoHu() {
    this.animationWin.active = true;
    this.animationWin.getComponent(sp.Skeleton).setAnimation(0, "Idle", false);
    this.lbNumberWin.node.active = true;
    Helper.numberTo(this.lbNumberWin, 0, this.MNPK.winMoney, 1200, true, function () {
      this.scheduleOnce(function () {
        var d = cc.moveTo(0.5, cc.v2(-75, 170));
        self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {
          self.lbNumberWin.node.active = false;
          self.checkRunAgainWin();
        })));
      }, 3);
    });
    this.scheduleOnce(function () {
      self.animationWin.active = false;
    }, 4);
    this.MNPK.isNoHu = false;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL21pbmlwb2tlci9NaW5pUG9rZXJXaW5HYW1lLmpzIl0sIm5hbWVzIjpbInNlbGYiLCJIZWxwZXIiLCJyZXF1aXJlIiwiY2MiLCJDbGFzcyIsIlZvekJhc2VDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwibGJNb25leVdpbiIsIkxhYmVsIiwibGJOdW1iZXJXaW4iLCJhbmltYXRpb25XaW4iLCJOb2RlIiwid2luVGV4dCIsIm9uTG9hZCIsImluaXQiLCJvYmoiLCJNTlBLIiwicnVuV2luR2FtZSIsImFjdGl2ZSIsImlzTm9IdSIsInJ1bk5vSHUiLCJ3aW5Nb25leSIsImhhbmRXaW5UeXBlIiwiUHJvbWlzZSIsImFsbCIsImNoaWxkcmVuIiwibWFwIiwidGV4dCIsImluZGV4IiwidGhlbiIsInJlc3VsdCIsIm5vZGUiLCJ5Iiwic2V0TW9uZXlXaW4iLCJudW1iZXJUbyIsInVwZGF0ZUNoaXBBbGwiLCJzY2hlZHVsZU9uY2UiLCJjaGVja1J1bkFnYWluV2luIiwiYXV0b1F1YXkiLCJpc0F1dG8iLCJnZXRDb21wb25lbnQiLCJzcCIsIlNrZWxldG9uIiwic2V0QW5pbWF0aW9uIiwiZCIsIm1vdmVUbyIsInYyIiwicnVuQWN0aW9uIiwic2VxdWVuY2UiLCJkZWxheVRpbWUiLCJjYWxsRnVuYyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxJQUFKOztBQUNBLElBQUlDLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBcEI7O0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxnQkFEUDtBQUdMQyxFQUFBQSxVQUFVLEVBQUU7QUFDUkMsSUFBQUEsVUFBVSxFQUFZSixFQUFFLENBQUNLLEtBRGpCO0FBRVJDLElBQUFBLFdBQVcsRUFBV04sRUFBRSxDQUFDSyxLQUZqQjtBQUdSRSxJQUFBQSxZQUFZLEVBQVVQLEVBQUUsQ0FBQ1EsSUFIakI7QUFJUkMsSUFBQUEsT0FBTyxF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QUFwRTtBQUNBLFNBQUtsQyxXQUFMLENBQWlCc0IsSUFBakIsQ0FBc0JiLE1BQXRCLEdBQStCLElBQS9CO0FBQ0FqQixJQUFBQSxNQUFNLENBQUNpQyxRQUFQLENBQWdCLEtBQUt6QixXQUFyQixFQUFrQyxDQUFsQyxFQUFxQyxLQUFLTyxJQUFMLENBQVVLLFFBQS9DLEVBQXlELElBQXpELEVBQStELElBQS9ELEVBQXFFLFlBQVk7QUFDN0UsV0FBS2UsWUFBTCxDQUFrQixZQUFZO0FBQzFCLFlBQUlRLENBQUMsR0FBR3pDLEVBQUUsQ0FBQzBDLE1BQUgsQ0FBVSxHQUFWLEVBQWUxQyxFQUFFLENBQUMyQyxFQUFILENBQU0sQ0FBQyxFQUFQLEVBQVcsR0FBWCxDQUFmLENBQVI7QUFDQTlDLFFBQUFBLElBQUksQ0FBQ1MsV0FBTCxDQUFpQnNCLElBQWpCLENBQXNCZ0IsU0FBdEIsQ0FBZ0M1QyxFQUFFLENBQUM2QyxRQUFILENBQVlKLENBQVosRUFBZXpDLEVBQUUsQ0FBQzhDLFNBQUgsQ0FBYSxDQUFiLENBQWYsRUFBZ0M5QyxFQUFFLENBQUMrQyxRQUFILENBQVksWUFBWTtBQUNwRmxELFVBQUFBLElBQUksQ0FBQ1MsV0FBTCxDQUFpQnNCLElBQWpCLENBQXNCYixNQUF0QixHQUErQixLQUEvQjtBQUNBbEIsVUFBQUEsSUFBSSxDQUFDcUMsZ0JBQUw7QUFDSCxTQUgrRCxDQUFoQyxDQUFoQztBQUlILE9BTkQsRUFNRyxDQU5IO0FBT0gsS0FSRDtBQVNBLFNBQUtELFlBQUwsQ0FBa0IsWUFBWTtBQUMxQnBDLE1BQUFBLElBQUksQ0FBQ1UsWUFBTCxDQUFrQlEsTUFBbEIsR0FBNEIsS0FBNUI7QUFDSCxLQUZELEVBRUcsQ0FGSDtBQUdBLFNBQUtGLElBQUwsQ0FBVUcsTUFBVixHQUF1QixLQUF2QjtBQUNIO0FBckVJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImxldCBzZWxmO1xubGV0IEhlbHBlciA9IHJlcXVpcmUoXCJIZWxwZXJcIik7XG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuVm96QmFzZUNvbXBvbmVudCxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgbGJNb25leVdpbiAgICAgICAgICA6IGNjLkxhYmVsLFxuICAgICAgICBsYk51bWJlcldpbiAgICAgICAgIDogY2MuTGFiZWwsXG4gICAgICAgIGFuaW1hdGlvbldpbiAgICAgICAgOiBjYy5Ob2RlLFxuICAgICAgICB3aW5UZXh0ICAgICAgICAgICAgIDogY2MuTm9kZSxcbiAgICB9LFxuXG4gICAgb25Mb2FkICgpIHtcbiAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgfSxcbiAgICBpbml0KG9iaikge1xuICAgICAgICB0aGlzLk1OUEsgPSBvYmo7XG4gICAgfSxcbiAgICBydW5XaW5HYW1lKCkge1xuICAgICAgICB0aGlzLndpblRleHQuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLk1OUEsuaXNOb0h1KXtcbiAgICAgICAgICAgIHRoaXMucnVuTm9IdSgpO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBpZiAodGhpcy5NTlBLLndpbk1vbmV5ID4gMCl7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuTU5QSy5oYW5kV2luVHlwZSA+IDApe1xuICAgICAgICAgICAgICAgICAgICB0aGlzLndpblRleHQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwodGhpcy53aW5UZXh0LmNoaWxkcmVuLm1hcChmdW5jdGlvbih0ZXh0LCBpbmRleCl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9KSkudGhlbihyZXN1bHQgPT57XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLndpblRleHQuY2hpbGRyZW5bdGhpcy5NTlBLLmhhbmRXaW5UeXBlXS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYk1vbmV5V2luLm5vZGUueSA9IC01MDtcbiAgICAgICAgICAgICAgICB9ZWxzZVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxiTW9uZXlXaW4ubm9kZS55ID0gMDtcbiAgICAgICAgICAgICAgICB0aGlzLk1OUEsuc2V0TW9uZXlXaW4odGhpcy5NTlBLLndpbk1vbmV5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmxiTW9uZXlXaW4ubm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIEhlbHBlci5udW1iZXJUbyh0aGlzLmxiTW9uZXlXaW4sIDAsIHRoaXMuTU5QSy53aW5Nb25leSwgMTIwMCwgdHJ1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLk1OUEsudXBkYXRlQ2hpcEFsbCgpO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmxiTW9uZXlXaW4ubm9kZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYud2luVGV4dC5hY3RpdmUgICAgICAgICA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGVja1J1bkFnYWluV2luKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sIDEpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5NTlBLLndpbk1vbmV5ICAgPSAwO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5NTlBLLmF1dG9RdWF5KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGNoZWNrUnVuQWdhaW5XaW4oKSB7XG4gICAgICAgIGlmICh0aGlzLk1OUEsud2luTW9uZXkgPiAwIHx8IHRoaXMuTU5QSy5pc05vSHUgfHwgdGhpcy5NTlBLLmlzQXV0bylcbiAgICAgICAgICAgIHRoaXMucnVuV2luR2FtZSgpO1xuICAgIH0sXG4gICAgcnVuTm9IdSgpe1xuICAgICAgICB0aGlzLmFuaW1hdGlvbldpbi5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLmFuaW1hdGlvbldpbi5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLCBcIklkbGVcIiwgZmFsc2UpO1xuICAgICAgICB0aGlzLmxiTnVtYmVyV2luLm5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgSGVscGVyLm51bWJlclRvKHRoaXMubGJOdW1iZXJXaW4sIDAsIHRoaXMuTU5QSy53aW5Nb25leSwgMTIwMCwgdHJ1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBkID0gY2MubW92ZVRvKDAuNSwgY2MudjIoLTc1LCAxNzApKTtcbiAgICAgICAgICAgICAgICBzZWxmLmxiTnVtYmVyV2luLm5vZGUucnVuQWN0aW9uKGNjLnNlcXVlbmNlKGQsIGNjLmRlbGF5VGltZSgxKSwgY2MuY2FsbEZ1bmMoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmxiTnVtYmVyV2luLm5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuY2hlY2tSdW5BZ2FpbldpbigpO1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICB9LCAzKVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5zY2hlZHVsZU9uY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2VsZi5hbmltYXRpb25XaW4uYWN0aXZlICA9IGZhbHNlO1xuICAgICAgICB9LCA0KVxuICAgICAgICB0aGlzLk1OUEsuaXNOb0h1ICAgICA9IGZhbHNlO1xuICAgIH0sXG59KTtcbiJdfQ==