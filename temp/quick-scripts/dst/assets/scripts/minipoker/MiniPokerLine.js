
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/minipoker/MiniPokerLine.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '9f07dXgZAVCLKVdme6WzfaT', 'MiniPokerLine');
// scripts/minipoker/MiniPokerLine.js

"use strict";

var helper = require('Helper');

cc.Class({
  "extends": cc.Component,
  properties: {
    nodeLine: cc.Node,
    typeLine: 0
  },
  init: function init(obj) {
    this.CDV = obj;
    this.eventSelectAll();
  },
  eventOpen: function eventOpen() {
    mm.audio.playButton();
    this.node.active = true;
  },
  eventClose: function eventClose() {
    mm.audio.playButton();
    var total = this.getTotalLineSelect();

    if (this.node.active && total < 1) {
      this.CDV.addNotice('Chọn ít nhất 1 dòng');
    } else {
      this.node.active = false;
    }
  },
  eventSelect: function eventSelect(event, numberStr) {
    mm.audio.playButton();
    var numberLine = parseInt(numberStr);
    helper.setMaterialGray(event.target.getComponent(cc.Sprite), helper.isMaterialGray(event.target.getComponent(cc.Sprite)));
    this.data[numberLine] = helper.isMaterialGray(event.target.getComponent(cc.Sprite));
    this.updateString();
    this.typeLine = 3;
  },
  eventBoChon: function eventBoChon() {
    var _this = this;

    mm.audio.playButton();
    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), true);
      return false;
    })).then(function (result) {
      _this.data = result;
      _this.typeLine = -1;
    });
  },
  eventSelectChan: function eventSelectChan() {
    var _this2 = this;

    mm.audio.playButton();
    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 1);
      return index % 2 != 1;
    })).then(function (result) {
      _this2.data = result;

      _this2.updateString();
    });
    this.typeLine = 2;
  },
  eventSelectLe: function eventSelectLe() {
    var _this3 = this;

    mm.audio.playButton();
    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 0);
      return index % 2 != 0;
    })).then(function (result) {
      _this3.data = result;

      _this3.updateString();
    });
    this.typeLine = 1;
  },
  eventSelectAll: function eventSelectAll(e, select) {
    var _this4 = this;

    mm.audio.playButton();
    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), false);
      return true;
    })).then(function (result) {
      _this4.data = result;

      _this4.updateString();
    });
    this.typeLine = 0;
  },
  updateString: function updateString() {
    var total = this.getTotalLineSelect();
    this.CDV.setNumberLines(total);
  },
  getTotalLineSelect: function getTotalLineSelect() {
    var total = 0;

    for (var i = 1; i < this.data.length; i++) {
      if (this.data[i]) total++;
    }

    return total;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL21pbmlwb2tlci9NaW5pUG9rZXJMaW5lLmpzIl0sIm5hbWVzIjpbImhlbHBlciIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsIm5vZGVMaW5lIiwiTm9kZSIsInR5cGVMaW5lIiwiaW5pdCIsIm9iaiIsIkNEViIsImV2ZW50U2VsZWN0QWxsIiwiZXZlbnRPcGVuIiwibW0iLCJhdWRpbyIsInBsYXlCdXR0b24iLCJub2RlIiwiYWN0aXZlIiwiZXZlbnRDbG9zZSIsInRvdGFsIiwiZ2V0VG90YWxMaW5lU2VsZWN0IiwiYWRkTm90aWNlIiwiZXZlbnRTZWxlY3QiLCJldmVudCIsIm51bWJlclN0ciIsIm51bWJlckxpbmUiLCJwYXJzZUludCIsInNldE1hdGVyaWFsR3JheSIsInRhcmdldCIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsImlzTWF0ZXJpYWxHcmF5IiwiZGF0YSIsInVwZGF0ZVN0cmluZyIsImV2ZW50Qm9DaG9uIiwiUHJvbWlzZSIsImFsbCIsImNoaWxkcmVuIiwibWFwIiwibGluZSIsImluZGV4IiwidGhlbiIsInJlc3VsdCIsImV2ZW50U2VsZWN0Q2hhbiIsImV2ZW50U2VsZWN0TGUiLCJlIiwic2VsZWN0Iiwic2V0TnVtYmVyTGluZXMiLCJpIiwibGVuZ3RoIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUNBLElBQUlBLE1BQU0sR0FBR0MsT0FBTyxDQUFDLFFBQUQsQ0FBcEI7O0FBRUFDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxTQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxRQUFRLEVBQUlKLEVBQUUsQ0FBQ0ssSUFEUDtBQUVSQyxJQUFBQSxRQUFRLEVBQUU7QUFGRixHQUhQO0FBT0xDLEVBQUFBLElBQUksRUFBRSxjQUFTQyxHQUFULEVBQWE7QUFDZixTQUFLQyxHQUFMLEdBQVdELEdBQVg7QUFD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Q0FBWixFQUlLVyxJQUpMLENBSVUsVUFBQUMsTUFBTSxFQUFJO0FBQ1osTUFBQSxNQUFJLENBQUNWLElBQUwsR0FBWVUsTUFBWjs7QUFDQSxNQUFBLE1BQUksQ0FBQ1QsWUFBTDtBQUNILEtBUEw7QUFRQSxTQUFLMUIsUUFBTCxHQUFnQixDQUFoQjtBQUNILEdBN0VJO0FBOEVMMEIsRUFBQUEsWUFBWSxFQUFFLHdCQUFZO0FBQ3RCLFFBQUlkLEtBQUssR0FBRyxLQUFLQyxrQkFBTCxFQUFaO0FBQ0EsU0FBS1YsR0FBTCxDQUFTcUMsY0FBVCxDQUF3QjVCLEtBQXhCO0FBQ0gsR0FqRkk7QUFrRkxDLEVBQUFBLGtCQUFrQixFQUFFLDhCQUFZO0FBQzVCLFFBQUlELEtBQUssR0FBRyxDQUFaOztBQUNBLFNBQUssSUFBSTZCLENBQUMsR0FBQyxDQUFYLEVBQWNBLENBQUMsR0FBRSxLQUFLaEIsSUFBTCxDQUFVaUIsTUFBM0IsRUFBbUNELENBQUMsRUFBcEMsRUFBdUM7QUFDbkMsVUFBSSxLQUFLaEIsSUFBTCxDQUFVZ0IsQ0FBVixDQUFKLEVBQ0k3QixLQUFLO0FBQ1o7O0FBQ0QsV0FBT0EsS0FBUDtBQUNIO0FBekZJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGhlbHBlciA9IHJlcXVpcmUoJ0hlbHBlcicpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBub2RlTGluZTogICBjYy5Ob2RlLFxuICAgICAgICB0eXBlTGluZTogMFxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgdGhpcy5DRFYgPSBvYmo7XG4gICAgICAgIHRoaXMuZXZlbnRTZWxlY3RBbGwoKTtcbiAgICB9LFxuICAgIGV2ZW50T3BlbjogZnVuY3Rpb24oKXtcbiAgICAgICAgbW0uYXVkaW8ucGxheUJ1dHRvbigpO1xuICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICB9LFxuICAgIGV2ZW50Q2xvc2U6IGZ1bmN0aW9uKCl7XG4gICAgICAgIG1tLmF1ZGlvLnBsYXlCdXR0b24oKTtcbiAgICAgICAgbGV0IHRvdGFsID0gdGhpcy5nZXRUb3RhbExpbmVTZWxlY3QoKTtcbiAgICAgICAgaWYgKHRoaXMubm9kZS5hY3RpdmUgJiYgdG90YWwgPCAxKSB7XG4gICAgICAgICAgICB0aGlzLkNEVi5hZGROb3RpY2UoJ0No4buNbiDDrXQgbmjhuqV0IDEgZMOybmcnKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICB0aGlzLm5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGV2ZW50U2VsZWN0OiBmdW5jdGlvbihldmVudCwgbnVtYmVyU3RyKSB7XG4gICAgICAgIG1tLmF1ZGlvLnBsYXlCdXR0b24oKTtcbiAgICAgICAgbGV0IG51bWJlckxpbmUgPSBwYXJzZUludChudW1iZXJTdHIpO1xuICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgaGVscGVyLmlzTWF0ZXJpYWxHcmF5KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSkpO1xuICAgICAgICB0aGlzLmRhdGFbbnVtYmVyTGluZV0gPSBoZWxwZXIuaXNNYXRlcmlhbEdyYXkoZXZlbnQudGFyZ2V0LmdldENvbXBvbmVudChjYy5TcHJpdGUpKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdHJpbmcoKTtcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDM7XG4gICAgfSxcbiAgICBldmVudEJvQ2hvbjogZnVuY3Rpb24oKXtcbiAgICAgICAgbW0uYXVkaW8ucGxheUJ1dHRvbigpO1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLm5vZGVMaW5lLmNoaWxkcmVuLm1hcChmdW5jdGlvbihsaW5lLCBpbmRleCl7XG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIHRydWUpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KSkudGhlbihyZXN1bHQ9PntcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgIHRoaXMudHlwZUxpbmUgPSAtMTtcbiAgICAgICAgfSk7XG4gICAgfSxcbiAgICBldmVudFNlbGVjdENoYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICBtbS5hdWRpby5wbGF5QnV0dG9uKCk7XG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubm9kZUxpbmUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGxpbmUsIGluZGV4KXtcbiAgICAgICAgICAgIGhlbHBlci5zZXRNYXRlcmlhbEdyYXkobGluZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgaW5kZXglMiA9PTEpO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4JTIgIT0xO1xuICAgICAgICB9KSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDI7XG4gICAgfSxcbiAgICBldmVudFNlbGVjdExlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgbW0uYXVkaW8ucGxheUJ1dHRvbigpO1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLm5vZGVMaW5lLmNoaWxkcmVuLm1hcChmdW5jdGlvbihsaW5lLCBpbmRleCl7XG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGluZGV4JTIgPT0wKTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleCUyICE9IDA7XG4gICAgICAgIH0pKVxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSByZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHJpbmcoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB0aGlzLnR5cGVMaW5lID0gMTtcbiAgICB9LFxuICAgIGV2ZW50U2VsZWN0QWxsOiBmdW5jdGlvbihlLCBzZWxlY3QpIHtcbiAgICAgICAgbW0uYXVkaW8ucGxheUJ1dHRvbigpO1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLm5vZGVMaW5lLmNoaWxkcmVuLm1hcChmdW5jdGlvbihsaW5lLCBpbmRleCl7XG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDA7XG4gICAgfSxcbiAgICB1cGRhdGVTdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHRvdGFsID0gdGhpcy5nZXRUb3RhbExpbmVTZWxlY3QoKTtcbiAgICAgICAgdGhpcy5DRFYuc2V0TnVtYmVyTGluZXModG90YWwpO1xuICAgIH0sXG4gICAgZ2V0VG90YWxMaW5lU2VsZWN0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGxldCB0b3RhbCA9IDA7XG4gICAgICAgIGZvciAobGV0IGk9MTsgaTwgdGhpcy5kYXRhLmxlbmd0aDsgaSsrKXtcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0pXG4gICAgICAgICAgICAgICAgdG90YWwrKztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdG90YWw7XG4gICAgfVxufSk7XG4iXX0=