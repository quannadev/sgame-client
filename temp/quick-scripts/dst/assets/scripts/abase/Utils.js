
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/abase/Utils.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '06278nBc6dA1q2o+6DwImvI', 'Utils');
// scripts/abase/Utils.js

"use strict";

var Utils = {};

Utils.loadRes = function (sprite, url, cb) {
  cc.loader.loadRes(url, cc.SpriteFrame, function (err, spriteFrame) {
    if (err) {
      console.log(err);
      return;
    }

    if (cc.isValid(sprite)) {
      sprite.spriteFrame = spriteFrame;
      sprite.node.active = true;
    } else {
      console.log('Loi sprite');
    }

    if (cb) cb();
  });
};

Utils.addDotToNumber = function (value) {
  if (value === undefined) {
    return "";
  }

  var sub = "";

  if (value < 0) {
    sub = "-";
    value = Math.abs(value);
  }

  if (typeof value === "number") value = value.toFixed(0);
  return sub + value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
};

Utils.formatCurrency = function (money) {
  if (money <= 0) return 0;

  if (money >= 1000 && money < Math.pow(10, 6)) {
    money = money / Math.pow(10, 3);
    return money.toFixed(0) + "K";
  } else if (money >= Math.pow(10, 6) && money < Math.pow(10, 9)) {
    money = Math.floor(money / Math.pow(10, 4)) / 100;
    return money.toFixed(1) + "M";
  } else if (money >= Math.pow(10, 9) && money < Math.pow(10, 12)) {
    money = Math.floor(money / Math.pow(10, 7)) / 100;
    return money.toFixed(1) + "B";
  } else if (money >= Math.pow(10, 12) && money <= Math.pow(10, 15)) {
    money = Math.floor(money / Math.pow(10, 10)) / 100;
    return money.toFixed(1) + "Q";
  } else if (money >= Math.pow(10, 15)) {
    money = Math.floor(money / Math.pow(10, 13)) / 100;
    return money.toFixed(1) + "~~";
  }

  return Utils.addDotToNumber(money);
};

Utils.formatNumber = function (number, point) {
  var numberPoint = Math.pow(10, point);
  number = number / numberPoint;
  number = Math.floor(number);
  number = number * numberPoint;
  return number;
};

Utils.reFormatDisplayTime = function (time) {
  var dateHour = time.split(" ");
  if (dateHour.length != 2) return time; //Day

  var formatDay = dateHour[0].split("-");
  var newDay = formatDay[2] + "/" + formatDay[1] + "/" + formatDay[0]; //Hour

  formatDay = dateHour[1].split(".");
  var newHour = formatDay[0];
  return newHour + " " + newDay;
};

Utils.formatTimeToString = function (time) {
  var minute = Math.floor(time / 60);
  var seconds = Math.floor(time % 60);

  if (minute < 10) {
    minute = "0" + minute;
  }

  if (seconds < 10) seconds = "0" + seconds;
  return minute + ":" + seconds;
};

Utils.convertTimeStampToDate = function (timeStamp) {
  var date = new Date(timeStamp);
  var year = date.getFullYear();
  var month = date.getMonth();
  var day = date.getDay();
  var hours = date.getHours();
  var minutes = "0" + date.getMinutes();
  var seconds = "0" + date.getSeconds(); // return hours + ':' + minutes.substr(-2) + ':' + seconds.substr(-2);

  return day + "/" + month + "/" + year;
};

Utils.convertTimeStampToTime = function (timeStamp, language) {
  //+ " " + Language.LANGUAGE()["txt_minute"];
  var date = new Date(timeStamp);
  var year = date.getFullYear();
  var month = date.getMonth();
  var day = date.getDay();
  var hours = date.getHours();
  var minutes = date.getMinutes();
  var seconds = date.getSeconds();
  return day + "/" + month + "/" + year;
};

Utils.convertDateToTimeStample = function (myDate) {
  myDate = myDate.split("-");
  if (myDate.length != 3) return null;
  var newDate = myDate[1] + "/" + myDate[0] + "/" + myDate[2];
  var time = new Date(newDate).getTime();
  return time;
};

Utils.formatText = function (text, maxLength) {
  if (maxLength === undefined) maxLength = 10;
  var pre = "";
  if (text.length >= maxLength) pre = "..";
  text = text.substring(0, maxLength - pre.length);
  text += pre;
  return text;
};

Utils.numberTo = function (obj, start, end, duration, currency, cb) {
  if (currency === void 0) {
    currency = false;
  }

  clearInterval(obj.timer);
  var range = end - start;
  if (range == 0) range = 1;
  var minTimer = 10;
  var stepTime = Math.abs(Math.floor(duration / range));
  stepTime = Math.max(stepTime, minTimer);
  var startTime = new Date().getTime();
  var endTime = startTime + duration;
  obj.timer = setInterval(function () {
    if (!!obj.node) {
      var now = new Date().getTime();
      var remaining = Math.max((endTime - now) / duration, 0);
      var value = end - remaining * range >> 0;
      var txt = currency ? numberWithCommas(value) : value;
      obj.string = txt + " ";

      if (value == end) {
        if (cb) cb();
        clearInterval(obj.timer);
      }
    } else clearInterval(obj.timer);
  }, stepTime);
};

Utils.v2Distance = function (v1, v2) {
  return Math.sqrt(Math.pow(v2.x - v1.x, 2) + Math.pow(v2.y - v1.y, 2));
};

Utils.v2Degrees = function (v1, v2) {
  return Math.atan2(v2.y - v1.y, v2.x - v1.x) * 180 / Math.PI;
};

Utils.validateString = function (name) {
  var letters = /^[A-Za-z0-9]+$/;
  return name.match(letters);
};

function numberWithCommas(number) {
  if (number) {
    var result = (number = parseInt(number)).toString().split(".");
    return result[0] = result[0].replace(/\B(?=(\d{3})+(?!\d))/g, "."), result.join(".");
  }

  return "0";
}

window.Utils = Utils;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL2FiYXNlL1V0aWxzLmpzIl0sIm5hbWVzIjpbIlV0aWxzIiwibG9hZFJlcyIsInNwcml0ZSIsInVybCIsImNiIiwiY2MiLCJsb2FkZXIiLCJTcHJpdGVGcmFtZSIsImVyciIsInNwcml0ZUZyYW1lIiwiY29uc29sZSIsImxvZyIsImlzVmFsaWQiLCJub2RlIiwiYWN0aXZlIiwiYWRkRG90VG9OdW1iZXIiLCJ2YWx1ZSIsInVuZGVmaW5lZCIsInN1YiIsIk1hdGgiLCJhYnMiLCJ0b0ZpeGVkIiwidG9TdHJpbmciLCJyZXBsYWNlIiwiZm9ybWF0Q3VycmVuY3kiLCJtb25leSIsInBvdyIsImZsb29yIiwiZm9ybWF0TnVtYmVyIiwibnVtYmVyIiwicG9pbnQiLCJudW1iZXJQb2ludCIsInJlRm9ybWF0RGlzcGxheVRpbWUiLCJ0aW1lIiwiZGF0ZUhvdXIiLCJzcGxpdCIsImxlbmd0aCIsImZvcm1hdERheSIsIm5ld0RheSIsIm5ld0hvdXIiLCJmb3JtYXRUaW1lVG9TdHJpbmciLCJtaW51dGUiLCJzZWNvbmRzIiwiY29udmVydFRpbWVTdGFtcFRvRGF0ZSIsInRpbWVTdGFtcCIsImRhdGUiLCJEYXRlIiwieWVhciIsImdldEZ1bGxZZWFyIiwibW9udGgiLCJnZXRNb250aCIsImRheSIsImdldERheSIsImhvdXJzIiwiZ2V0SG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsImdldFNlY29uZHMiLCJjb252ZXJ0VGltZVN0YW1wVG9UaW1lIiwibGFuZ3VhZ2UiLCJjb252ZXJ0RGF0ZVRvVGltZVN0YW1wbGUiLCJteURhdGUiLCJuZXdEYXRlIiwiZ2V0VGltZSIsImZvcm1hdFRleHQiLCJ0ZXh0IiwibWF4TGVuZ3RoIiwicHJlIiwic3Vic3RyaW5nIiwibnVtYmVyVG8iLCJvYmoiLCJzdGFydCIsImVuZCIsImR1cmF0aW9uIiwiY3VycmVuY3kiLCJjbGVhckludGVydmFsIiwidGltZXIiLCJyYW5nZSIsIm1pblRpbWVyIiwic3RlcFRpbWUiLCJtYXgiLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwic2V0SW50ZXJ2YWwiLCJub3ciLCJyZW1haW5pbmciLCJ0eHQiLCJudW1iZXJXaXRoQ29tbWFzIiwic3RyaW5nIiwidjJEaXN0YW5jZSIsInYxIiwidjIiLCJzcXJ0IiwieCIsInkiLCJ2MkRlZ3JlZXMiLCJhdGFuMiIsIlBJIiwidmFsaWRhdGVTdHJpbmciLCJuYW1lIiwibGV0dGVycyIsIm1hdGNoIiwicmVzdWx0IiwicGFyc2VJbnQiLCJqb2luIiwid2luZG93Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLEtBQUssR0FBRyxFQUFaOztBQUNBQSxLQUFLLENBQUNDLE9BQU4sR0FBZ0IsVUFBU0MsTUFBVCxFQUFpQkMsR0FBakIsRUFBc0JDLEVBQXRCLEVBQXlCO0FBQ3JDQyxFQUFBQSxFQUFFLENBQUNDLE1BQUgsQ0FBVUwsT0FBVixDQUFrQkUsR0FBbEIsRUFBdUJFLEVBQUUsQ0FBQ0UsV0FBMUIsRUFBdUMsVUFBVUMsR0FBVixFQUFlQyxXQUFmLEVBQTRCO0FBQy9ELFFBQUdELEdBQUgsRUFBTztBQUNIRSxNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUgsR0FBWjtBQUNBO0FBQ0g7O0FBQ0QsUUFBR0gsRUFBRSxDQUFDTyxPQUFILENBQVdWLE1BQVgsQ0FBSCxFQUFzQjtBQUNsQkEsTUFBQUEsTUFBTSxDQUFDTyxXQUFQLEdBQXFCQSxXQUFyQjtBQUNBUCxNQUFBQSxNQUFNLENBQUNXLElBQVAsQ0FBWUMsTUFBWixHQUFxQixJQUFyQjtBQUNILEtBSEQsTUFHTTtBQUNGSixNQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWSxZQUFaO0FBQ0g7O0FBQ0QsUUFBR1AsRUFBSCxFQUNJQSxFQUFFO0FBQ1QsR0FiRDtBQWNILENBZkQ7O0FBZ0JBSixLQUFLLENBQUNlLGNBQU4sR0FBdUIsVUFBU0MsS0FBVCxFQUFnQjtBQUNuQyxNQUFHQSxLQUFLLEtBQUtDLFNBQWIsRUFBdUI7QUFDbkIsV0FBTyxFQUFQO0FBQ0g7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QyxHQUE2QzFFLElBQUksQ0FBQzhFLEVBQXpEO0FBQ0gsQ0FGRDs7QUFHQWpHLEtBQUssQ0FBQ2tHLGNBQU4sR0FBdUIsVUFBVUMsSUFBVixFQUFnQjtBQUNuQyxNQUFJQyxPQUFPLEdBQUcsZ0JBQWQ7QUFDQSxTQUFPRCxJQUFJLENBQUNFLEtBQUwsQ0FBV0QsT0FBWCxDQUFQO0FBQ0gsQ0FIRDs7QUFJQSxTQUFTYixnQkFBVCxDQUEwQjFELE1BQTFCLEVBQWtDO0FBQzlCLE1BQUlBLE1BQUosRUFBWTtBQUNSLFFBQUl5RSxNQUFNLEdBQUcsQ0FBQ3pFLE1BQU0sR0FBRzBFLFFBQVEsQ0FBQzFFLE1BQUQsQ0FBbEIsRUFBNEJQLFFBQTVCLEdBQXVDYSxLQUF2QyxDQUE2QyxHQUE3QyxDQUFiO0FBQ0EsV0FBT21FLE1BQU0sQ0FBQyxDQUFELENBQU4sR0FBWUEsTUFBTSxDQUFDLENBQUQsQ0FBTixDQUFVL0UsT0FBVixDQUFrQix1QkFBbEIsRUFBMkMsR0FBM0MsQ0FBWixFQUNIK0UsTUFBTSxDQUFDRSxJQUFQLENBQVksR0FBWixDQURKO0FBRUg7O0FBQ0QsU0FBTyxHQUFQO0FBQ0g7O0FBQ0RDLE1BQU0sQ0FBQ3pHLEtBQVAsR0FBZUEsS0FBZiIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFV0aWxzID0ge307XG5VdGlscy5sb2FkUmVzID0gZnVuY3Rpb24oc3ByaXRlLCB1cmwsIGNiKXtcbiAgICBjYy5sb2FkZXIubG9hZFJlcyh1cmwsIGNjLlNwcml0ZUZyYW1lLCBmdW5jdGlvbiAoZXJyLCBzcHJpdGVGcmFtZSkge1xuICAgICAgICBpZihlcnIpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZihjYy5pc1ZhbGlkKHNwcml0ZSkpe1xuICAgICAgICAgICAgc3ByaXRlLnNwcml0ZUZyYW1lID0gc3ByaXRlRnJhbWU7XG4gICAgICAgICAgICBzcHJpdGUubm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnTG9pIHNwcml0ZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmKGNiKVxuICAgICAgICAgICAgY2IoKTtcbiAgICB9KVxufTtcblV0aWxzLmFkZERvdFRvTnVtYmVyID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICBpZih2YWx1ZSA9PT0gdW5kZWZpbmVkKXtcbiAgICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfVxuICAgIGxldCBzdWIgPSBcIlwiO1xuICAgIGlmKHZhbHVlIDwgMCl7XG4gICAgICAgIHN1YiA9IFwiLVwiO1xuICAgICAgICB2YWx1ZSA9IE1hdGguYWJzKHZhbHVlKTtcbiAgICB9XG4gICAgaWYodHlwZW9mIHZhbHVlID09PSBcIm51bWJlclwiKVxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnRvRml4ZWQoMCk7XG4gICAgcmV0dXJuIHN1Yit2YWx1ZS50b1N0cmluZygpLnJlcGxhY2UoL1xcQig/PShcXGR7M30pKyg/IVxcZCkpL2csIFwiLlwiKTtcbn1cblV0aWxzLmZvcm1hdEN1cnJlbmN5ID0gZnVuY3Rpb24gKG1vbmV5KVxue1xuICAgIGlmKG1vbmV5IDw9IDApXG4gICAgICAgIHJldHVybiAwO1xuICAgIGlmKG1vbmV5ID49IDEwMDAgJiYgbW9uZXkgPCBNYXRoLnBvdygxMCwgNikpe1xuICAgICAgICBtb25leSA9IG1vbmV5L01hdGgucG93KDEwLDMpO1xuICAgICAgICByZXR1cm4gbW9uZXkudG9GaXhlZCgwKSArIFwiS1wiO1xuICAgIH1lbHNlICBpZihtb25leSA+PSBNYXRoLnBvdygxMCw2KSAmJiBtb25leSA8IE1hdGgucG93KDEwLDkpKXtcbiAgICAgICAgbW9uZXkgPSBNYXRoLmZsb29yKG1vbmV5L01hdGgucG93KDEwLDQpKS8xMDA7XG4gICAgICAgIHJldHVybiBtb25leS50b0ZpeGVkKDEpICsgXCJNXCI7XG4gICAgfWVsc2UgaWYobW9uZXkgPj0gTWF0aC5wb3coMTAsOSkgJiYgbW9uZXkgPCBNYXRoLnBvdygxMCwxMikpe1xuICAgICAgICBtb25leSA9IE1hdGguZmxvb3IobW9uZXkvTWF0aC5wb3coMTAsNykpLzEwMDtcbiAgICAgICAgcmV0dXJuIG1vbmV5LnRvRml4ZWQoMSkgKyBcIkJcIjtcbiAgICB9ZWxzZSBpZihtb25leSA+PSBNYXRoLnBvdygxMCwxMikgJiYgbW9uZXkgPD0gTWF0aC5wb3coMTAsMTUpKXtcbiAgICAgICAgbW9uZXkgPSBNYXRoLmZsb29yKG1vbmV5L01hdGgucG93KDEwLDEwKSkvMTAwO1xuICAgICAgICByZXR1cm4gIG1vbmV5LnRvRml4ZWQoMSkgKyBcIlFcIjtcbiAgICB9ZWxzZSBpZihtb25leSA+PSBNYXRoLnBvdygxMCwgMTUpKXtcbiAgICAgICAgbW9uZXkgPSBNYXRoLmZsb29yKG1vbmV5L01hdGgucG93KDEwLDEzKSkvMTAwO1xuICAgICAgICByZXR1cm4gbW9uZXkudG9GaXhlZCgxKStcIn5+XCI7XG4gICAgfVxuICAgIHJldHVybiBVdGlscy5hZGREb3RUb051bWJlcihtb25leSk7XG59O1xuVXRpbHMuZm9ybWF0TnVtYmVyPSBmdW5jdGlvbiAobnVtYmVyLCBwb2ludCkge1xuICAgIGxldCBudW1iZXJQb2ludCA9IE1hdGgucG93KDEwLCBwb2ludCk7XG4gICAgbnVtYmVyID0gbnVtYmVyL251bWJlclBvaW50O1xuICAgIG51bWJlciA9IE1hdGguZmxvb3IobnVtYmVyKTtcbiAgICBudW1iZXIgPSBudW1iZXIqbnVtYmVyUG9pbnQ7XG4gICAgcmV0dXJuIG51bWJlcjtcbn07XG5VdGlscy5yZUZvcm1hdERpc3BsYXlUaW1lPSBmdW5jdGlvbiAodGltZSkge1xuICAgIGxldCBkYXRlSG91ciA9IHRpbWUuc3BsaXQoXCIgXCIpO1xuICAgIGlmKGRhdGVIb3VyLmxlbmd0aCAhPSAyKVxuICAgICAgICByZXR1cm4gdGltZTtcbiAgICAvL0RheVxuICAgIGxldCBmb3JtYXREYXkgPSBkYXRlSG91clswXS5zcGxpdChcIi1cIik7XG4gICAgbGV0IG5ld0RheSAgICA9IGZvcm1hdERheVsyXStcIi9cIitmb3JtYXREYXlbMV0rXCIvXCIrZm9ybWF0RGF5WzBdO1xuICAgIC8vSG91clxuICAgIGZvcm1hdERheSAgICAgPSBkYXRlSG91clsxXS5zcGxpdChcIi5cIik7XG4gICAgbGV0IG5ld0hvdXIgICA9IGZvcm1hdERheVswXVxuICAgIHJldHVybiBuZXdIb3VyICsgXCIgXCIrIG5ld0RheTtcbn07XG5VdGlscy5mb3JtYXRUaW1lVG9TdHJpbmcgPSBmdW5jdGlvbih0aW1lKXtcbiAgICBsZXQgbWludXRlID0gTWF0aC5mbG9vcih0aW1lLzYwKTtcbiAgICBsZXQgc2Vjb25kcyA9IE1hdGguZmxvb3IodGltZSU2MCk7XG4gICAgaWYgKG1pbnV0ZSA8IDEwKSB7XG4gICAgICAgIG1pbnV0ZSA9IFwiMFwiK21pbnV0ZTtcbiAgICB9XG4gICAgaWYoc2Vjb25kcyA8IDEwKVxuICAgICAgICBzZWNvbmRzID0gXCIwXCIrc2Vjb25kcztcbiAgICByZXR1cm4gbWludXRlK1wiOlwiK3NlY29uZHM7XG59XG5VdGlscy5jb252ZXJ0VGltZVN0YW1wVG9EYXRlPSBmdW5jdGlvbiAodGltZVN0YW1wKSB7XG4gICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh0aW1lU3RhbXApO1xuICAgIGxldCB5ZWFyID0gZGF0ZS5nZXRGdWxsWWVhcigpO1xuICAgIGxldCBtb250aD0gZGF0ZS5nZXRNb250aCgpO1xuICAgIGxldCBkYXkgID0gZGF0ZS5nZXREYXkoKTtcbiAgICBsZXQgaG91cnMgPSBkYXRlLmdldEhvdXJzKCk7XG4gICAgbGV0IG1pbnV0ZXMgPSBcIjBcIiArIGRhdGUuZ2V0TWludXRlcygpO1xuICAgIGxldCBzZWNvbmRzID0gXCIwXCIgKyBkYXRlLmdldFNlY29uZHMoKTtcbiAgICAvLyByZXR1cm4gaG91cnMgKyAnOicgKyBtaW51dGVzLnN1YnN0cigtMikgKyAnOicgKyBzZWNvbmRzLnN1YnN0cigtMik7XG4gICAgcmV0dXJuIGRheSArIFwiL1wiICsgbW9udGggKyBcIi9cIiArIHllYXI7XG59O1xuVXRpbHMuY29udmVydFRpbWVTdGFtcFRvVGltZT0gZnVuY3Rpb24gKHRpbWVTdGFtcCwgbGFuZ3VhZ2UpIHsvLysgXCIgXCIgKyBMYW5ndWFnZS5MQU5HVUFHRSgpW1widHh0X21pbnV0ZVwiXTtcbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHRpbWVTdGFtcCk7XG4gICAgbGV0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgbGV0IG1vbnRoPSBkYXRlLmdldE1vbnRoKCk7XG4gICAgbGV0IGRheSAgPSBkYXRlLmdldERheSgpO1xuXG4gICAgbGV0IGhvdXJzICAgPSAgIGRhdGUuZ2V0SG91cnMoKTtcbiAgICBsZXQgbWludXRlcyA9ICAgZGF0ZS5nZXRNaW51dGVzKCk7XG4gICAgbGV0IHNlY29uZHMgPSAgIGRhdGUuZ2V0U2Vjb25kcygpO1xuICAgIHJldHVybiBkYXkgKyBcIi9cIiArIG1vbnRoICsgXCIvXCIgKyB5ZWFyO1xufTtcblV0aWxzLmNvbnZlcnREYXRlVG9UaW1lU3RhbXBsZT0gZnVuY3Rpb24gKG15RGF0ZSkge1xuICAgIG15RGF0ZT1teURhdGUuc3BsaXQoXCItXCIpO1xuICAgIGlmKG15RGF0ZS5sZW5ndGggIT0gMylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgbGV0IG5ld0RhdGU9bXlEYXRlWzFdK1wiL1wiK215RGF0ZVswXStcIi9cIitteURhdGVbMl07XG4gICAgbGV0IHRpbWUgPSBuZXcgRGF0ZShuZXdEYXRlKS5nZXRUaW1lKCk7XG4gICAgcmV0dXJuIHRpbWU7XG59O1xuVXRpbHMuZm9ybWF0VGV4dCA9IGZ1bmN0aW9uKHRleHQsIG1heExlbmd0aCkge1xuICAgIGlmIChtYXhMZW5ndGggPT09IHVuZGVmaW5lZClcbiAgICAgICAgbWF4TGVuZ3RoID0gMTA7XG4gICAgbGV0IHByZSA9IFwiXCI7XG4gICAgaWYodGV4dC5sZW5ndGggPj0gbWF4TGVuZ3RoKVxuICAgICAgICBwcmUgPSBcIi4uXCI7XG4gICAgdGV4dCA9IHRleHQuc3Vic3RyaW5nKDAsIG1heExlbmd0aCAtIHByZS5sZW5ndGgpO1xuICAgIHRleHQgKz0gcHJlO1xuICAgIHJldHVybiB0ZXh0O1xufTtcblV0aWxzLm51bWJlclRvID0gZnVuY3Rpb24ob2JqLCBzdGFydCwgZW5kLCBkdXJhdGlvbiwgY3VycmVuY3kgPSBmYWxzZSwgY2Ipe1xuICAgIGNsZWFySW50ZXJ2YWwob2JqLnRpbWVyKTtcbiAgICB2YXIgcmFuZ2UgPSBlbmQgLSBzdGFydDtcbiAgICBpZiAocmFuZ2UgPT0gMClcbiAgICAgICAgcmFuZ2UgPSAxO1xuICAgIHZhciBtaW5UaW1lciA9IDEwO1xuICAgIHZhciBzdGVwVGltZSA9IE1hdGguYWJzKE1hdGguZmxvb3IoZHVyYXRpb24gLyByYW5nZSkpO1xuICAgIHN0ZXBUaW1lID0gTWF0aC5tYXgoc3RlcFRpbWUsIG1pblRpbWVyKTtcbiAgICB2YXIgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgdmFyIGVuZFRpbWUgPSBzdGFydFRpbWUgKyBkdXJhdGlvbjtcblxuICAgIG9iai50aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uKCl7XG4gICAgICAgIGlmICghIW9iai5ub2RlKSB7XG4gICAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgICAgICAgICB2YXIgcmVtYWluaW5nID0gTWF0aC5tYXgoKGVuZFRpbWUgLSBub3cpIC8gZHVyYXRpb24sIDApO1xuICAgICAgICAgICAgdmFyIHZhbHVlID0gKGVuZCAtIChyZW1haW5pbmcgKiByYW5nZSkpPj4wO1xuICAgICAgICAgICAgbGV0IHR4dCA9IGN1cnJlbmN5ID8gbnVtYmVyV2l0aENvbW1hcyh2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgICAgICAgIG9iai5zdHJpbmcgPSB0eHQgKyBcIiBcIjtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PSBlbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoY2IpXG4gICAgICAgICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChvYmoudGltZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZSBjbGVhckludGVydmFsKG9iai50aW1lcik7XG4gICAgfSwgc3RlcFRpbWUpO1xufVxuVXRpbHMudjJEaXN0YW5jZSA9IGZ1bmN0aW9uICh2MSwgdjIpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KHYyLnggLSB2MS54LCAyKSArIE1hdGgucG93KHYyLnkgLSB2MS55LCAyKSk7XG59XG5cblV0aWxzLnYyRGVncmVlcyA9IGZ1bmN0aW9uICh2MSwgdjIpIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMih2Mi55IC0gdjEueSwgdjIueCAtIHYxLngpICogMTgwIC8gTWF0aC5QSTtcbn1cblV0aWxzLnZhbGlkYXRlU3RyaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBsZXQgbGV0dGVycyA9IC9eW0EtWmEtejAtOV0rJC87XG4gICAgcmV0dXJuIG5hbWUubWF0Y2gobGV0dGVycyk7XG59XG5mdW5jdGlvbiBudW1iZXJXaXRoQ29tbWFzKG51bWJlcikge1xuICAgIGlmIChudW1iZXIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IChudW1iZXIgPSBwYXJzZUludChudW1iZXIpKS50b1N0cmluZygpLnNwbGl0KFwiLlwiKTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdFswXSA9IHJlc3VsdFswXS5yZXBsYWNlKC9cXEIoPz0oXFxkezN9KSsoPyFcXGQpKS9nLCBcIi5cIiksXG4gICAgICAgICAgICByZXN1bHQuam9pbihcIi5cIilcbiAgICB9XG4gICAgcmV0dXJuIFwiMFwiXG59XG53aW5kb3cuVXRpbHMgPSBVdGlscztcbiJdfQ==