
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/sieuxe/SieuXeLine.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '01a7eZVmzRE6aWcTpfx9qra', 'SieuXeLine');
// scripts/sieuxe/SieuXeLine.js

"use strict";

var helper = require('Helper');

cc.Class({
  "extends": cc.Component,
  properties: {
    nodeLine: cc.Node,
    typeLine: 0
  },
  init: function init(obj) {
    this.lines = {
      '1': [0, 0, 0],
      '2': [0, 0, 1],
      '3': [0, 0, 2],
      '4': [0, 1, 0],
      '5': [0, 1, 1],
      '6': [0, 1, 2],
      '7': [0, 2, 0],
      '8': [0, 2, 1],
      '9': [0, 2, 2],
      '10': [1, 0, 0],
      '11': [1, 0, 1],
      '12': [1, 0, 2],
      '13': [1, 1, 0],
      '14': [1, 1, 1],
      '15': [1, 1, 2],
      '16': [1, 2, 0],
      '17': [1, 2, 1],
      '18': [1, 2, 2],
      '19': [2, 0, 0],
      '20': [2, 0, 1],
      '21': [2, 0, 2],
      '22': [2, 1, 0],
      '23': [2, 1, 1],
      '24': [2, 1, 2],
      '25': [2, 2, 0],
      '26': [2, 2, 1],
      '27': [2, 2, 2]
    };
    this.SXV = obj;
    this.eventSelectAll();
  },
  eventOpen: function eventOpen() {
    this.node.active = true;
  },
  eventClose: function eventClose() {
    var total = this.getTotalLineSelect();

    if (this.node.active && total < 1) {
      this.SXV.addNotice('Chọn ít nhất 1 dòng');
    } else {
      this.node.active = false;
    }
  },
  eventSelect: function eventSelect(event, numberStr) {
    var numberLine = parseInt(numberStr);
    helper.setMaterialGray(event.target.getComponent(cc.Sprite), helper.isMaterialGray(event.target.getComponent(cc.Sprite)));
    this.data[numberLine] = helper.isMaterialGray(event.target.getComponent(cc.Sprite));
    this.updateString();
    this.typeLine = 3;
  },
  eventBoChon: function eventBoChon() {
    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), true);
      return false;
    }));
    this.typeLine = -1;
    this.updateString();
  },
  eventSelectChan: function eventSelectChan() {
    var _this = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 1);
      return index % 2 != 1;
    })).then(function (result) {
      _this.data = result;

      _this.updateString();
    });
    this.typeLine = 2;
  },
  eventSelectLe: function eventSelectLe() {
    var _this2 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 0);
      return index % 2 != 0;
    })).then(function (result) {
      _this2.data = result;

      _this2.updateString();
    });
    this.typeLine = 1;
  },
  eventSelectAll: function eventSelectAll(e, select) {
    var _this3 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), false);
      return true;
    })).then(function (result) {
      _this3.data = result;

      _this3.updateString();
    });
    this.typeLine = 0;
  },
  updateString: function updateString() {
    var total = this.getTotalLineSelect();
    this.SXV.setNumberLines(total);
    this.SXV.setNumberStake(total);
  },
  getTotalLineSelect: function getTotalLineSelect() {
    var total = 0;

    for (var i = 1; i < this.data.length; i++) {
      if (this.data[i]) total++;
    }

    return total;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL3NpZXV4ZS9TaWV1WGVMaW5lLmpzIl0sIm5hbWVzIjpbImhlbHBlciIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsIm5vZGVMaW5lIiwiTm9kZSIsInR5cGVMaW5lIiwiaW5pdCIsIm9iaiIsImxpbmVzIiwiU1hWIiwiZXZlbnRTZWxlY3RBbGwiLCJldmVudE9wZW4iLCJub2RlIiwiYWN0aXZlIiwiZXZlbnRDbG9zZSIsInRvdGFsIiwiZ2V0VG90YWxMaW5lU2VsZWN0IiwiYWRkTm90aWNlIiwiZXZlbnRTZWxlY3QiLCJldmVudCIsIm51bWJlclN0ciIsIm51bWJlckxpbmUiLCJwYXJzZUludCIsInNldE1hdGVyaWFsR3JheSIsInRhcmdldCIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsImlzTWF0ZXJpYWxHcmF5IiwiZGF0YSIsInVwZGF0ZVN0cmluZyIsImV2ZW50Qm9DaG9uIiwiUHJvbWlzZSIsImFsbCIsImNoaWxkcmVuIiwibWFwIiwibGluZSIsImluZGV4IiwiZXZlbnRTZWxlY3RDaGFuIiwidGhlbiIsInJlc3VsdCIsImV2ZW50U2VsZWN0TGUiLCJlIiwic2VsZWN0Iiwic2V0TnVtYmVyTGluZXMiLCJzZXROdW1iZXJTdGFrZSIsImkiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUFBSUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFFBQVEsRUFBSUosRUFBRSxDQUFDSyxJQURQO0FBRVJDLElBQUFBLFFBQVEsRUFBRTtBQUZGLEdBSFA7QUFPTEMsRUFBQUEsSUFBSSxFQUFFLGNBQVNDLEdBQVQsRUFBYTtBQUNmLFNBQUtDLEtBQUwsR0FBYTtBQUNULFdBQU0sQ0FBQyxD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SFcsQ0FBWixFQUlLWSxJQUpMLENBSVUsVUFBQUMsTUFBTSxFQUFJO0FBQ1osTUFBQSxNQUFJLENBQUNYLElBQUwsR0FBWVcsTUFBWjs7QUFDQSxNQUFBLE1BQUksQ0FBQ1YsWUFBTDtBQUNILEtBUEw7QUFRQSxTQUFLeEIsUUFBTCxHQUFnQixDQUFoQjtBQUNILEdBbEdJO0FBbUdMd0IsRUFBQUEsWUFBWSxFQUFFLHdCQUFZO0FBQ3RCLFFBQUlkLEtBQUssR0FBRyxLQUFLQyxrQkFBTCxFQUFaO0FBQ0EsU0FBS1AsR0FBTCxDQUFTa0MsY0FBVCxDQUF3QjVCLEtBQXhCO0FBQ0EsU0FBS04sR0FBTCxDQUFTbUMsY0FBVCxDQUF3QjdCLEtBQXhCO0FBQ0gsR0F2R0k7QUF3R0xDLEVBQUFBLGtCQUFrQixFQUFFLDhCQUFZO0FBQzVCLFFBQUlELEtBQUssR0FBRyxDQUFaOztBQUNBLFNBQUssSUFBSThCLENBQUMsR0FBQyxDQUFYLEVBQWNBLENBQUMsR0FBRSxLQUFLakIsSUFBTCxDQUFVa0IsTUFBM0IsRUFBbUNELENBQUMsRUFBcEMsRUFBdUM7QUFDbkMsVUFBSSxLQUFLakIsSUFBTCxDQUFVaUIsQ0FBVixDQUFKLEVBQ0k5QixLQUFLO0FBQ1o7O0FBQ0QsV0FBT0EsS0FBUDtBQUNIO0FBL0dJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxudmFyIGhlbHBlciA9IHJlcXVpcmUoJ0hlbHBlcicpO1xuXG5jYy5DbGFzcyh7XG4gICAgZXh0ZW5kczogY2MuQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBub2RlTGluZTogICBjYy5Ob2RlLFxuICAgICAgICB0eXBlTGluZTogMFxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24ob2JqKXtcbiAgICAgICAgdGhpcy5saW5lcyA9IHtcbiAgICAgICAgICAgICcxJzogIFswLDAsMF0sXG4gICAgICAgICAgICAnMic6ICBbMCwwLDFdLFxuICAgICAgICAgICAgJzMnOiAgWzAsMCwyXSxcbiAgICAgICAgICAgICc0JzogIFswLDEsMF0sXG4gICAgICAgICAgICAnNSc6ICBbMCwxLDFdLFxuICAgICAgICAgICAgJzYnOiAgWzAsMSwyXSxcbiAgICAgICAgICAgICc3JzogIFswLDIsMF0sXG4gICAgICAgICAgICAnOCc6ICBbMCwyLDFdLFxuICAgICAgICAgICAgJzknOiAgWzAsMiwyXSxcbiAgICAgICAgICAgICcxMCc6ICBbMSwwLDBdLFxuICAgICAgICAgICAgJzExJzogIFsxLDAsMV0sXG4gICAgICAgICAgICAnMTInOiAgWzEsMCwyXSxcbiAgICAgICAgICAgICcxMyc6ICBbMSwxLDBdLFxuICAgICAgICAgICAgJzE0JzogIFsxLDEsMV0sXG4gICAgICAgICAgICAnMTUnOiAgWzEsMSwyXSxcbiAgICAgICAgICAgICcxNic6ICBbMSwyLDBdLFxuICAgICAgICAgICAgJzE3JzogIFsxLDIsMV0sXG4gICAgICAgICAgICAnMTgnOiAgWzEsMiwyXSxcbiAgICAgICAgICAgICcxOSc6ICBbMiwwLDBdLFxuICAgICAgICAgICAgJzIwJzogIFsyLDAsMV0sXG4gICAgICAgICAgICAnMjEnOiAgWzIsMCwyXSxcbiAgICAgICAgICAgICcyMic6ICBbMiwxLDBdLFxuICAgICAgICAgICAgJzIzJzogIFsyLDEsMV0sXG4gICAgICAgICAgICAnMjQnOiAgWzIsMSwyXSxcbiAgICAgICAgICAgICcyNSc6ICBbMiwyLDBdLFxuICAgICAgICAgICAgJzI2JzogIFsyLDIsMV0sXG4gICAgICAgICAgICAnMjcnOiAgWzIsMiwyXSxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5TWFYgPSBvYmo7XG4gICAgICAgIHRoaXMuZXZlbnRTZWxlY3RBbGwoKTtcbiAgICB9LFxuICAgIGV2ZW50T3BlbjogZnVuY3Rpb24oKXtcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XG4gICAgfSxcbiAgICBldmVudENsb3NlOiBmdW5jdGlvbigpe1xuICAgICAgICBsZXQgdG90YWwgPSB0aGlzLmdldFRvdGFsTGluZVNlbGVjdCgpO1xuICAgICAgICBpZiAodGhpcy5ub2RlLmFjdGl2ZSAmJiB0b3RhbCA8IDEpIHtcbiAgICAgICAgICAgIHRoaXMuU1hWLmFkZE5vdGljZSgnQ2jhu41uIMOtdCBuaOG6pXQgMSBkw7JuZycpO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgZXZlbnRTZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCBudW1iZXJTdHIpIHtcbiAgICAgICAgbGV0IG51bWJlckxpbmUgPSBwYXJzZUludChudW1iZXJTdHIpO1xuICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgaGVscGVyLmlzTWF0ZXJpYWxHcmF5KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSkpO1xuICAgICAgICB0aGlzLmRhdGFbbnVtYmVyTGluZV0gPSBoZWxwZXIuaXNNYXRlcmlhbEdyYXkoZXZlbnQudGFyZ2V0LmdldENvbXBvbmVudChjYy5TcHJpdGUpKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdHJpbmcoKTtcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDM7XG4gICAgfSxcbiAgICBldmVudEJvQ2hvbjogZnVuY3Rpb24oKXtcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5ub2RlTGluZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24obGluZSwgaW5kZXgpe1xuICAgICAgICAgICAgaGVscGVyLnNldE1hdGVyaWFsR3JheShsaW5lLmdldENvbXBvbmVudChjYy5TcHJpdGUpLCB0cnVlKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSkpO1xuICAgICAgICB0aGlzLnR5cGVMaW5lID0gLTE7XG4gICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XG4gICAgfSxcbiAgICBldmVudFNlbGVjdENoYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLm5vZGVMaW5lLmNoaWxkcmVuLm1hcChmdW5jdGlvbihsaW5lLCBpbmRleCl7XG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGluZGV4JTIgPT0xKTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleCUyICE9MTtcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHlwZUxpbmUgPSAyO1xuICAgIH0sXG4gICAgZXZlbnRTZWxlY3RMZTogZnVuY3Rpb24oKSB7XG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubm9kZUxpbmUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGxpbmUsIGluZGV4KXtcbiAgICAgICAgICAgIGhlbHBlci5zZXRNYXRlcmlhbEdyYXkobGluZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgaW5kZXglMiA9PTApO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4JTIgIT0gMDtcbiAgICAgICAgfSkpXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0cmluZygpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIHRoaXMudHlwZUxpbmUgPSAxO1xuICAgIH0sXG4gICAgZXZlbnRTZWxlY3RBbGw6IGZ1bmN0aW9uKGUsIHNlbGVjdCkge1xuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLm5vZGVMaW5lLmNoaWxkcmVuLm1hcChmdW5jdGlvbihsaW5lLCBpbmRleCl7XG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGZhbHNlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9KSlcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDA7XG4gICAgfSxcbiAgICB1cGRhdGVTdHJpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHRvdGFsID0gdGhpcy5nZXRUb3RhbExpbmVTZWxlY3QoKTtcbiAgICAgICAgdGhpcy5TWFYuc2V0TnVtYmVyTGluZXModG90YWwpO1xuICAgICAgICB0aGlzLlNYVi5zZXROdW1iZXJTdGFrZSh0b3RhbCk7XG4gICAgfSxcbiAgICBnZXRUb3RhbExpbmVTZWxlY3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcbiAgICAgICAgZm9yIChsZXQgaT0xOyBpPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspe1xuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtpXSlcbiAgICAgICAgICAgICAgICB0b3RhbCsrO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0b3RhbDtcbiAgICB9XG59KTtcbiJdfQ==