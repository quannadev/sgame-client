
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/sieuxe/SieuXeLine.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '01a7eZVmzRE6aWcTpfx9qra', 'SieuXeLine');
// scripts/sieuxe/SieuXeLine.js

"use strict";

var helper = require('Helper');

cc.Class({
  "extends": cc.Component,
  properties: {
    nodeLine: cc.Node,
    typeLine: 0
  },
  init: function init(obj) {
    this.lines = {
      '1': [0, 0, 0],
      '2': [0, 0, 1],
      '3': [0, 0, 2],
      '4': [0, 1, 0],
      '5': [0, 1, 1],
      '6': [0, 1, 2],
      '7': [0, 2, 0],
      '8': [0, 2, 1],
      '9': [0, 2, 2],
      '10': [1, 0, 0],
      '11': [1, 0, 1],
      '12': [1, 0, 2],
      '13': [1, 1, 0],
      '14': [1, 1, 1],
      '15': [1, 1, 2],
      '16': [1, 2, 0],
      '17': [1, 2, 1],
      '18': [1, 2, 2],
      '19': [2, 0, 0],
      '20': [2, 0, 1],
      '21': [2, 0, 2],
      '22': [2, 1, 0],
      '23': [2, 1, 1],
      '24': [2, 1, 2],
      '25': [2, 2, 0],
      '26': [2, 2, 1],
      '27': [2, 2, 2]
    };
    this.SXV = obj;
    this.eventSelectAll();
  },
  eventOpen: function eventOpen() {
    this.node.active = true;
  },
  eventClose: function eventClose() {
    var total = this.getTotalLineSelect();

    if (this.node.active && total < 1) {
      this.SXV.addNotice('Chọn ít nhất 1 dòng');
    } else {
      this.node.active = false;
    }
  },
  eventSelect: function eventSelect(event, numberStr) {
    var numberLine = parseInt(numberStr);
    helper.setMaterialGray(event.target.getComponent(cc.Sprite), helper.isMaterialGray(event.target.getComponent(cc.Sprite)));
    this.data[numberLine] = helper.isMaterialGray(event.target.getComponent(cc.Sprite));
    this.updateString();
    this.typeLine = 3;
  },
  eventBoChon: function eventBoChon() {
    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), true);
      return false;
    }));
    this.typeLine = -1;
    this.updateString();
  },
  eventSelectChan: function eventSelectChan() {
    var _this = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 1);
      return index % 2 != 1;
    })).then(function (result) {
      _this.data = result;

      _this.updateString();
    });
    this.typeLine = 2;
  },
  eventSelectLe: function eventSelectLe() {
    var _this2 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 0);
      return index % 2 != 0;
    })).then(function (result) {
      _this2.data = result;

      _this2.updateString();
    });
    this.typeLine = 1;
  },
  eventSelectAll: function eventSelectAll(e, select) {
    var _this3 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), false);
      return true;
    })).then(function (result) {
      _this3.data = result;

      _this3.updateString();
    });
    this.typeLine = 0;
  },
  updateString: function updateString() {
    var total = this.getTotalLineSelect();
    this.SXV.setNumberLines(total);
    this.SXV.setNumberStake(total);
  },
  getTotalLineSelect: function getTotalLineSelect() {
    var total = 0;

    for (var i = 1; i < this.data.length; i++) {
      if (this.data[i]) total++;
    }

    return total;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcc2lldXhlXFxTaWV1WGVMaW5lLmpzIl0sIm5hbWVzIjpbImhlbHBlciIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiQ29tcG9uZW50IiwicHJvcGVydGllcyIsIm5vZGVMaW5lIiwiTm9kZSIsInR5cGVMaW5lIiwiaW5pdCIsIm9iaiIsImxpbmVzIiwiU1hWIiwiZXZlbnRTZWxlY3RBbGwiLCJldmVudE9wZW4iLCJub2RlIiwiYWN0aXZlIiwiZXZlbnRDbG9zZSIsInRvdGFsIiwiZ2V0VG90YWxMaW5lU2VsZWN0IiwiYWRkTm90aWNlIiwiZXZlbnRTZWxlY3QiLCJldmVudCIsIm51bWJlclN0ciIsIm51bWJlckxpbmUiLCJwYXJzZUludCIsInNldE1hdGVyaWFsR3JheSIsInRhcmdldCIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsImlzTWF0ZXJpYWxHcmF5IiwiZGF0YSIsInVwZGF0ZVN0cmluZyIsImV2ZW50Qm9DaG9uIiwiUHJvbWlzZSIsImFsbCIsImNoaWxkcmVuIiwibWFwIiwibGluZSIsImluZGV4IiwiZXZlbnRTZWxlY3RDaGFuIiwidGhlbiIsInJlc3VsdCIsImV2ZW50U2VsZWN0TGUiLCJlIiwic2VsZWN0Iiwic2V0TnVtYmVyTGluZXMiLCJzZXROdW1iZXJTdGFrZSIsImkiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUFBSUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFFBQVEsRUFBSUosRUFBRSxDQUFDSyxJQURQO0FBRVJDLElBQUFBLFFBQVEsRUFBRTtBQUZGLEdBSFA7QUFPTEMsRUFBQUEsSUFBSSxFQUFFLGNBQVNDLEdBQVQsRUFBYTtBQUNmLFNBQUtDLEtBQUwsR0FBYTtBQUNULFdBQU0sQ0FB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LEtBSFcsQ0FBWixFQUlLWSxJQUpMLENBSVUsVUFBQUMsTUFBTSxFQUFJO0FBQ1osTUFBQSxNQUFJLENBQUNYLElBQUwsR0FBWVcsTUFBWjs7QUFDQSxNQUFBLE1BQUksQ0FBQ1YsWUFBTDtBQUNILEtBUEw7QUFRQSxTQUFLeEIsUUFBTCxHQUFnQixDQUFoQjtBQUNILEdBbEdJO0FBbUdMd0IsRUFBQUEsWUFBWSxFQUFFLHdCQUFZO0FBQ3RCLFFBQUlkLEtBQUssR0FBRyxLQUFLQyxrQkFBTCxFQUFaO0FBQ0EsU0FBS1AsR0FBTCxDQUFTa0MsY0FBVCxDQUF3QjVCLEtBQXhCO0FBQ0EsU0FBS04sR0FBTCxDQUFTbUMsY0FBVCxDQUF3QjdCLEtBQXhCO0FBQ0gsR0F2R0k7QUF3R0xDLEVBQUFBLGtCQUFrQixFQUFFLDhCQUFZO0FBQzVCLFFBQUlELEtBQUssR0FBRyxDQUFaOztBQUNBLFNBQUssSUFBSThCLENBQUMsR0FBQyxDQUFYLEVBQWNBLENBQUMsR0FBRSxLQUFLakIsSUFBTCxDQUFVa0IsTUFBM0IsRUFBbUNELENBQUMsRUFBcEMsRUFBdUM7QUFDbkMsVUFBSSxLQUFLakIsSUFBTCxDQUFVaUIsQ0FBVixDQUFKLEVBQ0k5QixLQUFLO0FBQ1o7O0FBQ0QsV0FBT0EsS0FBUDtBQUNIO0FBL0dJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgaGVscGVyID0gcmVxdWlyZSgnSGVscGVyJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG5vZGVMaW5lOiAgIGNjLk5vZGUsXHJcbiAgICAgICAgdHlwZUxpbmU6IDBcclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbihvYmope1xyXG4gICAgICAgIHRoaXMubGluZXMgPSB7XHJcbiAgICAgICAgICAgICcxJzogIFswLDAsMF0sXHJcbiAgICAgICAgICAgICcyJzogIFswLDAsMV0sXHJcbiAgICAgICAgICAgICczJzogIFswLDAsMl0sXHJcbiAgICAgICAgICAgICc0JzogIFswLDEsMF0sXHJcbiAgICAgICAgICAgICc1JzogIFswLDEsMV0sXHJcbiAgICAgICAgICAgICc2JzogIFswLDEsMl0sXHJcbiAgICAgICAgICAgICc3JzogIFswLDIsMF0sXHJcbiAgICAgICAgICAgICc4JzogIFswLDIsMV0sXHJcbiAgICAgICAgICAgICc5JzogIFswLDIsMl0sXHJcbiAgICAgICAgICAgICcxMCc6ICBbMSwwLDBdLFxyXG4gICAgICAgICAgICAnMTEnOiAgWzEsMCwxXSxcclxuICAgICAgICAgICAgJzEyJzogIFsxLDAsMl0sXHJcbiAgICAgICAgICAgICcxMyc6ICBbMSwxLDBdLFxyXG4gICAgICAgICAgICAnMTQnOiAgWzEsMSwxXSxcclxuICAgICAgICAgICAgJzE1JzogIFsxLDEsMl0sXHJcbiAgICAgICAgICAgICcxNic6ICBbMSwyLDBdLFxyXG4gICAgICAgICAgICAnMTcnOiAgWzEsMiwxXSxcclxuICAgICAgICAgICAgJzE4JzogIFsxLDIsMl0sXHJcbiAgICAgICAgICAgICcxOSc6ICBbMiwwLDBdLFxyXG4gICAgICAgICAgICAnMjAnOiAgWzIsMCwxXSxcclxuICAgICAgICAgICAgJzIxJzogIFsyLDAsMl0sXHJcbiAgICAgICAgICAgICcyMic6ICBbMiwxLDBdLFxyXG4gICAgICAgICAgICAnMjMnOiAgWzIsMSwxXSxcclxuICAgICAgICAgICAgJzI0JzogIFsyLDEsMl0sXHJcbiAgICAgICAgICAgICcyNSc6ICBbMiwyLDBdLFxyXG4gICAgICAgICAgICAnMjYnOiAgWzIsMiwxXSxcclxuICAgICAgICAgICAgJzI3JzogIFsyLDIsMl0sXHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLlNYViA9IG9iajtcclxuICAgICAgICB0aGlzLmV2ZW50U2VsZWN0QWxsKCk7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRPcGVuOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgfSxcclxuICAgIGV2ZW50Q2xvc2U6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgbGV0IHRvdGFsID0gdGhpcy5nZXRUb3RhbExpbmVTZWxlY3QoKTtcclxuICAgICAgICBpZiAodGhpcy5ub2RlLmFjdGl2ZSAmJiB0b3RhbCA8IDEpIHtcclxuICAgICAgICAgICAgdGhpcy5TWFYuYWRkTm90aWNlKCdDaOG7jW4gw610IG5o4bqldCAxIGTDsm5nJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgZXZlbnRTZWxlY3Q6IGZ1bmN0aW9uKGV2ZW50LCBudW1iZXJTdHIpIHtcclxuICAgICAgICBsZXQgbnVtYmVyTGluZSA9IHBhcnNlSW50KG51bWJlclN0cik7XHJcbiAgICAgICAgaGVscGVyLnNldE1hdGVyaWFsR3JheShldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGhlbHBlci5pc01hdGVyaWFsR3JheShldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkpKTtcclxuICAgICAgICB0aGlzLmRhdGFbbnVtYmVyTGluZV0gPSBoZWxwZXIuaXNNYXRlcmlhbEdyYXkoZXZlbnQudGFyZ2V0LmdldENvbXBvbmVudChjYy5TcHJpdGUpKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZVN0cmluZygpO1xyXG4gICAgICAgIHRoaXMudHlwZUxpbmUgPSAzO1xyXG4gICAgfSxcclxuICAgIGV2ZW50Qm9DaG9uOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubm9kZUxpbmUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGxpbmUsIGluZGV4KXtcclxuICAgICAgICAgICAgaGVscGVyLnNldE1hdGVyaWFsR3JheShsaW5lLmdldENvbXBvbmVudChjYy5TcHJpdGUpLCB0cnVlKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICB0aGlzLnR5cGVMaW5lID0gLTE7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTdHJpbmcoKTtcclxuICAgIH0sXHJcbiAgICBldmVudFNlbGVjdENoYW46IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubm9kZUxpbmUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGxpbmUsIGluZGV4KXtcclxuICAgICAgICAgICAgaGVscGVyLnNldE1hdGVyaWFsR3JheShsaW5lLmdldENvbXBvbmVudChjYy5TcHJpdGUpLCBpbmRleCUyID09MSk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleCUyICE9MTtcclxuICAgICAgICB9KSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudHlwZUxpbmUgPSAyO1xyXG4gICAgfSxcclxuICAgIGV2ZW50U2VsZWN0TGU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubm9kZUxpbmUuY2hpbGRyZW4ubWFwKGZ1bmN0aW9uKGxpbmUsIGluZGV4KXtcclxuICAgICAgICAgICAgaGVscGVyLnNldE1hdGVyaWFsR3JheShsaW5lLmdldENvbXBvbmVudChjYy5TcHJpdGUpLCBpbmRleCUyID09MCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleCUyICE9IDA7XHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnR5cGVMaW5lID0gMTtcclxuICAgIH0sXHJcbiAgICBldmVudFNlbGVjdEFsbDogZnVuY3Rpb24oZSwgc2VsZWN0KSB7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5ub2RlTGluZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24obGluZSwgaW5kZXgpe1xyXG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGZhbHNlKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfSkpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVN0cmluZygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLnR5cGVMaW5lID0gMDtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVTdHJpbmc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBsZXQgdG90YWwgPSB0aGlzLmdldFRvdGFsTGluZVNlbGVjdCgpO1xyXG4gICAgICAgIHRoaXMuU1hWLnNldE51bWJlckxpbmVzKHRvdGFsKTtcclxuICAgICAgICB0aGlzLlNYVi5zZXROdW1iZXJTdGFrZSh0b3RhbCk7XHJcbiAgICB9LFxyXG4gICAgZ2V0VG90YWxMaW5lU2VsZWN0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgbGV0IHRvdGFsID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpPTE7IGk8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKyl7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbaV0pXHJcbiAgICAgICAgICAgICAgICB0b3RhbCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdG90YWw7XHJcbiAgICB9XHJcbn0pO1xyXG4iXX0=