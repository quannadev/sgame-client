
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/sieuxe/SieuXeWinGame.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'fba02tW1T1LaoB8evwgEJFg', 'SieuXeWinGame');
// scripts/sieuxe/SieuXeWinGame.js

"use strict";

var self;

var Helper = require("Helper");

cc.Class({
  "extends": cc.VozBaseComponent,
  properties: {
    lbMoneyWin: cc.Label,
    lbNumberWin: cc.Label,
    ThangText: cc.Node,
    ThangLonCoin: cc.Node
  },
  onLoad: function onLoad() {
    self = this;
  },
  init: function init(obj) {
    this.SXV = obj;
  },
  runWinGame: function runWinGame() {
    if (this.SXV.isThangLon && !this.SXV.isNoHu) {
      this.runThangLon();
    } else if (this.SXV.isNoHu) {
      this.runNoHu();
    } else {
      if (this.SXV.winMoney > 0) {
        this.SXV.setMoneyWin(this.SXV.winMoney);
        this.lbMoneyWin.node.active = true;
        Helper.numberTo(this.lbMoneyWin, 0, this.SXV.winMoney, 1200, true, function () {
          self.SXV.updateChipAll();
          self.scheduleOnce(function () {
            self.lbMoneyWin.node.active = false;
            self.checkRunAgainWin();
          }, 1);
        });
        this.SXV.winMoney = 0;
      } else {
        this.SXV.autoQuay();
      }

      self.SXV.finishSpin();
    }
  },
  checkRunAgainWin: function checkRunAgainWin() {
    if (this.SXV.winMoney > 0 || this.SXV.isNoHu || this.SXV.isThangLon || this.SXV.isAuto) this.runWinGame();
  },
  runNoHu: function runNoHu() {
    this.ThangLonCoin.active = true;
    this.ThangText.active = true;
    this.ThangLonCoin.getComponent(sp.Skeleton).setAnimation(0, "NoHu", false);
    this.ThangText.getComponent(sp.Skeleton).setAnimation(0, "NoHu", false);
    this.lbNumberWin.node.active = true;
    Helper.numberTo(this.lbNumberWin, 0, this.SXV.winMoney, 1200, true, function () {
      this.scheduleOnce(function () {
        var d = cc.moveTo(0.5, cc.v2(0, 50));
        self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {
          self.lbNumberWin.node.active = false;
          self.checkRunAgainWin();
        })));
      }, 2.9);
    });
    this.scheduleOnce(function () {
      self.ThangLonCoin.active = false;
      self.ThangText.active = false;
    }, 4);
    this.SXV.isNoHu = false;
  },
  runThangLon: function runThangLon() {
    this.ThangLonCoin.active = true;
    this.ThangText.active = true;
    this.ThangLonCoin.getComponent(sp.Skeleton).setAnimation(0, "Thang-Lon", false);
    this.ThangText.getComponent(sp.Skeleton).setAnimation(0, "Thang-Lon", false);
    this.lbNumberWin.node.active = true;
    Helper.numberTo(this.lbNumberWin, 0, this.SXV.winMoney, 1200, true, function () {
      this.scheduleOnce(function () {
        var d = cc.moveTo(0.5, cc.v2(0, 50));
        self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {
          self.lbNumberWin.node.active = false;
          self.checkRunAgainWin();
        })));
      }, 3);
    });
    this.scheduleOnce(function () {
      self.ThangLonCoin.active = false;
      self.ThangText.active = false;
    }, 2.5);
    this.SXV.isThangLon = false;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL3NpZXV4ZS9TaWV1WGVXaW5HYW1lLmpzIl0sIm5hbWVzIjpbInNlbGYiLCJIZWxwZXIiLCJyZXF1aXJlIiwiY2MiLCJDbGFzcyIsIlZvekJhc2VDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwibGJNb25leVdpbiIsIkxhYmVsIiwibGJOdW1iZXJXaW4iLCJUaGFuZ1RleHQiLCJOb2RlIiwiVGhhbmdMb25Db2luIiwib25Mb2FkIiwiaW5pdCIsIm9iaiIsIlNYViIsInJ1bldpbkdhbWUiLCJpc1RoYW5nTG9uIiwiaXNOb0h1IiwicnVuVGhhbmdMb24iLCJydW5Ob0h1Iiwid2luTW9uZXkiLCJzZXRNb25leVdpbiIsIm5vZGUiLCJhY3RpdmUiLCJudW1iZXJUbyIsInVwZGF0ZUNoaXBBbGwiLCJzY2hlZHVsZU9uY2UiLCJjaGVja1J1bkFnYWluV2luIiwiYXV0b1F1YXkiLCJmaW5pc2hTcGluIiwiaXNBdXRvIiwiZ2V0Q29tcG9uZW50Iiwic3AiLCJTa2VsZXRvbiIsInNldEFuaW1hdGlvbiIsImQiLCJtb3ZlVG8iLCJ2MiIsInJ1bkFjdGlvbiIsInNlcXVlbmNlIiwiZGVsYXlUaW1lIiwiY2FsbEZ1bmMiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsSUFBSjs7QUFDQSxJQUFJQyxNQUFNLEdBQUdDLE9BQU8sQ0FBQyxRQUFELENBQXBCOztBQUNBQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUNMLGFBQVNELEVBQUUsQ0FBQ0UsZ0JBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFVBQVUsRUFBWUosRUFBRSxDQUFDSyxLQURqQjtBQUVSQyxJQUFBQSxXQUFXLEVBQVdOLEVBQUUsQ0FBQ0ssS0FGakI7QUFHUkUsSUFBQUEsU0FBUyxFQUFLUCxFQUFFLENBQUNRLElBSFQ7QUFJUkMsSUFBQUEsWUFBWSxFQUFFVCxFQUFFLENBQUNRO0FBSlQsR0FIUDtBQVVMRSxFQUFBQSxNQVZLLG9CQVVL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LENBQWxDLEVBQXFDLEtBQUtPLEdBQUwsQ0FBU00sUUFBOUMsRUFBd0QsSUFBeEQsRUFBOEQsSUFBOUQsRUFBb0UsWUFBWTtBQUM1RSxXQUFLTSxZQUFMLENBQWtCLFlBQVk7QUFDMUIsWUFBSVMsQ0FBQyxHQUFHbEMsRUFBRSxDQUFDbUMsTUFBSCxDQUFVLEdBQVYsRUFBZW5DLEVBQUUsQ0FBQ29DLEVBQUgsQ0FBTSxDQUFOLEVBQVMsRUFBVCxDQUFmLENBQVI7QUFDQXZDLFFBQUFBLElBQUksQ0FBQ1MsV0FBTCxDQUFpQmUsSUFBakIsQ0FBc0JnQixTQUF0QixDQUFnQ3JDLEVBQUUsQ0FBQ3NDLFFBQUgsQ0FBWUosQ0FBWixFQUFlbEMsRUFBRSxDQUFDdUMsU0FBSCxDQUFhLENBQWIsQ0FBZixFQUFnQ3ZDLEVBQUUsQ0FBQ3dDLFFBQUgsQ0FBWSxZQUFZO0FBQ3BGM0MsVUFBQUEsSUFBSSxDQUFDUyxXQUFMLENBQWlCZSxJQUFqQixDQUFzQkMsTUFBdEIsR0FBK0IsS0FBL0I7QUFDQXpCLFVBQUFBLElBQUksQ0FBQzZCLGdCQUFMO0FBQ0gsU0FIK0QsQ0FBaEMsQ0FBaEM7QUFJSCxPQU5ELEVBTUcsQ0FOSDtBQU9ILEtBUkQ7QUFTQSxTQUFLRCxZQUFMLENBQWtCLFlBQVk7QUFDMUI1QixNQUFBQSxJQUFJLENBQUNZLFlBQUwsQ0FBa0JhLE1BQWxCLEdBQThCLEtBQTlCO0FBQ0F6QixNQUFBQSxJQUFJLENBQUNVLFNBQUwsQ0FBZWUsTUFBZixHQUE4QixLQUE5QjtBQUNILEtBSEQsRUFHRyxHQUhIO0FBSUEsU0FBS1QsR0FBTCxDQUFTRSxVQUFULEdBQXNCLEtBQXRCO0FBQ0g7QUFwRkksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsibGV0IHNlbGY7XG5sZXQgSGVscGVyID0gcmVxdWlyZShcIkhlbHBlclwiKTtcbmNjLkNsYXNzKHtcbiAgICBleHRlbmRzOiBjYy5Wb3pCYXNlQ29tcG9uZW50LFxuXG4gICAgcHJvcGVydGllczoge1xuICAgICAgICBsYk1vbmV5V2luICAgICAgICAgIDogY2MuTGFiZWwsXG4gICAgICAgIGxiTnVtYmVyV2luICAgICAgICAgOiBjYy5MYWJlbCxcbiAgICAgICAgVGhhbmdUZXh0ICAgOiBjYy5Ob2RlLFxuICAgICAgICBUaGFuZ0xvbkNvaW46IGNjLk5vZGUsXG4gICAgfSxcblxuICAgIG9uTG9hZCAoKSB7XG4gICAgICAgIHNlbGYgPSB0aGlzO1xuICAgIH0sXG4gICAgaW5pdChvYmopIHtcbiAgICAgICAgdGhpcy5TWFYgPSBvYmo7XG4gICAgfSxcbiAgICBydW5XaW5HYW1lKCkge1xuICAgICAgICBpZiAodGhpcy5TWFYuaXNUaGFuZ0xvbiAmJiAhdGhpcy5TWFYuaXNOb0h1KSB7XG4gICAgICAgICAgICB0aGlzLnJ1blRoYW5nTG9uKCk7XG4gICAgICAgIH1lbHNlIGlmICh0aGlzLlNYVi5pc05vSHUpe1xuICAgICAgICAgICAgdGhpcy5ydW5Ob0h1KCk7XG4gICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgIGlmICh0aGlzLlNYVi53aW5Nb25leSA+IDApe1xuICAgICAgICAgICAgICAgIHRoaXMuU1hWLnNldE1vbmV5V2luKHRoaXMuU1hWLndpbk1vbmV5KTtcbiAgICAgICAgICAgICAgICB0aGlzLmxiTW9uZXlXaW4ubm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIEhlbHBlci5udW1iZXJUbyh0aGlzLmxiTW9uZXlXaW4sIDAsIHRoaXMuU1hWLndpbk1vbmV5LCAxMjAwLCB0cnVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYuU1hWLnVwZGF0ZUNoaXBBbGwoKTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zY2hlZHVsZU9uY2UoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5sYk1vbmV5V2luLm5vZGUuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmNoZWNrUnVuQWdhaW5XaW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgMSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5TWFYud2luTW9uZXkgICA9IDA7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLlNYVi5hdXRvUXVheSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZi5TWFYuZmluaXNoU3BpbigpO1xuICAgICAgICB9XG4gICAgfSxcbiAgICBjaGVja1J1bkFnYWluV2luKCkge1xuICAgICAgICBpZiAodGhpcy5TWFYud2luTW9uZXkgPiAwIHx8IHRoaXMuU1hWLmlzTm9IdSB8fCB0aGlzLlNYVi5pc1RoYW5nTG9uIHx8IHRoaXMuU1hWLmlzQXV0bylcbiAgICAgICAgICAgIHRoaXMucnVuV2luR2FtZSgpO1xuICAgIH0sXG4gICAgcnVuTm9IdSgpe1xuICAgICAgICB0aGlzLlRoYW5nTG9uQ29pbi5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLlRoYW5nVGV4dC5hY3RpdmUgICAgPSB0cnVlO1xuICAgICAgICB0aGlzLlRoYW5nTG9uQ29pbi5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLCBcIk5vSHVcIiwgZmFsc2UpO1xuICAgICAgICB0aGlzLlRoYW5nVGV4dC5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLCBcIk5vSHVcIiwgZmFsc2UpO1xuICAgICAgICB0aGlzLmxiTnVtYmVyV2luLm5vZGUuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgSGVscGVyLm51bWJlclRvKHRoaXMubGJOdW1iZXJXaW4sIDAsIHRoaXMuU1hWLndpbk1vbmV5LCAxMjAwLCB0cnVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgbGV0IGQgPSBjYy5tb3ZlVG8oMC41LCBjYy52MigwLCA1MCkpO1xuICAgICAgICAgICAgICAgIHNlbGYubGJOdW1iZXJXaW4ubm9kZS5ydW5BY3Rpb24oY2Muc2VxdWVuY2UoZCwgY2MuZGVsYXlUaW1lKDEpLCBjYy5jYWxsRnVuYyhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHNlbGYubGJOdW1iZXJXaW4ubm9kZS5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5jaGVja1J1bkFnYWluV2luKCk7XG4gICAgICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgICAgIH0sIDIuOSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLlRoYW5nTG9uQ29pbi5hY3RpdmUgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIHNlbGYuVGhhbmdUZXh0LmFjdGl2ZSAgICAgICA9IGZhbHNlO1xuICAgICAgICB9LCA0KTtcbiAgICAgICAgdGhpcy5TWFYuaXNOb0h1ICAgICA9IGZhbHNlO1xuICAgIH0sXG4gICAgcnVuVGhhbmdMb24oKXtcbiAgICAgICAgdGhpcy5UaGFuZ0xvbkNvaW4uYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5UaGFuZ1RleHQuYWN0aXZlICAgID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5UaGFuZ0xvbkNvaW4uZ2V0Q29tcG9uZW50KHNwLlNrZWxldG9uKS5zZXRBbmltYXRpb24oMCwgXCJUaGFuZy1Mb25cIiwgZmFsc2UpO1xuICAgICAgICB0aGlzLlRoYW5nVGV4dC5nZXRDb21wb25lbnQoc3AuU2tlbGV0b24pLnNldEFuaW1hdGlvbigwLCBcIlRoYW5nLUxvblwiLCBmYWxzZSk7XG4gICAgICAgIHRoaXMubGJOdW1iZXJXaW4ubm9kZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBIZWxwZXIubnVtYmVyVG8odGhpcy5sYk51bWJlcldpbiwgMCwgdGhpcy5TWFYud2luTW9uZXksIDEyMDAsIHRydWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMuc2NoZWR1bGVPbmNlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBsZXQgZCA9IGNjLm1vdmVUbygwLjUsIGNjLnYyKDAsIDUwKSk7XG4gICAgICAgICAgICAgICAgc2VsZi5sYk51bWJlcldpbi5ub2RlLnJ1bkFjdGlvbihjYy5zZXF1ZW5jZShkLCBjYy5kZWxheVRpbWUoMSksIGNjLmNhbGxGdW5jKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5sYk51bWJlcldpbi5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBzZWxmLmNoZWNrUnVuQWdhaW5XaW4oKTtcbiAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgfSwgMyk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLlRoYW5nTG9uQ29pbi5hY3RpdmUgICAgPSBmYWxzZTtcbiAgICAgICAgICAgIHNlbGYuVGhhbmdUZXh0LmFjdGl2ZSAgICAgICA9IGZhbHNlO1xuICAgICAgICB9LCAyLjUpO1xuICAgICAgICB0aGlzLlNYVi5pc1RoYW5nTG9uID0gZmFsc2U7XG4gICAgfSxcbn0pO1xuIl19