
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/sieuxe/UISieuXe.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '963ff+MhhRHILpPWMNfXlWl', 'UISieuXe');
// scripts/sieuxe/UISieuXe.js

"use strict";

var WinGame = require("SieuXeWinGame");

var Helper = require("Helper");

var reel = require("SieuXeReel");

var Language = require("sieuxeLanguage");

var ListRoom = cc.Enum({
  "1l": 100,
  "1k": 1000,
  "5k": 5000,
  "10k": 10000
});
cc.Class({
  "extends": cc.VozBaseComponent,
  properties: {
    reels: {
      "default": [],
      type: reel
    },
    listRoomNode: {
      "default": [],
      type: cc.Toggle
    },
    iconPrefab: cc.Prefab,
    noticeNode: cc.Node,
    btnQuay: cc.Node,
    btnQuayNhanh: cc.Node,
    btnStopSieuToc: cc.Node,
    btnStopQuay: cc.Node,
    btnAutoQuay: cc.Node,
    WinGame: WinGame,
    listMainLines: cc.Node,
    edtCheat: cc.EditBox,
    isAuto: false,
    isFast: false,
    isSpin: false,
    red: true,
    lastResult: [],
    betSelect: 0,
    roomNumber: 0,
    posLineWin: 0,
    totalLineWin: 0,
    TotalItemRun: 15,
    TotalColumn: 5,
    lb_hu: cc.Label,
    betLevel: "1l"
  },
  onLoad: function onLoad() {
    this.initSieuXe();
    this.WinGame.init(this);
    this.betLevel = "1k";
    this.roomNumber = ListRoom["1k"];
    this.listRoomNode[1].isChecked = true;
    this.schedule(this.updateJackpot, 3);
    this.updateJackpot();
  },
  onEnable: function onEnable() {
    if (this.node.zIndex <= cc.lastZIndex) {
      cc.lastZIndex += 1;
      this.node.zIndex = cc.lastZIndex;
    }

    cc.currentUI = "UISieuXe";
  },
  showGame: function showGame() {
    this.node.getChildByName("content").active = true;
  },
  updateJackpot: function updateJackpot() {
    var key = "sieuxe" + this.betLevel;

    if (SmartFoxSDK.SieuXeController.ZoneInstance.mySelf) {
      var variableJackpot = SmartFoxSDK.SieuXeController.ZoneInstance.mySelf.getVariable(key);

      if (variableJackpot) {
        var jackpot = variableJackpot.value;
        var current_lb_jackpot = this.lb_hu.string;
        current_lb_jackpot = current_lb_jackpot.split(".").join("");
        var currentHu = parseFloat(current_lb_jackpot);
        Utils.numberTo(this.lb_hu, currentHu, jackpot, 1000, true);
      }
    }
  },
  onDisable: function onDisable() {
    this.node.stopAllActions();
  },
  initSieuXe: function initSieuXe() {
    var self = this;
    var lineArr1 = [];
    var lineArr2 = [];
    var lineArr3 = [];
    Promise.all(this.reels.map(function (reel, index) {
      var lastArray = [];

      if (index < 3) {
        lastArray = self.initRandomItems(self.TotalItemRun, 0, 6);
      } else {
        lastArray = self.initRandomItems(self.TotalItemRun, 6, 4);
      }

      lineArr1.push(lastArray[lastArray.length - 1]);
      lineArr2.push(lastArray[lastArray.length - 2]);
      lineArr3.push(lastArray[lastArray.length - 3]);
      reel.init(self, lastArray);
    })).then(function (result) {
      self.lastResult = lineArr3.concat(lineArr2).concat(lineArr1);
    });
  },
  setMoneyWin: function setMoneyWin(totalMoney) {},
  updateDataPhong: function updateDataPhong(roomId) {},
  // update (dt) {},
  eventSieuToc: function eventSieuToc() {
    if (!this.checkEnoughMoney()) {
      mm.Toast.showToast(1, Language.getString("noti_not_money"));
      return;
    }

    this.isSpin = true;
    this.isFast = true;
    this.isAuto = true;
    this.btnStopSieuToc.active = true;
    this.btnStopQuay.active = false;
    this.pauseSystemEventNode(this.btnQuay, true);
    this.autoQuay();
  },
  eventAutoQuay: function eventAutoQuay() {
    if (!this.checkEnoughMoney()) {
      mm.Toast.showToast(1, Language.getString("noti_not_money"));
      return;
    }

    this.isSpin = true;
    this.isAuto = true;
    this.isFast = false;
    this.btnStopSieuToc.active = false;
    this.btnStopQuay.active = true;
    this.pauseSystemEventNode(this.btnQuay, true);
    this.autoQuay();
  },
  eventStopAuto: function eventStopAuto() {
    this.isAuto = false;
    this.btnStopQuay.active = false;
    this.pauseSystemEventNode(this.btnQuay, false);
  },
  eventStopSieuToc: function eventStopSieuToc() {
    this.isFast = false;
    this.isAuto = false;
    this.btnStopSieuToc.active = false;
    this.pauseSystemEventNode(this.btnQuay, false);
  },
  eventPhong: function eventPhong(event, data) {
    if (this.isSpin) {
      if (this.roomNumber == 100) {
        this.listRoomNode[0].isChecked = true;
      } else if (this.roomNumber == 1000) {
        this.listRoomNode[1].isChecked = true;
      } else if (this.roomNumber == 5000) {
        this.listRoomNode[2].isChecked = true;
      } else if (this.roomNumber == 10000) {
        this.listRoomNode[3].isChecked = true;
      }

      this.addNotice(Language.getString("noti_is_playing"));
      return;
    }

    this.roomNumber = parseInt(data);

    if (this.roomNumber == 100) {
      this.betLevel = "1l";
    } else if (this.roomNumber == 1000) {
      this.betLevel = "1k";
    } else if (this.roomNumber == 5000) {
      this.betLevel = "5k";
    } else if (this.roomNumber == 10000) {
      this.betLevel = "10k";
    }

    this.updateJackpot();
  },
  checkEnoughMoney: function checkEnoughMoney() {
    if (GameVariables.Poker.getChip(SmartFoxSDK.SieuXeController.ZoneInstance.mySelf) < this.roomNumber) {
      return false;
    }

    return true;
  },
  eventQuay: function eventQuay() {
    if (!this.checkEnoughMoney()) {
      mm.Toast.showToast(1, Language.getString("noti_not_money"));
      return;
    }

    this.isSpin = true;
    var betRequest = new SieuXeRequest.BetRequest();
    this.showLineWin(false);
    this.pauseSystemEventNode(this.btnQuay, true);
    betRequest.setBet(this.roomNumber);
    SmartFoxSDK.SieuXeController.ZoneInstance.send(betRequest.toSRequest());
    this.updateChipAll(this.roomNumber);
  },
  pauseSystemEventNode: function pauseSystemEventNode(nodeEvent, isPause) {
    Helper.setMaterialGray(nodeEvent.getComponent(cc.Sprite), isPause);

    if (isPause) {
      nodeEvent.pauseSystemEvents(true);
    } else nodeEvent.resumeSystemEvents(true);
  },
  eventBack: function eventBack() {
    if (this.isSpin) {
      this.addNotice(Language.getString("noti_is_playing"));
      return;
    }

    var room = SmartFoxSDK.SieuXeController.ZoneInstance.getRoomByName("sieuxe");

    if (room) {
      SmartFoxSDK.SieuXeController.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.LeaveRoomRequest(room));
    } else {
      this.back();
    }
  },
  eventSetting: function eventSetting() {},
  eventVinhDanh: function eventVinhDanh() {
    var request = new CasinoRequest.LeaderBoardRequest();
    SmartFoxSDK.SieuXeController.ZoneInstance.send(request.toSRequest());
  },
  eventLichSuGiaoDich: function eventLichSuGiaoDich() {
    var request = new CasinoRequest.HistoryRequest();
    SmartFoxSDK.SieuXeController.ZoneInstance.send(request.toSRequest());
  },
  eventOpenHelper: function eventOpenHelper() {
    this.show("UISieuXeHelper", {
      pop: true,
      src: 'sieuxe'
    });
  },
  finishSpin: function finishSpin() {
    this.isSpin = false;
  },
  SieuXeRun: function SieuXeRun(data) {
    var self = this;

    if (void 0 !== data.status) {
      if (data.status === 1) {
        //reformat data
        for (var i = 0; i < data.result.length; i++) {
          var count = i % 5;

          if (count > 2) {
            data.result[i] = data.result[i] + 1;
          }
        }

        data.result = this.getDataResult(data.result);
        Promise.all(data.result.map(function (cel, cel_index) {
          Promise.all(cel.map(function (icon, index) {
            self.reels[cel_index].icons[index].setIcon(icon, true);
          }));
        })).then(function (result) {
          self.runReels();
        });
        this.lineWin = data.lineWin;
        this.winMoney = data.winMoney;
        this.isNoHu = data.isNohu;
        this.isThangLon = data.isThangLon;
      } else {
        this.resetSpin();
      }
    }
  },
  initRandomItems: function initRandomItems(numberItem, min, maxRandom) {
    var listItem = [];

    for (var i = 0; i < numberItem; i++) {
      listItem[i] = this.random(min, maxRandom);
    }

    return listItem;
  },
  getDataResult: function getDataResult(result) {
    var self = this;
    var newArray = [];

    for (var i = 0; i < this.TotalColumn; i++) {
      newArray[i] = [];
    }

    for (var _i = 0; _i < result.length; _i++) {
      newArray[_i % self.TotalColumn].push(result[_i]);
    }

    for (var _i2 = 0; _i2 < this.TotalColumn; _i2++) {
      var randomArr = [];

      if (_i2 < 3) {
        randomArr = this.initRandomItems(this.TotalItemRun - 6, 0, 6);
      } else {
        randomArr = this.initRandomItems(this.TotalItemRun - 6, 6, 4);
      }

      newArray[_i2] = newArray[_i2].concat(randomArr);
    }

    for (var _i3 = 0; _i3 < this.lastResult.length; _i3++) {
      newArray[_i3 % self.TotalColumn].push(this.lastResult[_i3]);
    }

    this.lastResult = result;
    return newArray;
  },
  reformatResult: function reformatResult(result, size) {
    var res = [];

    for (var i = 0; i < result.length; i = i + size) {
      res.push(result.slice(i, i + size));
    }

    return res;
  },
  runActionWon: function runActionWon() {
    this.WinGame.runWinGame();
    this.showLineWin(true);
    if (!this.isAuto) this.pauseSystemEventNode(this.btnQuay, false);
  },
  resume: function resume() {
    if (this.winMoney > 0) {
      setTimeout(function () {
        this.WinGame.runWinGame();
      }.bind(this), 300);
    } else {
      this.WinGame.runWinGame();
    }
  },
  autoQuay: function autoQuay() {
    if (this.isAuto) {
      this.timeOut = setTimeout(function () {
        this.eventQuay();
      }.bind(this), 500);
    }
  },
  showLineWin: function showLineWin(isShow) {
    var _this = this;

    var self = this;

    if (isShow) {
      this.totalLineWin = this.lineWin.length;
      this.posLineWin = 0;

      if (this.totalLineWin > 0) {
        Promise.all(this.lineWin.map(function (posLine) {
          self.listMainLines.children[posLine].active = true;
        }));
        this.scheduleOnce(function () {}, 2);
        Promise.all(self.lineWin.map(function (posLine) {
          self.listMainLines.children[posLine].active = false;
        })).then(function (result) {
          self.schedule(_this.showMainLine, 1.5);
        });
      }
    } else {
      for (var i = 0; i < this.listMainLines.childrenCount; i++) {
        if (this.listMainLines.children[i].active) this.listMainLines.children[i].active = false;
      }

      self.unschedule(this.showMainLine);
    }
  },
  showMainLine: function showMainLine() {
    var _this2 = this;

    Promise.all(this.listMainLines.children.map(function (line, index) {
      if (line.active) line.active = false;
    })).then(function (result) {
      _this2.totalLineWin = _this2.lineWin.length;

      if (_this2.totalLineWin > 0) {
        _this2.posLineWin = (_this2.posLineWin + 1) % _this2.totalLineWin;
        _this2.listMainLines.children[_this2.lineWin[_this2.posLineWin]].active = true;
      }
    }, this);
  },
  runReels: function runReels() {
    Promise.all(this.reels.map(function (reel, index) {
      reel.spin(index);
    }));
  },
  copy: function copy() {
    Promise.all(this.reels.map(function (reel) {
      reel.icons[reel.icons.length - 1].setIcon(reel.icons[2].data);
      reel.icons[reel.icons.length - 2].setIcon(reel.icons[1].data);
      reel.icons[reel.icons.length - 3].setIcon(reel.icons[0].data);
    }));
  },
  random: function random(min, max) {
    return min + ~~(Math.random() * max);
  },
  resetSpin: function resetSpin() {},
  checkHasMoney: function checkHasMoney() {
    return true;
  },
  addNotice: function addNotice(message) {
    var self = this;
    this.noticeNode.active = true;
    this.noticeNode.getChildByName("lb_noti").getComponent(cc.Label).string = message;
    setTimeout(function () {
      self.noticeNode.active = false;
    }, 1200);
  },
  updateChipAll: function updateChipAll(subChip) {
    SmartFoxSDK.SieuXeController.onEventUpdateChip(subChip);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcc2lldXhlXFxVSVNpZXVYZS5qcyJdLCJuYW1lcyI6WyJXaW5HYW1lIiwicmVxdWlyZSIsIkhlbHBlciIsInJlZWwiLCJMYW5ndWFnZSIsIkxpc3RSb29tIiwiY2MiLCJFbnVtIiwiQ2xhc3MiLCJWb3pCYXNlQ29tcG9uZW50IiwicHJvcGVydGllcyIsInJlZWxzIiwidHlwZSIsImxpc3RSb29tTm9kZSIsIlRvZ2dsZSIsImljb25QcmVmYWIiLCJQcmVmYWIiLCJub3RpY2VOb2RlIiwiTm9kZSIsImJ0blF1YXkiLCJidG5RdWF5TmhhbmgiLCJidG5TdG9wU2lldVRvYyIsImJ0blN0b3BRdWF5IiwiYnRuQXV0b1F1YXkiLCJsaXN0TWFpbkxpbmVzIiwiZWR0Q2hlYXQiLCJFZGl0Qm94IiwiaXNBdXRvIiwiaXNGYXN0IiwiaXNTcGluIiwicmVkIiwibGFzdFJlc3VsdCIsImJldFNlbGVjdCIsInJvb21OdW1iZXIiLCJwb3NMaW5lV2luIiwidG90YWxMaW5lV2luIiwiVG90YWxJdGVtUnVuIiwiVG90YWxDb2x1bW4iLCJsYl9odSIsIkxhYmVsIiwiYmV0TGV2ZWwiLCJvbkxvYWQiLCJpbml0U2lldVhlIiwiaW5pdCIsImlzQ2hlY2tlZCIsInNjaGVkdWxlIiwidXBkYXRlSmFja3BvdCIsIm9uRW5hYmxlIiwibm9kZSIsInpJbmRleCIsImxhc3RaSW5kZXgiLCJjdXJyZW50VUkiLCJzaG93R2FtZSIsImdldENoaWxkQnlOYW1lIiwiYWN0aXZlIiwia2V5IiwiU21hcnRGb3hTREsiLCJTaWV1WGVDb250cm9sbGVyIiwiWm9uZUluc3RhbmNlIiwibXlTZWxmIiwidmFyaWFibGVKYWNrcG90IiwiZ2V0VmFyaWFibGUiLCJqYWNrcG90IiwidmFsdWUiLCJjdXJyZW50X2xiX2phY2twb3QiLCJzdHJpbmciLCJzcGxpdCIsImpvaW4iLCJjdXJyZW50SHUiLCJwYXJzZUZsb2F0IiwiVXRpbHMiLCJudW1iZXJUbyIsIm9uRGlzYWJsZSIsInN0b3BBbGxBY3Rpb25zIiwic2VsZiIsImxpbmVBcnIxIiwibGluZUFycjIiLCJsaW5lQXJyMyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJpbmRleCIsImxhc3RBcnJheSIsImluaXRSYW5kb21JdGVtcyIsInB1c2giLCJsZW5ndGgiLCJ0aGVuIiwicmVzdWx0IiwiY29uY2F0Iiwic2V0TW9uZXlXaW4iLCJ0b3RhbE1vbmV5IiwidXBkYXRlRGF0YVBob25nIiwicm9vbUlkIiwiZXZlbnRTaWV1VG9jIiwiY2hlY2tFbm91Z2hNb25leSIsIm1tIiwiVG9hc3QiLCJzaG93VG9hc3QiLCJnZXRTdHJpbmciLCJwYXVzZVN5c3RlbUV2ZW50Tm9kZSIsImF1dG9RdWF5IiwiZXZlbnRBdXRvUXVheSIsImV2ZW50U3RvcEF1dG8iLCJldmVudFN0b3BTaWV1VG9jIiwiZXZlbnRQaG9uZyIsImV2ZW50IiwiZGF0YSIsImFkZE5vdGljZSIsInBhcnNlSW50IiwiR2FtZVZhcmlhYmxlcyIsIlBva2VyIiwiZ2V0Q2hpcCIsImV2ZW50UXVheSIsImJldFJlcXVlc3QiLCJTaWV1WGVSZXF1ZXN0IiwiQmV0UmVxdWVzdCIsInNob3dMaW5lV2luIiwic2V0QmV0Iiwic2VuZCIsInRvU1JlcXVlc3QiLCJ1cGRhdGVDaGlwQWxsIiwibm9kZUV2ZW50IiwiaXNQYXVzZSIsInNldE1hdGVyaWFsR3JheSIsImdldENvbXBvbmVudCIsIlNwcml0ZSIsInBhdXNlU3lzdGVtRXZlbnRzIiwicmVzdW1lU3lzdGVtRXZlbnRzIiwiZXZlbnRCYWNrIiwicm9vbSIsImdldFJvb21CeU5hbWUiLCJTbWFydEZveCIsIlJlcXVlc3RzIiwiU3lzdGVtIiwiTGVhdmVSb29tUmVxdWVzdCIsImJhY2siLCJldmVudFNldHRpbmciLCJldmVudFZpbmhEYW5oIiwicmVxdWVzdCIsIkNhc2lub1JlcXVlc3QiLCJMZWFkZXJCb2FyZFJlcXVlc3QiLCJldmVudExpY2hTdUdpYW9EaWNoIiwiSGlzdG9yeVJlcXVlc3QiLCJldmVudE9wZW5IZWxwZXIiLCJzaG93IiwicG9wIiwic3JjIiwiZmluaXNoU3BpbiIsIlNpZXVYZVJ1biIsInN0YXR1cyIsImkiLCJjb3VudCIsImdldERhdGFSZXN1bHQiLCJjZWwiLCJjZWxfaW5kZXgiLCJpY29uIiwiaWNvbnMiLCJzZXRJY29uIiwicnVuUmVlbHMiLCJsaW5lV2luIiwid2luTW9uZXkiLCJpc05vSHUiLCJpc05vaHUiLCJpc1RoYW5nTG9uIiwicmVzZXRTcGluIiwibnVtYmVySXRlbSIsIm1pbiIsIm1heFJhbmRvbSIsImxpc3RJdGVtIiwicmFuZG9tIiwibmV3QXJyYXkiLCJyYW5kb21BcnIiLCJyZWZvcm1hdFJlc3VsdCIsInNpemUiLCJyZXMiLCJzbGljZSIsInJ1bkFjdGlvbldvbiIsInJ1bldpbkdhbWUiLCJyZXN1bWUiLCJzZXRUaW1lb3V0IiwiYmluZCIsInRpbWVPdXQiLCJpc1Nob3ciLCJwb3NMaW5lIiwiY2hpbGRyZW4iLCJzY2hlZHVsZU9uY2UiLCJzaG93TWFpbkxpbmUiLCJjaGlsZHJlbkNvdW50IiwidW5zY2hlZHVsZSIsImxpbmUiLCJzcGluIiwiY29weSIsIm1heCIsIk1hdGgiLCJjaGVja0hhc01vbmV5IiwibWVzc2FnZSIsInN1YkNoaXAiLCJvbkV2ZW50VXBkYXRlQ2hpcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxPQUFPLEdBQU9DLE9BQU8sQ0FBQyxlQUFELENBQXpCOztBQUNBLElBQUlDLE1BQU0sR0FBUUQsT0FBTyxDQUFDLFFBQUQsQ0FBekI7O0FBQ0EsSUFBSUUsSUFBSSxHQUFVRixPQUFPLENBQUMsWUFBRCxDQUF6Qjs7QUFDQSxJQUFJRyxRQUFRLEdBQU1ILE9BQU8sQ0FBQyxnQkFBRCxDQUF6Qjs7QUFDQSxJQUFJSSxRQUFRLEdBQUdDLEVBQUUsQ0FBQ0MsSUFBSCxDQUFRO0FBQ25CLFFBQVMsR0FEVTtBQUVuQixRQUFVLElBRlM7QUFHbkIsUUFBVSxJQUhTO0FBSW5CLFNBQVU7QUFKUyxDQUFSLENBQWY7QUFNQUQsRUFBRSxDQUFDRSxLQUFILENB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O0FBQ3RCLFdBQVExQixHQUFHLEdBQUUsQ0FBQyxFQUFFMkIsSUFBSSxDQUFDeEIsTUFBTCxLQUFjdUIsR0FBaEIsQ0FBZDtBQUNILEdBbFdJO0FBbVdMNUIsRUFBQUEsU0FBUyxFQUFFLHFCQUFZLENBQ3RCLENBcFdJO0FBcVdMOEIsRUFBQUEsYUFBYSxFQUFFLHlCQUFXO0FBQ3RCLFdBQU8sSUFBUDtBQUNILEdBdldJO0FBd1dMdkYsRUFBQUEsU0FBUyxFQUFFLG1CQUFVd0YsT0FBVixFQUFtQjtBQUMxQixRQUFJekgsSUFBSSxHQUFHLElBQVg7QUFDQSxTQUFLekQsVUFBTCxDQUFnQnFDLE1BQWhCLEdBQXlCLElBQXpCO0FBQ0EsU0FBS3JDLFVBQUwsQ0FBZ0JvQyxjQUFoQixDQUErQixTQUEvQixFQUEwQ3VFLFlBQTFDLENBQXVEdEgsRUFBRSxDQUFDaUMsS0FBMUQsRUFBaUUwQixNQUFqRSxHQUEwRWtJLE9BQTFFO0FBQ0FoQixJQUFBQSxVQUFVLENBQUMsWUFBVTtBQUNqQnpHLE1BQUFBLElBQUksQ0FBQ3pELFVBQUwsQ0FBZ0JxQyxNQUFoQixHQUF5QixLQUF6QjtBQUNILEtBRlMsRUFFUCxJQUZPLENBQVY7QUFHSCxHQS9XSTtBQWdYTGtFLEVBQUFBLGFBaFhLLHlCQWdYUzRFLE9BaFhULEVBZ1hrQjtBQUNuQjVJLElBQUFBLFdBQVcsQ0FBQ0MsZ0JBQVosQ0FBNkI0SSxpQkFBN0IsQ0FBK0NELE9BQS9DO0FBQ0g7QUFsWEksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsibGV0IFdpbkdhbWUgICAgID0gcmVxdWlyZShcIlNpZXVYZVdpbkdhbWVcIik7XHJcbmxldCBIZWxwZXIgICAgICA9IHJlcXVpcmUoXCJIZWxwZXJcIik7XHJcbmxldCByZWVsICAgICAgICA9IHJlcXVpcmUoXCJTaWV1WGVSZWVsXCIpO1xyXG5sZXQgTGFuZ3VhZ2UgICAgPSByZXF1aXJlKFwic2lldXhlTGFuZ3VhZ2VcIik7XHJcbmxldCBMaXN0Um9vbSA9IGNjLkVudW0oe1xyXG4gICAgXCIxbFwiICAgOiAxMDAsXHJcbiAgICBcIjFrXCIgICAgOiAxMDAwLFxyXG4gICAgXCI1a1wiICAgIDogNTAwMCxcclxuICAgIFwiMTBrXCIgICA6IDEwMDAwXHJcbn0pO1xyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Wb3pCYXNlQ29tcG9uZW50LFxyXG5cclxuICAgIHByb3BlcnRpZXM6IHtcclxuICAgICAgICByZWVsczoge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogcmVlbCxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGxpc3RSb29tTm9kZToge1xyXG4gICAgICAgICAgICBkZWZhdWx0OiBbXSxcclxuICAgICAgICAgICAgdHlwZTogY2MuVG9nZ2xlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaWNvblByZWZhYiAgICAgICAgICA6IGNjLlByZWZhYixcclxuICAgICAgICBub3RpY2VOb2RlICAgICAgICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBidG5RdWF5ICAgICAgICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBidG5RdWF5TmhhbmggICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBidG5TdG9wU2lldVRvYyAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBidG5TdG9wUXVheSAgICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBidG5BdXRvUXVheSAgICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBXaW5HYW1lICAgICAgICAgICAgIDogV2luR2FtZSxcclxuICAgICAgICBsaXN0TWFpbkxpbmVzICAgICAgIDogY2MuTm9kZSxcclxuICAgICAgICBlZHRDaGVhdCAgICAgICA6IGNjLkVkaXRCb3gsXHJcbiAgICAgICAgaXNBdXRvICAgICAgICAgICAgICA6IGZhbHNlLFxyXG4gICAgICAgIGlzRmFzdCAgICAgICAgICAgICAgOiBmYWxzZSxcclxuICAgICAgICBpc1NwaW4gICAgICAgICAgICAgIDogZmFsc2UsXHJcbiAgICAgICAgcmVkICAgICAgICAgICAgICAgICA6IHRydWUsXHJcbiAgICAgICAgbGFzdFJlc3VsdCAgICAgICAgICA6IFtdLFxyXG4gICAgICAgIGJldFNlbGVjdCAgICAgICAgICAgOiAwLFxyXG4gICAgICAgIHJvb21OdW1iZXIgICAgICAgICAgOiAwLFxyXG4gICAgICAgIHBvc0xpbmVXaW4gICAgICAgICAgOiAwLFxyXG4gICAgICAgIHRvdGFsTGluZVdpbiAgICAgICAgOiAwLFxyXG4gICAgICAgIFRvdGFsSXRlbVJ1biAgICAgICAgOiAxNSxcclxuICAgICAgICBUb3RhbENvbHVtbiAgICAgICAgIDogNSxcclxuICAgICAgICBsYl9odTogY2MuTGFiZWwsXHJcbiAgICAgICAgYmV0TGV2ZWw6IFwiMWxcIixcclxuICAgIH0sXHJcbiAgICBvbkxvYWQgKCkge1xyXG4gICAgICAgIHRoaXMuaW5pdFNpZXVYZSgpO1xyXG4gICAgICAgIHRoaXMuV2luR2FtZS5pbml0KHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYmV0TGV2ZWwgPSBcIjFrXCI7XHJcbiAgICAgICAgdGhpcy5yb29tTnVtYmVyID0gTGlzdFJvb21bXCIxa1wiXTtcclxuICAgICAgICB0aGlzLmxpc3RSb29tTm9kZVsxXS5pc0NoZWNrZWQgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2NoZWR1bGUodGhpcy51cGRhdGVKYWNrcG90LCAzKTtcclxuICAgICAgICB0aGlzLnVwZGF0ZUphY2twb3QoKTtcclxuICAgIH0sXHJcbiAgICBvbkVuYWJsZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5ub2RlLnpJbmRleCA8PSBjYy5sYXN0WkluZGV4KXtcclxuICAgICAgICAgICAgY2MubGFzdFpJbmRleCAgICs9IDE7XHJcbiAgICAgICAgICAgIHRoaXMubm9kZS56SW5kZXggPSBjYy5sYXN0WkluZGV4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYy5jdXJyZW50VUkgID0gXCJVSVNpZXVYZVwiO1xyXG4gICAgfSxcclxuICAgIHNob3dHYW1lKCkge1xyXG4gICAgICAgIHRoaXMubm9kZS5nZXRDaGlsZEJ5TmFtZShcImNvbnRlbnRcIikuYWN0aXZlID0gdHJ1ZTtcclxuICAgIH0sXHJcbiAgICB1cGRhdGVKYWNrcG90KCl7XHJcbiAgICAgICAgbGV0IGtleSA9IFwic2lldXhlXCIrdGhpcy5iZXRMZXZlbDtcclxuICAgICAgICBpZihTbWFydEZveFNESy5TaWV1WGVDb250cm9sbGVyLlpvbmVJbnN0YW5jZS5teVNlbGYpe1xyXG4gICAgICAgICAgICBsZXQgdmFyaWFibGVKYWNrcG90ID0gU21hcnRGb3hTREsuU2lldVhlQ29udHJvbGxlci5ab25lSW5zdGFuY2UubXlTZWxmLmdldFZhcmlhYmxlKGtleSk7XHJcbiAgICAgICAgICAgIGlmKHZhcmlhYmxlSmFja3BvdCl7XHJcbiAgICAgICAgICAgICAgICBsZXQgamFja3BvdCA9IHZhcmlhYmxlSmFja3BvdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50X2xiX2phY2twb3QgPSB0aGlzLmxiX2h1LnN0cmluZztcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRfbGJfamFja3BvdCA9IGN1cnJlbnRfbGJfamFja3BvdC5zcGxpdChcIi5cIikuam9pbihcIlwiKTtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50SHUgPSBwYXJzZUZsb2F0KGN1cnJlbnRfbGJfamFja3BvdCk7XHJcbiAgICAgICAgICAgICAgICBVdGlscy5udW1iZXJUbyh0aGlzLmxiX2h1LCBjdXJyZW50SHUsIGphY2twb3QsIDEwMDAsIHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBvbkRpc2FibGUoKXtcclxuICAgICAgICB0aGlzLm5vZGUuc3RvcEFsbEFjdGlvbnMoKTtcclxuICAgIH0sXHJcbiAgICBpbml0U2lldVhlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgbGV0IGxpbmVBcnIxID0gW107XHJcbiAgICAgICAgbGV0IGxpbmVBcnIyID0gW107XHJcbiAgICAgICAgbGV0IGxpbmVBcnIzID0gW107XHJcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5yZWVscy5tYXAoZnVuY3Rpb24ocmVlbCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgbGV0IGxhc3RBcnJheSA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCAzKXtcclxuICAgICAgICAgICAgICAgIGxhc3RBcnJheSA9IHNlbGYuaW5pdFJhbmRvbUl0ZW1zKHNlbGYuVG90YWxJdGVtUnVuLCAwLCA2KTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGFzdEFycmF5ID0gc2VsZi5pbml0UmFuZG9tSXRlbXMoc2VsZi5Ub3RhbEl0ZW1SdW4sIDYsIDQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGxpbmVBcnIxLnB1c2gobGFzdEFycmF5W2xhc3RBcnJheS5sZW5ndGgtMV0pO1xyXG4gICAgICAgICAgICBsaW5lQXJyMi5wdXNoKGxhc3RBcnJheVtsYXN0QXJyYXkubGVuZ3RoLTJdKTtcclxuICAgICAgICAgICAgbGluZUFycjMucHVzaChsYXN0QXJyYXlbbGFzdEFycmF5Lmxlbmd0aC0zXSk7XHJcbiAgICAgICAgICAgIHJlZWwuaW5pdChzZWxmLCBsYXN0QXJyYXkpO1xyXG4gICAgICAgIH0pKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHNlbGYubGFzdFJlc3VsdCA9IGxpbmVBcnIzLmNvbmNhdChsaW5lQXJyMikuY29uY2F0KGxpbmVBcnIxKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzZXRNb25leVdpbjogZnVuY3Rpb24odG90YWxNb25leSkge1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZURhdGFQaG9uZyhyb29tSWQpIHtcclxuXHJcbiAgICB9LFxyXG4gICAgLy8gdXBkYXRlIChkdCkge30sXHJcbiAgICBldmVudFNpZXVUb2M6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmKCF0aGlzLmNoZWNrRW5vdWdoTW9uZXkoKSl7XHJcbiAgICAgICAgICAgIG1tLlRvYXN0LnNob3dUb2FzdCgxLCBMYW5ndWFnZS5nZXRTdHJpbmcoXCJub3RpX25vdF9tb25leVwiKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pc1NwaW4gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuaXNGYXN0ID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlzQXV0byA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5idG5TdG9wU2lldVRvYy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuYnRuU3RvcFF1YXkuYWN0aXZlICAgID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wYXVzZVN5c3RlbUV2ZW50Tm9kZSh0aGlzLmJ0blF1YXksIHRydWUpO1xyXG4gICAgICAgIHRoaXMuYXV0b1F1YXkoKTtcclxuICAgIH0sXHJcbiAgICBldmVudEF1dG9RdWF5OiBmdW5jdGlvbigpIHtcclxuICAgICAgICBpZighdGhpcy5jaGVja0Vub3VnaE1vbmV5KCkpe1xyXG4gICAgICAgICAgICBtbS5Ub2FzdC5zaG93VG9hc3QoMSwgTGFuZ3VhZ2UuZ2V0U3RyaW5nKFwibm90aV9ub3RfbW9uZXlcIikpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNTcGluICAgICAgICAgICAgICAgICA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5pc0F1dG8gICAgICAgICAgICAgICAgID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLmlzRmFzdCAgICAgICAgICAgICAgICAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmJ0blN0b3BTaWV1VG9jLmFjdGl2ZSAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmJ0blN0b3BRdWF5LmFjdGl2ZSAgICAgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMucGF1c2VTeXN0ZW1FdmVudE5vZGUodGhpcy5idG5RdWF5LCB0cnVlKTtcclxuICAgICAgICB0aGlzLmF1dG9RdWF5KCk7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRTdG9wQXV0bzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5pc0F1dG8gICAgICAgICAgICAgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmJ0blN0b3BRdWF5LmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucGF1c2VTeXN0ZW1FdmVudE5vZGUodGhpcy5idG5RdWF5LCBmYWxzZSk7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRTdG9wU2lldVRvYzogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5pc0Zhc3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmlzQXV0byA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYnRuU3RvcFNpZXVUb2MuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5wYXVzZVN5c3RlbUV2ZW50Tm9kZSh0aGlzLmJ0blF1YXksIGZhbHNlKTtcclxuICAgIH0sXHJcbiAgICBldmVudFBob25nOiBmdW5jdGlvbihldmVudCwgZGF0YSkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU3Bpbil7XHJcbiAgICAgICAgICAgIGlmKHRoaXMucm9vbU51bWJlciA9PSAxMDApe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0Um9vbU5vZGVbMF0uaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5yb29tTnVtYmVyID09IDEwMDApe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0Um9vbU5vZGVbMV0uaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5yb29tTnVtYmVyID09IDUwMDApe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0Um9vbU5vZGVbMl0uaXNDaGVja2VkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfWVsc2UgaWYodGhpcy5yb29tTnVtYmVyID09IDEwMDAwKXtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdFJvb21Ob2RlWzNdLmlzQ2hlY2tlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hZGROb3RpY2UoTGFuZ3VhZ2UuZ2V0U3RyaW5nKFwibm90aV9pc19wbGF5aW5nXCIpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJvb21OdW1iZXIgPSBwYXJzZUludChkYXRhKTtcclxuICAgICAgICBpZih0aGlzLnJvb21OdW1iZXIgPT0gMTAwKXtcclxuICAgICAgICAgICAgdGhpcy5iZXRMZXZlbCA9IFwiMWxcIjtcclxuICAgICAgICB9ZWxzZSBpZih0aGlzLnJvb21OdW1iZXIgPT0gMTAwMCl7XHJcbiAgICAgICAgICAgIHRoaXMuYmV0TGV2ZWwgPSBcIjFrXCI7XHJcbiAgICAgICAgfWVsc2UgaWYodGhpcy5yb29tTnVtYmVyID09IDUwMDApe1xyXG4gICAgICAgICAgICB0aGlzLmJldExldmVsID0gXCI1a1wiO1xyXG4gICAgICAgIH1lbHNlIGlmKHRoaXMucm9vbU51bWJlciA9PSAxMDAwMCl7XHJcbiAgICAgICAgICAgIHRoaXMuYmV0TGV2ZWwgPSBcIjEwa1wiO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVwZGF0ZUphY2twb3QoKTtcclxuICAgIH0sXHJcbiAgICBjaGVja0Vub3VnaE1vbmV5KCl7XHJcbiAgICAgICAgaWYoR2FtZVZhcmlhYmxlcy5Qb2tlci5nZXRDaGlwKFNtYXJ0Rm94U0RLLlNpZXVYZUNvbnRyb2xsZXIuWm9uZUluc3RhbmNlLm15U2VsZikgPCB0aGlzLnJvb21OdW1iZXIpe1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGV2ZW50UXVheTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgaWYoIXRoaXMuY2hlY2tFbm91Z2hNb25leSgpKXtcclxuICAgICAgICAgICAgbW0uVG9hc3Quc2hvd1RvYXN0KDEsIExhbmd1YWdlLmdldFN0cmluZyhcIm5vdGlfbm90X21vbmV5XCIpKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzU3BpbiAgICA9IHRydWU7XHJcbiAgICAgICAgbGV0IGJldFJlcXVlc3QgPSBuZXcgU2lldVhlUmVxdWVzdC5CZXRSZXF1ZXN0KCk7XHJcbiAgICAgICAgdGhpcy5zaG93TGluZVdpbihmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5wYXVzZVN5c3RlbUV2ZW50Tm9kZSh0aGlzLmJ0blF1YXksIHRydWUpO1xyXG4gICAgICAgIGJldFJlcXVlc3Quc2V0QmV0KHRoaXMucm9vbU51bWJlcik7XHJcbiAgICAgICAgU21hcnRGb3hTREsuU2lldVhlQ29udHJvbGxlci5ab25lSW5zdGFuY2Uuc2VuZChiZXRSZXF1ZXN0LnRvU1JlcXVlc3QoKSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVDaGlwQWxsKHRoaXMucm9vbU51bWJlcik7XHJcbiAgICB9LFxyXG4gICAgcGF1c2VTeXN0ZW1FdmVudE5vZGU6IGZ1bmN0aW9uKG5vZGVFdmVudCwgaXNQYXVzZSkge1xyXG4gICAgICAgIEhlbHBlci5zZXRNYXRlcmlhbEdyYXkoIG5vZGVFdmVudC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgaXNQYXVzZSk7XHJcbiAgICAgICAgaWYgKGlzUGF1c2Upe1xyXG4gICAgICAgICAgICBub2RlRXZlbnQucGF1c2VTeXN0ZW1FdmVudHModHJ1ZSk7XHJcbiAgICAgICAgfWVsc2VcclxuICAgICAgICAgICAgbm9kZUV2ZW50LnJlc3VtZVN5c3RlbUV2ZW50cyh0cnVlKTtcclxuICAgIH0sXHJcbiAgICBldmVudEJhY2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzU3Bpbil7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkTm90aWNlKExhbmd1YWdlLmdldFN0cmluZyhcIm5vdGlfaXNfcGxheWluZ1wiKSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHJvb20gPSBTbWFydEZveFNESy5TaWV1WGVDb250cm9sbGVyLlpvbmVJbnN0YW5jZS5nZXRSb29tQnlOYW1lKFwic2lldXhlXCIpO1xyXG4gICAgICAgIGlmKHJvb20pe1xyXG4gICAgICAgICAgICBTbWFydEZveFNESy5TaWV1WGVDb250cm9sbGVyLlpvbmVJbnN0YW5jZS5zZW5kKG5ldyBTbWFydEZveFNESy5TbWFydEZveC5SZXF1ZXN0cy5TeXN0ZW0uTGVhdmVSb29tUmVxdWVzdChyb29tKSk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuYmFjaygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBldmVudFNldHRpbmc6IGZ1bmN0aW9uKCkge1xyXG5cclxuICAgIH0sXHJcbiAgICBldmVudFZpbmhEYW5oOiBmdW5jdGlvbigpIHtcclxuICAgICAgICBsZXQgcmVxdWVzdCA9IG5ldyBDYXNpbm9SZXF1ZXN0LkxlYWRlckJvYXJkUmVxdWVzdCgpO1xyXG4gICAgICAgIFNtYXJ0Rm94U0RLLlNpZXVYZUNvbnRyb2xsZXIuWm9uZUluc3RhbmNlLnNlbmQocmVxdWVzdC50b1NSZXF1ZXN0KCkpO1xyXG4gICAgfSxcclxuICAgIGV2ZW50TGljaFN1R2lhb0RpY2g6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGxldCByZXF1ZXN0ID0gbmV3IENhc2lub1JlcXVlc3QuSGlzdG9yeVJlcXVlc3QoKTtcclxuICAgICAgICBTbWFydEZveFNESy5TaWV1WGVDb250cm9sbGVyLlpvbmVJbnN0YW5jZS5zZW5kKHJlcXVlc3QudG9TUmVxdWVzdCgpKTtcclxuICAgIH0sXHJcbiAgICBldmVudE9wZW5IZWxwZXI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHRoaXMuc2hvdyhcIlVJU2lldVhlSGVscGVyXCIsIHtwb3A6IHRydWUsIHNyYzogJ3NpZXV4ZSd9KTtcclxuICAgIH0sXHJcbiAgICBmaW5pc2hTcGluOiBmdW5jdGlvbigpe1xyXG4gICAgICAgIHRoaXMuaXNTcGluID0gZmFsc2U7XHJcbiAgICB9LFxyXG4gICAgU2lldVhlUnVuOiBmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZGF0YS5zdGF0dXMpIHtcclxuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvL3JlZm9ybWF0IGRhdGFcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGk9MDsgaTwgZGF0YS5yZXN1bHQubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjb3VudCA9IGklNTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQgPiAyKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5yZXN1bHRbaV0gPSBkYXRhLnJlc3VsdFtpXSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGF0YS5yZXN1bHQgPSB0aGlzLmdldERhdGFSZXN1bHQoZGF0YS5yZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoZGF0YS5yZXN1bHQubWFwKGZ1bmN0aW9uKGNlbCwgY2VsX2luZGV4KXtcclxuICAgICAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChjZWwubWFwKGZ1bmN0aW9uKGljb24sIGluZGV4KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5yZWVsc1tjZWxfaW5kZXhdLmljb25zW2luZGV4XS5zZXRJY29uKGljb24sIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgICAgIH0pKS50aGVuKHJlc3VsdCA9PntcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnJ1blJlZWxzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubGluZVdpbiAgICA9IGRhdGEubGluZVdpbjtcclxuICAgICAgICAgICAgICAgIHRoaXMud2luTW9uZXkgICA9IGRhdGEud2luTW9uZXk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzTm9IdSAgICAgPSBkYXRhLmlzTm9odTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNUaGFuZ0xvbiA9IGRhdGEuaXNUaGFuZ0xvbjtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U3BpbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGluaXRSYW5kb21JdGVtczogZnVuY3Rpb24obnVtYmVySXRlbSwgbWluLCBtYXhSYW5kb20pIHtcclxuICAgICAgICBsZXQgbGlzdEl0ZW0gPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpPTA7IGk8IG51bWJlckl0ZW07IGkrKyl7XHJcbiAgICAgICAgICAgIGxpc3RJdGVtW2ldID0gdGhpcy5yYW5kb20obWluLCBtYXhSYW5kb20pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGlzdEl0ZW07XHJcbiAgICB9LFxyXG4gICAgZ2V0RGF0YVJlc3VsdDogZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICAgICAgbGV0IHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIGxldCBuZXdBcnJheSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTwgdGhpcy5Ub3RhbENvbHVtbjsgaSsrKXtcclxuICAgICAgICAgICAgbmV3QXJyYXlbaV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgaT0wOyBpPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbmV3QXJyYXlbaSVzZWxmLlRvdGFsQ29sdW1uXS5wdXNoKHJlc3VsdFtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTwgdGhpcy5Ub3RhbENvbHVtbjsgaSsrKXtcclxuICAgICAgICAgICAgbGV0IHJhbmRvbUFyciA9IFtdO1xyXG4gICAgICAgICAgICBpZiAoaSA8IDMpe1xyXG4gICAgICAgICAgICAgICAgcmFuZG9tQXJyID0gdGhpcy5pbml0UmFuZG9tSXRlbXModGhpcy5Ub3RhbEl0ZW1SdW4tNiwgMCwgNik7XHJcbiAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgIHJhbmRvbUFyciA9IHRoaXMuaW5pdFJhbmRvbUl0ZW1zKHRoaXMuVG90YWxJdGVtUnVuLTYsIDYsIDQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld0FycmF5W2ldID0gbmV3QXJyYXlbaV0uY29uY2F0KHJhbmRvbUFycik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IGk9MDsgaTwgIHRoaXMubGFzdFJlc3VsdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBuZXdBcnJheVtpJXNlbGYuVG90YWxDb2x1bW5dLnB1c2goIHRoaXMubGFzdFJlc3VsdFtpXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubGFzdFJlc3VsdCA9IHJlc3VsdDtcclxuICAgICAgICByZXR1cm4gbmV3QXJyYXk7XHJcbiAgICB9LFxyXG4gICAgcmVmb3JtYXRSZXN1bHQocmVzdWx0LCBzaXplKSB7XHJcbiAgICAgICAgbGV0IHJlcyA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgaT0wO2kgPCByZXN1bHQubGVuZ3RoOyBpID0gaStzaXplKVxyXG4gICAgICAgICAgICByZXMucHVzaChyZXN1bHQuc2xpY2UoaSxpK3NpemUpKTtcclxuICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgfSxcclxuICAgIHJ1bkFjdGlvbldvbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5XaW5HYW1lLnJ1bldpbkdhbWUoKTtcclxuICAgICAgICB0aGlzLnNob3dMaW5lV2luKHRydWUpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0F1dG8pXHJcbiAgICAgICAgICAgIHRoaXMucGF1c2VTeXN0ZW1FdmVudE5vZGUodGhpcy5idG5RdWF5LCBmYWxzZSk7XHJcbiAgICB9LFxyXG4gICAgcmVzdW1lKCkge1xyXG4gICAgICAgIGlmICh0aGlzLndpbk1vbmV5ID4gMCl7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuV2luR2FtZS5ydW5XaW5HYW1lKCk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgMzAwKTtcclxuICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuV2luR2FtZS5ydW5XaW5HYW1lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIGF1dG9RdWF5KCkge1xyXG4gICAgICAgIGlmICh0aGlzLmlzQXV0byl7XHJcbiAgICAgICAgICAgIHRoaXMudGltZU91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRRdWF5KCk7XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSwgNTAwKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2hvd0xpbmVXaW46IGZ1bmN0aW9uKGlzU2hvdykge1xyXG4gICAgICAgIGxldCBzZWxmID0gdGhpcztcclxuICAgICAgICBpZiAoaXNTaG93KXtcclxuICAgICAgICAgICAgdGhpcy50b3RhbExpbmVXaW4gICA9IHRoaXMubGluZVdpbi5sZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMucG9zTGluZVdpbiAgICAgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy50b3RhbExpbmVXaW4gPiAwKXtcclxuICAgICAgICAgICAgICAgIFByb21pc2UuYWxsKHRoaXMubGluZVdpbi5tYXAoZnVuY3Rpb24ocG9zTGluZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5saXN0TWFpbkxpbmVzLmNoaWxkcmVuW3Bvc0xpbmVdLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNjaGVkdWxlT25jZShmdW5jdGlvbigpe1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIDIpO1xyXG4gICAgICAgICAgICAgICAgUHJvbWlzZS5hbGwoc2VsZi5saW5lV2luLm1hcChmdW5jdGlvbihwb3NMaW5lKXtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmxpc3RNYWluTGluZXMuY2hpbGRyZW5bcG9zTGluZV0uYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KSkudGhlbihyZXN1bHQgPT57XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5zY2hlZHVsZSggdGhpcy5zaG93TWFpbkxpbmUsIDEuNSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgZm9yIChsZXQgaT0wOyBpPCB0aGlzLmxpc3RNYWluTGluZXMuY2hpbGRyZW5Db3VudDsgaSsrKVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubGlzdE1haW5MaW5lcy5jaGlsZHJlbltpXS5hY3RpdmUpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0TWFpbkxpbmVzLmNoaWxkcmVuW2ldLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICBzZWxmLnVuc2NoZWR1bGUodGhpcy5zaG93TWFpbkxpbmUpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBzaG93TWFpbkxpbmU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMubGlzdE1haW5MaW5lcy5jaGlsZHJlbi5tYXAoZnVuY3Rpb24obGluZSwgaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKGxpbmUuYWN0aXZlKVxyXG4gICAgICAgICAgICAgICAgbGluZS5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB9KSkudGhlbihyZXN1bHQgPT57XHJcbiAgICAgICAgICAgIHRoaXMudG90YWxMaW5lV2luID0gdGhpcy5saW5lV2luLmxlbmd0aDtcclxuICAgICAgICAgICAgaWYgKHRoaXMudG90YWxMaW5lV2luID4gMCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvc0xpbmVXaW4gPSAodGhpcy5wb3NMaW5lV2luKzEpJXRoaXMudG90YWxMaW5lV2luO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5saXN0TWFpbkxpbmVzLmNoaWxkcmVuW3RoaXMubGluZVdpblt0aGlzLnBvc0xpbmVXaW5dXS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgcnVuUmVlbHM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLnJlZWxzLm1hcChmdW5jdGlvbihyZWVsLCBpbmRleCkge1xyXG4gICAgICAgICAgICByZWVsLnNwaW4oaW5kZXgpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH0sXHJcbiAgICBjb3B5OiBmdW5jdGlvbigpe1xyXG4gICAgICAgIFByb21pc2UuYWxsKHRoaXMucmVlbHMubWFwKGZ1bmN0aW9uKHJlZWwpe1xyXG4gICAgICAgICAgICByZWVsLmljb25zW3JlZWwuaWNvbnMubGVuZ3RoLTFdLnNldEljb24ocmVlbC5pY29uc1syXS5kYXRhKTtcclxuICAgICAgICAgICAgcmVlbC5pY29uc1tyZWVsLmljb25zLmxlbmd0aC0yXS5zZXRJY29uKHJlZWwuaWNvbnNbMV0uZGF0YSk7XHJcbiAgICAgICAgICAgIHJlZWwuaWNvbnNbcmVlbC5pY29ucy5sZW5ndGgtM10uc2V0SWNvbihyZWVsLmljb25zWzBdLmRhdGEpO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH0sXHJcbiAgICByYW5kb206IGZ1bmN0aW9uKG1pbiwgbWF4KXtcclxuICAgICAgICByZXR1cm4gIG1pbisgfn4oTWF0aC5yYW5kb20oKSptYXgpO1xyXG4gICAgfSxcclxuICAgIHJlc2V0U3BpbjogZnVuY3Rpb24gKCkge1xyXG4gICAgfSxcclxuICAgIGNoZWNrSGFzTW9uZXk6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICAgIGFkZE5vdGljZTogZnVuY3Rpb24gKG1lc3NhZ2UpIHtcclxuICAgICAgICBsZXQgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ub3RpY2VOb2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5ub3RpY2VOb2RlLmdldENoaWxkQnlOYW1lKFwibGJfbm90aVwiKS5nZXRDb21wb25lbnQoY2MuTGFiZWwpLnN0cmluZyA9IG1lc3NhZ2U7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzZWxmLm5vdGljZU5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgfSwgMTIwMCk7XHJcbiAgICB9LFxyXG4gICAgdXBkYXRlQ2hpcEFsbChzdWJDaGlwKSB7XHJcbiAgICAgICAgU21hcnRGb3hTREsuU2lldVhlQ29udHJvbGxlci5vbkV2ZW50VXBkYXRlQ2hpcChzdWJDaGlwKTtcclxuICAgIH0sXHJcbn0pO1xyXG4iXX0=