
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/poker/PlayerPoker.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '1afa52ga29Bp6R6e9L7DpFh', 'PlayerPoker');
// scripts/poker/PlayerPoker.js

"use strict";

var PokerCard = require('PokerCard');

cc.Class({
  "extends": cc.Player,
  properties: {
    cards: {
      type: cc.Node,
      "default": []
    },
    Hands: cc.Node,
    BigBlind: cc.Node,
    SmallBlind: cc.Node,
    BetChip: cc.Node,
    _actionController: null,
    m_total_bet: 0,
    TypeOfHand: cc.Label
  },
  onEnable: function onEnable() {
    this._super();

    this.zoneName = "poker";
    this.Hands.active = false;
    this.BigBlind.active = false;
    this.SmallBlind.active = false;
    this.BetChip.active = false;
    this.TypeOfHand.node.active = false;
    this.hideWinEffect();
  },
  onDisable: function onDisable() {
    this.reset();
  },
  reset: function reset() {
    this.Hands.active = false;
    this.BigBlind.active = false;
    this.SmallBlind.active = false;
    this.Status.active = false;
    this.BetChip.active = false;
    this.TypeOfHand.node.active = false;
    this.Status.active = false;
    this.hideWinEffect();
    this.hideHoldem();
    this.resetBet();
  },
  setActionController: function setActionController(actionController) {
    this._actionController = actionController;
  },
  addCardHand: function addCardHand(cardIds) {
    this.Hands.active = true;

    for (var i = 0; i < this.cards.length; i++) {
      var card = this.cards[i].getComponent("Card");

      if (cardIds[i] < 0) {
        card.init(null);
      } else {
        card.reveal(new PokerCard.Card(cardIds[i]));
      }
    }

    this.scaleHoldEm();
  },
  scaleHoldEm: function scaleHoldEm() {
    if (!this.isItMe()) {
      this.Hands.scale = 0.75;
    } else {
      this.Hands.scale = 1;
    }
  },
  hideHoldem: function hideHoldem() {
    this.Hands.active = false;
  },
  onStartEvent: function onStartEvent(startEvent) {
    this.BigBlind.active = false;
    this.SmallBlind.active = false;
    this.Status.active = false;
    this.Hands.active = true;

    for (var i = 0; i < this.cards.length; i++) {
      var card = this.cards[i].getComponent("Card");
      this.cards[i].opacity = 255;

      if (this.isItMe()) {
        card.reveal(new PokerCard.Card(startEvent.m_listCard[i]));
      } else {
        card.init(null);
      }
    }

    this.scaleHoldEm();

    if (startEvent.m_smallBlind == this._desk.UserName) {
      this.SmallBlind.active = true;
      this.m_total_bet = startEvent.m_betChipGame;
      this.showBetChip(this.m_total_bet); // sub money in Desk

      this._desk.UserChip -= startEvent.m_betChipGame;
      this.setMoney(this._desk.UserChip);
    } else if (startEvent.m_bigBlind == this._desk.UserName) {
      this.BigBlind.active = true;
      this.m_total_bet = 2 * startEvent.m_betChipGame;
      this.showBetChip(this.m_total_bet); // sub money in Desk

      this._desk.UserChip -= 2 * startEvent.m_betChipGame;
      this.setMoney(this._desk.UserChip);
    }

    if (startEvent.m_currentUser == this._desk.UserName) {
      var time = startEvent.m_userTime / 1000;
      this.setTotalProgress(time);
      this.setCurrentProgress(time);
      this.setTimeWarning(5);
      this.turnOnTimer();

      if (cc.isValid(this._actionController)) {
        this._actionController.showCallRaise(startEvent.m_betChipGame, this._desk.UserChip, this.m_total_bet);
      }
    }
  },
  updatePosHand: function updatePosHand() {
    if (this.newPos != undefined) {
      if (this.number_desk == 6) {
        if (this.newPos == 5 || this.newPos == 4 || this.newPos == 3) {
          this.Hands.x = -110;
        } else {
          this.Hands.x = 115;
        }
      } else {
        if (this.newPos == 5 || this.newPos == 6 || this.newPos == 7) {
          this.Hands.x = -110;
        } else {
          this.Hands.x = 115;
        }
      }
    }
  },
  onTurnEvent: function onTurnEvent(userTurnRes) {
    this.Status.active = false;
    var time = userTurnRes.m_time / 1000;
    this.setTotalProgress(time);
    this.setCurrentProgress(time);
    this.setTimeWarning(5);
    this.turnOnTimer();
    var betChip = userTurnRes.m_betchip; // check action of myself

    if (this.isItMe()) {
      // call or raise
      if (betChip > 0) {
        if (cc.isValid(this._actionController)) {
          if (betChip > this._desk.UserChip) betChip = this._desk.UserChip;

          this._actionController.showCallRaise(betChip, this._desk.UserChip, this.m_total_bet);
        }
      } else {
        // check
        if (cc.isValid(this._actionController)) {
          this._actionController.showCheck(betChip, this._desk.UserChip, this.m_total_bet);
        }
      }
    } else {
      if (cc.isValid(this._actionController)) {
        this._actionController.hideAllActions();
      }
    }
  },
  onFoldEvent: function onFoldEvent(userFoldRes) {
    Utils.loadRes(this.Status.getComponent(cc.Sprite), "images/poker/PlayerStatus/fold-tag");
    this.turnOffTimer();

    if (cc.isValid(this._actionController)) {
      this._actionController.hideAllActions();
    }

    this.Hands.active = false;
  },
  onCheckEvent: function onCheckEvent(userCheckRes) {
    this.BetChip.active = false;
    Utils.loadRes(this.Status.getComponent(cc.Sprite), "images/poker/PlayerStatus/check-tag");

    if (cc.isValid(this._actionController)) {
      this._actionController.hideAllActions();
    }
  },
  onCallEvent: function onCallEvent(userCallRes) {
    Utils.loadRes(this.Status.getComponent(cc.Sprite), "images/poker/PlayerStatus/call-tag");
    var callChip = userCallRes.m_chip;
    this.m_total_bet += callChip;
    this.showBetChip(this.m_total_bet); // sub money in Desk

    this._desk.UserChip -= callChip;
    this.setMoney(this._desk.UserChip);

    if (cc.isValid(this._actionController)) {
      this._actionController.hideAllActions();
    }
  },
  onRaiseEvent: function onRaiseEvent(userRaiseRes) {
    Utils.loadRes(this.Status.getComponent(cc.Sprite), "images/poker/PlayerStatus/rasie-tag");
    var raiseChip = userRaiseRes.m_chip;
    this.m_total_bet += raiseChip;
    this.showBetChip(this.m_total_bet); // sub money in Desk

    this._desk.UserChip -= raiseChip;
    this.setMoney(this._desk.UserChip);

    if (cc.isValid(this._actionController)) {
      this._actionController.hideAllActions();
    }
  },
  onAllInEvent: function onAllInEvent(userAllInRes) {
    Utils.loadRes(this.Status.getComponent(cc.Sprite), "images/poker/PlayerStatus/all-in-tag");
    var raiseChip = userAllInRes.m_chip;
    this.m_total_bet += raiseChip;
    this.showBetChip(this.m_total_bet); // sub money in Desk

    this._desk.UserChip -= raiseChip;
    this.setMoney(this._desk.UserChip);

    if (cc.isValid(this._actionController)) {
      this._actionController.hideAllActions();
    }
  },
  onShowDownEvent: function onShowDownEvent(cardIds) {
    this.turnOffTimer();
    this.Hands.active = true;
    this.BetChip.active = false;

    for (var i = 0; i < this.cards.length; i++) {
      var card = this.cards[i].getComponent("Card");

      if (this.isItMe()) {
        card.init(new PokerCard.Card(cardIds[i]));
      } else {
        card.reveal(new PokerCard.Card(cardIds[i]));
      }
    }
  },
  onGameFinishEvent: function onGameFinishEvent(winCards, typeofHand, chipWin) {
    this.turnOffTimer();

    if (chipWin > 0) {
      // chip refund
      this._desk.UserChip += chipWin;
      this.setMoney(this.getDesk().UserChip);
    }

    for (var i = 0; i < this.cards.length; i++) {
      var card = this.cards[i].getComponent("Card");

      if (card._card && winCards.indexOf(card._card.id) < 0) {
        card.showOver();
      }
    }

    var winningHands = {
      HIGHCARD: "Mậu Thầu",
      PAIR: "Một Đôi",
      TWOPAIR: "Hai Đôi",
      THREEOFAKIND: "Xám",
      STRAIGHT: "Sảnh",
      FLUSH: "Thùng",
      FULLHOUSE: "Củ Lũ",
      FOUROFAKIND: "Tứ Quý",
      STRAIGHTFLUSH: "Sảnh Thùng",
      ROYALFLUSH: "Thùng Phá Sảnh"
    };

    if (winningHands[typeofHand]) {
      this.TypeOfHand.node.active = true;
      this.TypeOfHand.string = winningHands[typeofHand];
    }

    this.m_total_bet = 0;
  },
  onWinnerEvent: function onWinnerEvent() {
    this.showWinEffect();
    this.turnOffTimer();
  },
  showBetChip: function showBetChip(money) {
    if (money <= 0) return;
    this.BetChip.active = true;
    var lb_betChip = this.BetChip.getChildByName("money").getComponent(cc.Label);
    lb_betChip.string = Utils.formatCurrency(money.toFixed(0));
  },
  turnOffTimer: function turnOffTimer() {
    this._super();

    if (cc.isValid(this._actionController)) {
      this._actionController.hideAllActions();
    }
  },
  showBetting: function showBetting() {
    this.turnOnTimer();

    if (cc.isValid(this._actionController)) {
      this._actionController.showCheck(this.m_total_bet, this._desk.UserChip, this.m_total_bet);
    }
  },
  resetBet: function resetBet() {
    this.m_total_bet = 0;
    this.BetChip.active = false;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xccG9rZXJcXFBsYXllclBva2VyLmpzIl0sIm5hbWVzIjpbIlBva2VyQ2FyZCIsInJlcXVpcmUiLCJjYyIsIkNsYXNzIiwiUGxheWVyIiwicHJvcGVydGllcyIsImNhcmRzIiwidHlwZSIsIk5vZGUiLCJIYW5kcyIsIkJpZ0JsaW5kIiwiU21hbGxCbGluZCIsIkJldENoaXAiLCJfYWN0aW9uQ29udHJvbGxlciIsIm1fdG90YWxfYmV0IiwiVHlwZU9mSGFuZCIsIkxhYmVsIiwib25FbmFibGUiLCJfc3VwZXIiLCJ6b25lTmFtZSIsImFjdGl2ZSIsIm5vZGUiLCJoaWRlV2luRWZmZWN0Iiwib25EaXNhYmxlIiwicmVzZXQiLCJTdGF0dXMiLCJoaWRlSG9sZGVtIiwicmVzZXRCZXQiLCJzZXRBY3Rpb25Db250cm9sbGVyIiwiYWN0aW9uQ29udHJvbGxlciIsImFkZENhcmRIYW5kIiwiY2FyZElkcyIsImkiLCJsZW5ndGgiLCJjYXJkIiwiZ2V0Q29tcG9uZW50IiwiaW5pdCIsInJldmVhbCIsIkNhcmQiLCJzY2FsZUhvbGRFbSIsImlzSXRNZSIsInNjYWxlIiwib25TdGFydEV2ZW50Iiwic3RhcnRFdmVudCIsIm9wYWNpdHkiLCJtX2xpc3RDYXJkIiwibV9zbWFsbEJsaW5kIiwiX2Rlc2siLCJVc2VyTmFtZSIsIm1fYmV0Q2hpcEdhbWUiLCJzaG93QmV0Q2hpcCIsIlVzZXJDaGlwIiwic2V0TW9uZXkiLCJtX2JpZ0JsaW5kIiwibV9jdXJyZW50VXNlciIsInRpbWUiLCJtX3VzZXJUaW1lIiwic2V0VG90YWxQcm9ncmVzcyIsInNldEN1cnJlbnRQcm9ncmVzcyIsInNldFRpbWVXYXJuaW5nIiwidHVybk9uVGltZXIiLCJpc1ZhbGlkIiwic2hvd0NhbGxSYWlzZSIsInVwZGF0ZVBvc0hhbmQiLCJuZXdQb3MiLCJ1bmRlZmluZWQiLCJudW1iZXJfZGVzayIsIngiLCJvblR1cm5FdmVudCIsInVzZXJUdXJuUmVzIiwibV90aW1lIiwiYmV0Q2hpcCIsIm1fYmV0Y2hpcCIsInNob3dDaGVjayIsImhpZGVBbGxBY3Rpb25zIiwib25Gb2xkRXZlbnQiLCJ1c2VyRm9sZFJlcyIsIlV0aWxzIiwibG9hZFJlcyIsIlNwcml0ZSIsInR1cm5PZmZUaW1lciIsIm9uQ2hlY2tFdmVudCIsInVzZXJDaGVja1JlcyIsIm9uQ2FsbEV2ZW50IiwidXNlckNhbGxSZXMiLCJjYWxsQ2hpcCIsIm1fY2hpcCIsIm9uUmFpc2VFdmVudCIsInVzZXJSYWlzZVJlcyIsInJhaXNlQ2hpcCIsIm9uQWxsSW5FdmVudCIsInVzZXJBbGxJblJlcyIsIm9uU2hvd0Rvd25FdmVudCIsIm9uR2FtZUZpbmlzaEV2ZW50Iiwid2luQ2FyZHMiLCJ0eXBlb2ZIYW5kIiwiY2hpcFdpbiIsImdldERlc2siLCJfY2FyZCIsImluZGV4T2YiLCJpZCIsInNob3dPdmVyIiwid2lubmluZ0hhbmRzIiwiSElHSENBUkQiLCJQQUlSIiwiVFdPUEFJUiIsIlRIUkVFT0ZBS0lORCIsIlNUUkFJR0hUIiwiRkxVU0giLCJGVUxMSE9VU0UiLCJGT1VST0ZBS0lORCIsIlNUUkFJR0hURkxVU0giLCJST1lBTEZMVVNIIiwic3RyaW5nIiwib25XaW5uZXJFdmVudCIsInNob3dXaW5FZmZlY3QiLCJtb25leSIsImxiX2JldENoaXAiLCJnZXRDaGlsZEJ5TmFtZSIsImZvcm1hdEN1cnJlbmN5IiwidG9GaXhlZCIsInNob3dCZXR0aW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLElBQUlBLFNBQVMsR0FBR0MsT0FBTyxDQUFDLFdBQUQsQ0FBdkI7O0FBQ0FDLEVBQUUsQ0FBQ0MsS0FBSCxDQUFTO0FBQ0wsYUFBU0QsRUFBRSxDQUFDRSxNQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxLQUFLLEVBQUU7QUFDSEMsTUFBQUEsSUFBSSxFQUFFTCxFQUFFLENBQUNNLElBRE47QUFFSCxpQkFBUztBQUZOLEtBREM7QUFLUkMsSUFBQUEsS0FBSyxFQUFFUCxFQUFFLENBQUNN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TCtDLEVBQUFBLFdBblJLLHlCQW1SUTtBQUNULFNBQUs3RCxXQUFMOztBQUNBLFFBQUcxRCxFQUFFLENBQUMyRCxPQUFILENBQVcsS0FBS2hELGlCQUFoQixDQUFILEVBQXNDO0FBQ2xDLFdBQUtBLGlCQUFMLENBQXVCNEQsU0FBdkIsQ0FBaUMsS0FBSzNELFdBQXRDLEVBQW1ELEtBQUtpQyxLQUFMLENBQVdJLFFBQTlELEVBQXdFLEtBQUtyQyxXQUE3RTtBQUNIO0FBQ0osR0F4Ukk7QUF5UkxhLEVBQUFBLFFBelJLLHNCQXlSSztBQUNOLFNBQUtiLFdBQUwsR0FBbUIsQ0FBbkI7QUFDQSxTQUFLRixPQUFMLENBQWFRLE1BQWIsR0FBc0IsS0FBdEI7QUFDSDtBQTVSSSxDQUFUIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgUG9rZXJDYXJkID0gcmVxdWlyZSgnUG9rZXJDYXJkJyk7XHJcbmNjLkNsYXNzKHtcclxuICAgIGV4dGVuZHM6IGNjLlBsYXllcixcclxuXHJcbiAgICBwcm9wZXJ0aWVzOiB7XHJcbiAgICAgICAgY2FyZHMgOntcclxuICAgICAgICAgICAgdHlwZTogY2MuTm9kZSxcclxuICAgICAgICAgICAgZGVmYXVsdDogW11cclxuICAgICAgICB9LFxyXG4gICAgICAgIEhhbmRzOiBjYy5Ob2RlLFxyXG4gICAgICAgIEJpZ0JsaW5kOiBjYy5Ob2RlLFxyXG4gICAgICAgIFNtYWxsQmxpbmQ6IGNjLk5vZGUsXHJcbiAgICAgICAgQmV0Q2hpcCA6IGNjLk5vZGUsXHJcbiAgICAgICAgX2FjdGlvbkNvbnRyb2xsZXI6IG51bGwsXHJcbiAgICAgICAgbV90b3RhbF9iZXQ6IDAsXHJcbiAgICAgICAgVHlwZU9mSGFuZDogY2MuTGFiZWxcclxuICAgIH0sXHJcbiAgICBvbkVuYWJsZSgpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy56b25lTmFtZSA9IFwicG9rZXJcIjtcclxuICAgICAgICB0aGlzLkhhbmRzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuQmlnQmxpbmQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5TbWFsbEJsaW5kLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuQmV0Q2hpcC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLlR5cGVPZkhhbmQubm9kZS5hY3RpdmUgPSAgZmFsc2U7XHJcbiAgICAgICAgdGhpcy5oaWRlV2luRWZmZWN0KCk7XHJcbiAgICB9LFxyXG4gICAgb25EaXNhYmxlKCl7XHJcbiAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgfSxcclxuICAgIHJlc2V0KCl7XHJcbiAgICAgICAgdGhpcy5IYW5kcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkJpZ0JsaW5kLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuU21hbGxCbGluZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLlN0YXR1cy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLkJldENoaXAuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5UeXBlT2ZIYW5kLm5vZGUuYWN0aXZlID0gIGZhbHNlO1xyXG4gICAgICAgIHRoaXMuU3RhdHVzLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuaGlkZVdpbkVmZmVjdCgpO1xyXG4gICAgICAgIHRoaXMuaGlkZUhvbGRlbSgpO1xyXG4gICAgICAgIHRoaXMucmVzZXRCZXQoKTtcclxuICAgIH0sXHJcbiAgICBzZXRBY3Rpb25Db250cm9sbGVyKGFjdGlvbkNvbnRyb2xsZXIpe1xyXG4gICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIgPSBhY3Rpb25Db250cm9sbGVyO1xyXG4gICAgfSxcclxuICAgIGFkZENhcmRIYW5kKGNhcmRJZHMpe1xyXG4gICAgICAgIHRoaXMuSGFuZHMuYWN0aXZlID0gdHJ1ZTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5jYXJkcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgbGV0IGNhcmQgPSB0aGlzLmNhcmRzW2ldLmdldENvbXBvbmVudChcIkNhcmRcIik7XHJcbiAgICAgICAgICAgIGlmKGNhcmRJZHNbaV0gPCAwKXtcclxuICAgICAgICAgICAgICAgIGNhcmQuaW5pdChudWxsKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnJldmVhbChuZXcgUG9rZXJDYXJkLkNhcmQoY2FyZElkc1tpXSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc2NhbGVIb2xkRW0oKTtcclxuICAgIH0sXHJcbiAgICBzY2FsZUhvbGRFbSgpe1xyXG4gICAgICAgIGlmKCF0aGlzLmlzSXRNZSgpKXtcclxuICAgICAgICAgICAgdGhpcy5IYW5kcy5zY2FsZSA9IDAuNzU7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHRoaXMuSGFuZHMuc2NhbGUgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBoaWRlSG9sZGVtKCl7XHJcbiAgICAgICAgdGhpcy5IYW5kcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBvblN0YXJ0RXZlbnQoc3RhcnRFdmVudCl7XHJcbiAgICAgICAgdGhpcy5CaWdCbGluZC5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLlNtYWxsQmxpbmQuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5TdGF0dXMuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5IYW5kcy5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcmRzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgY2FyZCA9IHRoaXMuY2FyZHNbaV0uZ2V0Q29tcG9uZW50KFwiQ2FyZFwiKTtcclxuICAgICAgICAgICAgdGhpcy5jYXJkc1tpXS5vcGFjaXR5ID0gMjU1O1xyXG4gICAgICAgICAgICBpZih0aGlzLmlzSXRNZSgpKXtcclxuICAgICAgICAgICAgICAgIGNhcmQucmV2ZWFsKG5ldyBQb2tlckNhcmQuQ2FyZChzdGFydEV2ZW50Lm1fbGlzdENhcmRbaV0pKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjYXJkLmluaXQobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zY2FsZUhvbGRFbSgpO1xyXG5cclxuICAgICAgICBpZihzdGFydEV2ZW50Lm1fc21hbGxCbGluZCA9PSB0aGlzLl9kZXNrLlVzZXJOYW1lKXtcclxuICAgICAgICAgICAgdGhpcy5TbWFsbEJsaW5kLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMubV90b3RhbF9iZXQgPSBzdGFydEV2ZW50Lm1fYmV0Q2hpcEdhbWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JldENoaXAodGhpcy5tX3RvdGFsX2JldCk7XHJcbiAgICAgICAgICAgIC8vIHN1YiBtb25leSBpbiBEZXNrXHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc2suVXNlckNoaXAgLT0gc3RhcnRFdmVudC5tX2JldENoaXBHYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnNldE1vbmV5KHRoaXMuX2Rlc2suVXNlckNoaXApO1xyXG4gICAgICAgIH1lbHNlIGlmKHN0YXJ0RXZlbnQubV9iaWdCbGluZCA9PSB0aGlzLl9kZXNrLlVzZXJOYW1lKXtcclxuICAgICAgICAgICAgdGhpcy5CaWdCbGluZC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLm1fdG90YWxfYmV0ID0gMipzdGFydEV2ZW50Lm1fYmV0Q2hpcEdhbWU7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd0JldENoaXAodGhpcy5tX3RvdGFsX2JldCk7XHJcblxyXG4gICAgICAgICAgICAvLyBzdWIgbW9uZXkgaW4gRGVza1xyXG4gICAgICAgICAgICB0aGlzLl9kZXNrLlVzZXJDaGlwIC09IDIqc3RhcnRFdmVudC5tX2JldENoaXBHYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnNldE1vbmV5KHRoaXMuX2Rlc2suVXNlckNoaXApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihzdGFydEV2ZW50Lm1fY3VycmVudFVzZXIgPT0gdGhpcy5fZGVzay5Vc2VyTmFtZSl7XHJcbiAgICAgICAgICAgIGxldCB0aW1lID0gc3RhcnRFdmVudC5tX3VzZXJUaW1lIC8gMTAwMDtcclxuICAgICAgICAgICAgdGhpcy5zZXRUb3RhbFByb2dyZXNzKHRpbWUpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEN1cnJlbnRQcm9ncmVzcyh0aW1lKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRUaW1lV2FybmluZyg1KTtcclxuICAgICAgICAgICAgdGhpcy50dXJuT25UaW1lcigpO1xyXG4gICAgICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIuc2hvd0NhbGxSYWlzZShzdGFydEV2ZW50Lm1fYmV0Q2hpcEdhbWUsIHRoaXMuX2Rlc2suVXNlckNoaXAsIHRoaXMubV90b3RhbF9iZXQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIHVwZGF0ZVBvc0hhbmQoKXtcclxuICAgICAgICBpZih0aGlzLm5ld1BvcyAhPSB1bmRlZmluZWQpe1xyXG4gICAgICAgICAgICBpZih0aGlzLm51bWJlcl9kZXNrID09IDYpe1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5uZXdQb3MgPT0gNSB8fCB0aGlzLm5ld1BvcyA9PSA0IHx8IHRoaXMubmV3UG9zID09IDMpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSGFuZHMueCA9IC0xMTA7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkhhbmRzLnggPSAxMTU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYodGhpcy5uZXdQb3MgPT0gNSB8fCB0aGlzLm5ld1BvcyA9PSA2IHx8IHRoaXMubmV3UG9zID09IDcpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuSGFuZHMueCA9IC0xMTA7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLkhhbmRzLnggPSAxMTU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uVHVybkV2ZW50KHVzZXJUdXJuUmVzKXtcclxuICAgICAgICB0aGlzLlN0YXR1cy5hY3RpdmUgPSBmYWxzZTtcclxuICAgICAgICBsZXQgdGltZSA9IHVzZXJUdXJuUmVzLm1fdGltZSAvIDEwMDA7XHJcbiAgICAgICAgdGhpcy5zZXRUb3RhbFByb2dyZXNzKHRpbWUpO1xyXG4gICAgICAgIHRoaXMuc2V0Q3VycmVudFByb2dyZXNzKHRpbWUpO1xyXG4gICAgICAgIHRoaXMuc2V0VGltZVdhcm5pbmcoNSk7XHJcbiAgICAgICAgdGhpcy50dXJuT25UaW1lcigpO1xyXG4gICAgICAgIGxldCBiZXRDaGlwID0gdXNlclR1cm5SZXMubV9iZXRjaGlwO1xyXG4gICAgICAgIC8vIGNoZWNrIGFjdGlvbiBvZiBteXNlbGZcclxuICAgICAgICBpZih0aGlzLmlzSXRNZSgpKXtcclxuICAgICAgICAgICAgLy8gY2FsbCBvciByYWlzZVxyXG4gICAgICAgICAgICBpZihiZXRDaGlwID4gMCl7XHJcbiAgICAgICAgICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihiZXRDaGlwID4gdGhpcy5fZGVzay5Vc2VyQ2hpcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmV0Q2hpcCA9IHRoaXMuX2Rlc2suVXNlckNoaXA7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ29udHJvbGxlci5zaG93Q2FsbFJhaXNlKGJldENoaXAsIHRoaXMuX2Rlc2suVXNlckNoaXAsIHRoaXMubV90b3RhbF9iZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8vIGNoZWNrXHJcbiAgICAgICAgICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9hY3Rpb25Db250cm9sbGVyLnNob3dDaGVjayhiZXRDaGlwLCB0aGlzLl9kZXNrLlVzZXJDaGlwLCB0aGlzLm1fdG90YWxfYmV0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIuaGlkZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvbkZvbGRFdmVudCh1c2VyRm9sZFJlcyl7XHJcbiAgICAgICAgVXRpbHMubG9hZFJlcyh0aGlzLlN0YXR1cy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgXCJpbWFnZXMvcG9rZXIvUGxheWVyU3RhdHVzL2ZvbGQtdGFnXCIpO1xyXG4gICAgICAgIHRoaXMudHVybk9mZlRpbWVyKCk7XHJcbiAgICAgICAgaWYoY2MuaXNWYWxpZCh0aGlzLl9hY3Rpb25Db250cm9sbGVyKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIuaGlkZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5IYW5kcy5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH0sXHJcbiAgICBvbkNoZWNrRXZlbnQodXNlckNoZWNrUmVzKXtcclxuICAgICAgICB0aGlzLkJldENoaXAuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgVXRpbHMubG9hZFJlcyh0aGlzLlN0YXR1cy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgXCJpbWFnZXMvcG9rZXIvUGxheWVyU3RhdHVzL2NoZWNrLXRhZ1wiKTtcclxuICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ29udHJvbGxlci5oaWRlQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvbkNhbGxFdmVudCh1c2VyQ2FsbFJlcyl7XHJcbiAgICAgICAgVXRpbHMubG9hZFJlcyh0aGlzLlN0YXR1cy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgXCJpbWFnZXMvcG9rZXIvUGxheWVyU3RhdHVzL2NhbGwtdGFnXCIpO1xyXG4gICAgICAgIGxldCBjYWxsQ2hpcCA9IHVzZXJDYWxsUmVzLm1fY2hpcDtcclxuICAgICAgICB0aGlzLm1fdG90YWxfYmV0ICs9IGNhbGxDaGlwO1xyXG4gICAgICAgIHRoaXMuc2hvd0JldENoaXAodGhpcy5tX3RvdGFsX2JldCk7XHJcblxyXG4gICAgICAgIC8vIHN1YiBtb25leSBpbiBEZXNrXHJcbiAgICAgICAgdGhpcy5fZGVzay5Vc2VyQ2hpcCAtPSBjYWxsQ2hpcDtcclxuICAgICAgICB0aGlzLnNldE1vbmV5KHRoaXMuX2Rlc2suVXNlckNoaXApO1xyXG5cclxuICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ29udHJvbGxlci5oaWRlQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvblJhaXNlRXZlbnQodXNlclJhaXNlUmVzKXtcclxuICAgICAgICBVdGlscy5sb2FkUmVzKHRoaXMuU3RhdHVzLmdldENvbXBvbmVudChjYy5TcHJpdGUpLCBcImltYWdlcy9wb2tlci9QbGF5ZXJTdGF0dXMvcmFzaWUtdGFnXCIpO1xyXG4gICAgICAgIGxldCByYWlzZUNoaXAgPSB1c2VyUmFpc2VSZXMubV9jaGlwO1xyXG4gICAgICAgIHRoaXMubV90b3RhbF9iZXQgKz0gcmFpc2VDaGlwO1xyXG4gICAgICAgIHRoaXMuc2hvd0JldENoaXAodGhpcy5tX3RvdGFsX2JldCk7XHJcblxyXG4gICAgICAgIC8vIHN1YiBtb25leSBpbiBEZXNrXHJcbiAgICAgICAgdGhpcy5fZGVzay5Vc2VyQ2hpcCAtPSByYWlzZUNoaXA7XHJcbiAgICAgICAgdGhpcy5zZXRNb25leSh0aGlzLl9kZXNrLlVzZXJDaGlwKTtcclxuXHJcbiAgICAgICAgaWYoY2MuaXNWYWxpZCh0aGlzLl9hY3Rpb25Db250cm9sbGVyKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIuaGlkZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgb25BbGxJbkV2ZW50KHVzZXJBbGxJblJlcyl7XHJcbiAgICAgICAgVXRpbHMubG9hZFJlcyh0aGlzLlN0YXR1cy5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgXCJpbWFnZXMvcG9rZXIvUGxheWVyU3RhdHVzL2FsbC1pbi10YWdcIik7XHJcbiAgICAgICAgbGV0IHJhaXNlQ2hpcCA9IHVzZXJBbGxJblJlcy5tX2NoaXA7XHJcbiAgICAgICAgdGhpcy5tX3RvdGFsX2JldCArPSByYWlzZUNoaXA7XHJcbiAgICAgICAgdGhpcy5zaG93QmV0Q2hpcCh0aGlzLm1fdG90YWxfYmV0KTtcclxuXHJcbiAgICAgICAgLy8gc3ViIG1vbmV5IGluIERlc2tcclxuICAgICAgICB0aGlzLl9kZXNrLlVzZXJDaGlwIC09IHJhaXNlQ2hpcDtcclxuICAgICAgICB0aGlzLnNldE1vbmV5KHRoaXMuX2Rlc2suVXNlckNoaXApO1xyXG5cclxuICAgICAgICBpZihjYy5pc1ZhbGlkKHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIpKXtcclxuICAgICAgICAgICAgdGhpcy5fYWN0aW9uQ29udHJvbGxlci5oaWRlQWxsQWN0aW9ucygpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvblNob3dEb3duRXZlbnQoY2FyZElkcyl7XHJcbiAgICAgICAgdGhpcy50dXJuT2ZmVGltZXIoKTtcclxuICAgICAgICB0aGlzLkhhbmRzLmFjdGl2ZSA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5CZXRDaGlwLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcmRzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgY2FyZCA9IHRoaXMuY2FyZHNbaV0uZ2V0Q29tcG9uZW50KFwiQ2FyZFwiKTtcclxuICAgICAgICAgICAgaWYodGhpcy5pc0l0TWUoKSl7XHJcbiAgICAgICAgICAgICAgICBjYXJkLmluaXQobmV3IFBva2VyQ2FyZC5DYXJkKGNhcmRJZHNbaV0pKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnJldmVhbChuZXcgUG9rZXJDYXJkLkNhcmQoY2FyZElkc1tpXSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBvbkdhbWVGaW5pc2hFdmVudCh3aW5DYXJkcywgdHlwZW9mSGFuZCwgY2hpcFdpbil7XHJcbiAgICAgICAgdGhpcy50dXJuT2ZmVGltZXIoKTtcclxuICAgICAgICBpZihjaGlwV2luID4gMCl7XHJcbiAgICAgICAgICAgIC8vIGNoaXAgcmVmdW5kXHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc2suVXNlckNoaXAgKz0gY2hpcFdpbjtcclxuICAgICAgICAgICAgdGhpcy5zZXRNb25leSh0aGlzLmdldERlc2soKS5Vc2VyQ2hpcCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmNhcmRzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgY2FyZCA9IHRoaXMuY2FyZHNbaV0uZ2V0Q29tcG9uZW50KFwiQ2FyZFwiKTtcclxuICAgICAgICAgICAgaWYoY2FyZC5fY2FyZCAmJiB3aW5DYXJkcy5pbmRleE9mKGNhcmQuX2NhcmQuaWQpIDwgMCl7XHJcbiAgICAgICAgICAgICAgICBjYXJkLnNob3dPdmVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHdpbm5pbmdIYW5kcyA9IHtcclxuICAgICAgICAgICAgSElHSENBUkQgOiBcIk3huq11IFRo4bqndVwiLFxyXG4gICAgICAgICAgICBQQUlSOiBcIk3hu5l0IMSQw7RpXCIsXHJcbiAgICAgICAgICAgIFRXT1BBSVI6IFwiSGFpIMSQw7RpXCIsXHJcbiAgICAgICAgICAgIFRIUkVFT0ZBS0lORDogXCJYw6FtXCIsXHJcbiAgICAgICAgICAgIFNUUkFJR0hUOiBcIlPhuqNuaFwiLFxyXG4gICAgICAgICAgICBGTFVTSDogXCJUaMO5bmdcIixcclxuICAgICAgICAgICAgRlVMTEhPVVNFOiBcIkPhu6cgTMWpXCIsXHJcbiAgICAgICAgICAgIEZPVVJPRkFLSU5EOiBcIlThu6kgUXXDvVwiLFxyXG4gICAgICAgICAgICBTVFJBSUdIVEZMVVNIOiBcIlPhuqNuaCBUaMO5bmdcIixcclxuICAgICAgICAgICAgUk9ZQUxGTFVTSDogXCJUaMO5bmcgUGjDoSBT4bqjbmhcIlxyXG4gICAgICAgIH1cclxuICAgICAgICBpZih3aW5uaW5nSGFuZHNbdHlwZW9mSGFuZF0pe1xyXG4gICAgICAgICAgICB0aGlzLlR5cGVPZkhhbmQubm9kZS5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLlR5cGVPZkhhbmQuc3RyaW5nID0gd2lubmluZ0hhbmRzW3R5cGVvZkhhbmRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1fdG90YWxfYmV0ID0gMDtcclxuICAgIH0sXHJcbiAgICBvbldpbm5lckV2ZW50KCl7XHJcbiAgICAgICAgdGhpcy5zaG93V2luRWZmZWN0KCk7XHJcbiAgICAgICAgdGhpcy50dXJuT2ZmVGltZXIoKTtcclxuICAgIH0sXHJcbiAgICBzaG93QmV0Q2hpcChtb25leSl7XHJcbiAgICAgICAgaWYobW9uZXkgPD0gMClcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIHRoaXMuQmV0Q2hpcC5hY3RpdmUgPSB0cnVlO1xyXG4gICAgICAgIGxldCBsYl9iZXRDaGlwID0gdGhpcy5CZXRDaGlwLmdldENoaWxkQnlOYW1lKFwibW9uZXlcIikuZ2V0Q29tcG9uZW50KGNjLkxhYmVsKTtcclxuICAgICAgICBsYl9iZXRDaGlwLnN0cmluZyA9IFV0aWxzLmZvcm1hdEN1cnJlbmN5KG1vbmV5LnRvRml4ZWQoMCkpO1xyXG4gICAgfSxcclxuICAgIHR1cm5PZmZUaW1lcigpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgaWYoY2MuaXNWYWxpZCh0aGlzLl9hY3Rpb25Db250cm9sbGVyKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIuaGlkZUFsbEFjdGlvbnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgc2hvd0JldHRpbmcoKXtcclxuICAgICAgICB0aGlzLnR1cm5PblRpbWVyKCk7XHJcbiAgICAgICAgaWYoY2MuaXNWYWxpZCh0aGlzLl9hY3Rpb25Db250cm9sbGVyKSl7XHJcbiAgICAgICAgICAgIHRoaXMuX2FjdGlvbkNvbnRyb2xsZXIuc2hvd0NoZWNrKHRoaXMubV90b3RhbF9iZXQsIHRoaXMuX2Rlc2suVXNlckNoaXAsIHRoaXMubV90b3RhbF9iZXQpO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICByZXNldEJldCgpe1xyXG4gICAgICAgIHRoaXMubV90b3RhbF9iZXQgPSAwO1xyXG4gICAgICAgIHRoaXMuQmV0Q2hpcC5hY3RpdmUgPSBmYWxzZTtcclxuICAgIH1cclxufSk7XHJcbiJdfQ==