
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/poker/Actions.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'c8e7b2w3IRIwoTM5Zhp6vyG', 'Actions');
// scripts/poker/Actions.js

"use strict";

cc.Class({
  "extends": cc.VozBaseComponent,
  properties: {
    NodeRaise: cc.Node,
    Check: cc.Node,
    Call: cc.Node,
    Fold: cc.Node,
    Raise: cc.Node,
    Bet: cc.Node,
    SliderRaise: cc.Slider,
    lb_Current: cc.Label,
    _distance: 100,
    _current: 0,
    _max: 0,
    lb_bettingChip: cc.Label
  },
  onEnable: function onEnable() {
    this.NodeRaise.active = false;
    this.Check.active = false;
    this.Call.active = false;
    this.Fold.active = false;
    this.Raise.active = false;
    this.Bet.active = false;
  },
  initSlider: function initSlider(distance, current, max) {
    if (distance <= 0) distance = SmartFoxSDK.PokerController.QuickJoinRoomConfig.betChip;
    this._max = max;
    this._distance = distance;
    this._current = current;
    this.updateSlider();
  },
  updateSlider: function updateSlider() {
    var currentProcess = this._current / this._max;
    this.SliderRaise.progress = currentProcess;
    this.lb_Current.string = Utils.formatCurrency(this._current);
  },
  eventPlus: function eventPlus() {
    this._current += this._distance;

    if (this._current > this._max) {
      this._current = this._max;
    }

    this.updateSlider();
  },
  eventSub: function eventSub() {
    this._current -= this._distance;

    if (this._current < 0) {
      this._current = 0;
    }

    this.updateSlider();
  },
  eventAllIn: function eventAllIn() {
    this._current = this._max;
    this.updateSlider();
  },
  onSliderRaise: function onSliderRaise(slider) {
    var process = slider.progress;
    this._current = Math.floor(process.toFixed(1) * this._max);
    this.lb_Current.string = Utils.addDotToNumber(this._current);
  },
  hideAllActions: function hideAllActions() {
    this.NodeRaise.active = false;
    this.Check.active = false;
    this.Call.active = false;
    this.Fold.active = false;
    this.Raise.active = false;
    this.Bet.active = false;
  },
  showCallRaise: function showCallRaise(betchip, max, currentMyBet) {
    this.Call.active = true;
    this.Fold.active = true;
    this.Raise.active = true;
    this.Bet.active = false;

    if (betchip != undefined) {
      this.setLabelBettingChip(betchip + currentMyBet);

      if (max) {
        this.initSlider(SmartFoxSDK.PokerController.QuickJoinRoomConfig.betChip, betchip, max);
      }
    }
  },
  showCheck: function showCheck(betchip, max, currentMyBet) {
    this.Check.active = true;
    this.Fold.active = true;
    this.Raise.active = true;
    this.Bet.active = true;

    if (betchip != undefined) {
      this.setLabelBettingChip(betchip + currentMyBet);

      if (max) {
        this.initSlider(SmartFoxSDK.PokerController.QuickJoinRoomConfig.betChip, betchip, max);
      }
    }
  },
  setLabelBettingChip: function setLabelBettingChip(chip) {
    this.lb_bettingChip.string = Utils.formatCurrency(chip.toFixed(0));
  },
  ActionBet: function ActionBet() {
    this.handleRaiseRequest(SmartFoxSDK.PokerController.QuickJoinRoomConfig.betChip);
  },
  ActionCheck: function ActionCheck() {
    this.handleRaiseRequest(0);
  },
  ActionCall: function ActionCall() {
    var callRequest = new PokerRequest.CallRequest().setRoomId(SmartFoxSDK.PokerController.QuickJoinRoomConfig.roomId);
    SmartFoxSDK.PokerController.ZoneInstance.send(callRequest.toSRequest());
  },
  ActionSliderRaise: function ActionSliderRaise() {
    var isActive = this.NodeRaise.active;
    this.NodeRaise.active = !isActive;
  },
  ActionRaise: function ActionRaise() {
    this.ActionSliderRaise();
    this.handleRaiseRequest(this._current);
  },
  ActionAllIn: function ActionAllIn() {
    var allInRequest = new PokerRequest.AllInRequest().setRoomId(SmartFoxSDK.PokerController.QuickJoinRoomConfig.roomId);
    SmartFoxSDK.PokerController.ZoneInstance.send(allInRequest.toSRequest());
  },
  ActionFold: function ActionFold() {
    var foldRequest = new PokerRequest.FoldRequest().setRoomId(SmartFoxSDK.PokerController.QuickJoinRoomConfig.roomId);
    SmartFoxSDK.PokerController.ZoneInstance.send(foldRequest.toSRequest());
  },
  raise_1_2Pot: function raise_1_2Pot() {
    this.handleRaiseRequest(SmartFoxSDK.PokerController.m_tableInfo.m_potChip / 2);
  },
  raisePot: function raisePot() {
    this.handleRaiseRequest(SmartFoxSDK.PokerController.m_tableInfo.m_potChip);
  },
  handleRaiseRequest: function handleRaiseRequest(chip) {
    var raiseRequest = new PokerRequest.RaiseRequest().setRoomId(SmartFoxSDK.PokerController.QuickJoinRoomConfig.roomId).setBetChip(chip);
    SmartFoxSDK.PokerController.ZoneInstance.send(raiseRequest.toSRequest());
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL3Bva2VyL0FjdGlvbnMuanMiXSwibmFtZXMiOlsiY2MiLCJDbGFzcyIsIlZvekJhc2VDb21wb25lbnQiLCJwcm9wZXJ0aWVzIiwiTm9kZVJhaXNlIiwiTm9kZSIsIkNoZWNrIiwiQ2FsbCIsIkZvbGQiLCJSYWlzZSIsIkJldCIsIlNsaWRlclJhaXNlIiwiU2xpZGVyIiwibGJfQ3VycmVudCIsIkxhYmVsIiwiX2Rpc3RhbmNlIiwiX2N1cnJlbnQiLCJfbWF4IiwibGJfYmV0dGluZ0NoaXAiLCJvbkVuYWJsZSIsImFjdGl2ZSIsImluaXRTbGlkZXIiLCJkaXN0YW5jZSIsImN1cnJlbnQiLCJtYXgiLCJTbWFydEZveFNESyIsIlBva2VyQ29udHJvbGxlciIsIlF1aWNrSm9pblJvb21Db25maWciLCJiZXRDaGlwIiwidXBkYXRlU2xpZGVyIiwiY3VycmVudFByb2Nlc3MiLCJwcm9ncmVzcyIsInN0cmluZyIsIlV0aWxzIiwiZm9ybWF0Q3VycmVuY3kiLCJldmVudFBsdXMiLCJldmVudFN1YiIsImV2ZW50QWxsSW4iLCJvblNsaWRlclJhaXNlIiwic2xpZGVyIiwicHJvY2VzcyIsIk1hdGgiLCJmbG9vciIsInRvRml4ZWQiLCJhZGREb3RUb051bWJlciIsImhpZGVBbGxBY3Rpb25zIiwic2hvd0NhbGxSYWlzZSIsImJldGNoaXAiLCJjdXJyZW50TXlCZXQiLCJ1bmRlZmluZWQiLCJzZXRMYWJlbEJldHRpbmdDaGlwIiwic2hvd0NoZWNrIiwiY2hpcCIsIkFjdGlvbkJldCIsImhhbmRsZVJhaXNlUmVxdWVzdCIsIkFjdGlvbkNoZWNrIiwiQWN0aW9uQ2FsbCIsImNhbGxSZXF1ZXN0IiwiUG9rZXJSZXF1ZXN0IiwiQ2FsbFJlcXVlc3QiLCJzZXRSb29tSWQiLCJyb29tSWQiLCJab25lSW5zdGFuY2UiLCJzZW5kIiwidG9TUmVxdWVzdCIsIkFjdGlvblNsaWRlclJhaXNlIiwiaXNBY3RpdmUiLCJBY3Rpb25SYWlzZSIsIkFjdGlvbkFsbEluIiwiYWxsSW5SZXF1ZXN0IiwiQWxsSW5SZXF1ZXN0IiwiQWN0aW9uRm9sZCIsImZvbGRSZXF1ZXN0IiwiRm9sZFJlcXVlc3QiLCJyYWlzZV8xXzJQb3QiLCJtX3RhYmxlSW5mbyIsIm1fcG90Q2hpcCIsInJhaXNlUG90IiwicmFpc2VSZXF1ZXN0IiwiUmFpc2VSZXF1ZXN0Iiwic2V0QmV0Q2hpcCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQUEsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLGdCQURQO0FBR0xDLEVBQUFBLFVBQVUsRUFBRTtBQUNSQyxJQUFBQSxTQUFTLEVBQUVKLEVBQUUsQ0FBQ0ssSUFETjtBQUVSQyxJQUFBQSxLQUFLLEVBQUVOLEVBQUUsQ0FBQ0ssSUFGRjtBQUdSRSxJQUFBQSxJQUFJLEVBQUVQLEVBQUUsQ0FBQ0ssSUFIRDtBQUlSRyxJQUFBQSxJQUFJLEVBQUVSLEVBQUUsQ0FBQ0ssSUFKRDtBQUtSSSxJQUFBQSxLQUFLLEVBQUVULEVBQUUsQ0FBQ0ssSUFMRjtBQU1SSyxJQUFBQSxHQUFHLEVBQUVWLEVBQUUsQ0FBQ0ssSUFOQTtBQU9STSxJQUFBQSxXQUFXLEVBQUVYLEVBQUUsQ0FBQ1ksTUFQUjtBQVFSQyxJQUFBQSxVQUFVLEVBQUViLEVBQUUsQ0FBQ2MsS0FSUDtBQVNSQyxJQUFBQSxTQUFTLEVBQUUsR0FUSDtBQVVSQyxJQUFBQSxRQUFRLEVBQUUsQ0FWRjtBQVdSQyxJQUFBQSxJQUFJLEVBQUUsQ0FYRTtBQVlSQyxJQUFBQSxjQUFjLEVBQUVsQixFQUFFLENBQUNjO0FBWlgsR0FIUDtBQWlCTEssRUFBQUEsUUFqQkssc0JBaUJLO0FBQ04sU0FBS2YsU0FBTCxDQUFlZ0IsTUFBZixHQUEwQixLQUExQjtBQUNBLFNBQUtkLEtBQUwsQ0FBV2MsTUFBWCxHQUEwQixLQUExQjtBQUNBLFNBQUtiLElBQUwsQ0FBVWEsTUFBVixHQUEwQixLQUExQjtBQUNBLFNBQUtaLElBQUwsQ0FBVVksTUFBVixHQUEwQixLQUExQjtBQUNB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QVcsQ0FBQ0MsZUFBWixDQUE0Qm9DLFlBQTVCLENBQXlDQyxJQUF6QyxDQUE4Q1MsV0FBVyxDQUFDUixVQUFaLEVBQTlDO0FBQ0gsR0F6SEk7QUEwSExVLEVBQUFBLFlBMUhLLDBCQTBIUztBQUNWLFNBQUtwQixrQkFBTCxDQUF3QjdCLFdBQVcsQ0FBQ0MsZUFBWixDQUE0QmlELFdBQTVCLENBQXdDQyxTQUF4QyxHQUFvRCxDQUE1RTtBQUNILEdBNUhJO0FBNkhMQyxFQUFBQSxRQTdISyxzQkE2SEs7QUFDTixTQUFLdkIsa0JBQUwsQ0FBd0I3QixXQUFXLENBQUNDLGVBQVosQ0FBNEJpRCxXQUE1QixDQUF3Q0MsU0FBaEU7QUFDSCxHQS9ISTtBQWdJTHRCLEVBQUFBLGtCQWhJSyw4QkFnSWNGLElBaElkLEVBZ0ltQjtBQUNwQixRQUFJMEIsWUFBWSxHQUFHLElBQUlwQixZQUFZLENBQUNxQixZQUFqQixHQUFnQ25CLFNBQWhDLENBQTBDbkMsV0FBVyxDQUFDQyxlQUFaLENBQTRCQyxtQkFBNUIsQ0FBZ0RrQyxNQUExRixFQUFrR21CLFVBQWxHLENBQTZHNUIsSUFBN0csQ0FBbkI7QUFDQTNCLElBQUFBLFdBQVcsQ0FBQ0MsZUFBWixDQUE0Qm9DLFlBQTVCLENBQXlDQyxJQUF6QyxDQUE4Q2UsWUFBWSxDQUFDZCxVQUFiLEVBQTlDO0FBQ0g7QUFuSUksQ0FBVCIsInNvdXJjZVJvb3QiOiIvIiwic291cmNlc0NvbnRlbnQiOlsiY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLlZvekJhc2VDb21wb25lbnQsXG5cbiAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgIE5vZGVSYWlzZTogY2MuTm9kZSxcbiAgICAgICAgQ2hlY2s6IGNjLk5vZGUsXG4gICAgICAgIENhbGw6IGNjLk5vZGUsXG4gICAgICAgIEZvbGQ6IGNjLk5vZGUsXG4gICAgICAgIFJhaXNlOiBjYy5Ob2RlLFxuICAgICAgICBCZXQ6IGNjLk5vZGUsXG4gICAgICAgIFNsaWRlclJhaXNlOiBjYy5TbGlkZXIsXG4gICAgICAgIGxiX0N1cnJlbnQ6IGNjLkxhYmVsLFxuICAgICAgICBfZGlzdGFuY2U6IDEwMCxcbiAgICAgICAgX2N1cnJlbnQ6IDAsXG4gICAgICAgIF9tYXg6IDAsXG4gICAgICAgIGxiX2JldHRpbmdDaGlwOiBjYy5MYWJlbFxuICAgIH0sXG4gICAgb25FbmFibGUoKXtcbiAgICAgICAgdGhpcy5Ob2RlUmFpc2UuYWN0aXZlICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5DaGVjay5hY3RpdmUgICAgICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5DYWxsLmFjdGl2ZSAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5Gb2xkLmFjdGl2ZSAgICAgICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5SYWlzZS5hY3RpdmUgICAgICAgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5CZXQuYWN0aXZlICAgICAgICAgPSBmYWxzZTtcbiAgICB9LFxuICAgIGluaXRTbGlkZXIoZGlzdGFuY2UsIGN1cnJlbnQsIG1heCl7XG4gICAgICAgIGlmKGRpc3RhbmNlIDw9IDApXG4gICAgICAgICAgICBkaXN0YW5jZSA9IFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5RdWlja0pvaW5Sb29tQ29uZmlnLmJldENoaXA7XG4gICAgICAgIHRoaXMuX21heCA9IG1heDtcbiAgICAgICAgdGhpcy5fZGlzdGFuY2UgPSBkaXN0YW5jZTtcbiAgICAgICAgdGhpcy5fY3VycmVudCA9IGN1cnJlbnQ7XG4gICAgICAgIHRoaXMudXBkYXRlU2xpZGVyKCk7XG4gICAgfSxcbiAgICB1cGRhdGVTbGlkZXIoKXtcbiAgICAgICAgbGV0IGN1cnJlbnRQcm9jZXNzID0gdGhpcy5fY3VycmVudCAvIHRoaXMuX21heDtcbiAgICAgICAgdGhpcy5TbGlkZXJSYWlzZS5wcm9ncmVzcyA9IGN1cnJlbnRQcm9jZXNzO1xuICAgICAgICB0aGlzLmxiX0N1cnJlbnQuc3RyaW5nID0gVXRpbHMuZm9ybWF0Q3VycmVuY3kodGhpcy5fY3VycmVudCk7XG4gICAgfSxcbiAgICBldmVudFBsdXMoKXtcbiAgICAgICAgdGhpcy5fY3VycmVudCArPSB0aGlzLl9kaXN0YW5jZTtcbiAgICAgICAgaWYodGhpcy5fY3VycmVudCA+IHRoaXMuX21heCl7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fbWF4O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudXBkYXRlU2xpZGVyKCk7XG4gICAgfSxcbiAgICBldmVudFN1Yigpe1xuICAgICAgICB0aGlzLl9jdXJyZW50IC09IHRoaXMuX2Rpc3RhbmNlO1xuICAgICAgICBpZih0aGlzLl9jdXJyZW50IDwgMCl7XG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50ID0gMDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVwZGF0ZVNsaWRlcigpO1xuICAgIH0sXG4gICAgZXZlbnRBbGxJbigpe1xuICAgICAgICB0aGlzLl9jdXJyZW50ID0gdGhpcy5fbWF4O1xuICAgICAgICB0aGlzLnVwZGF0ZVNsaWRlcigpO1xuICAgIH0sXG4gICAgb25TbGlkZXJSYWlzZShzbGlkZXIpe1xuICAgICAgICBsZXQgcHJvY2VzcyA9IHNsaWRlci5wcm9ncmVzcztcbiAgICAgICAgdGhpcy5fY3VycmVudCA9IE1hdGguZmxvb3IocHJvY2Vzcy50b0ZpeGVkKDEpICogdGhpcy5fbWF4KTtcbiAgICAgICAgdGhpcy5sYl9DdXJyZW50LnN0cmluZyA9IFV0aWxzLmFkZERvdFRvTnVtYmVyKHRoaXMuX2N1cnJlbnQpO1xuICAgIH0sXG4gICAgaGlkZUFsbEFjdGlvbnMoKXtcbiAgICAgICAgdGhpcy5Ob2RlUmFpc2UuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuQ2hlY2suYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIHRoaXMuQ2FsbC5hY3RpdmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5Gb2xkLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLlJhaXNlLmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLkJldC5hY3RpdmUgPSBmYWxzZTtcbiAgICB9LFxuICAgIHNob3dDYWxsUmFpc2UoYmV0Y2hpcCwgbWF4LCBjdXJyZW50TXlCZXQpe1xuICAgICAgICB0aGlzLkNhbGwuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5Gb2xkLmFjdGl2ZSA9IHRydWU7XG4gICAgICAgIHRoaXMuUmFpc2UuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5CZXQuYWN0aXZlID0gZmFsc2U7XG4gICAgICAgIGlmKGJldGNoaXAgIT0gdW5kZWZpbmVkKXtcbiAgICAgICAgICAgIHRoaXMuc2V0TGFiZWxCZXR0aW5nQ2hpcChiZXRjaGlwICsgY3VycmVudE15QmV0KTtcbiAgICAgICAgICAgIGlmKG1heCl7XG4gICAgICAgICAgICAgICAgdGhpcy5pbml0U2xpZGVyKFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5RdWlja0pvaW5Sb29tQ29uZmlnLmJldENoaXAsIGJldGNoaXAsIG1heClcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sXG4gICAgc2hvd0NoZWNrKGJldGNoaXAsIG1heCwgY3VycmVudE15QmV0KXtcbiAgICAgICAgdGhpcy5DaGVjay5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLkZvbGQuYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5SYWlzZS5hY3RpdmUgPSB0cnVlO1xuICAgICAgICB0aGlzLkJldC5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBpZihiZXRjaGlwICE9IHVuZGVmaW5lZCl7XG4gICAgICAgICAgICB0aGlzLnNldExhYmVsQmV0dGluZ0NoaXAoYmV0Y2hpcCArIGN1cnJlbnRNeUJldCk7XG4gICAgICAgICAgICBpZihtYXgpe1xuICAgICAgICAgICAgICAgIHRoaXMuaW5pdFNsaWRlcihTbWFydEZveFNESy5Qb2tlckNvbnRyb2xsZXIuUXVpY2tKb2luUm9vbUNvbmZpZy5iZXRDaGlwLCBiZXRjaGlwLCBtYXgpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldExhYmVsQmV0dGluZ0NoaXAoY2hpcCl7XG4gICAgICAgIHRoaXMubGJfYmV0dGluZ0NoaXAuc3RyaW5nID0gVXRpbHMuZm9ybWF0Q3VycmVuY3koY2hpcC50b0ZpeGVkKDApKTtcbiAgICB9LFxuICAgIEFjdGlvbkJldCgpe1xuICAgICAgICB0aGlzLmhhbmRsZVJhaXNlUmVxdWVzdChTbWFydEZveFNESy5Qb2tlckNvbnRyb2xsZXIuUXVpY2tKb2luUm9vbUNvbmZpZy5iZXRDaGlwKTtcbiAgICB9LFxuICAgIEFjdGlvbkNoZWNrKCl7XG4gICAgICAgIHRoaXMuaGFuZGxlUmFpc2VSZXF1ZXN0KDApO1xuICAgIH0sXG4gICAgQWN0aW9uQ2FsbCgpe1xuICAgICAgICBsZXQgY2FsbFJlcXVlc3QgPSBuZXcgUG9rZXJSZXF1ZXN0LkNhbGxSZXF1ZXN0KCkuc2V0Um9vbUlkKFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5RdWlja0pvaW5Sb29tQ29uZmlnLnJvb21JZCk7XG4gICAgICAgIFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5ab25lSW5zdGFuY2Uuc2VuZChjYWxsUmVxdWVzdC50b1NSZXF1ZXN0KCkpO1xuICAgIH0sXG4gICAgQWN0aW9uU2xpZGVyUmFpc2UoKXtcbiAgICAgICAgbGV0IGlzQWN0aXZlID0gdGhpcy5Ob2RlUmFpc2UuYWN0aXZlO1xuICAgICAgICB0aGlzLk5vZGVSYWlzZS5hY3RpdmUgPSAhaXNBY3RpdmU7XG4gICAgfSxcbiAgICBBY3Rpb25SYWlzZSgpe1xuICAgICAgICB0aGlzLkFjdGlvblNsaWRlclJhaXNlKCk7XG4gICAgICAgIHRoaXMuaGFuZGxlUmFpc2VSZXF1ZXN0KHRoaXMuX2N1cnJlbnQpO1xuICAgIH0sXG4gICAgQWN0aW9uQWxsSW4oKXtcbiAgICAgICAgbGV0IGFsbEluUmVxdWVzdCA9IG5ldyBQb2tlclJlcXVlc3QuQWxsSW5SZXF1ZXN0KCkuc2V0Um9vbUlkKFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5RdWlja0pvaW5Sb29tQ29uZmlnLnJvb21JZCk7XG4gICAgICAgIFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5ab25lSW5zdGFuY2Uuc2VuZChhbGxJblJlcXVlc3QudG9TUmVxdWVzdCgpKTtcbiAgICB9LFxuICAgIEFjdGlvbkZvbGQoKXtcbiAgICAgICAgbGV0IGZvbGRSZXF1ZXN0ID0gbmV3IFBva2VyUmVxdWVzdC5Gb2xkUmVxdWVzdCgpLnNldFJvb21JZChTbWFydEZveFNESy5Qb2tlckNvbnRyb2xsZXIuUXVpY2tKb2luUm9vbUNvbmZpZy5yb29tSWQpO1xuICAgICAgICBTbWFydEZveFNESy5Qb2tlckNvbnRyb2xsZXIuWm9uZUluc3RhbmNlLnNlbmQoZm9sZFJlcXVlc3QudG9TUmVxdWVzdCgpKTtcbiAgICB9LFxuICAgIHJhaXNlXzFfMlBvdCgpe1xuICAgICAgICB0aGlzLmhhbmRsZVJhaXNlUmVxdWVzdChTbWFydEZveFNESy5Qb2tlckNvbnRyb2xsZXIubV90YWJsZUluZm8ubV9wb3RDaGlwIC8gMik7XG4gICAgfSxcbiAgICByYWlzZVBvdCgpe1xuICAgICAgICB0aGlzLmhhbmRsZVJhaXNlUmVxdWVzdChTbWFydEZveFNESy5Qb2tlckNvbnRyb2xsZXIubV90YWJsZUluZm8ubV9wb3RDaGlwKTtcbiAgICB9LFxuICAgIGhhbmRsZVJhaXNlUmVxdWVzdChjaGlwKXtcbiAgICAgICAgbGV0IHJhaXNlUmVxdWVzdCA9IG5ldyBQb2tlclJlcXVlc3QuUmFpc2VSZXF1ZXN0KCkuc2V0Um9vbUlkKFNtYXJ0Rm94U0RLLlBva2VyQ29udHJvbGxlci5RdWlja0pvaW5Sb29tQ29uZmlnLnJvb21JZCkuc2V0QmV0Q2hpcChjaGlwKTtcbiAgICAgICAgU21hcnRGb3hTREsuUG9rZXJDb250cm9sbGVyLlpvbmVJbnN0YW5jZS5zZW5kKHJhaXNlUmVxdWVzdC50b1NSZXF1ZXN0KCkpO1xuICAgIH1cbn0pO1xuIl19