
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/rongho/RongHoEvent.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7a00de1eQdHdKgPP7X+mSgC', 'RongHoEvent');
// scripts/rongho/RongHoEvent.js

"use strict";

var RongHoEvent = {};
RongHoEvent.RESPONSE_NAME = {
  LOAD_GAME_RES: "rh1",
  BET_RES: "rh2",
  END_BETTING: "rh3"
};
RongHoEvent.LoadGameEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(RongHoEvent.RESPONSE_NAME.LOAD_GAME_RES);
  },
  fromEvent: function fromEvent(event) {
    this.isBetting = event.getBool("b");
    this.time = event.getInt("t");
    this.listChipPot = event.getDoubleArray("lcp");
    this.listMyChipPot = event.getDoubleArray("lmcp");

    if (!this.isBetting) {
      this.result = event.getByteArray("rs");
      this.winpot = event.getByteArray("wp");
    }

    return this;
  }
});
RongHoEvent.BetEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(RongHoEvent.RESPONSE_NAME.BET_RES);
  },
  fromEvent: function fromEvent(event) {
    this.userName = event.getUtfString("un");
    this.betChip = event.getDouble("c");
    this.typePot = event.getByte("t");
    return this;
  }
});
RongHoEvent.EndBetting = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(RongHoEvent.RESPONSE_NAME.END_BETTING);
  },
  fromEvent: function fromEvent(event) {
    this.result = event.getByteArray("rs");
    this.winChip = event.getDouble("wc");
    this.winpot = event.getByteArray("wp");
    return this;
  }
});
RongHoEvent.HistoryEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(CasinoEvent.RESPONSE_NAME.HISTORY_RES);

    this.items = [];
    this.ITEM_NAME = ["Rồng", "Hòa", "Hổ", "3 Trắng", "4 Đen", "4 Trắng"];
  },
  fromEvent: function fromEvent(event) {
    var data = event.getSArray("d");

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var session = "#" + sItem.getDouble("id").toFixed(0);
      var time = sItem.getUtfString("t");
      var betValues = sItem.getDoubleArray("b");
      var hoan_tra = 0;
      var dices = sItem.getIntArray("di");
      var result = sItem.getIntArray("rs");
      var prizeValues = sItem.getDoubleArray("w");

      for (var j = 0; j < betValues.length - 1; j++) {
        if (betValues[j] >= 0) {
          var item = {};
          item.session = session;
          item.time = time;
          item.dices = dices;
          item.ketqua = result;
          item.stakes = betValues[j];
          item.win = prizeValues[j];
          item.cuadat = this.ITEM_NAME[j];
          item.hoan_tra = 0;

          if (betValues[1] - betValues[0] > 0) {
            if (j == 1) item.hoan_tra = hoan_tra;
          } else {
            if (j == 0) item.hoan_tra = hoan_tra;
          }

          this.items.push(item);
        }
      }
    }

    return this;
  }
});
RongHoEvent.LeaderBoardEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(CasinoEvent.RESPONSE_NAME.LEADER_BOARD_RES);

    this.items = [];
  },
  fromEvent: function fromEvent(event) {
    var data = event.getSArray("d");

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var item = {};
      item.session = i;
      item.account = sItem.getUtfString("dn");
      item.win = sItem.getDouble("m");
      item.time = sItem.getUtfString("t");
      this.items.push(item);
    }

    return this;
  }
});
window.RongHoEvent = module.exports = RongHoEvent;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xccm9uZ2hvXFxSb25nSG9FdmVudC5qcyJdLCJuYW1lcyI6WyJSb25nSG9FdmVudCIsIlJFU1BPTlNFX05BTUUiLCJMT0FEX0dBTUVfUkVTIiwiQkVUX1JFUyIsIkVORF9CRVRUSU5HIiwiTG9hZEdhbWVFdmVudCIsIkNhc2lub0V2ZW50IiwiX0Jhc2VFdmVudCIsImV4dGVuZCIsImN0b3IiLCJfc3VwZXIiLCJmcm9tRXZlbnQiLCJldmVudCIsImlzQmV0dGluZyIsImdldEJvb2wiLCJ0aW1lIiwiZ2V0SW50IiwibGlzdENoaXBQb3QiLCJnZXREb3VibGVBcnJheSIsImxpc3RNeUNoaXBQb3QiLCJyZXN1bHQiLCJnZXRCeXRlQXJyYXkiLCJ3aW5wb3QiLCJCZXRFdmVudCIsInVzZXJOYW1lIiwiZ2V0VXRmU3RyaW5nIiwiYmV0Q2hpcCIsImdldERvdWJsZSIsInR5cGVQb3QiLCJnZXRCeXRlIiwiRW5kQmV0dGluZyIsIndpbkNoaXAiLCJIaXN0b3J5RXZlbnQiLCJISVNUT1JZX1JFUyIsIml0ZW1zIiwiSVRFTV9OQU1FIiwiZGF0YSIsImdldFNBcnJheSIsImkiLCJzaXplIiwic0l0ZW0iLCJnZXQiLCJnZXRPYmplY3QiLCJzZXNzaW9uIiwidG9GaXhlZCIsImJldFZhbHVlcyIsImhvYW5fdHJhIiwiZGljZXMiLCJnZXRJbnRBcnJheSIsInByaXplVmFsdWVzIiwiaiIsImxlbmd0aCIsIml0ZW0iLCJrZXRxdWEiLCJzdGFrZXMiLCJ3aW4iLCJjdWFkYXQiLCJwdXNoIiwiTGVhZGVyQm9hcmRFdmVudCIsIkxFQURFUl9CT0FSRF9SRVMiLCJhY2NvdW50Iiwid2luZG93IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxXQUFXLEdBQUcsRUFBbEI7QUFDQUEsV0FBVyxDQUFDQyxhQUFaLEdBQTRCO0FBQ3hCQyxFQUFBQSxhQUFhLEVBQUUsS0FEUztBQUV4QkMsRUFBQUEs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Q0csSUFBTCxFQUFsQixFQUE4QkQsQ0FBQyxFQUEvQixFQUFrQztBQUM5QixVQUFJRSxLQUFLLEdBQUdKLElBQUksQ0FBQ0ssR0FBTCxDQUFTSCxDQUFULEVBQVlJLFNBQVosRUFBWjtBQUNBLFVBQUlVLElBQUksR0FBRyxFQUFYO0FBQ0FBLE1BQUFBLElBQUksQ0FBQ1QsT0FBTCxHQUFlTCxDQUFmO0FBQ0FjLE1BQUFBLElBQUksQ0FBQ1EsT0FBTCxHQUFlcEIsS0FBSyxDQUFDZixZQUFOLENBQW1CLElBQW5CLENBQWY7QUFDQTJCLE1BQUFBLElBQUksQ0FBQ0csR0FBTCxHQUFXZixLQUFLLENBQUNiLFNBQU4sQ0FBZ0IsR0FBaEIsQ0FBWDtBQUNBeUIsTUFBQUEsSUFBSSxDQUFDckMsSUFBTCxHQUFZeUIsS0FBSyxDQUFDZixZQUFOLENBQW1CLEdBQW5CLENBQVo7QUFDQSxXQUFLUyxLQUFMLENBQVd1QixJQUFYLENBQWdCTCxJQUFoQjtBQUNIOztBQUNELFdBQU8sSUFBUDtBQUNIO0FBakJ3RCxDQUE5QixDQUEvQjtBQW1CQVMsTUFBTSxDQUFDN0QsV0FBUCxHQUFxQjhELE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQi9ELFdBQXRDIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgUm9uZ0hvRXZlbnQgPSB7fTtcclxuUm9uZ0hvRXZlbnQuUkVTUE9OU0VfTkFNRSA9IHtcclxuICAgIExPQURfR0FNRV9SRVM6IFwicmgxXCIsXHJcbiAgICBCRVRfUkVTOiBcInJoMlwiLFxyXG4gICAgRU5EX0JFVFRJTkc6IFwicmgzXCJcclxufTtcclxuUm9uZ0hvRXZlbnQuTG9hZEdhbWVFdmVudCA9IENhc2lub0V2ZW50Ll9CYXNlRXZlbnQuZXh0ZW5kKHtcclxuICAgIGN0b3IoKXtcclxuICAgICAgICB0aGlzLl9zdXBlcihSb25nSG9FdmVudC5SRVNQT05TRV9OQU1FLkxPQURfR0FNRV9SRVMpO1xyXG4gICAgfSxcclxuICAgIGZyb21FdmVudChldmVudCl7XHJcbiAgICAgICAgdGhpcy5pc0JldHRpbmcgICAgICA9IGV2ZW50LmdldEJvb2woXCJiXCIpO1xyXG4gICAgICAgIHRoaXMudGltZSAgICAgICAgICAgPSBldmVudC5nZXRJbnQoXCJ0XCIpO1xyXG4gICAgICAgIHRoaXMubGlzdENoaXBQb3QgICAgPSBldmVudC5nZXREb3VibGVBcnJheShcImxjcFwiKTtcclxuICAgICAgICB0aGlzLmxpc3RNeUNoaXBQb3QgID0gZXZlbnQuZ2V0RG91YmxlQXJyYXkoXCJsbWNwXCIpO1xyXG4gICAgICAgIGlmKCF0aGlzLmlzQmV0dGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gZXZlbnQuZ2V0Qnl0ZUFycmF5KFwicnNcIik7XHJcbiAgICAgICAgICAgIHRoaXMud2lucG90ID0gZXZlbnQuZ2V0Qnl0ZUFycmF5KFwid3BcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59KVxyXG5Sb25nSG9FdmVudC5CZXRFdmVudCA9IENhc2lub0V2ZW50Ll9CYXNlRXZlbnQuZXh0ZW5kKHtcclxuICAgIGN0b3IoKXtcclxuICAgICAgICB0aGlzLl9zdXBlcihSb25nSG9FdmVudC5SRVNQT05TRV9OQU1FLkJFVF9SRVMpO1xyXG4gICAgfSxcclxuICAgIGZyb21FdmVudChldmVudCl7XHJcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9IGV2ZW50LmdldFV0ZlN0cmluZyhcInVuXCIpO1xyXG4gICAgICAgIHRoaXMuYmV0Q2hpcCA9IGV2ZW50LmdldERvdWJsZShcImNcIik7XHJcbiAgICAgICAgdGhpcy50eXBlUG90ID0gZXZlbnQuZ2V0Qnl0ZShcInRcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn0pO1xyXG5Sb25nSG9FdmVudC5FbmRCZXR0aW5nID0gQ2FzaW5vRXZlbnQuX0Jhc2VFdmVudC5leHRlbmQoe1xyXG4gICAgY3Rvcigpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKFJvbmdIb0V2ZW50LlJFU1BPTlNFX05BTUUuRU5EX0JFVFRJTkcpO1xyXG4gICAgfSxcclxuICAgIGZyb21FdmVudChldmVudCl7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBldmVudC5nZXRCeXRlQXJyYXkoXCJyc1wiKTtcclxuICAgICAgICB0aGlzLndpbkNoaXAgPSBldmVudC5nZXREb3VibGUoXCJ3Y1wiKTtcclxuICAgICAgICB0aGlzLndpbnBvdCA9IGV2ZW50LmdldEJ5dGVBcnJheShcIndwXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59KTtcclxuUm9uZ0hvRXZlbnQuSGlzdG9yeUV2ZW50ID0gQ2FzaW5vRXZlbnQuX0Jhc2VFdmVudC5leHRlbmQoe1xyXG4gICAgY3RvcigpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcihDYXNpbm9FdmVudC5SRVNQT05TRV9OQU1FLkhJU1RPUllfUkVTKTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICAgICAgdGhpcy5JVEVNX05BTUUgPSBbXCJS4buTbmdcIiwgXCJIw7JhXCIsIFwiSOG7lVwiLCBcIjMgVHLhuq9uZ1wiLCBcIjQgxJBlblwiLCBcIjQgVHLhuq9uZ1wiXTtcclxuICAgIH0sXHJcbiAgICBmcm9tRXZlbnQoZXZlbnQpe1xyXG4gICAgICAgIGxldCBkYXRhID0gZXZlbnQuZ2V0U0FycmF5KFwiZFwiKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGF0YS5zaXplKCk7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBzSXRlbSA9IGRhdGEuZ2V0KGkpLmdldE9iamVjdCgpO1xyXG4gICAgICAgICAgICBsZXQgc2Vzc2lvbiA9IFwiI1wiK3NJdGVtLmdldERvdWJsZShcImlkXCIpLnRvRml4ZWQoMCk7XHJcbiAgICAgICAgICAgIGxldCB0aW1lID0gc0l0ZW0uZ2V0VXRmU3RyaW5nKFwidFwiKTtcclxuICAgICAgICAgICAgbGV0IGJldFZhbHVlcyA9IHNJdGVtLmdldERvdWJsZUFycmF5KFwiYlwiKTtcclxuICAgICAgICAgICAgbGV0IGhvYW5fdHJhICA9IDA7XHJcbiAgICAgICAgICAgIGxldCBkaWNlcyA9IHNJdGVtLmdldEludEFycmF5KFwiZGlcIik7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHQgPSBzSXRlbS5nZXRJbnRBcnJheShcInJzXCIpO1xyXG4gICAgICAgICAgICBsZXQgcHJpemVWYWx1ZXMgPSBzSXRlbS5nZXREb3VibGVBcnJheShcIndcIik7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBiZXRWYWx1ZXMubGVuZ3RoLTE7aisrKXtcclxuICAgICAgICAgICAgICAgIGlmKGJldFZhbHVlc1tqXSA+PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50aW1lID0gdGltZTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmRpY2VzID0gZGljZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5rZXRxdWEgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5zdGFrZXMgPSBiZXRWYWx1ZXNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS53aW4gPSBwcml6ZVZhbHVlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmN1YWRhdCA9IHRoaXMuSVRFTV9OQU1FW2pdXHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5ob2FuX3RyYSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYmV0VmFsdWVzWzFdIC0gYmV0VmFsdWVzWzBdID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGogPT0gMSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW0uaG9hbl90cmEgPSBob2FuX3RyYTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaiA9PSAwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5ob2FuX3RyYSA9IGhvYW5fdHJhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn0pO1xyXG5Sb25nSG9FdmVudC5MZWFkZXJCb2FyZEV2ZW50ID0gQ2FzaW5vRXZlbnQuX0Jhc2VFdmVudC5leHRlbmQoe1xyXG4gICAgY3RvcigpIHtcclxuICAgICAgICB0aGlzLl9zdXBlcihDYXNpbm9FdmVudC5SRVNQT05TRV9OQU1FLkxFQURFUl9CT0FSRF9SRVMpO1xyXG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcclxuICAgIH0sXHJcbiAgICBmcm9tRXZlbnQoZXZlbnQpe1xyXG4gICAgICAgIGxldCBkYXRhID0gZXZlbnQuZ2V0U0FycmF5KFwiZFwiKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwO2kgPCBkYXRhLnNpemUoKTtpKyspe1xyXG4gICAgICAgICAgICBsZXQgc0l0ZW0gPSBkYXRhLmdldChpKS5nZXRPYmplY3QoKTtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSB7fTtcclxuICAgICAgICAgICAgaXRlbS5zZXNzaW9uID0gaTtcclxuICAgICAgICAgICAgaXRlbS5hY2NvdW50ID0gc0l0ZW0uZ2V0VXRmU3RyaW5nKFwiZG5cIik7XHJcbiAgICAgICAgICAgIGl0ZW0ud2luID0gc0l0ZW0uZ2V0RG91YmxlKFwibVwiKTtcclxuICAgICAgICAgICAgaXRlbS50aW1lID0gc0l0ZW0uZ2V0VXRmU3RyaW5nKFwidFwiKTtcclxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufSk7XHJcbndpbmRvdy5Sb25nSG9FdmVudCA9IG1vZHVsZS5leHBvcnRzID0gUm9uZ0hvRXZlbnQ7XHJcbiJdfQ==