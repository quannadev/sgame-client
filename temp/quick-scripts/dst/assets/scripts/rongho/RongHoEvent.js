
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/rongho/RongHoEvent.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '7a00de1eQdHdKgPP7X+mSgC', 'RongHoEvent');
// scripts/rongho/RongHoEvent.js

"use strict";

var RongHoEvent = {};
RongHoEvent.RESPONSE_NAME = {
  LOAD_GAME_RES: "rh1",
  BET_RES: "rh2",
  END_BETTING: "rh3"
};
RongHoEvent.LoadGameEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(RongHoEvent.RESPONSE_NAME.LOAD_GAME_RES);
  },
  fromEvent: function fromEvent(event) {
    this.isBetting = event.getBool("b");
    this.time = event.getInt("t");
    this.listChipPot = event.getDoubleArray("lcp");
    this.listMyChipPot = event.getDoubleArray("lmcp");

    if (!this.isBetting) {
      this.result = event.getByteArray("rs");
      this.winpot = event.getByteArray("wp");
    }

    return this;
  }
});
RongHoEvent.BetEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(RongHoEvent.RESPONSE_NAME.BET_RES);
  },
  fromEvent: function fromEvent(event) {
    this.userName = event.getUtfString("un");
    this.betChip = event.getDouble("c");
    this.typePot = event.getByte("t");
    return this;
  }
});
RongHoEvent.EndBetting = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(RongHoEvent.RESPONSE_NAME.END_BETTING);
  },
  fromEvent: function fromEvent(event) {
    this.result = event.getByteArray("rs");
    this.winChip = event.getDouble("wc");
    this.winpot = event.getByteArray("wp");
    return this;
  }
});
RongHoEvent.HistoryEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(CasinoEvent.RESPONSE_NAME.HISTORY_RES);

    this.items = [];
    this.ITEM_NAME = ["Rồng", "Hòa", "Hổ", "3 Trắng", "4 Đen", "4 Trắng"];
  },
  fromEvent: function fromEvent(event) {
    var data = event.getSArray("d");

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var session = "#" + sItem.getDouble("id").toFixed(0);
      var time = sItem.getUtfString("t");
      var betValues = sItem.getDoubleArray("b");
      var hoan_tra = 0;
      var dices = sItem.getIntArray("di");
      var result = sItem.getIntArray("rs");
      var prizeValues = sItem.getDoubleArray("w");

      for (var j = 0; j < betValues.length - 1; j++) {
        if (betValues[j] >= 0) {
          var item = {};
          item.session = session;
          item.time = time;
          item.dices = dices;
          item.ketqua = result;
          item.stakes = betValues[j];
          item.win = prizeValues[j];
          item.cuadat = this.ITEM_NAME[j];
          item.hoan_tra = 0;

          if (betValues[1] - betValues[0] > 0) {
            if (j == 1) item.hoan_tra = hoan_tra;
          } else {
            if (j == 0) item.hoan_tra = hoan_tra;
          }

          this.items.push(item);
        }
      }
    }

    return this;
  }
});
RongHoEvent.LeaderBoardEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(CasinoEvent.RESPONSE_NAME.LEADER_BOARD_RES);

    this.items = [];
  },
  fromEvent: function fromEvent(event) {
    var data = event.getSArray("d");

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var item = {};
      item.session = i;
      item.account = sItem.getUtfString("dn");
      item.win = sItem.getDouble("m");
      item.time = sItem.getUtfString("t");
      this.items.push(item);
    }

    return this;
  }
});
window.RongHoEvent = module.exports = RongHoEvent;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL3Jvbmdoby9Sb25nSG9FdmVudC5qcyJdLCJuYW1lcyI6WyJSb25nSG9FdmVudCIsIlJFU1BPTlNFX05BTUUiLCJMT0FEX0dBTUVfUkVTIiwiQkVUX1JFUyIsIkVORF9CRVRUSU5HIiwiTG9hZEdhbWVFdmVudCIsIkNhc2lub0V2ZW50IiwiX0Jhc2VFdmVudCIsImV4dGVuZCIsImN0b3IiLCJfc3VwZXIiLCJmcm9tRXZlbnQiLCJldmVudCIsImlzQmV0dGluZyIsImdldEJvb2wiLCJ0aW1lIiwiZ2V0SW50IiwibGlzdENoaXBQb3QiLCJnZXREb3VibGVBcnJheSIsImxpc3RNeUNoaXBQb3QiLCJyZXN1bHQiLCJnZXRCeXRlQXJyYXkiLCJ3aW5wb3QiLCJCZXRFdmVudCIsInVzZXJOYW1lIiwiZ2V0VXRmU3RyaW5nIiwiYmV0Q2hpcCIsImdldERvdWJsZSIsInR5cGVQb3QiLCJnZXRCeXRlIiwiRW5kQmV0dGluZyIsIndpbkNoaXAiLCJIaXN0b3J5RXZlbnQiLCJISVNUT1JZX1JFUyIsIml0ZW1zIiwiSVRFTV9OQU1FIiwiZGF0YSIsImdldFNBcnJheSIsImkiLCJzaXplIiwic0l0ZW0iLCJnZXQiLCJnZXRPYmplY3QiLCJzZXNzaW9uIiwidG9GaXhlZCIsImJldFZhbHVlcyIsImhvYW5fdHJhIiwiZGljZXMiLCJnZXRJbnRBcnJheSIsInByaXplVmFsdWVzIiwiaiIsImxlbmd0aCIsIml0ZW0iLCJrZXRxdWEiLCJzdGFrZXMiLCJ3aW4iLCJjdWFkYXQiLCJwdXNoIiwiTGVhZGVyQm9hcmRFdmVudCIsIkxFQURFUl9CT0FSRF9SRVMiLCJhY2NvdW50Iiwid2luZG93IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxXQUFXLEdBQUcsRUFBbEI7QUFDQUEsV0FBVyxDQUFDQyxhQUFaLEdBQTRCO0FBQ3hCQyxFQUFBQSxhQUFhLEVBQUUsS0FEUztBQUV4QkMsRUFBQUEsT0FB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SUFBTCxFQUFsQixFQUE4QkQsQ0FBQyxFQUEvQixFQUFrQztBQUM5QixVQUFJRSxLQUFLLEdBQUdKLElBQUksQ0FBQ0ssR0FBTCxDQUFTSCxDQUFULEVBQVlJLFNBQVosRUFBWjtBQUNBLFVBQUlVLElBQUksR0FBRyxFQUFYO0FBQ0FBLE1BQUFBLElBQUksQ0FBQ1QsT0FBTCxHQUFlTCxDQUFmO0FBQ0FjLE1BQUFBLElBQUksQ0FBQ1EsT0FBTCxHQUFlcEIsS0FBSyxDQUFDZixZQUFOLENBQW1CLElBQW5CLENBQWY7QUFDQTJCLE1BQUFBLElBQUksQ0FBQ0csR0FBTCxHQUFXZixLQUFLLENBQUNiLFNBQU4sQ0FBZ0IsR0FBaEIsQ0FBWDtBQUNBeUIsTUFBQUEsSUFBSSxDQUFDckMsSUFBTCxHQUFZeUIsS0FBSyxDQUFDZixZQUFOLENBQW1CLEdBQW5CLENBQVo7QUFDQSxXQUFLUyxLQUFMLENBQVd1QixJQUFYLENBQWdCTCxJQUFoQjtBQUNIOztBQUNELFdBQU8sSUFBUDtBQUNIO0FBakJ3RCxDQUE5QixDQUEvQjtBQW1CQVMsTUFBTSxDQUFDN0QsV0FBUCxHQUFxQjhELE1BQU0sQ0FBQ0MsT0FBUCxHQUFpQi9ELFdBQXRDIiwic291cmNlUm9vdCI6Ii8iLCJzb3VyY2VzQ29udGVudCI6WyJsZXQgUm9uZ0hvRXZlbnQgPSB7fTtcblJvbmdIb0V2ZW50LlJFU1BPTlNFX05BTUUgPSB7XG4gICAgTE9BRF9HQU1FX1JFUzogXCJyaDFcIixcbiAgICBCRVRfUkVTOiBcInJoMlwiLFxuICAgIEVORF9CRVRUSU5HOiBcInJoM1wiXG59O1xuUm9uZ0hvRXZlbnQuTG9hZEdhbWVFdmVudCA9IENhc2lub0V2ZW50Ll9CYXNlRXZlbnQuZXh0ZW5kKHtcbiAgICBjdG9yKCl7XG4gICAgICAgIHRoaXMuX3N1cGVyKFJvbmdIb0V2ZW50LlJFU1BPTlNFX05BTUUuTE9BRF9HQU1FX1JFUyk7XG4gICAgfSxcbiAgICBmcm9tRXZlbnQoZXZlbnQpe1xuICAgICAgICB0aGlzLmlzQmV0dGluZyAgICAgID0gZXZlbnQuZ2V0Qm9vbChcImJcIik7XG4gICAgICAgIHRoaXMudGltZSAgICAgICAgICAgPSBldmVudC5nZXRJbnQoXCJ0XCIpO1xuICAgICAgICB0aGlzLmxpc3RDaGlwUG90ICAgID0gZXZlbnQuZ2V0RG91YmxlQXJyYXkoXCJsY3BcIik7XG4gICAgICAgIHRoaXMubGlzdE15Q2hpcFBvdCAgPSBldmVudC5nZXREb3VibGVBcnJheShcImxtY3BcIik7XG4gICAgICAgIGlmKCF0aGlzLmlzQmV0dGluZyl7XG4gICAgICAgICAgICB0aGlzLnJlc3VsdCA9IGV2ZW50LmdldEJ5dGVBcnJheShcInJzXCIpO1xuICAgICAgICAgICAgdGhpcy53aW5wb3QgPSBldmVudC5nZXRCeXRlQXJyYXkoXCJ3cFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59KVxuUm9uZ0hvRXZlbnQuQmV0RXZlbnQgPSBDYXNpbm9FdmVudC5fQmFzZUV2ZW50LmV4dGVuZCh7XG4gICAgY3Rvcigpe1xuICAgICAgICB0aGlzLl9zdXBlcihSb25nSG9FdmVudC5SRVNQT05TRV9OQU1FLkJFVF9SRVMpO1xuICAgIH0sXG4gICAgZnJvbUV2ZW50KGV2ZW50KXtcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9IGV2ZW50LmdldFV0ZlN0cmluZyhcInVuXCIpO1xuICAgICAgICB0aGlzLmJldENoaXAgPSBldmVudC5nZXREb3VibGUoXCJjXCIpO1xuICAgICAgICB0aGlzLnR5cGVQb3QgPSBldmVudC5nZXRCeXRlKFwidFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSk7XG5Sb25nSG9FdmVudC5FbmRCZXR0aW5nID0gQ2FzaW5vRXZlbnQuX0Jhc2VFdmVudC5leHRlbmQoe1xuICAgIGN0b3IoKXtcbiAgICAgICAgdGhpcy5fc3VwZXIoUm9uZ0hvRXZlbnQuUkVTUE9OU0VfTkFNRS5FTkRfQkVUVElORyk7XG4gICAgfSxcbiAgICBmcm9tRXZlbnQoZXZlbnQpe1xuICAgICAgICB0aGlzLnJlc3VsdCA9IGV2ZW50LmdldEJ5dGVBcnJheShcInJzXCIpO1xuICAgICAgICB0aGlzLndpbkNoaXAgPSBldmVudC5nZXREb3VibGUoXCJ3Y1wiKTtcbiAgICAgICAgdGhpcy53aW5wb3QgPSBldmVudC5nZXRCeXRlQXJyYXkoXCJ3cFwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxufSk7XG5Sb25nSG9FdmVudC5IaXN0b3J5RXZlbnQgPSBDYXNpbm9FdmVudC5fQmFzZUV2ZW50LmV4dGVuZCh7XG4gICAgY3RvcigpIHtcbiAgICAgICAgdGhpcy5fc3VwZXIoQ2FzaW5vRXZlbnQuUkVTUE9OU0VfTkFNRS5ISVNUT1JZX1JFUyk7XG4gICAgICAgIHRoaXMuaXRlbXMgPSBbXTtcbiAgICAgICAgdGhpcy5JVEVNX05BTUUgPSBbXCJS4buTbmdcIiwgXCJIw7JhXCIsIFwiSOG7lVwiLCBcIjMgVHLhuq9uZ1wiLCBcIjQgxJBlblwiLCBcIjQgVHLhuq9uZ1wiXTtcbiAgICB9LFxuICAgIGZyb21FdmVudChldmVudCl7XG4gICAgICAgIGxldCBkYXRhID0gZXZlbnQuZ2V0U0FycmF5KFwiZFwiKTtcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRhdGEuc2l6ZSgpOyBpKyspe1xuICAgICAgICAgICAgbGV0IHNJdGVtID0gZGF0YS5nZXQoaSkuZ2V0T2JqZWN0KCk7XG4gICAgICAgICAgICBsZXQgc2Vzc2lvbiA9IFwiI1wiK3NJdGVtLmdldERvdWJsZShcImlkXCIpLnRvRml4ZWQoMCk7XG4gICAgICAgICAgICBsZXQgdGltZSA9IHNJdGVtLmdldFV0ZlN0cmluZyhcInRcIik7XG4gICAgICAgICAgICBsZXQgYmV0VmFsdWVzID0gc0l0ZW0uZ2V0RG91YmxlQXJyYXkoXCJiXCIpO1xuICAgICAgICAgICAgbGV0IGhvYW5fdHJhICA9IDA7XG4gICAgICAgICAgICBsZXQgZGljZXMgPSBzSXRlbS5nZXRJbnRBcnJheShcImRpXCIpO1xuICAgICAgICAgICAgbGV0IHJlc3VsdCA9IHNJdGVtLmdldEludEFycmF5KFwicnNcIik7XG4gICAgICAgICAgICBsZXQgcHJpemVWYWx1ZXMgPSBzSXRlbS5nZXREb3VibGVBcnJheShcIndcIik7XG4gICAgICAgICAgICBmb3IobGV0IGogPSAwOyBqIDwgYmV0VmFsdWVzLmxlbmd0aC0xO2orKyl7XG4gICAgICAgICAgICAgICAgaWYoYmV0VmFsdWVzW2pdID49IDApe1xuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnNlc3Npb24gPSBzZXNzaW9uO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnRpbWUgPSB0aW1lO1xuICAgICAgICAgICAgICAgICAgICBpdGVtLmRpY2VzID0gZGljZXM7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ua2V0cXVhID0gcmVzdWx0O1xuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YWtlcyA9IGJldFZhbHVlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS53aW4gPSBwcml6ZVZhbHVlc1tqXTtcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5jdWFkYXQgPSB0aGlzLklURU1fTkFNRVtqXVxuICAgICAgICAgICAgICAgICAgICBpdGVtLmhvYW5fdHJhID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYoYmV0VmFsdWVzWzFdIC0gYmV0VmFsdWVzWzBdID4gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihqID09IDEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5ob2FuX3RyYSA9IGhvYW5fdHJhO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGogPT0gMClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmhvYW5fdHJhID0gaG9hbl90cmE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59KTtcblJvbmdIb0V2ZW50LkxlYWRlckJvYXJkRXZlbnQgPSBDYXNpbm9FdmVudC5fQmFzZUV2ZW50LmV4dGVuZCh7XG4gICAgY3RvcigpIHtcbiAgICAgICAgdGhpcy5fc3VwZXIoQ2FzaW5vRXZlbnQuUkVTUE9OU0VfTkFNRS5MRUFERVJfQk9BUkRfUkVTKTtcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgIH0sXG4gICAgZnJvbUV2ZW50KGV2ZW50KXtcbiAgICAgICAgbGV0IGRhdGEgPSBldmVudC5nZXRTQXJyYXkoXCJkXCIpO1xuICAgICAgICBmb3IobGV0IGkgPSAwO2kgPCBkYXRhLnNpemUoKTtpKyspe1xuICAgICAgICAgICAgbGV0IHNJdGVtID0gZGF0YS5nZXQoaSkuZ2V0T2JqZWN0KCk7XG4gICAgICAgICAgICBsZXQgaXRlbSA9IHt9O1xuICAgICAgICAgICAgaXRlbS5zZXNzaW9uID0gaTtcbiAgICAgICAgICAgIGl0ZW0uYWNjb3VudCA9IHNJdGVtLmdldFV0ZlN0cmluZyhcImRuXCIpO1xuICAgICAgICAgICAgaXRlbS53aW4gPSBzSXRlbS5nZXREb3VibGUoXCJtXCIpO1xuICAgICAgICAgICAgaXRlbS50aW1lID0gc0l0ZW0uZ2V0VXRmU3RyaW5nKFwidFwiKTtcbiAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG59KTtcbndpbmRvdy5Sb25nSG9FdmVudCA9IG1vZHVsZS5leHBvcnRzID0gUm9uZ0hvRXZlbnQ7XG4iXX0=