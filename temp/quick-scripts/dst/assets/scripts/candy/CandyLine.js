
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/candy/CandyLine.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '589b5YV1SxKz7gIRZ0zhUo6', 'CandyLine');
// scripts/candy/CandyLine.js

"use strict";

var helper = require('Helper');

cc.Class({
  "extends": cc.Component,
  properties: {
    nodeLine: cc.Node,
    typeLine: 0
  },
  init: function init(obj) {
    this.CDV = obj;
    this.eventSelectAll();
  },
  eventOpen: function eventOpen() {
    this.node.active = true;
  },
  eventClose: function eventClose() {
    var total = this.getTotalLineSelect();

    if (this.node.active && total < 1) {
      this.CDV.addNotice('Chọn ít nhất 1 dòng');
    } else {
      this.node.active = false;
    }
  },
  eventSelect: function eventSelect(event, numberStr) {
    var numberLine = parseInt(numberStr);
    helper.setMaterialGray(event.target.getComponent(cc.Sprite), helper.isMaterialGray(event.target.getComponent(cc.Sprite)));
    this.data[numberLine] = helper.isMaterialGray(event.target.getComponent(cc.Sprite));
    this.updateString();
    this.typeLine = 3;
  },
  eventBoChon: function eventBoChon() {
    var _this = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), true);
      return false;
    })).then(function (result) {
      _this.data = result;
      _this.typeLine = -1;
    });
  },
  eventSelectChan: function eventSelectChan() {
    var _this2 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 1);
      return index % 2 != 1;
    })).then(function (result) {
      _this2.data = result;

      _this2.updateString();
    });
    this.typeLine = 2;
  },
  eventSelectLe: function eventSelectLe() {
    var _this3 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), index % 2 == 0);
      return index % 2 != 0;
    })).then(function (result) {
      _this3.data = result;

      _this3.updateString();
    });
    this.typeLine = 1;
  },
  eventSelectAll: function eventSelectAll(e, select) {
    var _this4 = this;

    Promise.all(this.nodeLine.children.map(function (line, index) {
      helper.setMaterialGray(line.getComponent(cc.Sprite), false);
      return true;
    })).then(function (result) {
      _this4.data = result;

      _this4.updateString();
    });
    this.typeLine = 0;
  },
  updateString: function updateString() {
    var total = this.getTotalLineSelect();
    this.CDV.setNumberLines(total);
  },
  getTotalLineSelect: function getTotalLineSelect() {
    var total = 0;

    for (var i = 1; i < this.data.length; i++) {
      if (this.data[i]) total++;
    }

    return total;
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xcY2FuZHlcXENhbmR5TGluZS5qcyJdLCJuYW1lcyI6WyJoZWxwZXIiLCJyZXF1aXJlIiwiY2MiLCJDbGFzcyIsIkNvbXBvbmVudCIsInByb3BlcnRpZXMiLCJub2RlTGluZSIsIk5vZGUiLCJ0eXBlTGluZSIsImluaXQiLCJvYmoiLCJDRFYiLCJldmVudFNlbGVjdEFsbCIsImV2ZW50T3BlbiIsIm5vZGUiLCJhY3RpdmUiLCJldmVudENsb3NlIiwidG90YWwiLCJnZXRUb3RhbExpbmVTZWxlY3QiLCJhZGROb3RpY2UiLCJldmVudFNlbGVjdCIsImV2ZW50IiwibnVtYmVyU3RyIiwibnVtYmVyTGluZSIsInBhcnNlSW50Iiwic2V0TWF0ZXJpYWxHcmF5IiwidGFyZ2V0IiwiZ2V0Q29tcG9uZW50IiwiU3ByaXRlIiwiaXNNYXRlcmlhbEdyYXkiLCJkYXRhIiwidXBkYXRlU3RyaW5nIiwiZXZlbnRCb0Nob24iLCJQcm9taXNlIiwiYWxsIiwiY2hpbGRyZW4iLCJtYXAiLCJsaW5lIiwiaW5kZXgiLCJ0aGVuIiwicmVzdWx0IiwiZXZlbnRTZWxlY3RDaGFuIiwiZXZlbnRTZWxlY3RMZSIsImUiLCJzZWxlY3QiLCJzZXROdW1iZXJMaW5lcyIsImkiLCJsZW5ndGgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQ0EsSUFBSUEsTUFBTSxHQUFHQyxPQUFPLENBQUMsUUFBRCxDQUFwQjs7QUFFQUMsRUFBRSxDQUFDQyxLQUFILENBQVM7QUFDTCxhQUFTRCxFQUFFLENBQUNFLFNBRFA7QUFHTEMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLFFBQVEsRUFBSUosRUFBRSxDQUFDSyxJQURQO0FBRVJDLElBQUFBLFFBQVEsRUFBRTtBQUZGLEdBSFA7QUFPTEMsRUFBQUEsSUFBSSxFQUFFLGNBQVNDLEdBQVQsRUFBYTtBQUNmLFNBQUtDLEdBQUwsR0FBV0QsR0FBWDtBQUNBLFNBQUtFLGNBQUw7QUFDSCxHQVZJO0FBV0xDLEVB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QUlELEtBQUssR0FBRyxDQUFaOztBQUNBLFNBQUssSUFBSTZCLENBQUMsR0FBQyxDQUFYLEVBQWNBLENBQUMsR0FBRSxLQUFLaEIsSUFBTCxDQUFVaUIsTUFBM0IsRUFBbUNELENBQUMsRUFBcEMsRUFBdUM7QUFDbkMsVUFBSSxLQUFLaEIsSUFBTCxDQUFVZ0IsQ0FBVixDQUFKLEVBQ0k3QixLQUFLO0FBQ1o7O0FBQ0QsV0FBT0EsS0FBUDtBQUNIO0FBbEZJLENBQVQiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgaGVscGVyID0gcmVxdWlyZSgnSGVscGVyJyk7XHJcblxyXG5jYy5DbGFzcyh7XHJcbiAgICBleHRlbmRzOiBjYy5Db21wb25lbnQsXHJcblxyXG4gICAgcHJvcGVydGllczoge1xyXG4gICAgICAgIG5vZGVMaW5lOiAgIGNjLk5vZGUsXHJcbiAgICAgICAgdHlwZUxpbmU6IDBcclxuICAgIH0sXHJcbiAgICBpbml0OiBmdW5jdGlvbihvYmope1xyXG4gICAgICAgIHRoaXMuQ0RWID0gb2JqO1xyXG4gICAgICAgIHRoaXMuZXZlbnRTZWxlY3RBbGwoKTtcclxuICAgIH0sXHJcbiAgICBldmVudE9wZW46IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IHRydWU7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRDbG9zZTogZnVuY3Rpb24oKXtcclxuICAgICAgICBsZXQgdG90YWwgPSB0aGlzLmdldFRvdGFsTGluZVNlbGVjdCgpO1xyXG4gICAgICAgIGlmICh0aGlzLm5vZGUuYWN0aXZlICYmIHRvdGFsIDwgMSkge1xyXG4gICAgICAgICAgICB0aGlzLkNEVi5hZGROb3RpY2UoJ0No4buNbiDDrXQgbmjhuqV0IDEgZMOybmcnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdGhpcy5ub2RlLmFjdGl2ZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH0sXHJcbiAgICBldmVudFNlbGVjdDogZnVuY3Rpb24oZXZlbnQsIG51bWJlclN0cikge1xyXG4gICAgICAgIGxldCBudW1iZXJMaW5lID0gcGFyc2VJbnQobnVtYmVyU3RyKTtcclxuICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgaGVscGVyLmlzTWF0ZXJpYWxHcmF5KGV2ZW50LnRhcmdldC5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSkpO1xyXG4gICAgICAgIHRoaXMuZGF0YVtudW1iZXJMaW5lXSA9IGhlbHBlci5pc01hdGVyaWFsR3JheShldmVudC50YXJnZXQuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSkpO1xyXG4gICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDM7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRCb0Nob246IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5ub2RlTGluZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24obGluZSwgaW5kZXgpe1xyXG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIHRydWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSkpLnRoZW4ocmVzdWx0PT57XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgdGhpcy50eXBlTGluZSA9IC0xO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIGV2ZW50U2VsZWN0Q2hhbjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5ub2RlTGluZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24obGluZSwgaW5kZXgpe1xyXG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGluZGV4JTIgPT0xKTtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4JTIgIT0xO1xyXG4gICAgICAgIH0pKVxyXG4gICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVTdHJpbmcoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy50eXBlTGluZSA9IDI7XHJcbiAgICB9LFxyXG4gICAgZXZlbnRTZWxlY3RMZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5ub2RlTGluZS5jaGlsZHJlbi5tYXAoZnVuY3Rpb24obGluZSwgaW5kZXgpe1xyXG4gICAgICAgICAgICBoZWxwZXIuc2V0TWF0ZXJpYWxHcmF5KGxpbmUuZ2V0Q29tcG9uZW50KGNjLlNwcml0ZSksIGluZGV4JTIgPT0wKTtcclxuICAgICAgICAgICAgcmV0dXJuIGluZGV4JTIgIT0gMDtcclxuICAgICAgICB9KSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudHlwZUxpbmUgPSAxO1xyXG4gICAgfSxcclxuICAgIGV2ZW50U2VsZWN0QWxsOiBmdW5jdGlvbihlLCBzZWxlY3QpIHtcclxuICAgICAgICBQcm9taXNlLmFsbCh0aGlzLm5vZGVMaW5lLmNoaWxkcmVuLm1hcChmdW5jdGlvbihsaW5lLCBpbmRleCl7XHJcbiAgICAgICAgICAgIGhlbHBlci5zZXRNYXRlcmlhbEdyYXkobGluZS5nZXRDb21wb25lbnQoY2MuU3ByaXRlKSwgZmFsc2UpO1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9KSlcclxuICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudHlwZUxpbmUgPSAwO1xyXG4gICAgfSxcclxuICAgIHVwZGF0ZVN0cmluZzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCB0b3RhbCA9IHRoaXMuZ2V0VG90YWxMaW5lU2VsZWN0KCk7XHJcbiAgICAgICAgdGhpcy5DRFYuc2V0TnVtYmVyTGluZXModG90YWwpO1xyXG4gICAgfSxcclxuICAgIGdldFRvdGFsTGluZVNlbGVjdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGxldCB0b3RhbCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaT0xOyBpPCB0aGlzLmRhdGEubGVuZ3RoOyBpKyspe1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhW2ldKVxyXG4gICAgICAgICAgICAgICAgdG90YWwrKztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsO1xyXG4gICAgfVxyXG59KTtcclxuIl19