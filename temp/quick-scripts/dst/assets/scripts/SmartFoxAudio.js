
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/SmartFoxAudio.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '113caQVBTVLFoU32a0NhZpN', 'SmartFoxAudio');
// scripts/SmartFoxAudio.js

"use strict";

var SmartFoxAudio = cc.Class({
  "extends": cc.Component,
  statics: {
    inst: null
  },
  properties: {
    baoDenLuotChoi: {
      "default": null,
      type: cc.AudioClip
    },
    chiaTien: {
      "default": null,
      type: cc.AudioClip
    },
    chiaBai: {
      "default": null,
      type: cc.AudioClip
    },
    chiaBai2: {
      "default": null,
      type: cc.AudioClip
    },
    datCua: {
      "default": null,
      type: cc.AudioClip
    },
    click: {
      "default": null,
      type: cc.AudioClip
    },
    countDown: {
      "default": null,
      type: cc.AudioClip
    },
    danhBai: {
      "default": null,
      type: cc.AudioClip
    },
    pass: {
      "default": null,
      type: cc.AudioClip
    },
    placeChip: {
      "default": null,
      type: cc.AudioClip
    },
    ringRing: {
      "default": null,
      type: cc.AudioClip
    },
    sendChip: {
      "default": null,
      type: cc.AudioClip
    },
    themSong: {
      "default": null,
      type: cc.AudioClip
    },
    win: {
      "default": null,
      type: cc.AudioClip
    },
    xocDia: {
      "default": null,
      type: cc.AudioClip
    },
    currentEffectId: 0,
    _musicEnable: true,
    _soundEnable: true,
    _numberSound: 0,
    _keyMusic: "smart_fox_music",
    _keySound: "smart_fox_sound"
  },
  onLoad: function onLoad() {
    SmartFoxAudio.inst = this;
    mm.audio = this;
    mm.audio._effectEnable = this.isSound();
  },
  isSound: function isSound() {
    var sound = 1;
    var soundSave = cc.sys.localStorage.getItem(this._keySound);

    if (soundSave != null) {
      sound = parseInt(soundSave);
    } else {
      cc.sys.localStorage.setItem(this._keySound, "1");
    }

    return sound == 1;
  },
  isMusic: function isMusic() {
    var music = 1;
    var musicSave = cc.sys.localStorage.getItem(this._keyMusic);

    if (musicSave != null) {
      music = parseInt(musicSave);
    } else {
      cc.sys.localStorage.setItem(this._keyMusic, "1");
    }

    return music == 1;
  },
  saveSound: function saveSound() {},
  saveMusic: function saveMusic() {},
  playMusic: function playMusic() {
    var isMusic = this.isMusic();

    if (isMusic) {
      if (mm.audio._audioIDMusic !== undefined) {
        mm.audio.resumeMusic();
      } else {
        mm.audio._audioIDMusic = cc.audioEngine.play(mm.audio.themSong, true, 0.5);
      }
    } else {
      mm.audio.pauseMusic();
    }
  },
  setMusicVolume: function setMusicVolume(numberVolume) {
    cc.audioEngine.setMusicVolume(numberVolume);
  },
  pauseMusic: function pauseMusic() {
    if (mm.audio._audioIDMusic !== undefined) cc.audioEngine.pause(mm.audio._audioIDMusic);
  },
  resumeMusic: function resumeMusic() {
    if (mm.audio._audioIDMusic !== undefined) cc.audioEngine.resume(mm.audio._audioIDMusic);
  },
  playBaoDenLuotChoi: function playBaoDenLuotChoi() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.baoDenLuotChoi);
  },
  playChiaTien: function playChiaTien() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.chiaTien);
  },
  playChiaBai: function playChiaBai() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.chiaBai);
  },
  playChiaBai2: function playChiaBai2() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.chiaBai2);
  },
  playDatCua: function playDatCua() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.datCua);
  },
  playCountDown: function playCountDown() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.countDown);
  },
  playDanhBai: function playDanhBai() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.danhBai);
  },
  playPass: function playPass() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.pass);
  },
  playPlaceChip: function playPlaceChip() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.placeChip);
  },
  playRingRing: function playRingRing() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.ringRing);
  },
  playSendChip: function playSendChip() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.sendChip);
  },
  playWin: function playWin() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.win);
  },
  playXocDia: function playXocDia() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.xocDia);
  },
  playButton: function playButton() {
    this.currentEffectId = mm.audio._playSFX(mm.audio.click);
  },
  _playSFX: function _playSFX(clip) {
    var isSound = this.isSound();
    if (isSound) return cc.audioEngine.playEffect(clip, false);
    return this.currentEffectId;
  },
  _pauseAllSFX: function _pauseAllSFX() {
    cc.audioEngine.pauseAllEffects();
  },
  _pauseSFX: function _pauseSFX() {
    cc.audioEngine.pauseEffect(this.currentEffectId);
  },
  _stopAllSFX: function _stopAllSFX() {
    cc.audioEngine.stopAllEffects();
  },
  _stopSFX: function _stopSFX() {
    cc.audioEngine.stopEffect(this.currentEffectId);
  }
});

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0cy9zY3JpcHRzL1NtYXJ0Rm94QXVkaW8uanMiXSwibmFtZXMiOlsiU21hcnRGb3hBdWRpbyIsImNjIiwiQ2xhc3MiLCJDb21wb25lbnQiLCJzdGF0aWNzIiwiaW5zdCIsInByb3BlcnRpZXMiLCJiYW9EZW5MdW90Q2hvaSIsInR5cGUiLCJBdWRpb0NsaXAiLCJjaGlhVGllbiIsImNoaWFCYWkiLCJjaGlhQmFpMiIsImRhdEN1YSIsImNsaWNrIiwiY291bnREb3duIiwiZGFuaEJhaSIsInBhc3MiLCJwbGFjZUNoaXAiLCJyaW5nUmluZyIsInNlbmRDaGlwIiwidGhlbVNvbmciLCJ3aW4iLCJ4b2NEaWEiLCJjdXJyZW50RWZmZWN0SWQiLCJfbXVzaWNFbmFibGUiLCJfc291bmRFbmFibGUiLCJfbnVtYmVyU291bmQiLCJfa2V5TXVzaWMiLCJfa2V5U291bmQiLCJvbkxvYWQiLCJtbSIsImF1ZGlvIiwiX2VmZmVjdEVuYWJsZSIsImlzU291bmQiLCJzb3VuZCIsInNvdW5kU2F2ZSIsInN5cyIsImxvY2FsU3RvcmFnZSIsImdldEl0ZW0iLCJwYXJzZUludCIsInNldEl0ZW0iLCJpc011c2ljIiwibXVzaWMiLCJtdXNpY1NhdmUiLCJzYXZlU291bmQiLCJzYXZlTXVzaWMiLCJwbGF5TXVzaWMiLCJfYXVkaW9JRE11c2ljIiwidW5kZWZpbmVkIiwicmVzdW1lTXVzaWMiLCJhdWRpb0VuZ2luZSIsInBsYXkiLCJwYXVzZU11c2ljIiwic2V0TXVzaWNWb2x1bWUiLCJudW1iZXJWb2x1bWUiLCJwYXVzZSIsInJlc3VtZSIsInBsYXlCYW9EZW5MdW90Q2hvaSIsIl9wbGF5U0ZYIiwicGxheUNoaWFUaWVuIiwicGxheUNoaWFCYWkiLCJwbGF5Q2hpYUJhaTIiLCJwbGF5RGF0Q3VhIiwicGxheUNvdW50RG93biIsInBsYXlEYW5oQmFpIiwicGxheVBhc3MiLCJwbGF5UGxhY2VDaGlwIiwicGxheVJpbmdSaW5nIiwicGxheVNlbmRDaGlwIiwicGxheVdpbiIsInBsYXlYb2NEaWEiLCJwbGF5QnV0dG9uIiwiY2xpcCIsInBsYXlFZmZlY3QiLCJfcGF1c2VBbGxTRlgiLCJwYXVzZUFsbEVmZmVjdHMiLCJfcGF1c2VTRlgiLCJwYXVzZUVmZmVjdCIsIl9zdG9wQWxsU0ZYIiwic3RvcEFsbEVmZmVjdHMiLCJfc3RvcFNGWCIsInN0b3BFZmZlY3QiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBSUEsYUFBYSxHQUFHQyxFQUFFLENBQUNDLEtBQUgsQ0FBUztBQUN6QixhQUFTRCxFQUFFLENBQUNFLFNBRGE7QUFFekJDLEVBQUFBLE9BQU8sRUFBRTtBQUNMQyxJQUFBQSxJQUFJLEVBQUU7QUFERCxHQUZnQjtBQU16QkMsRUFBQUEsVUFBVSxFQUFFO0FBQ1JDLElBQUFBLGNBQWMsRUFBRTtBQUNaLGlCQUFTLElBREc7QUFFWkMsTUFBQUEsSUFBSSxFQUFFUCxFQUFFLENBQUNRO0FBRkcsS0FEUjtBQUtSQyxJQUFBQSxRQUFRLEVBQUU7QUFDTixpQkFBUyxJQURIO0FBRU5GLE1BQUFBLElBQUksRUFBRVAsRUFBRSxDQUFDUTtBQUZILEtBTEY7QUFTUkUsSUFBQUEsT0FBTyxFQUFFO0FBQ0wsaUJBQVMsSUFESjtBQUVMSCxNQUFBQSxJQUFJLEVBQUVQLEVBQUUsQ0FBQ1E7QUFGSixLQVREO0FBYVJHLElBQUFBLFFBQVEsRUFBRTtBQUNOLGlCQUFTLElBREg7QUFFTkosTUFBQUEsSUFBSSxFQUFFUCxFQUFFLENBQUNRO0FBRkgsS0FiRjtBQWlCUkksSUFBQUEsTUFBTSxFQUFFO0FBQ0osaUJBQVMsSUFETDtBQUVKTCxNQUFBQSxJQUFJLEVBQUVQLEVBQUUsQ0FBQ1E7QUFGTCxLQWpCQTtBQXFCUkssSUFBQUEsS0FBSyxFQUFFO0FBQ0gsaUJBQVMsSUFETjtBQUVITixNQUFBQSxJQUFJLEVBQUVQLEVBQUUsQ0FBQ1E7QUFGTixLQXJCQztBQXlCUk0sSUFBQUEsU0FBUyxFQUFFO0FBQ1AsaUJBQVMsSUFERjtBQUVQUCxNQUFBQSxJQUFJLEVBQUVQLEVBQUUs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QUF5S3pCaUQsRUFBQUEsVUFBVSxFQUFFLHNCQUFZO0FBQ3BCLFNBQUtoRCxlQUFMLEdBQXVCTyxFQUFFLENBQUNDLEtBQUgsQ0FBUzJCLFFBQVQsQ0FBa0I1QixFQUFFLENBQUNDLEtBQUgsQ0FBU2xCLEtBQTNCLENBQXZCO0FBQ0gsR0EzS3dCO0FBNkt6QjZDLEVBQUFBLFFBQVEsRUFBRSxrQkFBU2MsSUFBVCxFQUFlO0FBQ3JCLFFBQUl2QyxPQUFPLEdBQUcsS0FBS0EsT0FBTCxFQUFkO0FBQ0EsUUFBSUEsT0FBSixFQUNJLE9BQU9qQyxFQUFFLENBQUNrRCxXQUFILENBQWV1QixVQUFmLENBQTJCRCxJQUEzQixFQUFpQyxLQUFqQyxDQUFQO0FBQ0osV0FBTyxLQUFLakQsZUFBWjtBQUNILEdBbEx3QjtBQW1MekJtRCxFQUFBQSxZQUFZLEVBQUUsd0JBQVc7QUFDckIxRSxJQUFBQSxFQUFFLENBQUNrRCxXQUFILENBQWV5QixlQUFmO0FBQ0gsR0FyTHdCO0FBc0x6QkMsRUFBQUEsU0FBUyxFQUFFLHFCQUFXO0FBQ2xCNUUsSUFBQUEsRUFBRSxDQUFDa0QsV0FBSCxDQUFlMkIsV0FBZixDQUEyQixLQUFLdEQsZUFBaEM7QUFDSCxHQXhMd0I7QUF5THpCdUQsRUFBQUEsV0FBVyxFQUFFLHVCQUFXO0FBQ3BCOUUsSUFBQUEsRUFBRSxDQUFDa0QsV0FBSCxDQUFlNkIsY0FBZjtBQUNILEdBM0x3QjtBQTRMekJDLEVBQUFBLFFBQVEsRUFBRSxvQkFBVztBQUNqQmhGLElBQUFBLEVBQUUsQ0FBQ2tELFdBQUgsQ0FBZStCLFVBQWYsQ0FBMEIsS0FBSzFELGVBQS9CO0FBQ0g7QUE5THdCLENBQVQsQ0FBcEIiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbInZhciBTbWFydEZveEF1ZGlvID0gY2MuQ2xhc3Moe1xuICAgIGV4dGVuZHM6IGNjLkNvbXBvbmVudCxcbiAgICBzdGF0aWNzOiB7XG4gICAgICAgIGluc3Q6IG51bGwsXG4gICAgfSxcblxuICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgYmFvRGVuTHVvdENob2k6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgY2hpYVRpZW46IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgY2hpYUJhaToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcFxuICAgICAgICB9LFxuICAgICAgICBjaGlhQmFpMjoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcFxuICAgICAgICB9LFxuICAgICAgICBkYXRDdWE6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgY2xpY2s6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgY291bnREb3duOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQXVkaW9DbGlwXG4gICAgICAgIH0sXG4gICAgICAgIGRhbmhCYWk6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgcGFzczoge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcFxuICAgICAgICB9LFxuICAgICAgICBwbGFjZUNoaXA6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgcmluZ1Jpbmc6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgc2VuZENoaXA6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgdGhlbVNvbmc6IHtcbiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgICAgICAgICB0eXBlOiBjYy5BdWRpb0NsaXBcbiAgICAgICAgfSxcbiAgICAgICAgd2luOiB7XG4gICAgICAgICAgICBkZWZhdWx0OiBudWxsLFxuICAgICAgICAgICAgdHlwZTogY2MuQXVkaW9DbGlwXG4gICAgICAgIH0sXG4gICAgICAgIHhvY0RpYToge1xuICAgICAgICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICAgICAgICAgIHR5cGU6IGNjLkF1ZGlvQ2xpcFxuICAgICAgICB9LFxuICAgICAgICBjdXJyZW50RWZmZWN0SWQ6IDAsXG4gICAgICAgIF9tdXNpY0VuYWJsZTogdHJ1ZSxcbiAgICAgICAgX3NvdW5kRW5hYmxlOiB0cnVlLFxuICAgICAgICBfbnVtYmVyU291bmQ6IDAsXG4gICAgICAgIF9rZXlNdXNpYzogXCJzbWFydF9mb3hfbXVzaWNcIixcbiAgICAgICAgX2tleVNvdW5kOiBcInNtYXJ0X2ZveF9zb3VuZFwiLFxuICAgIH0sXG5cbiAgICBvbkxvYWQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgU21hcnRGb3hBdWRpby5pbnN0ICAgPSB0aGlzO1xuICAgICAgICBtbS5hdWRpbyAgICAgPSB0aGlzO1xuICAgICAgICBtbS5hdWRpby5fZWZmZWN0RW5hYmxlID0gdGhpcy5pc1NvdW5kKCk7XG4gICAgfSxcbiAgICBpc1NvdW5kKCkge1xuICAgICAgICBsZXQgc291bmQgICAgID0gMTtcbiAgICAgICAgbGV0IHNvdW5kU2F2ZSA9IGNjLnN5cy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSh0aGlzLl9rZXlTb3VuZCk7XG4gICAgICAgIGlmIChzb3VuZFNhdmUgIT0gbnVsbCkge1xuICAgICAgICAgICAgc291bmQgPSBwYXJzZUludChzb3VuZFNhdmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY2Muc3lzLmxvY2FsU3RvcmFnZS5zZXRJdGVtKHRoaXMuX2tleVNvdW5kLCBcIjFcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNvdW5kID09MTtcbiAgICB9LFxuICAgIGlzTXVzaWMoKSB7XG4gICAgICAgIGxldCBtdXNpYyAgICAgPSAxO1xuICAgICAgICBsZXQgbXVzaWNTYXZlID0gY2Muc3lzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKHRoaXMuX2tleU11c2ljKTtcbiAgICAgICAgaWYgKG11c2ljU2F2ZSAhPSBudWxsKSB7XG4gICAgICAgICAgICBtdXNpYyA9IHBhcnNlSW50KG11c2ljU2F2ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYy5zeXMubG9jYWxTdG9yYWdlLnNldEl0ZW0odGhpcy5fa2V5TXVzaWMsIFwiMVwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXVzaWMgPT0xO1xuICAgIH0sXG4gICAgc2F2ZVNvdW5kKCkge1xuXG4gICAgfSxcbiAgICBzYXZlTXVzaWMoKSB7XG5cbiAgICB9LFxuICAgIHBsYXlNdXNpYzogZnVuY3Rpb24gKCkge1xuICAgICAgICBsZXQgaXNNdXNpYyA9IHRoaXMuaXNNdXNpYygpO1xuICAgICAgICBpZiAoaXNNdXNpYyl7XG4gICAgICAgICAgICBpZiAobW0uYXVkaW8uX2F1ZGlvSURNdXNpYyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgbW0uYXVkaW8ucmVzdW1lTXVzaWMoKTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICBtbS5hdWRpby5fYXVkaW9JRE11c2ljID0gY2MuYXVkaW9FbmdpbmUucGxheShtbS5hdWRpby50aGVtU29uZywgdHJ1ZSwgMC41KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBtbS5hdWRpby5wYXVzZU11c2ljKCk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNldE11c2ljVm9sdW1lKG51bWJlclZvbHVtZSkge1xuICAgICAgICBjYy5hdWRpb0VuZ2luZS5zZXRNdXNpY1ZvbHVtZShudW1iZXJWb2x1bWUpXG4gICAgfSxcbiAgICBwYXVzZU11c2ljOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtbS5hdWRpby5fYXVkaW9JRE11c2ljICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICBjYy5hdWRpb0VuZ2luZS5wYXVzZShtbS5hdWRpby5fYXVkaW9JRE11c2ljKTtcbiAgICB9LFxuXG4gICAgcmVzdW1lTXVzaWM6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1tLmF1ZGlvLl9hdWRpb0lETXVzaWMgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgIGNjLmF1ZGlvRW5naW5lLnJlc3VtZShtbS5hdWRpby5fYXVkaW9JRE11c2ljKVxuICAgIH0sXG4gICAgcGxheUJhb0Rlbkx1b3RDaG9pKCl7XG4gICAgICAgIHRoaXMuY3VycmVudEVmZmVjdElkID0gbW0uYXVkaW8uX3BsYXlTRlgobW0uYXVkaW8uYmFvRGVuTHVvdENob2kpO1xuICAgIH0sXG4gICAgcGxheUNoaWFUaWVuKCl7XG4gICAgICAgIHRoaXMuY3VycmVudEVmZmVjdElkID0gbW0uYXVkaW8uX3BsYXlTRlgobW0uYXVkaW8uY2hpYVRpZW4pO1xuICAgIH0sXG4gICAgcGxheUNoaWFCYWkoKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RWZmZWN0SWQgPSBtbS5hdWRpby5fcGxheVNGWChtbS5hdWRpby5jaGlhQmFpKTtcbiAgICB9LFxuICAgIHBsYXlDaGlhQmFpMigpe1xuICAgICAgICB0aGlzLmN1cnJlbnRFZmZlY3RJZCA9IG1tLmF1ZGlvLl9wbGF5U0ZYKG1tLmF1ZGlvLmNoaWFCYWkyKTtcbiAgICB9LFxuICAgIHBsYXlEYXRDdWEoKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RWZmZWN0SWQgPSBtbS5hdWRpby5fcGxheVNGWChtbS5hdWRpby5kYXRDdWEpO1xuICAgIH0sXG4gICAgcGxheUNvdW50RG93bigpe1xuICAgICAgICB0aGlzLmN1cnJlbnRFZmZlY3RJZCA9IG1tLmF1ZGlvLl9wbGF5U0ZYKG1tLmF1ZGlvLmNvdW50RG93bik7XG4gICAgfSxcbiAgICBwbGF5RGFuaEJhaSgpe1xuICAgICAgICB0aGlzLmN1cnJlbnRFZmZlY3RJZCA9IG1tLmF1ZGlvLl9wbGF5U0ZYKG1tLmF1ZGlvLmRhbmhCYWkpO1xuICAgIH0sXG4gICAgcGxheVBhc3MoKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RWZmZWN0SWQgPSBtbS5hdWRpby5fcGxheVNGWChtbS5hdWRpby5wYXNzKTtcbiAgICB9LFxuICAgIHBsYXlQbGFjZUNoaXAoKXtcbiAgICAgICAgdGhpcy5jdXJyZW50RWZmZWN0SWQgPSBtbS5hdWRpby5fcGxheVNGWChtbS5hdWRpby5wbGFjZUNoaXApO1xuICAgIH0sXG4gICAgcGxheVJpbmdSaW5nKCl7XG4gICAgICAgIHRoaXMuY3VycmVudEVmZmVjdElkID0gbW0uYXVkaW8uX3BsYXlTRlgobW0uYXVkaW8ucmluZ1JpbmcpO1xuICAgIH0sXG4gICAgcGxheVNlbmRDaGlwKCl7XG4gICAgICAgIHRoaXMuY3VycmVudEVmZmVjdElkID0gbW0uYXVkaW8uX3BsYXlTRlgobW0uYXVkaW8uc2VuZENoaXApO1xuICAgIH0sXG4gICAgcGxheVdpbigpe1xuICAgICAgICB0aGlzLmN1cnJlbnRFZmZlY3RJZCA9IG1tLmF1ZGlvLl9wbGF5U0ZYKG1tLmF1ZGlvLndpbik7XG4gICAgfSxcbiAgICBwbGF5WG9jRGlhKCl7XG4gICAgICAgIHRoaXMuY3VycmVudEVmZmVjdElkID0gbW0uYXVkaW8uX3BsYXlTRlgobW0uYXVkaW8ueG9jRGlhKTtcbiAgICB9LFxuICAgIHBsYXlCdXR0b246IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy5jdXJyZW50RWZmZWN0SWQgPSBtbS5hdWRpby5fcGxheVNGWChtbS5hdWRpby5jbGljayk7XG4gICAgfSxcblxuICAgIF9wbGF5U0ZYOiBmdW5jdGlvbihjbGlwKSB7XG4gICAgICAgIGxldCBpc1NvdW5kID0gdGhpcy5pc1NvdW5kKCk7XG4gICAgICAgIGlmIChpc1NvdW5kKVxuICAgICAgICAgICAgcmV0dXJuIGNjLmF1ZGlvRW5naW5lLnBsYXlFZmZlY3QoIGNsaXAsIGZhbHNlICk7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRFZmZlY3RJZDtcbiAgICB9LFxuICAgIF9wYXVzZUFsbFNGWDogZnVuY3Rpb24oKSB7XG4gICAgICAgIGNjLmF1ZGlvRW5naW5lLnBhdXNlQWxsRWZmZWN0cygpO1xuICAgIH0sXG4gICAgX3BhdXNlU0ZYOiBmdW5jdGlvbigpIHtcbiAgICAgICAgY2MuYXVkaW9FbmdpbmUucGF1c2VFZmZlY3QodGhpcy5jdXJyZW50RWZmZWN0SWQpO1xuICAgIH0sXG4gICAgX3N0b3BBbGxTRlg6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjYy5hdWRpb0VuZ2luZS5zdG9wQWxsRWZmZWN0cygpO1xuICAgIH0sXG4gICAgX3N0b3BTRlg6IGZ1bmN0aW9uKCkge1xuICAgICAgICBjYy5hdWRpb0VuZ2luZS5zdG9wRWZmZWN0KHRoaXMuY3VycmVudEVmZmVjdElkKTtcbiAgICB9XG59KTtcblxuIl19