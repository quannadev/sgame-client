
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/xocdia/XocDiaEvent.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, '39815boodxAQ7qhNAUCAPeG', 'XocDiaEvent');
// scripts/xocdia/XocDiaEvent.js

"use strict";

var XocDiaEvent = {};
XocDiaEvent.RESPONSE_NAME = {
  LOAD_GAME_RES: "xd1",
  BET_RES: "xd2",
  END_BETTING: "xd3",
  HISTORY_RESULT: "xd4"
};
XocDiaEvent.LoadGameEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(XocDiaEvent.RESPONSE_NAME.LOAD_GAME_RES);
  },
  fromEvent: function fromEvent(event) {
    this.isBetting = event.getBool("b");
    this.time = event.getInt("t");
    this.listChipPot = event.getDoubleArray("lcp");
    this.listMyChipPot = event.getDoubleArray("lmcp");

    if (!this.isBetting) {
      this.result = event.getByteArray("rs");
      this.winpot = event.getByteArray("wp");
    }

    return this;
  }
});
XocDiaEvent.BetEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(XocDiaEvent.RESPONSE_NAME.BET_RES);
  },
  fromEvent: function fromEvent(event) {
    this.userName = event.getUtfString("un");
    this.betChip = event.getDouble("c");
    this.typePot = event.getByte("t");
    return this;
  }
});
XocDiaEvent.EndBetting = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(XocDiaEvent.RESPONSE_NAME.END_BETTING);
  },
  fromEvent: function fromEvent(event) {
    this.result = event.getByteArray("rs");
    this.winChip = event.getDouble("wc");
    this.winpot = event.getByteArray("wp");
    this.refund = event.getDouble("rfc");
    return this;
  }
});
XocDiaEvent.HistoryResponse = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(XocDiaEvent.RESPONSE_NAME.HISTORY_RESULT);
  },
  fromEvent: function fromEvent(event) {
    this.result = event.getByteArray("lr");
    return this;
  }
});
XocDiaEvent.HistoryEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(CasinoEvent.RESPONSE_NAME.HISTORY_RES);

    this.items = [];
    this.ITEM_NAME = ["Lẻ", "Chẵn", "3 Đen", "3 Trắng", "4 Đen", "4 Trắng"];
  },
  fromEvent: function fromEvent(event) {
    var data = event.getSArray("d");

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var session = "#" + sItem.getDouble("id").toFixed(0);
      var time = sItem.getUtfString("t");
      var hoan_tra = sItem.getDouble("rf");
      var ketqua = this.getKeQua(sItem.getIntArray("rs"));
      var betValues = sItem.getDoubleArray("b");
      var prizeValues = sItem.getDoubleArray("w");

      for (var j = 0; j < betValues.length; j++) {
        if (betValues[j] > 0) {
          var item = {};
          item.session = session;
          item.time = time;
          item.ketqua = ketqua;
          item.stakes = betValues[j];
          item.win = prizeValues[j];
          item.cuadat = this.ITEM_NAME[j];
          item.hoan_tra = 0;

          if (betValues[1] - betValues[0] > 0) {
            // hoan tra cua chan
            if (j == 1) item.hoan_tra = hoan_tra;
          } else {
            if (j == 0) item.hoan_tra = hoan_tra;
          }

          this.items.push(item);
        }
      }
    }

    return this;
  },
  getKeQua: function getKeQua(result) {
    var kq = "";
    var countWhite = 0; // black = 0

    var countBlack = 0; // white = 1;

    for (var i = 0; i < result.length; i++) {
      if (result[i] == 0) countBlack++;else countWhite++;
    }

    if (countWhite % 2 == 0) {
      kq = "Chẵn ";
    } else {
      kq = "Lẻ ";
    }

    if (countWhite == 3) {
      kq += "3 Trắng";
    }

    if (countWhite == 4) {
      kq += "4 Trắng";
    }

    if (countWhite == 0) {
      kq += "4 Đen";
    }

    if (countWhite == 1) {
      kq += "3 Đen";
    }

    return kq;
  }
});
XocDiaEvent.LeaderBoardEvent = CasinoEvent._BaseEvent.extend({
  ctor: function ctor() {
    this._super(CasinoEvent.RESPONSE_NAME.LEADER_BOARD_RES);

    this.items = [];
  },
  fromEvent: function fromEvent(event) {
    var data = event.getSArray("d");

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var item = {};
      item.session = i;
      item.account = sItem.getUtfString("dn");
      item.win = sItem.getDouble("m");
      item.time = sItem.getUtfString("t");
      this.items.push(item);
    }

    return this;
  }
});
window.XocDiaEvent = module.exports = XocDiaEvent;

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xceG9jZGlhXFxYb2NEaWFFdmVudC5qcyJdLCJuYW1lcyI6WyJYb2NEaWFFdmVudCIsIlJFU1BPTlNFX05BTUUiLCJMT0FEX0dBTUVfUkVTIiwiQkVUX1JFUyIsIkVORF9CRVRUSU5HIiwiSElTVE9SWV9SRVNVTFQiLCJMb2FkR2FtZUV2ZW50IiwiQ2FzaW5vRXZlbnQiLCJfQmFzZUV2ZW50IiwiZXh0ZW5kIiwiY3RvciIsIl9zdXBlciIsImZyb21FdmVudCIsImV2ZW50IiwiaXNCZXR0aW5nIiwiZ2V0Qm9vbCIsInRpbWUiLCJnZXRJbnQiLCJsaXN0Q2hpcFBvdCIsImdldERvdWJsZUFycmF5IiwibGlzdE15Q2hpcFBvdCIsInJlc3VsdCIsImdldEJ5dGVBcnJheSIsIndpbnBvdCIsIkJldEV2ZW50IiwidXNlck5hbWUiLCJnZXRVdGZTdHJpbmciLCJiZXRDaGlwIiwiZ2V0RG91YmxlIiwidHlwZVBvdCIsImdldEJ5dGUiLCJFbmRCZXR0aW5nIiwid2luQ2hpcCIsInJlZnVuZCIsIkhpc3RvcnlSZXNwb25zZSIsIkhpc3RvcnlFdmVudCIsIkhJU1RPUllfUkVTIiwiaXRlbXMiLCJJVEVNX05BTUUiLCJkYXRhIiwiZ2V0U0FycmF5IiwiaSIsInNpemUiLCJzSXRlbSIsImdldCIsImdldE9iamVjdCIsInNlc3Npb24iLCJ0b0ZpeGVkIiwiaG9hbl90cmEiLCJrZXRxdWEiLCJnZXRLZVF1YSIsImdldEludEFycmF5IiwiYmV0VmFsdWVzIiwicHJpemVWYWx1ZXMiLCJqIiwibGVuZ3RoIiwiaXRlbSIsInN0YWtlcyIsIndpbiIsImN1YWRhdCIsInB1c2giLCJrcSIsImNvdW50V2hpdGUiLCJjb3VudEJsYWNrIiwiTGVhZGVyQm9hcmRFdmVudCIsIkxFQURFUl9CT0FSRF9SRVMiLCJhY2NvdW50Iiwid2luZG93IiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxJQUFJQSxXQUFXLEdB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WUosV0FBVyxDQUFDTixhQUFaLENBQTBCZ0UsZ0JBQXRDOztBQUNBLFNBQUs1QixLQUFMLEdBQWEsRUFBYjtBQUNILEdBSndEO0FBS3pEekIsRUFBQUEsU0FMeUQscUJBSy9DQyxLQUwrQyxFQUt6QztBQUNaLFFBQUkwQixJQUFJLEdBQUcxQixLQUFLLENBQUMyQixTQUFOLENBQWdCLEdBQWhCLENBQVg7O0FBQ0EsU0FBSSxJQUFJQyxDQUFDLEdBQUcsQ0FBWixFQUFjQSxDQUFDLEdBQUdGLElBQUksQ0FBQ0csSUFBTCxFQUFsQixFQUE4QkQsQ0FBQyxFQUEvQixFQUFrQztBQUM5QixVQUFJRSxLQUFLLEdBQUdKLElBQUksQ0FBQ0ssR0FBTCxDQUFTSCxDQUFULEVBQVlJLFNBQVosRUFBWjtBQUNBLFVBQUlXLElBQUksR0FBRyxFQUFYO0FBQ0FBLE1BQUFBLElBQUksQ0FBQ1YsT0FBTCxHQUFlTCxDQUFmO0FBQ0FlLE1BQUFBLElBQUksQ0FBQ1UsT0FBTCxHQUFldkIsS0FBSyxDQUFDakIsWUFBTixDQUFtQixJQUFuQixDQUFmO0FBQ0E4QixNQUFBQSxJQUFJLENBQUNFLEdBQUwsR0FBV2YsS0FBSyxDQUFDZixTQUFOLENBQWdCLEdBQWhCLENBQVg7QUFDQTRCLE1BQUFBLElBQUksQ0FBQ3hDLElBQUwsR0FBWTJCLEtBQUssQ0FBQ2pCLFlBQU4sQ0FBbUIsR0FBbkIsQ0FBWjtBQUNBLFdBQUtXLEtBQUwsQ0FBV3VCLElBQVgsQ0FBZ0JKLElBQWhCO0FBQ0g7O0FBQ0QsV0FBTyxJQUFQO0FBQ0g7QUFqQndELENBQTlCLENBQS9CO0FBbUJBVyxNQUFNLENBQUNuRSxXQUFQLEdBQXFCb0UsTUFBTSxDQUFDQyxPQUFQLEdBQWlCckUsV0FBdEMiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImxldCBYb2NEaWFFdmVudCA9IHt9O1xyXG5Yb2NEaWFFdmVudC5SRVNQT05TRV9OQU1FID0ge1xyXG4gICAgTE9BRF9HQU1FX1JFUzogXCJ4ZDFcIixcclxuICAgIEJFVF9SRVM6IFwieGQyXCIsXHJcbiAgICBFTkRfQkVUVElORzogXCJ4ZDNcIixcclxuICAgIEhJU1RPUllfUkVTVUxUOiBcInhkNFwiXHJcbn07XHJcblhvY0RpYUV2ZW50LkxvYWRHYW1lRXZlbnQgPSBDYXNpbm9FdmVudC5fQmFzZUV2ZW50LmV4dGVuZCh7XHJcbiAgICBjdG9yKCl7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoWG9jRGlhRXZlbnQuUkVTUE9OU0VfTkFNRS5MT0FEX0dBTUVfUkVTKTtcclxuICAgIH0sXHJcbiAgICBmcm9tRXZlbnQoZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuaXNCZXR0aW5nID0gZXZlbnQuZ2V0Qm9vbChcImJcIik7XHJcbiAgICAgICAgdGhpcy50aW1lID0gZXZlbnQuZ2V0SW50KFwidFwiKTtcclxuICAgICAgICB0aGlzLmxpc3RDaGlwUG90ID0gZXZlbnQuZ2V0RG91YmxlQXJyYXkoXCJsY3BcIik7XHJcbiAgICAgICAgdGhpcy5saXN0TXlDaGlwUG90ID0gZXZlbnQuZ2V0RG91YmxlQXJyYXkoXCJsbWNwXCIpO1xyXG4gICAgICAgIGlmKCF0aGlzLmlzQmV0dGluZyl7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gZXZlbnQuZ2V0Qnl0ZUFycmF5KFwicnNcIik7XHJcbiAgICAgICAgICAgIHRoaXMud2lucG90ID0gZXZlbnQuZ2V0Qnl0ZUFycmF5KFwid3BcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59KVxyXG5Yb2NEaWFFdmVudC5CZXRFdmVudCA9IENhc2lub0V2ZW50Ll9CYXNlRXZlbnQuZXh0ZW5kKHtcclxuICAgIGN0b3IoKXtcclxuICAgICAgICB0aGlzLl9zdXBlcihYb2NEaWFFdmVudC5SRVNQT05TRV9OQU1FLkJFVF9SRVMpO1xyXG4gICAgfSxcclxuICAgIGZyb21FdmVudChldmVudCl7XHJcbiAgICAgICAgdGhpcy51c2VyTmFtZSA9IGV2ZW50LmdldFV0ZlN0cmluZyhcInVuXCIpO1xyXG4gICAgICAgIHRoaXMuYmV0Q2hpcCA9IGV2ZW50LmdldERvdWJsZShcImNcIik7XHJcbiAgICAgICAgdGhpcy50eXBlUG90ID0gZXZlbnQuZ2V0Qnl0ZShcInRcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn0pO1xyXG5Yb2NEaWFFdmVudC5FbmRCZXR0aW5nID0gQ2FzaW5vRXZlbnQuX0Jhc2VFdmVudC5leHRlbmQoe1xyXG4gICAgY3Rvcigpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKFhvY0RpYUV2ZW50LlJFU1BPTlNFX05BTUUuRU5EX0JFVFRJTkcpO1xyXG4gICAgfSxcclxuICAgIGZyb21FdmVudChldmVudCl7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBldmVudC5nZXRCeXRlQXJyYXkoXCJyc1wiKTtcclxuICAgICAgICB0aGlzLndpbkNoaXAgPSBldmVudC5nZXREb3VibGUoXCJ3Y1wiKTtcclxuICAgICAgICB0aGlzLndpbnBvdCA9IGV2ZW50LmdldEJ5dGVBcnJheShcIndwXCIpO1xyXG4gICAgICAgIHRoaXMucmVmdW5kID0gZXZlbnQuZ2V0RG91YmxlKFwicmZjXCIpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59KTtcclxuWG9jRGlhRXZlbnQuSGlzdG9yeVJlc3BvbnNlID0gQ2FzaW5vRXZlbnQuX0Jhc2VFdmVudC5leHRlbmQoe1xyXG4gICAgY3Rvcigpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKFhvY0RpYUV2ZW50LlJFU1BPTlNFX05BTUUuSElTVE9SWV9SRVNVTFQpO1xyXG4gICAgfSxcclxuICAgIGZyb21FdmVudChldmVudCl7XHJcbiAgICAgICAgdGhpcy5yZXN1bHQgPSBldmVudC5nZXRCeXRlQXJyYXkoXCJsclwiKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufSk7XHJcblhvY0RpYUV2ZW50Lkhpc3RvcnlFdmVudCA9IENhc2lub0V2ZW50Ll9CYXNlRXZlbnQuZXh0ZW5kKHtcclxuICAgIGN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoQ2FzaW5vRXZlbnQuUkVTUE9OU0VfTkFNRS5ISVNUT1JZX1JFUyk7XHJcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xyXG4gICAgICAgIHRoaXMuSVRFTV9OQU1FID0gW1wiTOG6u1wiLCBcIkNo4bq1blwiLCBcIjMgxJBlblwiLCBcIjMgVHLhuq9uZ1wiLCBcIjQgxJBlblwiLCBcIjQgVHLhuq9uZ1wiXTtcclxuICAgIH0sXHJcbiAgICBmcm9tRXZlbnQoZXZlbnQpe1xyXG4gICAgICAgIGxldCBkYXRhID0gZXZlbnQuZ2V0U0FycmF5KFwiZFwiKTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgZGF0YS5zaXplKCk7IGkrKyl7XHJcbiAgICAgICAgICAgIGxldCBzSXRlbSA9IGRhdGEuZ2V0KGkpLmdldE9iamVjdCgpO1xyXG4gICAgICAgICAgICBsZXQgc2Vzc2lvbiA9IFwiI1wiK3NJdGVtLmdldERvdWJsZShcImlkXCIpLnRvRml4ZWQoMCk7XHJcbiAgICAgICAgICAgIGxldCB0aW1lID0gc0l0ZW0uZ2V0VXRmU3RyaW5nKFwidFwiKTtcclxuICAgICAgICAgICAgbGV0IGhvYW5fdHJhID0gc0l0ZW0uZ2V0RG91YmxlKFwicmZcIik7XHJcbiAgICAgICAgICAgIGxldCBrZXRxdWEgPSB0aGlzLmdldEtlUXVhKHNJdGVtLmdldEludEFycmF5KFwicnNcIikpO1xyXG4gICAgICAgICAgICBsZXQgYmV0VmFsdWVzID0gc0l0ZW0uZ2V0RG91YmxlQXJyYXkoXCJiXCIpO1xyXG4gICAgICAgICAgICBsZXQgcHJpemVWYWx1ZXMgPSBzSXRlbS5nZXREb3VibGVBcnJheShcIndcIik7XHJcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7IGogPCBiZXRWYWx1ZXMubGVuZ3RoO2orKyl7XHJcbiAgICAgICAgICAgICAgICBpZihiZXRWYWx1ZXNbal0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgaXRlbSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uc2Vzc2lvbiA9IHNlc3Npb247XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS50aW1lID0gdGltZTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmtldHF1YSA9IGtldHF1YTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnN0YWtlcyA9IGJldFZhbHVlc1tqXTtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLndpbiA9IHByaXplVmFsdWVzW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0uY3VhZGF0ID0gdGhpcy5JVEVNX05BTUVbal1cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmhvYW5fdHJhID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBpZihiZXRWYWx1ZXNbMV0gLSBiZXRWYWx1ZXNbMF0gPiAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaG9hbiB0cmEgY3VhIGNoYW5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaiA9PSAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXRlbS5ob2FuX3RyYSA9IGhvYW5fdHJhO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihqID09IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpdGVtLmhvYW5fdHJhID0gaG9hbl90cmE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH0sXHJcbiAgICBnZXRLZVF1YShyZXN1bHQpe1xyXG4gICAgICAgIGxldCBrcSA9IFwiXCI7XHJcbiAgICAgICAgbGV0IGNvdW50V2hpdGUgPSAwOyAvLyBibGFjayA9IDBcclxuICAgICAgICBsZXQgY291bnRCbGFjayA9IDA7IC8vIHdoaXRlID0gMTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBpZihyZXN1bHRbaV0gPT0gMClcclxuICAgICAgICAgICAgICAgIGNvdW50QmxhY2srKztcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgY291bnRXaGl0ZSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb3VudFdoaXRlICUgMiA9PSAwKXtcclxuICAgICAgICAgICAga3EgPSBcIkNo4bq1biBcIlxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBrcSA9IFwiTOG6uyBcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY291bnRXaGl0ZSA9PSAzKXtcclxuICAgICAgICAgICAga3EgKz0gXCIzIFRy4bqvbmdcIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvdW50V2hpdGUgPT0gNCl7XHJcbiAgICAgICAgICAgIGtxICs9IFwiNCBUcuG6r25nXCJcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY291bnRXaGl0ZSA9PSAwKXtcclxuICAgICAgICAgICAga3EgKz0gXCI0IMSQZW5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY291bnRXaGl0ZSA9PSAxKXtcclxuICAgICAgICAgICAga3EgKz0gXCIzIMSQZW5cIjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtxO1xyXG4gICAgfVxyXG59KTtcclxuWG9jRGlhRXZlbnQuTGVhZGVyQm9hcmRFdmVudCA9IENhc2lub0V2ZW50Ll9CYXNlRXZlbnQuZXh0ZW5kKHtcclxuICAgIGN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoQ2FzaW5vRXZlbnQuUkVTUE9OU0VfTkFNRS5MRUFERVJfQk9BUkRfUkVTKTtcclxuICAgICAgICB0aGlzLml0ZW1zID0gW107XHJcbiAgICB9LFxyXG4gICAgZnJvbUV2ZW50KGV2ZW50KXtcclxuICAgICAgICBsZXQgZGF0YSA9IGV2ZW50LmdldFNBcnJheShcImRcIik7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpIDwgZGF0YS5zaXplKCk7aSsrKXtcclxuICAgICAgICAgICAgbGV0IHNJdGVtID0gZGF0YS5nZXQoaSkuZ2V0T2JqZWN0KCk7XHJcbiAgICAgICAgICAgIGxldCBpdGVtID0ge307XHJcbiAgICAgICAgICAgIGl0ZW0uc2Vzc2lvbiA9IGk7XHJcbiAgICAgICAgICAgIGl0ZW0uYWNjb3VudCA9IHNJdGVtLmdldFV0ZlN0cmluZyhcImRuXCIpO1xyXG4gICAgICAgICAgICBpdGVtLndpbiA9IHNJdGVtLmdldERvdWJsZShcIm1cIik7XHJcbiAgICAgICAgICAgIGl0ZW0udGltZSA9IHNJdGVtLmdldFV0ZlN0cmluZyhcInRcIik7XHJcbiAgICAgICAgICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbn0pO1xyXG53aW5kb3cuWG9jRGlhRXZlbnQgPSBtb2R1bGUuZXhwb3J0cyA9IFhvY0RpYUV2ZW50O1xyXG4iXX0=