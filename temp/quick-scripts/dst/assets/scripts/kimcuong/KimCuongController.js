
                (function() {
                    var nodeEnv = typeof require !== 'undefined' && typeof process !== 'undefined';
                    var __module = nodeEnv ? module : {exports:{}};
                    var __filename = 'preview-scripts/assets/scripts/kimcuong/KimCuongController.js';
                    var __require = nodeEnv ? function (request) {
                        return cc.require(request);
                    } : function (request) {
                        return __quick_compile_project__.require(request, __filename);
                    };
                    function __define (exports, require, module) {
                        if (!nodeEnv) {__quick_compile_project__.registerModule(__filename, module);}"use strict";
cc._RF.push(module, 'ed5f9lRH0tI7aSBBqX2nrlb', 'KimCuongController');
// scripts/kimcuong/KimCuongController.js

"use strict";

var KimCuongEvent = require('KimCuongEvent');

var KimCuongController = SmartFoxSDK.BaseController.extend({
  m_tableInfo: null,
  registerEvents: function registerEvents() {
    this._super();

    this.ZoneInstance.addEventListenerExtension(KimCuongEvent.RESPONSE_NAME.RESULT_RES, this.onUserResultEvent, this);
  },
  removeEvents: function removeEvents() {
    this._super();

    this.ZoneInstance.removeEventListenerExtension(KimCuongEvent.RESPONSE_NAME.RESULT_RES, this.onUserResultEvent, this);
  },
  onEventLogin: function onEventLogin(event) {
    this._super(event);

    this._requestJoinRoom(this.zoneName);
  },
  onEventRoomJoin: function onEventRoomJoin(event) {
    this._super(event);

    UIManger.show("UIKimCuongLobby", {
      pop: true,
      src: "kimcuong"
    });
  },
  onUserVariablesUpdate: function onUserVariablesUpdate(event) {
    this._super(event);

    if (this.getUI() != null) this.getUI().updateUserVariableSlot(event);
  },
  onHistoryEvent: function onHistoryEvent(event) {
    var data = event.getSArray("d");
    var items = [];

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var item = {};
      item.session = sItem.getDouble("id").toFixed(0);
      item.time = sItem.getUtfString("t");
      item.stakes = sItem.getDouble("b");
      item.win = sItem.getDouble("w");
      item.resultMap = sItem.getByteArray("rs");
      item.linewin = sItem.getByteArray("lw");
      items.push(item);
    }

    UIManger.show("UIKimCuongHistoryTransaction", {
      pop: true,
      src: 'kimcuong',
      data: {
        items: items
      }
    });
  },
  onLeaderBoardEvent: function onLeaderBoardEvent(event) {
    var data = event.getSArray("d");
    var items = [];

    for (var i = 0; i < data.size(); i++) {
      var sItem = data.get(i).getObject();
      var item = {};
      item.session = i + 1;
      item.account = sItem.getUtfString("dn");
      item.win = sItem.getDouble("m");
      item.time = sItem.getUtfString("t");
      item.win_type = "Tháº¯ng";
      items.push(item);
    }

    UIManger.show("UIKimCuongRank", {
      pop: true,
      src: 'kimcuong',
      data: {
        items: items
      }
    });
  },
  onEventUserExitRoom: function onEventUserExitRoom(event) {
    var user = event.user;

    if (user.isItMe) {
      if (this.getUI() != null) this.getUI().node.active = false;
      UIManger.show("UIHome");
    }
  },
  onUserResultEvent: function onUserResultEvent(event) {
    var userBet = new KimCuongEvent.ResultEvent().fromEvent(event);
    this.getUI().KimCuongRun(userBet);
  }
});
var instance = null;

var getInstance = function getInstance() {
  if (instance == null) instance = new KimCuongController("UIKimCuong", "kimcuong");
  return instance;
};

SmartFoxSDK.KimCuongController = module.exports = getInstance();

cc._RF.pop();
                    }
                    if (nodeEnv) {
                        __define(__module.exports, __require, __module);
                    }
                    else {
                        __quick_compile_project__.registerModuleFunc(__filename, function () {
                            __define(__module.exports, __require, __module);
                        });
                    }
                })();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzc2V0c1xcc2NyaXB0c1xca2ltY3VvbmdcXEtpbUN1b25nQ29udHJvbGxlci5qcyJdLCJuYW1lcyI6WyJLaW1DdW9uZ0V2ZW50IiwicmVxdWlyZSIsIktpbUN1b25nQ29udHJvbGxlciIsIlNtYXJ0Rm94U0RLIiwiQmFzZUNvbnRyb2xsZXIiLCJleHRlbmQiLCJtX3RhYmxlSW5mbyIsInJlZ2lzdGVyRXZlbnRzIiwiX3N1cGVyIiwiWm9uZUluc3RhbmNlIiwiYWRkRXZlbnRMaXN0ZW5lckV4dGVuc2lvbiIsIlJFU1BPTlNFX05BTUUiLCJSRVNVTFRfUkVTIiwib25Vc2VyUmVzdWx0RXZlbnQiLCJyZW1vdmVFdmVudHMiLCJyZW1vdmVFdmVudExpc3RlbmVyRXh0ZW5zaW9uIiwib25FdmVudExvZ2luIiwiZXZlbnQiLCJfcmVxdWVzdEpvaW5Sb29tIiwiem9uZU5hbWUiLCJvbkV2ZW50Um9vbUpvaW4iLCJVSU1hbmdlciIsInNob3ciLCJwb3AiLCJzcmMiLCJvblVzZXJWYXJpYWJsZXNVcGRhdGUiLCJnZXRVSSIsInVwZGF0ZVVzZXJWYXJpYWJsZVNsb3QiLCJvbkhpc3RvcnlFdmVudCIsImRhdGEiLCJnZXRTQXJyYXkiLCJpdGVtcyIsImkiLCJzaXplIiwic0l0ZW0iLCJnZXQiLCJnZXRPYmplY3QiLCJpdGVtIiwic2Vzc2lvbiIsImdldERvdWJsZSIsInRvRml4ZWQiLCJ0aW1lIiwiZ2V0VXRmU3RyaW5nIiwic3Rha2VzIiwid2luIiwicmVzdWx0TWFwIiwiZ2V0Qnl0ZUFycmF5IiwibGluZXdpbiIsInB1c2giLCJvbkxlYWRlckJvYXJkRXZlbnQiLCJhY2NvdW50Iiwid2luX3R5cGUiLCJvbkV2ZW50VXNlckV4aXRSb29tIiwidXNlciIsImlzSXRNZSIsIm5vZGUiLCJhY3RpdmUiLCJ1c2VyQmV0IiwiUmVzdWx0RXZlbnQiLCJmcm9tRXZlbnQiLCJLaW1DdW9uZ1J1biIsImluc3RhbmNlIiwiZ2V0SW5zdGFuY2UiLCJtb2R1bGUiLCJleHBvcnRzIl0s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QUFoQztBQUNILEdBckRzRDtBQXNEdkRxQixFQUFBQSxtQkF0RHVELCtCQXNEbkNuQyxLQXREbUMsRUFzRDdCO0FBQ3RCLFFBQUlvQyxJQUFJLEdBQUdwQyxLQUFLLENBQUNvQyxJQUFqQjs7QUFDQSxRQUFHQSxJQUFJLENBQUNDLE1BQVIsRUFBZTtBQUNYLFVBQUksS0FBSzVCLEtBQUwsTUFBZ0IsSUFBcEIsRUFDSSxLQUFLQSxLQUFMLEdBQWE2QixJQUFiLENBQWtCQyxNQUFsQixHQUEyQixLQUEzQjtBQUNKbkMsTUFBQUEsUUFBUSxDQUFDQyxJQUFULENBQWMsUUFBZDtBQUNIO0FBQ0osR0E3RHNEO0FBOER2RFQsRUFBQUEsaUJBOUR1RCw2QkE4RHJDSSxLQTlEcUMsRUE4RC9CO0FBQ3BCLFFBQUl3QyxPQUFPLEdBQUcsSUFBSXpELGFBQWEsQ0FBQzBELFdBQWxCLEdBQWdDQyxTQUFoQyxDQUEwQzFDLEtBQTFDLENBQWQ7QUFDQSxTQUFLUyxLQUFMLEdBQWFrQyxXQUFiLENBQXlCSCxPQUF6QjtBQUNIO0FBakVzRCxDQUFsQyxDQUF6QjtBQW9FQSxJQUFJSSxRQUFRLEdBQUcsSUFBZjs7QUFDQSxJQUFJQyxXQUFXLEdBQUcsU0FBZEEsV0FBYyxHQUFZO0FBQzFCLE1BQUdELFFBQVEsSUFBSSxJQUFmLEVBQ0lBLFFBQVEsR0FBRyxJQUFJM0Qsa0JBQUosQ0FBdUIsWUFBdkIsRUFBcUMsVUFBckMsQ0FBWDtBQUNKLFNBQU8yRCxRQUFQO0FBQ0gsQ0FKRDs7QUFLQTFELFdBQVcsQ0FBQ0Qsa0JBQVosR0FBaUM2RCxNQUFNLENBQUNDLE9BQVAsR0FBaUJGLFdBQVcsRUFBN0QiLCJzb3VyY2VSb290IjoiLyIsInNvdXJjZXNDb250ZW50IjpbImxldCBLaW1DdW9uZ0V2ZW50ID0gcmVxdWlyZSgnS2ltQ3VvbmdFdmVudCcpXHJcbmxldCBLaW1DdW9uZ0NvbnRyb2xsZXIgPSBTbWFydEZveFNESy5CYXNlQ29udHJvbGxlci5leHRlbmQoe1xyXG4gICAgbV90YWJsZUluZm86IG51bGwsXHJcbiAgICByZWdpc3RlckV2ZW50cygpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5ab25lSW5zdGFuY2UuYWRkRXZlbnRMaXN0ZW5lckV4dGVuc2lvbihLaW1DdW9uZ0V2ZW50LlJFU1BPTlNFX05BTUUuUkVTVUxUX1JFUywgdGhpcy5vblVzZXJSZXN1bHRFdmVudCwgdGhpcyk7XHJcbiAgICB9LFxyXG4gICAgcmVtb3ZlRXZlbnRzKCl7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoKTtcclxuICAgICAgICB0aGlzLlpvbmVJbnN0YW5jZS5yZW1vdmVFdmVudExpc3RlbmVyRXh0ZW5zaW9uKEtpbUN1b25nRXZlbnQuUkVTUE9OU0VfTkFNRS5SRVNVTFRfUkVTLCB0aGlzLm9uVXNlclJlc3VsdEV2ZW50LCB0aGlzKTtcclxuICAgIH0sXHJcbiAgICBvbkV2ZW50TG9naW4oZXZlbnQpe1xyXG4gICAgICAgIHRoaXMuX3N1cGVyKGV2ZW50KTtcclxuICAgICAgICB0aGlzLl9yZXF1ZXN0Sm9pblJvb20odGhpcy56b25lTmFtZSk7XHJcbiAgICB9LFxyXG4gICAgb25FdmVudFJvb21Kb2luKGV2ZW50KXtcclxuICAgICAgICB0aGlzLl9zdXBlcihldmVudCk7XHJcbiAgICAgICAgVUlNYW5nZXIuc2hvdyhcIlVJS2ltQ3VvbmdMb2JieVwiLCB7cG9wOiB0cnVlLCBzcmM6IFwia2ltY3VvbmdcIn0pO1xyXG4gICAgfSxcclxuICAgIG9uVXNlclZhcmlhYmxlc1VwZGF0ZShldmVudCl7XHJcbiAgICAgICAgdGhpcy5fc3VwZXIoZXZlbnQpO1xyXG4gICAgICAgIGlmICh0aGlzLmdldFVJKCkgIT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5nZXRVSSgpLnVwZGF0ZVVzZXJWYXJpYWJsZVNsb3QoZXZlbnQpO1xyXG4gICAgfSxcclxuICAgIG9uSGlzdG9yeUV2ZW50KGV2ZW50KXtcclxuICAgICAgICBsZXQgZGF0YSA9IGV2ZW50LmdldFNBcnJheShcImRcIik7XHJcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDsgaSA8IGRhdGEuc2l6ZSgpOyBpKyspe1xyXG4gICAgICAgICAgICBsZXQgc0l0ZW0gPSBkYXRhLmdldChpKS5nZXRPYmplY3QoKTtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSB7fTtcclxuICAgICAgICAgICAgaXRlbS5zZXNzaW9uID0gc0l0ZW0uZ2V0RG91YmxlKFwiaWRcIikudG9GaXhlZCgwKTtcclxuICAgICAgICAgICAgaXRlbS50aW1lID0gc0l0ZW0uZ2V0VXRmU3RyaW5nKFwidFwiKTtcclxuICAgICAgICAgICAgaXRlbS5zdGFrZXMgPSBzSXRlbS5nZXREb3VibGUoXCJiXCIpO1xyXG4gICAgICAgICAgICBpdGVtLndpbiA9IHNJdGVtLmdldERvdWJsZShcIndcIik7XHJcbiAgICAgICAgICAgIGl0ZW0ucmVzdWx0TWFwID0gc0l0ZW0uZ2V0Qnl0ZUFycmF5KFwicnNcIik7XHJcbiAgICAgICAgICAgIGl0ZW0ubGluZXdpbiA9IHNJdGVtLmdldEJ5dGVBcnJheShcImx3XCIpO1xyXG4gICAgICAgICAgICBpdGVtcy5wdXNoKGl0ZW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBVSU1hbmdlci5zaG93KFwiVUlLaW1DdW9uZ0hpc3RvcnlUcmFuc2FjdGlvblwiLCB7cG9wOiB0cnVlLCBzcmM6ICdraW1jdW9uZycsIGRhdGE6IHtpdGVtczogaXRlbXN9fSk7XHJcbiAgICB9LFxyXG4gICAgb25MZWFkZXJCb2FyZEV2ZW50KGV2ZW50KXtcclxuICAgICAgICBsZXQgZGF0YSA9IGV2ZW50LmdldFNBcnJheShcImRcIik7XHJcbiAgICAgICAgbGV0IGl0ZW1zID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpIDwgZGF0YS5zaXplKCk7aSsrKXtcclxuICAgICAgICAgICAgbGV0IHNJdGVtID0gZGF0YS5nZXQoaSkuZ2V0T2JqZWN0KCk7XHJcbiAgICAgICAgICAgIGxldCBpdGVtID0ge307XHJcbiAgICAgICAgICAgIGl0ZW0uc2Vzc2lvbiA9IGkgKyAxO1xyXG4gICAgICAgICAgICBpdGVtLmFjY291bnQgPSBzSXRlbS5nZXRVdGZTdHJpbmcoXCJkblwiKTtcclxuICAgICAgICAgICAgaXRlbS53aW4gPSBzSXRlbS5nZXREb3VibGUoXCJtXCIpO1xyXG4gICAgICAgICAgICBpdGVtLnRpbWUgPSBzSXRlbS5nZXRVdGZTdHJpbmcoXCJ0XCIpO1xyXG4gICAgICAgICAgICBpdGVtLndpbl90eXBlID0gXCJUaOG6r25nXCI7XHJcbiAgICAgICAgICAgIGl0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVJTWFuZ2VyLnNob3coXCJVSUtpbUN1b25nUmFua1wiLCB7cG9wOiB0cnVlLCBzcmM6ICdraW1jdW9uZycsIGRhdGE6IHtpdGVtczogaXRlbXN9fSk7XHJcbiAgICB9LFxyXG4gICAgb25FdmVudFVzZXJFeGl0Um9vbShldmVudCl7XHJcbiAgICAgICAgbGV0IHVzZXIgPSBldmVudC51c2VyO1xyXG4gICAgICAgIGlmKHVzZXIuaXNJdE1lKXtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZ2V0VUkoKSAhPSBudWxsKVxyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRVSSgpLm5vZGUuYWN0aXZlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFVJTWFuZ2VyLnNob3coXCJVSUhvbWVcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSxcclxuICAgIG9uVXNlclJlc3VsdEV2ZW50KGV2ZW50KXtcclxuICAgICAgICBsZXQgdXNlckJldCA9IG5ldyBLaW1DdW9uZ0V2ZW50LlJlc3VsdEV2ZW50KCkuZnJvbUV2ZW50KGV2ZW50KTtcclxuICAgICAgICB0aGlzLmdldFVJKCkuS2ltQ3VvbmdSdW4odXNlckJldCk7XHJcbiAgICB9LFxyXG5cclxufSk7XHJcbmxldCBpbnN0YW5jZSA9IG51bGw7XHJcbmxldCBnZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGlmKGluc3RhbmNlID09IG51bGwpXHJcbiAgICAgICAgaW5zdGFuY2UgPSBuZXcgS2ltQ3VvbmdDb250cm9sbGVyKFwiVUlLaW1DdW9uZ1wiLCBcImtpbWN1b25nXCIpO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XHJcblNtYXJ0Rm94U0RLLktpbUN1b25nQ29udHJvbGxlciA9IG1vZHVsZS5leHBvcnRzID0gZ2V0SW5zdGFuY2UoKTtcclxuIl19