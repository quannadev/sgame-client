{"version":3,"sources":["assets\\scripts\\bacay\\UIBaCay.js"],"names":["require","BaCayCard","cc","Class","BaseGame","properties","ChatEmojiLayer","Node","POS_6","Action","nodeCards","PotPrefab","Prefab","preCard","coin","lbGaMoney","Label","iconGa","lbTimeBet","lbTimeStart","_TIME_DELAY_CARD","onLoad","self","listCoin","Array","fill","PoolPot","PoolCoin","Promise","all","map","index","pot","instantiate","node","addChild","active","push","coinNode","_initCard","game","on","EVENT_SHOW","SmartFoxSDK","BaCayController","resumeGame","bind","console","log","getRoom","updateUserVariable","subChip","jsPlayer","_getJSPlayerByName","ZoneInstance","mySelf","name","setMoney","GameVariables","Poker","getChip","onPreStartEvent","string","onStartEvent","onFinishGame","onEnable","_room","_data","room","_number_desk","_CURRENT_POS","poses","i","_children","length","pos","requestSitOn","resetUI","WaitingTimer","children","cardNode","stopAllActions","getAction","hideAllActions","onDisable","nodePlayers","removeAllChildren","hideDeskEmpty","getComponent","eventBack","mm","audio","playButton","controller","m_tableInfo","m_isGameStart","m_listActiveUserName","requestLeaveRoom","isSitOut","m_listUserSitOut","indexOf","sitOutRequest","BaCayRequest","SitOutRequest","setRoomId","id","setSitOut","send","toSRequest","myName","sitOnRequest","SitOnRequest","setAutoSitOn","updateOwner","username","lastOwner","setIconOwner","player","totalCards","listCards","card","parent","_runCard","cb","slice","scheduleOnce","x","y","scale","js","init","cardIndex","then","result","_dealCards","listUsername","myCards","myPoint","playChiaBai2","totalPlayer","nodeCard","isItMe","setMyPoint","nodeCardTo","getPosCardHand","Math","floor","posMove","convertPosCardOnHand","move","moveTo","scaleTo","spwan","spawn","nodeRunAction","runAction","sequence","delayTime","callFunc","showCardOnHand","updatePosHand","nodeTo","getPositionInOtherNode","showBetGa","betGa","error","posEnd","position","moveCoin","easing","easeIn","removeFromParent","bet","Utils","addDotToNumber","showGa","eventShowChat","event","data","initController","onPublicMessage","messData","playerJs","sender","msg"],"mappings":"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","sourceRoot":"/","sourcesContent":["require('BaseGame')\r\nlet BaCayCard = require('BaCayCard')\r\ncc.Class({\r\n    extends: cc.BaseGame,\r\n\r\n    properties: {\r\n        ChatEmojiLayer: cc.Node,\r\n        POS_6: cc.Node,\r\n        Action: cc.Node,\r\n        nodeCards: cc.Node,\r\n        PotPrefab: cc.Prefab,\r\n        preCard: cc.Prefab,\r\n        coin: cc.Prefab,\r\n        lbGaMoney: cc.Label,\r\n        iconGa   : cc.Node,\r\n        lbTimeBet   : cc.Node,\r\n        lbTimeStart   : cc.Node,\r\n        _TIME_DELAY_CARD: 0.01,\r\n    },\r\n    onLoad(){\r\n        // init prefab pot\r\n        let self = this;\r\n        let listCoin = new Array(9).fill(0);\r\n        this.PoolPot  = [];\r\n        this.PoolCoin = [];\r\n        Promise.all(listCoin.map(function(coin, index){\r\n            let pot = cc.instantiate(self.PotPrefab);\r\n            self.node.addChild(pot);\r\n            pot.active = false;\r\n            self.PoolPot.push(pot);\r\n\r\n            let coinNode    = cc.instantiate(self.coin);\r\n            coinNode.active = false;\r\n            self.PoolCoin.push(coinNode);\r\n\r\n        }));\r\n        this._initCard(36);\r\n        cc.game.on(cc.game.EVENT_SHOW, function () {\r\n            if (this.node != null)\r\n                SmartFoxSDK.BaCayController.resumeGame();\r\n        }.bind(this));\r\n        console.log(SmartFoxSDK.BaCayController.getRoom());\r\n    },\r\n    updateUserVariable(subChip){\r\n        let jsPlayer    = this._getJSPlayerByName(SmartFoxSDK.BaCayController.ZoneInstance.mySelf.name);\r\n        jsPlayer.setMoney(GameVariables.Poker.getChip(SmartFoxSDK.BaCayController.ZoneInstance.mySelf)-subChip)\r\n    },\r\n    onPreStartEvent() {\r\n        this.lbTimeBet.active   = false;\r\n        this.lbTimeStart.active = true;\r\n        this.lbGaMoney.string   = \"0\";\r\n    },\r\n    onStartEvent() {\r\n        this.lbTimeBet.active   = true;\r\n        this.lbTimeStart.active = false;\r\n    },\r\n    onFinishGame() {\r\n        this.lbTimeBet.active   = false;\r\n        this.lbTimeStart.active = false;\r\n    },\r\n    onEnable(){\r\n        this._room = this._data.room;\r\n        this._number_desk = 6;\r\n        this._CURRENT_POS = this.POS_6;\r\n        this.poses = [];\r\n        for(let i = 0; i < this._CURRENT_POS._children.length;i++){\r\n            let pos = this._CURRENT_POS._children[i];\r\n            this.poses.push(this._CURRENT_POS._children[i]);\r\n            pos.on(\"touchend\", function () {\r\n                this.requestSitOn();\r\n            }, this);\r\n            pos.active = false;\r\n        }\r\n        this.resetUI();\r\n    },\r\n    resetUI() {\r\n        this.lbTimeBet.active   = false;\r\n        this.lbTimeStart.active = false;\r\n        this.WaitingTimer.active = false;\r\n        Promise.all(this.nodeCards.children.map(function(cardNode, index){\r\n            cardNode.stopAllActions();\r\n            cardNode.active = false;\r\n        }));\r\n        this.lbGaMoney.string   = \"0\";\r\n        this.getAction().hideAllActions();\r\n    },\r\n    onDisable(){\r\n        this.nodePlayers.removeAllChildren(true);\r\n        this.hideDeskEmpty();\r\n        this.WaitingTimer.active = false;\r\n    },\r\n    getAction(){\r\n        return this.Action.getComponent(this.Action.name);\r\n    },\r\n    eventBack(){\r\n        mm.audio.playButton();\r\n        if(!this.controller.m_tableInfo.m_isGameStart || this.controller.m_tableInfo.m_listActiveUserName.length <= 1){\r\n            this.requestLeaveRoom();\r\n        }else{\r\n            let isSitOut = true;\r\n            if(this.controller.m_tableInfo.m_listUserSitOut.indexOf(SmartFoxSDK.BaCayController.ZoneInstance.mySelf.name) >= 0){\r\n                isSitOut = false;\r\n            }\r\n            let sitOutRequest = new BaCayRequest.SitOutRequest();\r\n            sitOutRequest.setRoomId(this._room.id);\r\n            sitOutRequest.setSitOut(isSitOut);\r\n            SmartFoxSDK.BaCayController.ZoneInstance.send(sitOutRequest.toSRequest());\r\n        }\r\n    },\r\n    requestSitOn(){\r\n        let myName = SmartFoxSDK.BaCayController.ZoneInstance.mySelf.name;\r\n        if(this._getJSPlayerByName(myName) == null){\r\n            let sitOnRequest = new BaCayRequest.SitOnRequest().setRoomId(this._room.id).setAutoSitOn();\r\n            SmartFoxSDK.BaCayController.ZoneInstance.send(sitOnRequest.toSRequest());\r\n            this.hideDeskEmpty();\r\n        }\r\n    },\r\n    updateOwner(username){\r\n        let lastOwner = this._getJSPlayerByName(this.controller.m_tableInfo.lastOwner);\r\n        if(lastOwner)\r\n            lastOwner.setIconOwner(false);\r\n        let player = this._getJSPlayerByName(username);\r\n        player.setIconOwner(true);\r\n    },\r\n    _initCard(totalCards) {\r\n        let self = this;\r\n        let listCards = [];\r\n        listCards = new Array(totalCards).fill(0);\r\n        Promise.all(listCards.map(function(cardNode, index){\r\n            let card = cc.instantiate(self.preCard);\r\n            card.parent = self.nodeCards;\r\n            card.active = false;\r\n        }));\r\n    },\r\n    _runCard(totalCards, cb) {\r\n        let self = this;\r\n        let listCards = self.nodeCards.children;\r\n        listCards = listCards.slice(0, totalCards);\r\n        Promise.all(listCards.map(function(cardNode, index){\r\n            self.scheduleOnce(function () {\r\n                let card = cardNode;\r\n                card.active = true;\r\n                card.x = index*0.3;\r\n                card.y = index*0.4;\r\n                card.scale = 0.8;\r\n                let js = card.getComponent(card.name);\r\n                js.init(null);\r\n                js.cardIndex = index;\r\n                card.parent = self.nodeCards;\r\n            }, self._TIME_DELAY_CARD*index)\r\n        })).then(result=>{\r\n            self.scheduleOnce(function () {\r\n                if (cb)\r\n                    cb();\r\n            }, self._TIME_DELAY_CARD*totalCards)\r\n        }, this);\r\n    },\r\n    _dealCards(listUsername, myCards, myPoint){\r\n        mm.audio.playChiaBai2();\r\n        let self        = this;\r\n        let totalPlayer =  listUsername.length;\r\n        let totalCards  =  3*totalPlayer;\r\n        this._runCard(totalCards, function () {\r\n            let listCards = self.nodeCards.children;\r\n            listCards = listCards.slice(0, totalCards);\r\n            Promise.all(listCards.map(function(nodeCard, index){\r\n                let username    = listUsername[index%totalPlayer];\r\n                let jsPlayer    = self._getJSPlayerByName(username);\r\n                if(jsPlayer){\r\n                    if (jsPlayer.isItMe())\r\n                        jsPlayer.setMyPoint(myPoint);\r\n                    let nodeCardTo  = jsPlayer.getPosCardHand(Math.floor(index/totalPlayer));\r\n                    let posMove     = self.convertPosCardOnHand(nodeCardTo, self.nodeCards);\r\n                    let move        = cc.moveTo(0.5, posMove);\r\n                    let scaleTo     = cc.scaleTo(0.5, 0.8);\r\n                    let spwan       = cc.spawn(move, scaleTo);\r\n                    let nodeRunAction = listCards[totalCards-index-1];\r\n                    nodeRunAction.stopAllActions();\r\n                    nodeRunAction.runAction(cc.sequence(cc.delayTime(index*0.05), spwan, cc.callFunc(function () {\r\n                        nodeRunAction.active = false;\r\n                    }, nodeRunAction)));\r\n                }\r\n            })).then(result=>{\r\n                self.scheduleOnce(function () {\r\n                    self.showCardOnHand(listUsername, myCards);\r\n                }, totalCards*0.08)\r\n            }, this);\r\n        });\r\n    },\r\n    showCardOnHand(listUsername, myCards) {\r\n        let self = this;\r\n        Promise.all(listUsername.map(function(username, index){\r\n            let jsPlayer    = self._getJSPlayerByName(username);\r\n            if(jsPlayer){\r\n                jsPlayer.showCardOnHand(jsPlayer.isItMe(), myCards);\r\n                jsPlayer.updatePosHand();\r\n            }\r\n        }));\r\n    },\r\n    convertPosCardOnHand(cardNode, nodeTo) {\r\n        return this.getPositionInOtherNode(cardNode, nodeTo);\r\n    },\r\n    showBetGa(betGa) {\r\n        if (betGa.error == null){\r\n            let self = this;\r\n            let posEnd  = this.getPositionInOtherNode(this.POS_6.children[0], this.iconGa);\r\n            for (let i=0; i< 5; i++){\r\n                let coin      = this.PoolCoin[i];\r\n                coin.active   = true;\r\n                coin.parent   = this.iconGa.parent;\r\n                coin.position = posEnd;\r\n                let moveCoin = cc.moveTo(0.5, this.iconGa.position).easing(cc.easeIn(1));\r\n                coin.stopAllActions();\r\n                coin.runAction(cc.sequence(moveCoin, cc.delayTime(i*0.5), cc.callFunc(function () {\r\n                    coin.removeFromParent(true);\r\n                    coin.active = false;\r\n                    if (betGa.bet != null)\r\n                        self.lbGaMoney.string = Utils.addDotToNumber(betGa.bet);\r\n                    let player = self._getJSPlayerByName(betGa.username);\r\n                    if(player){\r\n                        player.showGa();\r\n                    }\r\n                })));\r\n            }\r\n        }else{\r\n            console.log(betGa.error);\r\n        }\r\n\r\n    },\r\n    eventShowChat(event, data) {\r\n        mm.audio.playButton();\r\n        this.ChatEmojiLayer.active = !this.ChatEmojiLayer.active;\r\n        if (this.ChatEmojiLayer.active)\r\n            this.ChatEmojiLayer.getComponent(\"ChatEmojiLayer\").initController(SmartFoxSDK.BaCayController.ZoneInstance);\r\n    },\r\n    onPublicMessage(messData) {\r\n        let playerJs = this._getJSPlayerByName(messData.sender.name);\r\n        if(playerJs != null){\r\n            playerJs.onPublicMessage(messData.msg)\r\n        }\r\n    },\r\n});\r\n"]}