{"version":3,"sources":["assets\\scripts\\bacay\\BaCayPlayer.js"],"names":["BaCayCard","require","cc","Class","Player","properties","cards","type","Node","Ga","Owner","Result","Hands","BetChip","PosCardUp","cardPrefab","Prefab","_actionController","m_total_bet","_myPoint","_totalCard","_totalTimeFinish","fontWin","Font","fontLose","onEnable","_super","zoneName","self","listCards","Array","fill","listCard","Promise","all","map","card","index","myCard","instantiate","active","on","EventType","TOUCH_END","_onTouchSelectCard","push","hideAllAction","isItMe","_desk","UserName","SmartFoxSDK","BaCayController","ZoneInstance","mySelf","name","MoneyWin","node","setIconOwner","hideWinEffect","hideAllCardOnHand","showGa","onDisable","reset","setActionController","actionController","showAllCardOnHand","cardIds","getComponent","reveal","Card","showCardOnHand","itMe","myCards","handParent","position","v2","init","setCard","parent","addCard","id","js","addCardHand","i","length","scaleHoldEm","scale","getPosCardHand","onPreStartEvent","preEvent","isFinishing","onStartEvent","startEvent","owner","m_owner","getDesk","posCard","updatePosHand","newPos","undefined","x","Math","abs","isOn","onGameFinishEvent","chipWin","point","delayTime","timeAll","isWinGa","scheduleOnce","getChildByName","Label","string","showWinEffect","showMoneyWin","user","room","getUserByName","money","GameVariables","getChip","setMoney","bind","cb","fontTxt","font","turnOffTimer","isValid","hideAllActions","setMyPoint","event","mm","audio","playDanhBai","target","switchCard","showBetChip","bet","Utils","formatCurrency"],"mappings":"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","sourceRoot":"/","sourcesContent":["let BaCayCard = require('BaCayCard');\r\ncc.Class({\r\n    extends: cc.Player,\r\n    properties: {\r\n        cards :{\r\n            type: cc.Node,\r\n            default: []\r\n        },\r\n        Ga: cc.Node,\r\n        Owner: cc.Node,\r\n        Result: cc.Node,\r\n        Hands: cc.Node,\r\n        BetChip : cc.Node,\r\n        PosCardUp : cc.Node,\r\n        cardPrefab : cc.Prefab,\r\n        _actionController: null,\r\n        m_total_bet: 0,\r\n        _myPoint : 0,\r\n        _totalCard : 0,\r\n        _totalTimeFinish : 0,\r\n        fontWin: cc.Font,\r\n        fontLose: cc.Font,\r\n    },\r\n    onEnable(){\r\n        this._super();\r\n        this.zoneName = \"bacay\";\r\n        let self = this;\r\n        let listCards = new Array(3).fill(0);\r\n        self.listCard = [];\r\n        Promise.all(listCards.map(function(card, index){\r\n            let myCard = cc.instantiate(self.cardPrefab);\r\n            myCard.active = false;\r\n            myCard.on(cc.Node.EventType.TOUCH_END, self._onTouchSelectCard, self, true);\r\n            self.listCard.push(myCard);\r\n        }));\r\n        self.hideAllAction();\r\n    },\r\n    isItMe(){\r\n        if(this._desk.UserName == SmartFoxSDK.BaCayController.ZoneInstance.mySelf.name){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    hideAllAction(){\r\n        this.BetChip.active     = false;\r\n        this.Ga.active          = false;\r\n        this.Result.active      = false;\r\n        this.PosCardUp.active   = false;\r\n        this.MoneyWin.node.active = false;\r\n        this.setIconOwner(false);\r\n        this.hideWinEffect();\r\n        this.hideAllCardOnHand();\r\n    },\r\n    showGa() {\r\n        this.Ga.active          = true;\r\n    },\r\n    onDisable(){\r\n        this.reset();\r\n    },\r\n    reset(){\r\n        this._super();\r\n        this.hideAllAction();\r\n    },\r\n    setActionController(actionController){\r\n        this._actionController = actionController;\r\n    },\r\n    hideAllCardOnHand() {\r\n        Promise.all(this.listCard.map(function(card, index){\r\n            card.active = false;\r\n        }));\r\n    },\r\n    showAllCardOnHand(cardIds) {\r\n        Promise.all(this.listCard.map(function(card, index){\r\n            card.active = true;\r\n            card.getComponent(\"Card\").reveal(new BaCayCard.Card(cardIds[index]));\r\n        }));\r\n    },\r\n    showCardOnHand(itMe, myCards){\r\n        this.PosCardUp.active   = false;\r\n        let handParent = this.Hands;\r\n        Promise.all(this.listCard.map(function(card, index){\r\n            card.active = true;\r\n            card.position = cc.v2(0, 0);\r\n            card.getComponent(\"Card\").init(null);\r\n            if (itMe){\r\n                card.getComponent(\"Card\").setCard(new BaCayCard.Card(myCards[index]));\r\n            }else\r\n                card.getComponent(\"Card\").setCard(null);\r\n            card.parent = handParent;\r\n        }));\r\n    },\r\n    addCard(id, index){\r\n        this.Hands.active = true;\r\n        let card = this.cards[index];\r\n        card.active = true;\r\n        let js = this.cards[index].getComponent(\"Card\");\r\n        if(id < 0){\r\n            js.init(null);\r\n        }else{\r\n            js.reveal(new BaCayCard.Card(id));\r\n        }\r\n\r\n    },\r\n    addCardHand(cardIds){\r\n        this.Hands.active = true;\r\n        for(let i = 0; i < this.cards.length;i++){\r\n            let card = this.cards[i].getComponent(\"Card\");\r\n            if(cardIds[i] < 0){\r\n                card.init(null);\r\n            }else{\r\n                card.reveal(new BaCayCard.Card(cardIds[i]));\r\n            }\r\n        }\r\n        this.scaleHoldEm();\r\n    },\r\n    scaleHoldEm(){\r\n        if(!this.isItMe()){\r\n            this.Hands.scale = 0.75;\r\n        }else{\r\n            this.Hands.scale = 1;\r\n        }\r\n    },\r\n    getPosCardHand(){\r\n        if (!this.PosCardUp.active)\r\n            this.PosCardUp.active   = true;\r\n        return this.PosCardUp;\r\n    },\r\n    onPreStartEvent(preEvent){\r\n        this.isFinishing  = false;\r\n        this.hideAllAction();\r\n    },\r\n    onStartEvent(startEvent){\r\n        this.Ga.active          = false;\r\n        this.Result.active      = false;\r\n        this.PosCardUp.active   = false;\r\n        this.MoneyWin.node.active = false;\r\n        this.hideWinEffect();\r\n        this.hideAllCardOnHand();\r\n        let owner = startEvent.m_owner;\r\n        if(owner == this.getDesk().UserName){\r\n            this.setIconOwner(true)\r\n        }\r\n        this.posCard    = 0;\r\n        this._totalCard = 3;\r\n    },\r\n    updatePosHand(){\r\n        if(this.newPos != undefined){\r\n            if(this.newPos == 3 || this.newPos == 4 || this.newPos == 5){\r\n                this.Hands.x    = -Math.abs(this.Hands.x);\r\n                this.BetChip.x  = -Math.abs(this.BetChip.x);\r\n                this.Result.x   = -Math.abs(this.Result.x);\r\n            }\r\n        }\r\n    },\r\n    setIconOwner(isOn){\r\n        this.Owner.active = isOn;\r\n    },\r\n    onGameFinishEvent(cards, chipWin, point, delayTime, timeAll, isWinGa){\r\n        this.isFinishing      = true;\r\n        this.scheduleOnce(function () {\r\n            if (this.isFinishing){\r\n                this.showAllCardOnHand(cards);\r\n                this.Result.active = true;\r\n                this.Result.getChildByName(\"Point\").getComponent(cc.Label).string = point+\" điểm\";\r\n            }\r\n        }, delayTime)\r\n        this.scheduleOnce(function () {\r\n            if (this.isFinishing){\r\n                if(chipWin > 0){\r\n                    this.showWinEffect();\r\n                }\r\n                this.BetChip.active     = false;\r\n                this.showMoneyWin(chipWin,  function () {\r\n                    // update money\r\n                    let user = SmartFoxSDK.BaCayController.room.getUserByName(this.getDesk().UserName);\r\n                    let money = GameVariables.getChip(user);\r\n                    this.setMoney(money);\r\n                    this.hideAllAction();\r\n                }.bind(this));\r\n            }\r\n        }, timeAll)\r\n    },\r\n    showMoneyWin(money, cb) {\r\n        let fontTxt = money > 0? this.fontWin: this.fontLose;\r\n        this.MoneyWin.font   = fontTxt;\r\n        this._super(money, cb);\r\n    },\r\n    turnOffTimer(){\r\n        this._super();\r\n        if(cc.isValid(this._actionController)){\r\n            this._actionController.hideAllActions();\r\n        }\r\n    },\r\n    setMyPoint(point) {\r\n        this._myPoint = point;\r\n    },\r\n    _onTouchSelectCard(event) {\r\n        if (this.isItMe()){\r\n            this._totalCard--;\r\n            mm.audio.playDanhBai();\r\n            event.target.getComponent(\"Card\").switchCard();\r\n            if (this._totalCard < 1){\r\n                this.Result.active = true;\r\n                this.Result.getChildByName(\"Point\").getComponent(cc.Label).string = this._myPoint + \" điểm\";\r\n            }\r\n        }\r\n    },\r\n    showBetChip(bet) {\r\n        this.updatePosHand();\r\n        this.BetChip.active     = true;\r\n        this.BetChip.getChildByName(\"money\").getComponent(cc.Label).string = Utils.formatCurrency(bet.bet);\r\n    }\r\n});\r\n"]}