{"version":3,"sources":["assets\\scripts\\bacay\\ActionBaCay.js"],"names":["cc","Class","VozBaseComponent","properties","NodeRaise","Node","Raise","Ga","MakeOwner","SellOwner","SliderRaise","Slider","lb_Current","Label","_distance","_current","_max","lb_bettingChip","onEnable","hideAllActions","betChip","GameVariables","Poker","getBetChip","SmartFoxSDK","BaCayController","room","initSlider","distance","current","max","updateSlider","currentProcess","progress","string","Utils","formatCurrency","eventPlus","mm","audio","playButton","eventSub","eventAllIn","eventRegisterOwner","event","request","BaCayRequest","RegisterOwnerRequest","setRoomId","id","ZoneInstance","send","toSRequest","eventSellOwner","SellOwnerRequest","eventBet","sendBet","bet","BetRequest","setBet","eventBetGa","BetGaRequest","showRegisterOwner","active","onSliderRaise","slider","process","Math","floor","toFixed","addDotToNumber","showActionStart","isOwner","eventUserRegisterOwner","userOwner","err","Toast","showToast","setLabelBettingChip","chip","ActionBet","ActionSliderRaise","isActive","ActionRaise","ActionAllIn"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        NodeRaise: cc.Node,\r\n        Raise: cc.Node,\r\n        Ga: cc.Node,\r\n        MakeOwner: cc.Node,\r\n        SellOwner: cc.Node,\r\n        SliderRaise: cc.Slider,\r\n        lb_Current       : cc.Label,\r\n        _distance: 100,\r\n        _current: 0,\r\n        _max: 0,\r\n        lb_bettingChip: cc.Label\r\n    },\r\n    onEnable(){\r\n        this.hideAllActions();\r\n        let betChip = GameVariables.Poker.getBetChip(SmartFoxSDK.BaCayController.room);\r\n        this.initSlider(betChip, betChip, 5*betChip);\r\n    },\r\n    initSlider(distance, current, max){\r\n        this._max = max;\r\n        this._distance = distance;\r\n        this._current = current;\r\n        this.updateSlider();\r\n    },\r\n    updateSlider(){\r\n        let currentProcess = this._current / this._max;\r\n        this.SliderRaise.progress = currentProcess;\r\n        this.lb_Current.string = Utils.formatCurrency(this._current);\r\n    },\r\n    eventPlus(){\r\n        mm.audio.playButton();\r\n        this._current += this._distance;\r\n        if(this._current > this._max){\r\n            this._current = this._max;\r\n        }\r\n        this.updateSlider();\r\n    },\r\n    eventSub(){\r\n        mm.audio.playButton();\r\n        this._current -= this._distance;\r\n        if(this._current < 0){\r\n            this._current = 0;\r\n        }\r\n        this.updateSlider();\r\n    },\r\n    eventAllIn(){\r\n        mm.audio.playButton();\r\n        this._current = this._max;\r\n        this.updateSlider();\r\n    },\r\n    eventRegisterOwner(event){\r\n        let request = new BaCayRequest.RegisterOwnerRequest().setRoomId(SmartFoxSDK.BaCayController.room.id);\r\n        SmartFoxSDK.BaCayController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    eventSellOwner(event){\r\n        let request = new BaCayRequest.SellOwnerRequest().setRoomId(SmartFoxSDK.BaCayController.room.id);\r\n        SmartFoxSDK.BaCayController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    eventBet(event){\r\n        mm.audio.playButton();\r\n        this.sendBet(GameVariables.Poker.getBetChip(SmartFoxSDK.BaCayController.room));\r\n    },\r\n    sendBet(bet) {\r\n        let request = new BaCayRequest.BetRequest().setRoomId(SmartFoxSDK.BaCayController.room.id).setBet(bet);\r\n        SmartFoxSDK.BaCayController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n\r\n    eventBetGa(event){\r\n        let request = new BaCayRequest.BetGaRequest().setRoomId(SmartFoxSDK.BaCayController.room.id);\r\n        SmartFoxSDK.BaCayController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    showRegisterOwner(){\r\n        this.MakeOwner.active = true;\r\n    },\r\n    onSliderRaise(slider){\r\n        let process = slider.progress;\r\n        this._current = Math.floor(process.toFixed(1) * this._max);\r\n        this.lb_Current.string = Utils.addDotToNumber(this._current);\r\n    },\r\n    hideAllActions(){\r\n        this.NodeRaise.active = false;\r\n        this.Raise.active = false;\r\n        this.Ga.active = false;\r\n        this.MakeOwner.active = false;\r\n        this.SellOwner.active = false;\r\n    },\r\n    showActionStart(isOwner){\r\n        this.NodeRaise.active = false;\r\n        this.Raise.active     = !isOwner;\r\n        this.MakeOwner.active = false;\r\n        this.Ga.active        = true;\r\n        this.SellOwner.active = isOwner;\r\n    },\r\n    eventUserRegisterOwner(userOwner, err){\r\n        mm.audio.playButton();\r\n        if(userOwner != \"\"){\r\n            this.MakeOwner.active = false;\r\n        }\r\n        if(err != \"\"){\r\n            mm.Toast.showToast(1, err);\r\n        }\r\n    },\r\n    setLabelBettingChip(chip){\r\n        this.lb_bettingChip.string = Utils.formatCurrency(chip.toFixed(0));\r\n    },\r\n    ActionBet(){\r\n        this.sendBet(this._current);\r\n    },\r\n    ActionSliderRaise(){\r\n        mm.audio.playButton();\r\n        let isActive = this.NodeRaise.active;\r\n        this.NodeRaise.active = !isActive;\r\n    },\r\n    ActionRaise(){\r\n        mm.audio.playButton();\r\n        this.ActionSliderRaise();\r\n        this.sendBet(this._current);\r\n    },\r\n    ActionAllIn(){\r\n        mm.audio.playButton();\r\n        this.sendBet(this._current);\r\n    }\r\n});\r\n"]}