{"version":3,"sources":["assets\\scripts\\minipoker\\MiniPokerWinGame.js"],"names":["self","Helper","require","cc","Class","VozBaseComponent","properties","lbMoneyWin","Label","lbNumberWin","animationWin","Node","winText","onLoad","init","obj","MNPK","runWinGame","active","isNoHu","runNoHu","winMoney","handWinType","Promise","all","children","map","text","index","then","result","node","y","setMoneyWin","numberTo","updateChipAll","scheduleOnce","checkRunAgainWin","autoQuay","isAuto","getComponent","sp","Skeleton","setAnimation","d","moveTo","v2","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["let self;\r\nlet Helper = require(\"Helper\");\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        lbMoneyWin          : cc.Label,\r\n        lbNumberWin         : cc.Label,\r\n        animationWin        : cc.Node,\r\n        winText             : cc.Node,\r\n    },\r\n\r\n    onLoad () {\r\n        self = this;\r\n    },\r\n    init(obj) {\r\n        this.MNPK = obj;\r\n    },\r\n    runWinGame() {\r\n        this.winText.active = false;\r\n        if (this.MNPK.isNoHu){\r\n            this.runNoHu();\r\n        }else {\r\n            if (this.MNPK.winMoney > 0){\r\n                if (this.MNPK.handWinType > 0){\r\n                    this.winText.active = true;\r\n                    Promise.all(this.winText.children.map(function(text, index){\r\n                        text.active = false;\r\n                    })).then(result =>{\r\n                        self.winText.children[this.MNPK.handWinType].active = true;\r\n                    });\r\n                    this.lbMoneyWin.node.y = -50;\r\n                }else\r\n                    this.lbMoneyWin.node.y = 0;\r\n                this.MNPK.setMoneyWin(this.MNPK.winMoney);\r\n                this.lbMoneyWin.node.active = true;\r\n                Helper.numberTo(this.lbMoneyWin, 0, this.MNPK.winMoney, 1200, true, function () {\r\n                    self.MNPK.updateChipAll();\r\n                    self.scheduleOnce(function () {\r\n                        self.lbMoneyWin.node.active = false;\r\n                        self.winText.active         = false;\r\n                        self.checkRunAgainWin();\r\n                    }, 1)\r\n                });\r\n                this.MNPK.winMoney   = 0;\r\n            }else{\r\n                this.MNPK.autoQuay();\r\n            }\r\n        }\r\n    },\r\n    checkRunAgainWin() {\r\n        if (this.MNPK.winMoney > 0 || this.MNPK.isNoHu || this.MNPK.isAuto)\r\n            this.runWinGame();\r\n    },\r\n    runNoHu(){\r\n        this.animationWin.active = true;\r\n        this.animationWin.getComponent(sp.Skeleton).setAnimation(0, \"Idle\", false);\r\n        this.lbNumberWin.node.active = true;\r\n        Helper.numberTo(this.lbNumberWin, 0, this.MNPK.winMoney, 1200, true, function () {\r\n            this.scheduleOnce(function () {\r\n                var d = cc.moveTo(0.5, cc.v2(-75, 170));\r\n                self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\r\n                    self.lbNumberWin.node.active = false;\r\n                    self.checkRunAgainWin();\r\n                })));\r\n            }, 3)\r\n        });\r\n        this.scheduleOnce(function () {\r\n            self.animationWin.active  = false;\r\n        }, 4)\r\n        this.MNPK.isNoHu     = false;\r\n    },\r\n});\r\n"]}