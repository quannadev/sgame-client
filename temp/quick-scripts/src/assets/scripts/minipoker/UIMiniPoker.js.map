{"version":3,"sources":["assets\\scripts\\minipoker\\UIMiniPoker.js"],"names":["WinGame","require","Helper","reel","UtilsUI","PokerCard","Language","ListRoom","cc","Enum","Class","VozBaseComponent","properties","reels","type","iconPrefab","Prefab","selectRoom","Node","noticeNode","btnQuay","btnQuayNhanh","btnStopQuayNhanh","btnAutoQuay","btnStopAutoQuay","isAuto","isFast","isSpin","red","lastResult","betSelect","roomNumber","posLineWin","totalLineWin","TotalItemRun","_TotalColumn","ListCard","_isQuay","lb_hu","Label","betLevel","onLoad","loader","loadRes","SpriteAtlas","err","atlas","console","log","initMiniPoker","init","bind","self","Promise","all","children","map","room","index","setMaterialGray","getComponent","Sprite","then","result","schedule","updateJackpot","onEnable","node","zIndex","lastZIndex","currentUI","mm","Loading","hide","onDisable","stopAllActions","key","variableJackpot","SmartFoxSDK","MiniPokerController","ZoneInstance","mySelf","getVariable","jackpot","value","current_lb_jackpot","string","split","join","currentHu","parseFloat","Utils","numberTo","lastArray","initRandomItems","push","length","setMoneyWin","totalMoney","updateDataPhong","roomId","eventSieuToc","active","autoQuay","eventAutoQuay","eventStopAuto","eventStopSieuToc","eventPhong","event","data","audio","playButton","addNotice","getString","target","parseInt","checkEnoughMoney","GameVariables","Poker","getChip","eventQuay","Toast","showToast","sp","Skeleton","setAnimation","betRequest","MiniPokerRequest","BetRequest","setBet","updateChipAll","send","toSRequest","pauseSystemEventNode","nodeEvent","isPause","pauseSystemEvents","resumeSystemEvents","eventBack","getRoomByName","SmartFox","Requests","System","LeaveRoomRequest","back","eventSetting","eventVinhDanh","show","request","CasinoRequest","LeaderBoardRequest","eventLichSuGiaoDich","HistoryRequest","eventOpenHelper","pop","src","MiniPokerRun","newResult","_convertPosCard","getDataResult","cel","cel_index","icon","icons","setIcon","runReels","winMoney","isNoHu","noHu","handWinType","i","card","Card","nameFile","numberItem","min","maxRandom","listItem","random","newArray","randomArr","concat","reformatResult","size","res","slice","runActionWon","runWinGame","resume","setTimeout","spin","copy","max","Math","resetSpin","checkHasMoney","message","getChildByName","subChip","onEventUpdateChip"],"mappings":"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","sourceRoot":"/","sourcesContent":["let WinGame     = require(\"MiniPokerWinGame\");\r\nlet Helper      = require(\"Helper\");\r\nlet reel        = require(\"MiniPokerReel\");\r\nlet UtilsUI     = require(\"UtilsUI\");\r\nlet PokerCard   = require(\"PokerCard\");\r\nlet Language    = require(\"sinbadLanguage\");\r\nlet ListRoom = cc.Enum({\r\n    \"1l\"   : 100,\r\n    \"1k\"    : 1000,\r\n    \"10k\"   : 10000\r\n});\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        reels: {\r\n            default: [],\r\n            type: reel,\r\n        },\r\n        iconPrefab          : cc.Prefab,\r\n        selectRoom          : cc.Node,\r\n        noticeNode          : cc.Node,\r\n        btnQuay             : cc.Node,\r\n        btnQuayNhanh        : cc.Node,\r\n        btnStopQuayNhanh    : cc.Node,\r\n        btnAutoQuay         : cc.Node,\r\n        btnStopAutoQuay     : cc.Node,\r\n        WinGame             : WinGame,\r\n        isAuto              : false,\r\n        isFast              : false,\r\n        isSpin              : false,\r\n        red                 : true,\r\n        lastResult          : [],\r\n        betSelect           : 0,\r\n        roomNumber          : 0,\r\n        posLineWin          : 0,\r\n        totalLineWin        : 0,\r\n        TotalItemRun        : 15,\r\n        _TotalColumn        : 5,\r\n        ListCard           : [],\r\n        _isQuay             : true,\r\n        lb_hu: cc.Label,\r\n        betLevel: \"1l\",\r\n    },\r\n    onLoad () {\r\n        this._TotalColumn = 5;\r\n        this.TotalItemRun = 15;\r\n        this.isFast       = false;\r\n        this._isQuay      = false;\r\n        this.isAuto       = false;\r\n        cc.loader.loadRes(\"images/minigame/minipoker/card2d\", cc.SpriteAtlas, function (err, atlas) {\r\n            if(err){\r\n                console.log(err);\r\n                return;\r\n            }\r\n            this.ListCard   = atlas;\r\n            this.initMiniPoker();\r\n            this.WinGame.init(this);\r\n        }.bind(this));\r\n        let self = this;\r\n        Promise.all(this.selectRoom.children.map(function(room, index){\r\n            Helper.setMaterialGray(room.getComponent(cc.Sprite), true);\r\n        })).then(result =>{\r\n            Helper.setMaterialGray(self.selectRoom.children[0].getComponent(cc.Sprite), false);\r\n        });\r\n        this.betLevel = \"1l\";\r\n        this.roomNumber = ListRoom[\"1l\"];\r\n        this.schedule(this.updateJackpot, 3);\r\n        this.updateJackpot();\r\n    },\r\n    onEnable() {\r\n        if (this.node.zIndex <= cc.lastZIndex){\r\n            cc.lastZIndex   += 1;\r\n            this.node.zIndex = cc.lastZIndex;\r\n        }\r\n        cc.currentUI  = \"UIMiniPoker\";\r\n        mm.Loading.hide();\r\n    },\r\n    onDisable(){\r\n        this.node.stopAllActions();\r\n    },\r\n    updateJackpot(){\r\n        let key = \"minipoker\"+this.betLevel;\r\n        let variableJackpot = SmartFoxSDK.MiniPokerController.ZoneInstance.mySelf.getVariable(key);\r\n        if(variableJackpot){\r\n            let jackpot = variableJackpot.value;\r\n            let current_lb_jackpot = this.lb_hu.string;\r\n            current_lb_jackpot = current_lb_jackpot.split(\".\").join(\"\");\r\n            let currentHu = parseFloat(current_lb_jackpot);\r\n            Utils.numberTo(this.lb_hu, currentHu, jackpot, 1000, true);\r\n        }\r\n    },\r\n    initMiniPoker: function() {\r\n        let self = this;\r\n        self.lastResult = [];\r\n        Promise.all(this.reels.map(function(reel, index) {\r\n            let lastArray = self.initRandomItems(self.TotalItemRun, 1, 52);\r\n            self.lastResult.push(lastArray[lastArray.length-1]);\r\n            reel.init(self, lastArray);\r\n        }));\r\n    },\r\n    setMoneyWin: function(totalMoney) {\r\n    },\r\n    updateDataPhong(roomId) {\r\n\r\n    },\r\n    // update (dt) {},\r\n    eventSieuToc: function() {\r\n        this.isFast                 = true;\r\n        this.isAuto                 = true;\r\n        this.btnStopAutoQuay.active = false;\r\n        this.btnStopQuayNhanh.active= true;\r\n        this.autoQuay();\r\n    },\r\n    eventAutoQuay: function() {\r\n        this.isAuto                 = true;\r\n        this.isFast                 = false;\r\n        this.btnStopAutoQuay.active = true;\r\n        this.btnQuayNhanh.active    = true;\r\n        this.autoQuay();\r\n    },\r\n    eventStopAuto: function() {\r\n        this.isAuto = false;\r\n        this.btnAutoQuay.active     = true;\r\n        this.btnStopAutoQuay.active = false;\r\n    },\r\n    eventStopSieuToc: function() {\r\n        this.isFast = false;\r\n        this.isAuto = false;\r\n        this.btnQuayNhanh.active    = true;\r\n        this.btnStopQuayNhanh.active= false;\r\n    },\r\n    eventPhong: function(event, data) {\r\n        mm.audio.playButton();\r\n        if (this._isQuay){\r\n            this.addNotice(Language.getString(\"noti_is_playing\"));\r\n            return;\r\n        }\r\n        Promise.all(this.selectRoom.children.map(function(room, index){\r\n            Helper.setMaterialGray(room.getComponent(cc.Sprite), true);\r\n        })).then(result =>{\r\n            Helper.setMaterialGray(event.target.getComponent(cc.Sprite), false);\r\n        });\r\n        this.roomNumber = parseInt(data);\r\n        if(this.roomNumber == 100){\r\n            this.betLevel = \"1l\";\r\n        }else if(this.roomNumber == 1000){\r\n            this.betLevel = \"1k\";\r\n        }else if(this.roomNumber == 10000){\r\n            this.betLevel = \"10k\";\r\n        }\r\n        this.updateJackpot();\r\n    },\r\n    checkEnoughMoney(){\r\n        if(GameVariables.Poker.getChip(SmartFoxSDK.MiniPokerController.ZoneInstance.mySelf) < this.roomNumber){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    eventQuay: function() {\r\n        if(!this.checkEnoughMoney()){\r\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n            return;\r\n        }\r\n        if (this._isQuay){\r\n            this.addNotice(Language.getString(\"noti_is_playing\"));\r\n            return;\r\n        }\r\n        this._isQuay = true;\r\n        this.btnQuay.getComponent(sp.Skeleton).setAnimation(0, \"Spine\", false);\r\n        let betRequest = new MiniPokerRequest.BetRequest();\r\n        betRequest.setBet(this.roomNumber);\r\n        this.updateChipAll(this.roomNumber);\r\n        SmartFoxSDK.MiniPokerController.ZoneInstance.send(betRequest.toSRequest());\r\n    },\r\n    pauseSystemEventNode: function(nodeEvent, isPause) {\r\n        Helper.setMaterialGray( nodeEvent.getComponent(cc.Sprite), isPause);\r\n        if (isPause){\r\n            nodeEvent.pauseSystemEvents(true);\r\n        }else\r\n            nodeEvent.resumeSystemEvents(true);\r\n    },\r\n    eventBack: function() {\r\n        mm.audio.playButton();\r\n        if (this._isQuay){\r\n            this.addNotice(Language.getString(\"noti_is_playing\"));\r\n            return;\r\n        }\r\n        let room = SmartFoxSDK.MiniPokerController.ZoneInstance.getRoomByName(\"minipoker\");\r\n        if(room){\r\n            SmartFoxSDK.MiniPokerController.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.LeaveRoomRequest(room));\r\n        }else{\r\n            this.back();\r\n        }\r\n    },\r\n    eventSetting: function() {\r\n        mm.audio.playButton();\r\n    },\r\n    eventVinhDanh: function() {\r\n        mm.audio.playButton();\r\n        mm.Loading.show();\r\n        let request = new CasinoRequest.LeaderBoardRequest();\r\n        SmartFoxSDK.MiniPokerController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    eventLichSuGiaoDich: function() {\r\n        mm.audio.playButton();\r\n        mm.Loading.show();\r\n        let request = new CasinoRequest.HistoryRequest();\r\n        SmartFoxSDK.MiniPokerController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    eventOpenHelper: function() {\r\n        mm.audio.playButton();\r\n        this.show(\"UIMiniPokerHelper\", {pop: true, src: 'minipoker'});\r\n    },\r\n    MiniPokerRun: function(data){\r\n        let self      = this;\r\n        let newResult = this._convertPosCard(data.result);\r\n        newResult     = this.getDataResult(newResult);\r\n        Promise.all(newResult.map(function(cel, cel_index){\r\n            Promise.all(cel.map(function(icon, index){\r\n                self.reels[cel_index].icons[index].setIcon(icon, true);\r\n            }));\r\n        })).then(result =>{\r\n            self.runReels();\r\n        });\r\n        this.winMoney   = data.winMoney;\r\n        this.isNoHu     = data.noHu;\r\n        this.handWinType= data.handWinType;\r\n    },\r\n    _convertPosCard(result) {\r\n        let newResult =[];\r\n        for (let i=0; i< result.length; i++){\r\n            let card = new PokerCard.Card(result[i]);\r\n            newResult.push(card.nameFile);\r\n        }\r\n        return newResult;\r\n    },\r\n    initRandomItems: function(numberItem, min, maxRandom) {\r\n        let listItem = [];\r\n        for (let i=0; i< numberItem; i++){\r\n            listItem[i] = this.random(min, maxRandom);\r\n        }\r\n        return listItem;\r\n    },\r\n    getDataResult: function(result) {\r\n        let self = this;\r\n        let newArray = [];\r\n        for (let i=0; i< this._TotalColumn; i++){\r\n            newArray[i] = [];\r\n        }\r\n        for (let i=0; i< result.length; i++) {\r\n            newArray[i%self._TotalColumn].push(result[i]);\r\n        }\r\n        for (let i=0; i< this._TotalColumn; i++){\r\n            let randomArr = this.initRandomItems(this.TotalItemRun-2, 1, 52);\r\n            newArray[i]   = newArray[i].concat(randomArr);\r\n        }\r\n        for (let i=0; i<  this.lastResult.length; i++) {\r\n            newArray[i%self._TotalColumn].push( this.lastResult[i]);\r\n        }\r\n        this.lastResult = result;\r\n        return newArray;\r\n    },\r\n    reformatResult(result, size) {\r\n        let res = [];\r\n        for(let i=0;i < result.length; i = i+size)\r\n            res.push(result.slice(i,i+size));\r\n        return res;\r\n    },\r\n    runActionWon: function() {\r\n        this._isQuay = false;\r\n        this.WinGame.runWinGame();\r\n    },\r\n    resume() {\r\n        if (this.winMoney > 0){\r\n            setTimeout(function(){\r\n                this.WinGame.runWinGame();\r\n            }.bind(this), 300);\r\n        }else {\r\n            this.WinGame.runWinGame();\r\n        }\r\n    },\r\n    autoQuay() {\r\n        if(!this.checkEnoughMoney()){\r\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n            return;\r\n        }\r\n        if (this.isAuto){\r\n            this.eventQuay();\r\n        }\r\n    },\r\n    runReels: function () {\r\n        Promise.all(this.reels.map(function(reel, index) {\r\n            reel.spin(index);\r\n        }));\r\n    },\r\n    copy: function(){\r\n        Promise.all(this.reels.map(function(reel){\r\n            reel.icons[reel.icons.length-1].setIcon(reel.icons[0].data);\r\n        }));\r\n    },\r\n    random: function(min, max){\r\n        return  min+ ~~(Math.random()*max);\r\n    },\r\n    resetSpin: function () {\r\n    },\r\n    checkHasMoney: function() {\r\n        return true;\r\n    },\r\n    addNotice: function (message) {\r\n        let self = this;\r\n        this.noticeNode.active = true;\r\n        this.noticeNode.getChildByName(\"lb_noti\").getComponent(cc.Label).string = message;\r\n        setTimeout(function(){\r\n            self.noticeNode.active = false;\r\n        }, 1200);\r\n    },\r\n    updateChipAll(subChip) {\r\n        SmartFoxSDK.MiniPokerController.onEventUpdateChip(subChip);\r\n    },\r\n});\r\n"]}