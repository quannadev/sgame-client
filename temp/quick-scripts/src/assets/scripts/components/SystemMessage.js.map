{"version":3,"sources":["assets/scripts/components/SystemMessage.js"],"names":["cc","Class","Component","properties","message","RichText","isRunning","onEnable","messageBoxWidth","node","width","SmartFoxSDK","PortalController","ZoneInstance","mySelf","msg","getVariable","value","runMessage","length","stopAllActions","string","x","moveWidth","duration","self","runAction","repeatForever","sequence","moveTo","v2","callFunc"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAEJ,EAAE,CAACK,QADJ;AAERC,IAAAA,SAAS,EAAE;AAFH,GAHP;AAOLC,EAAAA,QAPK,sBAOK;AACN;AACA,SAAKC,eAAL,GAAuB,KAAKC,IAAL,CAAUC,KAAjC;;AACA,QAAGC,WAAW,CAACC,gBAAZ,CAA6BC,YAA7B,CAA0CC,MAA7C,EAAoD;AAChD,UAAIC,GAAG,GAAGJ,WAAW,CAACC,gBAAZ,CAA6BC,YAA7B,CAA0CC,MAA1C,CAAiDE,WAAjD,CAA6D,QAA7D,CAAV;;AACA,UAAGD,GAAG,IAAIA,GAAG,CAACE,KAAd,EAAoB;AAChB,aAAKC,UAAL,CAAgBH,GAAG,CAACE,KAApB;AACH;AACJ,KALD,MAKK;AACD,WAAKC,UAAL,CAAgB,sFAAhB;AACH;AACJ,GAlBI;AAmBLA,EAAAA,UAnBK,sBAmBMH,GAnBN,EAmBU;AACX,QAAIA,GAAG,CAACI,MAAJ,GAAa,CAAb,IAAkB,CAAC,KAAKb,SAA5B,EAAuC;AACnC,WAAKA,SAAL,GAAiB,IAAjB;AACA,UAAIE,eAAe,GAAG,KAAKC,IAAL,CAAUC,KAAhC;AACA,WAAKN,OAAL,CAAaK,IAAb,CAAkBW,cAAlB;AACA,WAAKhB,OAAL,CAAaiB,MAAb,GAAsBN,GAAtB;AACA,WAAKX,OAAL,CAAaK,IAAb,CAAkBa,CAAlB,GAAsBd,eAAtB;AACA,UAAIe,SAAS,GAAGf,eAAe,GAAG,KAAKJ,OAAL,CAAaK,IAAb,CAAkBC,KAApD;AACA,UAAIc,QAAQ,GAAGD,SAAS,GAAG,KAA3B;AACA,UAAIE,IAAI,GAAG,IAAX;AACA,WAAKrB,OAAL,CAAaK,IAAb,CAAkBiB,SAAlB,CAA4B1B,EAAE,CAAC2B,aAAH,CAAiB,IAAI3B,EAAE,CAAC4B,QAAP,CACzC5B,EAAE,CAAC6B,MAAH,CAAUL,QAAV,EAAoBxB,EAAE,CAAC8B,EAAH,CAAM,CAACP,SAAP,EAAkB,CAAlB,CAApB,CADyC,EAEzCvB,EAAE,CAAC+B,QAAH,CAAY,YAAY;AACpBN,QAAAA,IAAI,CAACrB,OAAL,CAAaK,IAAb,CAAkBa,CAAlB,GAAsBd,eAAtB;AACAiB,QAAAA,IAAI,CAACnB,SAAL,GAAiB,KAAjB;AACH,OAHD,CAFyC,CAAjB,CAA5B;AAOH;AACJ;AArCI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        message: cc.RichText,\n        isRunning: false\n    },\n    onEnable(){\n        // this.runMessage(\"Mua game liên hệ telegram: @mrteoem\");\n        this.messageBoxWidth = this.node.width;\n        if(SmartFoxSDK.PortalController.ZoneInstance.mySelf){\n            let msg = SmartFoxSDK.PortalController.ZoneInstance.mySelf.getVariable(\"sysmsg\");\n            if(msg && msg.value){\n                this.runMessage(msg.value);\n            }\n        }else{\n            this.runMessage(\"Chào mừng các bạn đến với cổng game Smart Fox! Cổng game quốc tế dành cho người Việt\");\n        }\n    },\n    runMessage(msg){\n        if (msg.length > 0 && !this.isRunning) {\n            this.isRunning = true;\n            let messageBoxWidth = this.node.width;\n            this.message.node.stopAllActions();\n            this.message.string = msg;\n            this.message.node.x = messageBoxWidth;\n            let moveWidth = messageBoxWidth + this.message.node.width;\n            let duration = moveWidth / 100.0;\n            let self = this;\n            this.message.node.runAction(cc.repeatForever(new cc.sequence(\n                cc.moveTo(duration, cc.v2(-moveWidth, 0)),\n                cc.callFunc(function () {\n                    self.message.node.x = messageBoxWidth;\n                    self.isRunning = false;\n                })\n            )));\n        }\n    }\n});\n"]}