{"version":3,"sources":["assets\\scripts\\poker\\CommunityCards.js"],"names":["PokerCard","require","cc","Class","Component","properties","cards","type","Node","onLoad","posCards","i","length","push","position","reset","dealFlop","cardIds","console","error","card","getComponent","init","active","self","runAction","sequence","moveTo","callFunc","reveal","Card","dealTurn","dealRiver","showDown","showCommunityCard","showCommunityCardWin","_card","indexOf","id","showOver","hideOver"],"mappings":"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","sourceRoot":"/","sourcesContent":["// Learn cc.Class:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\r\n// Learn Attribute:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\r\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\r\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\r\nlet PokerCard = require('PokerCard');\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        cards: {\r\n            type: cc.Node,\r\n            default: []\r\n        }\r\n    },\r\n    onLoad(){\r\n        this.posCards  = [];\r\n        for(let i = 0; i < this.cards.length;i++){\r\n            this.posCards.push(this.cards[i].position);\r\n        }\r\n        this.reset();\r\n    },\r\n    dealFlop(cardIds){\r\n        if(cardIds.length != 3){\r\n            console.error(\"Size cards Flop != 3\");\r\n        }else{\r\n            // actions\r\n            for(let i = 0; i < 3;i++){\r\n                let card = this.cards[i].getComponent(\"Card\");\r\n                card.init(null);\r\n                this.cards[i].position = this.posCards[0];\r\n                this.cards[i].active = true;\r\n            }\r\n            let self = this;\r\n\r\n            this.cards[0].runAction(cc.sequence(cc.moveTo(0.2,this.posCards[0]), cc.callFunc(function () {\r\n                let card = self.cards[0].getComponent(\"Card\");\r\n                card.reveal(new PokerCard.Card(cardIds[0]));\r\n            })));\r\n            this.cards[1].runAction(cc.sequence(cc.moveTo(0.2,this.posCards[1]), cc.callFunc(function () {\r\n                let card = self.cards[1].getComponent(\"Card\");\r\n                card.reveal(new PokerCard.Card(cardIds[1]));\r\n            })));\r\n\r\n            this.cards[2].runAction(cc.sequence(cc.moveTo(0.2,this.posCards[2]), cc.callFunc(function () {\r\n                let card = self.cards[2].getComponent(\"Card\");\r\n                card.reveal(new PokerCard.Card(cardIds[2]));\r\n            })));\r\n        }\r\n    },\r\n    dealTurn(cardIds){\r\n        if(cardIds.length != 1){\r\n            console.error(\"Size cards Turn != 1\");\r\n        }else{\r\n            let card = this.cards[3].getComponent(\"Card\");\r\n            card.reveal(new PokerCard.Card(cardIds[0]));\r\n        }\r\n    },\r\n    dealRiver(cardIds){\r\n        if(cardIds.length != 1){\r\n            console.error(\"Size cards River != 1\");\r\n        }else{\r\n            let card = this.cards[4].getComponent(\"Card\");\r\n            card.reveal(new PokerCard.Card(cardIds[0]));\r\n        }\r\n    },\r\n    showDown(cardIds){\r\n        for(let i = 0; i < cardIds.length ;i++){\r\n            let card = this.cards[i].getComponent(\"Card\");\r\n            if(this.cards[i].active){\r\n                card.init(new PokerCard.Card(cardIds[i]));\r\n            }else{\r\n                card.reveal(new PokerCard.Card(cardIds[i]));\r\n            }\r\n\r\n        }\r\n    },\r\n    showCommunityCard(cards){\r\n        if(cards.length == 0)\r\n            return;\r\n        // case if win before the turn river\r\n        for(let i = 0; i < this.cards.length;i++){\r\n            if(cards[i]){\r\n                let card = this.cards[i].getComponent(\"Card\");\r\n                if(this.cards[i].active){\r\n                    card.init(new PokerCard.Card(cards[i]));\r\n                }else{\r\n                    card.reveal(new PokerCard.Card(cards[i]));\r\n                }\r\n            }\r\n        }\r\n\r\n    },\r\n    showCommunityCardWin(cards){\r\n        for(let i = 0; i < this.cards.length;i++){\r\n            let card = this.cards[i].getComponent(\"Card\");\r\n            if(card._card != null && cards.indexOf(card._card.id) < 0){\r\n                card.showOver();\r\n            }\r\n        }\r\n    },\r\n    reset(){\r\n        for(let i = 0; i < this.cards.length;i++){\r\n            let card = this.cards[i].getComponent(\"Card\");\r\n            card.hideOver();\r\n            this.cards[i].active = false;\r\n        }\r\n    }\r\n});\r\n"]}