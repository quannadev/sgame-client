{"version":3,"sources":["assets\\scripts\\poker\\PokerController.js"],"names":["PokerEvent","require","PokerController","SmartFoxSDK","BaseController","extend","m_tableInfo","QuickJoinRoomConfig","registerEvents","_super","ZoneInstance","addEventListenerExtension","CasinoEvent","RESPONSE_NAME","GROUP_GAME_RES","onGroupRoomEvent","QUICK_JOIN_GAME_RES","onQuickJoinRoom","LOAD_TABLE_INFO_RES","onLoadTableEvent","USER_SIT_ON_RES","onUserSitOn","PRE_START","onPreStart","START","onStartEvent","USER_TURN_RES","onUserTurn","USER_SIT_OUT_RES","onUserSitOut","STAND_UP_RES","onUserStandUp","USER_FOLD_RES","onUserFold","USER_CALL_RES","onUserCall","USER_CHECK_RES","onUserCheck","USER_RAISE_RES","onUserRaise","USER_GOING_ALL_RES","onUserAllIn","GAME_TURN_RES","onGameTurn","SHOW_DOWN_RES","onShowDown","FINISH_GAME_RES","onFinishGame","KICK_USER_RES","onKickUser","removeEvents","removeEventListenerExtension","onEventLogin","event","groupRequest","CasinoRequest","GroupGameRequest","setGame","zoneName","send","toSRequest","getUILobby","scene","cc","director","getScene","uiLobby","find","getComponent","name","onLeaderBoardEvent","arr","data","getSArray","i","size","sItem","get","getObject","item","session","account","getUtfString","win","getDouble","push","updateRank","groupRoom","GroupGameEvent","fromEvent","mm","game","undefined","groups","displayname","GameVariables","getDisplayName","mySelf","chip","getChip","UIManger","show","pop","request","LeaderBoardRequest","bind","quickJoin","QuickJoinGameEvent","roomId","JoinRoomRequest","Toast","showToast","_data","room","buy_in","number_desk","preLoadUI","Loading","hide","getUI","controller","betChip","Poker","getBetChip","id","setInfoTable","Utils","formatCurrency","LoadTableInfoEvent","m_isGameStart","m_listActiveUserName","indexOf","requestSitOn","_updateNodePlayers","m_listDesk","m_isPrestart","setWaitingTimer","turnOffAllTimerPlayers","getCommunityCard","showCommunityCard","m_listCommunityCard","length","player","_getJSPlayerByName","addCardHand","m_listHandCard","showBetChip","m_listBetChip","setMoneyPot","m_potChip","hideDeskEmpty","userSitOnEvent","UserSitOnEvent","desk","DeskId","m_deskId","UserName","m_userName","DeskState","m_deskState","UserChip","m_buyIn","m_listUser","preStart","PreStartEvent","m_prestartTime","reset","m_total_bet","hidePokerTextWinner","_getJSPlayerById","onPreStartEvent","showDeskEmpty","m_listUserSitOut","requestLeaveRoom","countOut","start","StartEvent","m_dealer","m_smallBlind","m_bigBlind","m_betChipGame","m_currentUser","m_userTime","userOut","removePlayer","_isPlayer","deskId","_getPlayerId","setActionController","getAction","jsPlayer","userTurnRes","UserTurnEvent","m_username","m_time","onTurnEvent","gameTurnRes","GameTurnEvent","userFirstBetting","communityCard","currentGameTurn","m_currentGameTurn","process","processBetChipToPot","dealFlop","dealTurn","dealRiver","console","log","playerBet","showBetting","userFoldRes","UserFoldEvent","onFoldEvent","userCallRes","UserCallEvent","onCallEvent","userCheckRes","UserCheckEvent","onCheckEvent","userRaiseRes","UserRaiseEvent","onRaiseEvent","userAllInRes","UserAllInEvent","onAllInEvent","showDownRes","ShowDownEvent","showDown","m_listComCard","onShowDownEvent","m_listCard","finishGameRes","FinishGameEvent","showCommunityCardWin","m_listPokerHandCard","m_listWinner","typeBestWin","m_listPokerHand","showPokerTextWinner","runActionPotChipToWinner","m_listChip","target","onWinnerEvent","onGameFinishEvent","sitOutRes","UserSitOutEvent","indexUser","m_isSitOut","splice","setSitOut","kickRes","KickUserEvent","m_resType","onPublicMessage","sender","msg","message","dataSender","dn","fb","msgItem","instance","getInstance","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["let PokerEvent = require('PokerEvent')\r\nlet PokerController = SmartFoxSDK.BaseController.extend({\r\n    m_tableInfo: null,\r\n    QuickJoinRoomConfig: {},\r\n    registerEvents(){\r\n        this._super();\r\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.GROUP_GAME_RES, this.onGroupRoomEvent, this);\r\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.QUICK_JOIN_GAME_RES, this.onQuickJoinRoom, this);\r\n\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.LOAD_TABLE_INFO_RES, this.onLoadTableEvent, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_SIT_ON_RES, this.onUserSitOn, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.PRE_START, this.onPreStart, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.START, this.onStartEvent, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_TURN_RES, this.onUserTurn, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_SIT_OUT_RES, this.onUserSitOut, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.STAND_UP_RES, this.onUserStandUp, this);\r\n\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_FOLD_RES, this.onUserFold, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_CALL_RES, this.onUserCall, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_CHECK_RES, this.onUserCheck, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_RAISE_RES, this.onUserRaise, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_GOING_ALL_RES, this.onUserAllIn, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.GAME_TURN_RES, this.onGameTurn, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.SHOW_DOWN_RES, this.onShowDown, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.FINISH_GAME_RES, this.onFinishGame, this);\r\n        this.ZoneInstance.addEventListenerExtension(PokerEvent.RESPONSE_NAME.KICK_USER_RES, this.onKickUser, this);\r\n    },\r\n    removeEvents(){\r\n        this._super();\r\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.GROUP_GAME_RES, this.onGroupRoomEvent, this);\r\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.QUICK_JOIN_GAME_RES, this.onQuickJoinRoom, this);\r\n\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.LOAD_TABLE_INFO_RES, this.onLoadTableEvent, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_SIT_ON_RES, this.onUserSitOn, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.PRE_START, this.onPreStart, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.START, this.onStartEvent, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_TURN_RES, this.onUserTurn, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_SIT_OUT_RES, this.onUserSitOut, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.STAND_UP_RES, this.onUserStandUp, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_FOLD_RES, this.onUserFold, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_CALL_RES, this.onUserCall, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_CHECK_RES, this.onUserCheck, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_RAISE_RES, this.onUserRaise, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.USER_GOING_ALL_RES, this.onUserAllIn, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.GAME_TURN_RES, this.onGameTurn, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.SHOW_DOWN_RES, this.onShowDown, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.FINISH_GAME_RES, this.onFinishGame, this);\r\n        this.ZoneInstance.removeEventListenerExtension(PokerEvent.RESPONSE_NAME.KICK_USER_RES, this.onKickUser, this);\r\n    },\r\n    onEventLogin(event){\r\n        this._super(event);\r\n        let groupRequest = new CasinoRequest.GroupGameRequest();\r\n        groupRequest.setGame(this.zoneName);\r\n        this.ZoneInstance.send(groupRequest.toSRequest());\r\n    },\r\n    getUILobby(){\r\n        const scene = cc.director.getScene();\r\n        let uiLobby =  cc.find(\"UILobby\", scene);\r\n        return uiLobby.getComponent(uiLobby.name);\r\n    },\r\n    onLeaderBoardEvent(event){\r\n        let arr =[];\r\n        let data = event.getSArray(\"d\");\r\n        for(let i = 0;i < data.size();i++){\r\n            let sItem = data.get(i).getObject();\r\n            let item = {};\r\n            item.session = i +1;\r\n            item.account = sItem.getUtfString(\"dn\");\r\n            item.win = sItem.getDouble(\"m\");\r\n            arr.push(item);\r\n        }\r\n        if(this.getUILobby()){\r\n            this.getUILobby().updateRank(arr);\r\n        }\r\n    },\r\n    onGroupRoomEvent(event){\r\n        let groupRoom = new CasinoEvent.GroupGameEvent().fromEvent(event);\r\n        if(mm.game == undefined)\r\n            mm.game = {};\r\n        mm.game[this.zoneName] = {};\r\n        mm.game[this.zoneName].groups = groupRoom.groups;\r\n        mm.game[this.zoneName].displayname = GameVariables.getDisplayName(this.ZoneInstance.mySelf);\r\n        mm.game[this.zoneName].chip = GameVariables.getChip(this.ZoneInstance.mySelf);\r\n        UIManger.show(\"UILobby\", {pop: true, data: {game: this.zoneName, ZoneInstance: this.ZoneInstance}}, function () {\r\n            let request = new CasinoRequest.LeaderBoardRequest();\r\n            this.ZoneInstance.send(request.toSRequest());\r\n        }.bind(this));\r\n    },\r\n    onQuickJoinRoom(event){\r\n        let quickJoin = new CasinoEvent.QuickJoinGameEvent().fromEvent(event);\r\n        if(quickJoin.roomId >= 0){\r\n            this.ZoneInstance.send(new CasinoRequest.JoinRoomRequest(quickJoin.roomId, \"1\", true).toSRequest());\r\n        }else{\r\n            mm.Toast.showToast(1, \"Phòng đã đầy vui vòng chọn phòng khác\");\r\n        }\r\n    },\r\n    onLoadTableEvent(event){\r\n        let _data = {pop: true, data: {room: this.room, buy_in : this.QuickJoinRoomConfig.buy_in, number_desk: this.QuickJoinRoomConfig.number_desk}};\r\n        this.preLoadUI(_data, function () {\r\n            mm.Loading.hide();\r\n            this.getUI().controller = this;\r\n            this.QuickJoinRoomConfig.betChip = GameVariables.Poker.getBetChip(this.room);\r\n            this.QuickJoinRoomConfig.roomId = this.room.id;\r\n            this.getUI().setInfoTable(\"Poker / #\"+this.room.id, Utils.formatCurrency(this.QuickJoinRoomConfig.betChip));\r\n            this.m_tableInfo = new PokerEvent.LoadTableInfoEvent().fromEvent(event);\r\n            this.m_tableInfo.room = this.room;\r\n            if(!this.m_tableInfo.m_isGameStart || this.m_tableInfo.m_listActiveUserName.indexOf(this.ZoneInstance.mySelf.name) < 0){\r\n                this.getUI().requestSitOn();\r\n            }\r\n            this.getUI()._updateNodePlayers(this.m_tableInfo.m_listDesk);\r\n            if(this.m_tableInfo.m_isPrestart && !this.m_tableInfo.m_isGameStart){\r\n                this.getUI().setWaitingTimer(true, 5, this.m_tableInfo.m_isPrestart / 100);\r\n            }\r\n            if(this.m_tableInfo.m_isGameStart){\r\n                this.getUI().turnOffAllTimerPlayers();\r\n                // update community card\r\n                this.getUI().getCommunityCard().showCommunityCard(mm.m_tableInfo.m_listCommunityCard);\r\n\r\n                // update state for each user\r\n                for(let i = 0; i < this.m_tableInfo.m_listActiveUserName.length;i++){\r\n                    let player = this.getUI()._getJSPlayerByName(this.m_tableInfo.m_listActiveUserName[i]);\r\n                    if(player){\r\n                        player.addCardHand(this.m_tableInfo.m_listHandCard[i]);\r\n                        player.showBetChip(this.m_tableInfo.m_listBetChip[i]);\r\n                    }\r\n                }\r\n                this.getUI().setMoneyPot(this.m_tableInfo.m_potChip);\r\n            }\r\n            this.getUI().hideDeskEmpty();\r\n        }.bind(this))\r\n    },\r\n    onUserSitOn(event){\r\n        let userSitOnEvent = new PokerEvent.UserSitOnEvent().fromEvent(event);\r\n        // add to list desk\r\n        let desk = {};\r\n        desk.DeskId = userSitOnEvent.m_deskId;\r\n        desk.UserName = userSitOnEvent.m_userName;\r\n        desk.DeskState = userSitOnEvent.m_deskState;\r\n        desk.UserChip = userSitOnEvent.m_buyIn;\r\n        this.m_tableInfo.m_listDesk.push(desk);\r\n\r\n        // add to list user\r\n        this.m_tableInfo.m_listUser.push(userSitOnEvent.m_userName);\r\n\r\n        this.getUI()._updateNodePlayers(this.m_tableInfo.m_listDesk);\r\n    },\r\n    onPreStart(event){\r\n        let preStart = new PokerEvent.PreStartEvent().fromEvent(event);\r\n        this.m_tableInfo.m_isPrestart = preStart.m_isPrestart;\r\n        this.m_tableInfo.m_prestartTime = preStart.m_prestartTime;\r\n        this.m_tableInfo.m_isGameStart = false;\r\n        // reset card comminity\r\n        this.getUI().getCommunityCard().reset();\r\n        this.getUI().setMoneyPot(-1);\r\n        this.m_tableInfo.m_total_bet = 0;\r\n        // reset poker text win\r\n        this.getUI().hidePokerTextWinner();\r\n        // hide all hold em of players\r\n        for(let i = 0; i < this.m_tableInfo.m_listDesk.length;i++){\r\n            let desk = this.m_tableInfo.m_listDesk[i];\r\n            let player = this.getUI()._getJSPlayerById(desk.DeskId);\r\n            player.onPreStartEvent(preStart);\r\n        }\r\n        if(preStart.m_isPrestart){\r\n            this.getUI().setWaitingTimer(true,preStart.m_prestartTime / 1000, preStart.m_prestartTime / 1000);\r\n        }\r\n        this.getUI().showDeskEmpty();\r\n\r\n        if(this.m_tableInfo.m_listUserSitOut.indexOf(this.ZoneInstance.mySelf.name) >= 0){\r\n            this.getUI().requestLeaveRoom();\r\n        }\r\n\r\n        // check count out\r\n        if(this.getUI().countOut >= 1){\r\n            this.getUI().requestLeaveRoom();\r\n        }\r\n    },\r\n    onStartEvent(event){\r\n        this.getUI().countOut++;\r\n        this.getUI().setWaitingTimer(false);\r\n        let start = new PokerEvent.StartEvent().fromEvent(event);\r\n        this.m_tableInfo.m_dealer = start.m_dealer;\r\n        this.m_tableInfo.m_smallBlind = start.m_smallBlind;\r\n        this.m_tableInfo.m_bigBlind = start.m_bigBlind;\r\n        this.m_tableInfo.m_betChipGame = start.m_betChipGame;\r\n        this.m_tableInfo.m_currentUser =  start.m_currentUser;\r\n        this.m_tableInfo.m_userTime = start.m_userTime;\r\n        this.m_tableInfo.m_isGameStart = true;\r\n        if(this.m_tableInfo.m_listActiveUserName){\r\n            let userOut = [];\r\n            for(let i = 0; i < this.m_tableInfo.m_listActiveUserName.length;i++){\r\n                if(start.m_listActiveUserName.indexOf(this.m_tableInfo.m_listActiveUserName[i]) < 0){\r\n                    userOut.push(this.m_tableInfo.m_listActiveUserName[i]);\r\n                }\r\n            }\r\n            this.getUI().removePlayer(userOut);\r\n        }\r\n        this.m_tableInfo.m_listActiveUserName = start.m_listActiveUserName;\r\n        this.getUI()._updateNodePlayers(this.m_tableInfo.m_listDesk);\r\n        // set Actions Controller For mySelf\r\n        if(this.getUI()._isPlayer(this.ZoneInstance.mySelf.name)){\r\n            let deskId = this.getUI()._getPlayerId(this.ZoneInstance.mySelf.name);\r\n            let player = this.getUI()._getJSPlayerById(deskId);\r\n            player.setActionController(this.getUI().getAction());\r\n        }\r\n\r\n        for(let i = 0; i < this.m_tableInfo.m_listDesk.length;i++){\r\n            let desk = this.m_tableInfo.m_listDesk[i];\r\n            let jsPlayer = this.getUI()._getJSPlayerById(desk.DeskId);\r\n            jsPlayer.onStartEvent(start);\r\n        }\r\n        this.getUI().hideDeskEmpty();\r\n    },\r\n    onUserTurn(event){\r\n        this.getUI().turnOffAllTimerPlayers();\r\n        // next user turn\r\n        let userTurnRes = new PokerEvent.UserTurnEvent().fromEvent(event);\r\n        this.m_tableInfo.m_currentUser = userTurnRes.m_username;\r\n        this.m_tableInfo.m_userTime = userTurnRes.m_time;\r\n        let deskId = this.getUI()._getPlayerId(userTurnRes.m_username);\r\n        let player = this.getUI()._getJSPlayerById(deskId);\r\n        if(player)\r\n            player.onTurnEvent(userTurnRes);\r\n    },\r\n    onGameTurn(event){\r\n        this.getUI().turnOffAllTimerPlayers();\r\n        let gameTurnRes = new PokerEvent.GameTurnEvent().fromEvent(event);\r\n        let userFirstBetting = gameTurnRes.m_currentUser;\r\n        let communityCard = this.getUI().getCommunityCard();\r\n        let currentGameTurn = gameTurnRes.m_currentGameTurn;\r\n        let process = false;\r\n        this.getUI().processBetChipToPot(function () {\r\n            if(!process){\r\n                process = true;\r\n                if(currentGameTurn == \"BETTING\"){\r\n\r\n                }else if(currentGameTurn == \"FLOP\"){\r\n                    communityCard.dealFlop(gameTurnRes.m_listCommunityCard);\r\n                }else if(currentGameTurn == \"TURN\"){\r\n                    communityCard.dealTurn(gameTurnRes.m_listCommunityCard);\r\n                }else if(currentGameTurn == \"RIVER\"){\r\n                    communityCard.dealRiver(gameTurnRes.m_listCommunityCard);\r\n                }else if(currentGameTurn == \"END\"){\r\n\r\n                }else{\r\n                    console.log(\"UNKOWN TURN \"+currentGameTurn);\r\n                }\r\n            }\r\n        });\r\n        let playerBet = this.getUI()._getJSPlayerByName(userFirstBetting);\r\n        if(playerBet)\r\n            playerBet.showBetting();\r\n    },\r\n    onUserFold(event){\r\n        let userFoldRes = new PokerEvent.UserFoldEvent().fromEvent(event);\r\n        let player = this.getUI()._getJSPlayerByName(userFoldRes.m_username);\r\n        if(player)\r\n            player.onFoldEvent(userFoldRes);\r\n        if(userFoldRes.m_username == this.ZoneInstance.mySelf.name){\r\n            this.getUI().countOut = 0;\r\n        }\r\n    },\r\n    onUserCall(event){\r\n        let userCallRes = new PokerEvent.UserCallEvent().fromEvent(event);\r\n        let player = this.getUI()._getJSPlayerByName(userCallRes.m_username);\r\n        if(player)\r\n            player.onCallEvent(userCallRes);\r\n        if(userCallRes.m_username == this.ZoneInstance.mySelf.name){\r\n            this.getUI().countOut = 0;\r\n        }\r\n    },\r\n    onUserCheck(event){\r\n        let userCheckRes = new PokerEvent.UserCheckEvent().fromEvent(event);\r\n        let player = this.getUI()._getJSPlayerByName(userCheckRes.m_username);\r\n        if(player)\r\n            player.onCheckEvent(userCheckRes);\r\n        if(userCheckRes.m_username == this.ZoneInstance.mySelf.name){\r\n            this.getUI().countOut = 0;\r\n        }\r\n    },\r\n    onUserRaise(event){\r\n        let userRaiseRes = new PokerEvent.UserRaiseEvent().fromEvent(event);\r\n        let player = this.getUI()._getJSPlayerByName(userRaiseRes.m_username);\r\n        if(player)\r\n            player.onRaiseEvent(userRaiseRes);\r\n        if(userRaiseRes.m_username == this.ZoneInstance.mySelf.name){\r\n            this.getUI().countOut = 0;\r\n        }\r\n    },\r\n    onUserAllIn(event){\r\n        let userAllInRes = new PokerEvent.UserAllInEvent().fromEvent(event);\r\n        let player = this.getUI()._getJSPlayerByName(userAllInRes.m_username);\r\n        if(player)\r\n            player.onAllInEvent(userAllInRes);\r\n        if(userAllInRes.m_username == this.ZoneInstance.mySelf.name){\r\n            this.getUI().countOut = 0;\r\n        }\r\n    },\r\n    onShowDown(event){\r\n        this.getUI().processBetChipToPot();\r\n        let showDownRes = new PokerEvent.ShowDownEvent().fromEvent(event);\r\n        let communityCard = this.getUI().getCommunityCard();\r\n        communityCard.showDown(showDownRes.m_listComCard);\r\n        // stop all timer of player\r\n        for(let i = 0; i < showDownRes.m_listUser.length;i++){\r\n            let name = showDownRes.m_listUser[i];\r\n            let player = this.getUI()._getJSPlayerByName(name);\r\n            if(player)\r\n                player.onShowDownEvent(showDownRes.m_listCard[i]);\r\n        }\r\n    },\r\n    onFinishGame(event){\r\n        this.getUI().turnOffAllTimerPlayers();\r\n        let finishGameRes = new PokerEvent.FinishGameEvent().fromEvent(event);\r\n        let communityCard = this.getUI().getCommunityCard();\r\n\r\n        communityCard.showCommunityCardWin(finishGameRes.m_listPokerHandCard);\r\n\r\n        for(let i = 0; i < finishGameRes.m_listUser.length;i++){\r\n            let name = finishGameRes.m_listUser[i];\r\n            let player = this.getUI()._getJSPlayerByName(name);\r\n            if(player){\r\n                if(finishGameRes.m_listWinner.indexOf(name) >= 0){\r\n                    let typeBestWin = finishGameRes.m_listPokerHand[i];\r\n                    this.getUI().showPokerTextWinner(typeBestWin);\r\n                    this.getUI().runActionPotChipToWinner(finishGameRes.m_listChip[i], name, function (chip, target) {\r\n                        target.onWinnerEvent();\r\n                    }, player);\r\n                }\r\n                player.onGameFinishEvent(finishGameRes.m_listPokerHandCard, finishGameRes.m_listPokerHand[i],finishGameRes.m_listChip[i]);\r\n            }\r\n\r\n        }\r\n        this.m_tableInfo.m_potChip = 0;\r\n        this.m_tableInfo.m_isGameStart = false;\r\n        this.getUI().setMoneyPot(this.m_tableInfo.m_potChip);\r\n    },\r\n    onUserSitOut(event){\r\n        mm.Loading.hide();\r\n        let sitOutRes = new PokerEvent.UserSitOutEvent().fromEvent(event);\r\n        let indexUser = this.m_tableInfo.m_listUserSitOut.indexOf(sitOutRes.m_username);\r\n        if(indexUser < 0){\r\n            this.m_tableInfo.m_listUserSitOut.push(sitOutRes.m_username);\r\n        }else if(!sitOutRes.m_isSitOut){\r\n            this.m_tableInfo.m_listUserSitOut.splice(indexUser, 1);\r\n        }\r\n        let player = this.getUI()._getJSPlayerByName(sitOutRes.m_username);\r\n        if(player)\r\n            player.setSitOut(sitOutRes.m_isSitOut);\r\n        if(this.ZoneInstance.mySelf.name == sitOutRes.m_username){\r\n            if(sitOutRes.m_isSitOut)\r\n                mm.Toast.showToast(1, \"Đăng ký rời bàn!\");\r\n            else\r\n                mm.Toast.showToast(1, \"Hủy rời bàn!\");\r\n        }\r\n    },\r\n    onKickUser(event){\r\n        let kickRes = new PokerEvent.KickUserEvent().fromEvent(event);\r\n        if(kickRes.m_resType == 2){\r\n            if(this.getUI()._getJSPlayerByName(kickRes.m_username) != null){\r\n                this.getUI().removePlayer([kickRes.m_username]);\r\n                if(this.ZoneInstance.mySelf.name == kickRes.m_username){\r\n                    this.getUI().requestLeaveRoom();\r\n                }\r\n            }\r\n        }\r\n    },\r\n    onUserStandUp(event){\r\n\r\n    },\r\n    onPublicMessage(event){\r\n        let sender = event.sender;\r\n        let msg = event.message;\r\n        let data = event.data;\r\n        let dataSender = data != null ? {dn: data.get(\"dn\"), fb : data.get(\"fb\")} : {dn: \"...\", fb : \"\"};\r\n        let msgItem = {};\r\n        msgItem.sender = sender;\r\n        msgItem.msg = msg;\r\n        msgItem.dataSender = dataSender;\r\n        this.getUI().onPublicMessage(msgItem);\r\n    },\r\n});\r\nlet instance = null;\r\nlet getInstance = function () {\r\n    if(instance == null)\r\n        instance = new PokerController(\"UIPoker\", \"poker\");\r\n    return instance;\r\n}\r\nSmartFoxSDK.PokerController = module.exports = getInstance();\r\n"]}