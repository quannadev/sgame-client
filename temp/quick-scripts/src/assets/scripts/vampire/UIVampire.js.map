{"version":3,"sources":["assets/scripts/vampire/UIVampire.js"],"names":["WinGame","require","Helper","reel","line","TrialResult","Language","ListRoom","cc","Enum","Class","VozBaseComponent","properties","reels","type","iconPrefab","Prefab","noticeNode","Node","bgBangThuong","btnQuay","btnQuayNhanh","btnStopQuay","btnAutoQuay","lbNumberLine","Label","lbNumberStake","lbMoneyWin","lbSession","selectLines","listMainLines","isAuto","isFast","isSpin","isFreeSpin","red","lastResult","betSelect","roomNumber","posLineWin","totalLineWin","_TotalColumn","lb_phong","lb_sodu","lb_hu","toggleMusic","Toggle","toggleSound","bgSound","AudioClip","soundSpinMis","soundSpinWin","soundBigWin","soundJackpot","soundBonus","soundClick","soundSpin","menuSetting","_keyMusic","_keySound","_musicSlotState","_soundSlotState","_isFreeTrial","_myMoneyTrial","_mySession","onLoad","TotalItemRun","totalSymbol","winMoney","freeSpin","init","string","Utils","addDotToNumber","GameVariables","Poker","getChip","SmartFoxSDK","VampireController","ZoneInstance","mySelf","schedule","updateJackpot","initSound","musicSave","sys","localStorage","getItem","parseInt","setItem","soundSave","isChecked","musicId","audioEngine","play","pause","onDisable","eventMusic","resume","eventSound","playSpin","playSpinMis","playSpinWin","playBigWin","playJackpot","playBonus","playClick","key","betLevel","variableJackpot","getVariable","jackpot","value","current_lb_jackpot","split","join","currentHu","parseFloat","numberTo","updateUserVariableSlot","event","changedVars","indexOf","user","isItMe","updateFreeSpin","updateUserVariable","subChip","currentUI","onEnable","mm","audio","pauseMusic","undefined","numberWithCommas","getMoneyInRoom","showLineWin","Loading","hide","self","lineArr1","lineArr2","lineArr3","Promise","all","map","index","lastArray","initRandomItems","push","length","then","result","concat","setNumberLines","totalLines","setNumberStake","totalStake","setMoneyWin","totalMoney","updateDataPhong","roomId","eventQuayNhanh","addNotice","getString","checkEnoughMoney","Toast","showToast","pauseSystemEventNode","active","autoQuay","eventAutoQuay","runQuay","getTotalBet","VampireRun","getItemTrial","betRequest","VampireRequest","BetRequest","setBet","setLinesBet","send","toSRequest","eventStopQuay","request","StopAutoPlayRequest","eventPhong","data","getTotalLineSelect","eventSelectLines","eventOpen","totalBet","typeLine","listLine","i","eventQuay","AutoPlayRequest","bet","getTotalLine","getTotalLineLe","getTotalLineChan","setLineLe","setLineChan","setLine","nodeEvent","isPause","setMaterialGray","getComponent","Sprite","pauseSystemEvents","resumeSystemEvents","eventBack","UIManger","show","pop","src","eventSetting","eventVinhDanh","CasinoRequest","LeaderBoardRequest","eventLichSuGiaoDich","HistoryRequest","eventBangThuong","eventCloseBangThuong","getDataResult","cel","cel_index","icon","icons","setIcon","lineWin","freeGift","isBonus","isFree","session","isNoHu","isNohu","isThangLon","runReels","numberItem","listItem","random","newArray","randomArr","reformatResult","size","res","slice","runActionWon","runWinGame","setTimeout","bind","setEventMainLine","children","mainLine","isShow","posLine","onEf","scheduleOnce","offEf","showMainLine","unschedule","offhover","spin","copy","Math","pow","checkHasMoney","message","getChildByName"],"mappings":"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","sourceRoot":"/","sourcesContent":["let WinGame     = require(\"VampireWinGame\");\nlet Helper      = require(\"Helper\");\nlet reel        = require(\"VampireReel\");\nlet line        = require(\"VampireLine\");\nlet TrialResult = require(\"TrialResult\");\nlet Language    = require(\"vampireLanguage\");\nlet ListRoom = cc.Enum({\n    \"1l\"   : 1,\n    \"1k\"    : 2,\n    \"10k\"   : 3\n});\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        reels: {\n            default: [],\n            type: reel,\n        },\n        iconPrefab          : cc.Prefab,\n        noticeNode             : cc.Node,\n        bgBangThuong        : cc.Node,\n        btnQuay             : cc.Node,\n        btnQuayNhanh        : cc.Node,\n        btnStopQuay         : cc.Node,\n        btnAutoQuay         : cc.Node,\n        lbNumberLine        : cc.Label,\n        lbNumberStake       : cc.Label,\n        lbMoneyWin          : cc.Label,\n        lbSession           : cc.Label,\n        selectLines         : line,\n        WinGame             : WinGame,\n        listMainLines       : cc.Node,\n        // edtCheat           : cc.EditBox,\n        isAuto              : false,\n        isFast              : false,\n        isSpin              : false,\n        isFreeSpin          : false,\n        red                 : true,\n        lastResult          : [],\n        betSelect           : 0,\n        roomNumber          : 0,\n        posLineWin          : 0,\n        totalLineWin        : 0,\n        _TotalColumn        : 5,\n        lb_phong: cc.Label,\n        lb_sodu: cc.Label,\n        lb_hu: cc.Label,\n        toggleMusic: cc.Toggle,\n        toggleSound: cc.Toggle,\n        bgSound: cc.AudioClip,\n        soundSpinMis: cc.AudioClip,\n        soundSpinWin: cc.AudioClip,\n        soundBigWin: cc.AudioClip,\n        soundJackpot: cc.AudioClip,\n        soundBonus: cc.AudioClip,\n        soundClick: cc.AudioClip,\n        soundSpin: cc.AudioClip,\n        menuSetting: cc.Node,\n        _keyMusic: \"music_kc\",\n        _keySound: \"sound_kc\",\n        _musicSlotState : 0,\n        _soundSlotState : 0,\n        _isFreeTrial : false,\n        _myMoneyTrial : 0,\n        _mySession : 0,\n    },\n    onLoad () {\n        this._TotalColumn     = 5;\n        this.TotalItemRun     = 20;\n        this.totalSymbol      = 7;\n        this.winMoney         = 0;\n        this.freeSpin         = 0;\n        this.init();\n        this.roomNumber       = ListRoom[\"1l\"];\n        this.lb_sodu.string = Utils.addDotToNumber(GameVariables.Poker.getChip(SmartFoxSDK.VampireController.ZoneInstance.mySelf));\n        this.schedule(this.updateJackpot, 3);\n        this.updateJackpot();\n        this.initSound();\n    },\n    initSound() {\n        var musicSave = cc.sys.localStorage.getItem(this._keyMusic);\n        if (musicSave != null) {\n            this._musicSlotState = parseInt(musicSave);\n        } else {\n            this._musicSlotState = 1;\n            cc.sys.localStorage.setItem(this._keyMusic, \"1\");\n        }\n\n        var soundSave = cc.sys.localStorage.getItem(this._keySound);\n        if (soundSave != null) {\n            this._soundSlotState = parseInt(soundSave);\n        } else {\n            this._soundSlotState = 1;\n            cc.sys.localStorage.setItem(this._keySound, \"1\");\n        }\n        if(this.bgSound != null && !this.toggleMusic.isChecked) {\n            this.musicId = cc.audioEngine.play(this.bgSound, true, 1);\n        }else{\n            cc.audioEngine.pause(this.musicId);\n        }\n    },\n    onDisable(){\n        cc.audioEngine.pause(this.musicId);\n    },\n    eventMusic() {\n        this._musicSlotState         = this.toggleSound.isChecked? 0: 1;\n        if (!this.toggleMusic.isChecked){\n            cc.audioEngine.resume(this.musicId);\n        }else\n            cc.audioEngine.pause(this.musicId);\n        cc.sys.localStorage.setItem(this._keyMusic,  this._musicSlotState);\n    },\n    eventSound() {\n        this._soundSlotState = this.toggleSound.isChecked? 0: 1;\n        cc.sys.localStorage.setItem(this._keySound,  this._soundSlotState);\n    },\n    playSpin() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundSpin, false, 1);\n        }\n    },\n    playSpinMis() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundSpinMis, false, 1);\n        }\n    },\n    playSpinWin() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundSpinWin, false, 1);\n        }\n    },\n    playBigWin() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundBigWin, false, 1);\n        }\n    },\n    playJackpot() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundJackpot, false, 1);\n        }\n    },\n    playBonus() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundBonus, false, 1);\n        }\n    },\n    playClick() {\n        if (this._soundSlotState == 1) {\n            cc.audioEngine.play(this.soundClick, false, 1);\n        }\n    },\n    updateJackpot(){\n        let key = \"vampire\"+cc.betLevel;\n        if(SmartFoxSDK.VampireController.ZoneInstance.mySelf){\n            if(SmartFoxSDK.VampireController.ZoneInstance.mySelf){\n                let variableJackpot = SmartFoxSDK.VampireController.ZoneInstance.mySelf.getVariable(key);\n                if(variableJackpot){\n                    let jackpot = variableJackpot.value;\n                    let current_lb_jackpot = this.lb_hu.string;\n                    current_lb_jackpot = current_lb_jackpot.split(\".\").join(\"\");\n                    let currentHu = parseFloat(current_lb_jackpot);\n                    Utils.numberTo(this.lb_hu, currentHu, jackpot, 1000, true);\n                }\n            }\n\n        }\n    },\n    updateUserVariableSlot(event){\n        let key = \"fsvampire\"+cc.betLevel;\n        if(event.changedVars.indexOf(key) >= 0){\n            // get free spine of room in here\n            //key: \"fs\" + \"vampire1l\" free spin of bet 100\n            // key: \"fs\" + \"vampire1k\" free spin of bet 1000\n            // key: \"fs\" + \"vampire10k\" free spin of bet 1000\n            if(event.user.isItMe){\n                let freeSpin    = SmartFoxSDK.VampireController.ZoneInstance.mySelf.getVariable(key).value;\n                this.freeSpin   = freeSpin;\n                this.WinGame.updateFreeSpin();\n            }\n        }\n    },\n    updateUserVariable(subChip){\n        if (!this._isFreeTrial && cc.currentUI != \"\")\n            this.lb_sodu.string = Utils.addDotToNumber(GameVariables.Poker.getChip(SmartFoxSDK.VampireController.ZoneInstance.mySelf)-subChip);\n    },\n    onEnable(){\n        mm.audio.pauseMusic();\n        if (cc.betLevel == \"choithu\"){\n            this._isFreeTrial     = true;\n            this._myMoneyTrial    = 50000000;\n            this.lb_sodu.string   = Utils.addDotToNumber(50000000);\n            this._mySession       = 0;\n            this.lbSession.string = \"#\"+this._mySession;\n        }else{\n            this._myMoneyTrial = 0;\n            this._isFreeTrial  = false;\n        }\n        this.roomNumber = ListRoom[cc.betLevel];\n        if(this.roomNumber === undefined){\n            cc.betLevel = \"1l\";\n        }\n        this.roomNumber = ListRoom[cc.betLevel];\n        this.roomNumber = (this.roomNumber)%4;\n        this.roomNumber = this.roomNumber < 1 ? 1: this.roomNumber;\n        this.lb_phong.string = Helper.numberWithCommas(this.getMoneyInRoom());\n        this.selectLines.init(this);\n        this.WinGame.init(this);\n        this.lbMoneyWin.string = \"0\";\n        this.showLineWin(false);\n        mm.Loading.hide();\n    },\n    init: function() {\n        let self = this;\n        let lineArr1 = [];\n        let lineArr2 = [];\n        let lineArr3 = [];\n        Promise.all(this.reels.map(function(reel, index) {\n            let lastArray = [];\n            lastArray = self.initRandomItems(self.TotalItemRun);\n\n            lineArr1.push(lastArray[lastArray.length-1]);\n            lineArr2.push(lastArray[lastArray.length-2]);\n            lineArr3.push(lastArray[lastArray.length-3]);\n            reel.init(self, lastArray);\n        })).then(result => {\n            self.lastResult = lineArr3.concat(lineArr2).concat(lineArr1);\n        });\n    },\n    setNumberLines: function(totalLines) {\n        this.lbNumberLine.string = totalLines;\n    },\n    setNumberStake: function(totalStake) {\n        this.lbNumberStake.string = Helper.numberWithCommas(totalStake*this.getMoneyInRoom());\n    },\n    setMoneyWin: function(totalMoney) {\n        Helper.numberTo(this.lbMoneyWin, parseInt(this.lbMoneyWin.string), totalMoney, 1200, true);\n        if (!this._isFreeTrial){\n            this.lb_sodu.string = Utils.addDotToNumber(GameVariables.Poker.getChip(SmartFoxSDK.VampireController.ZoneInstance.mySelf));\n        }else{\n            this._myMoneyTrial = this._myMoneyTrial + this.winMoney;\n            this.lb_sodu.string = Utils.addDotToNumber(this._myMoneyTrial);\n        }\n        this.isSpin    = false;\n    },\n    updateDataPhong(roomId) {\n\n    },\n    // update (dt) {},\n    eventQuayNhanh: function() {\n        if (this._isFreeTrial){\n            this.addNotice(Language.getString(\"noti_not_trial\"));\n            return;\n        }\n        if(!this.checkEnoughMoney()){\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\n            return;\n        }\n        if (this.isSpin){\n            this.addNotice(Language.getString(\"noti_is_playing\"));\n            return;\n        }\n\n        this.isSpin = true;\n        this.isFast = true;\n        this.isAuto = true;\n        this.pauseSystemEventNode(this.btnAutoQuay, false);\n        this.pauseSystemEventNode(this.btnQuayNhanh, true);\n        this.btnStopQuay.active = true;\n        this.autoQuay();\n    },\n    eventAutoQuay: function() {\n        if (this._isFreeTrial){\n            this.addNotice(Language.getString(\"noti_not_trial\"));\n            return;\n        }\n        if(!this.checkEnoughMoney()){\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\n            return;\n        }\n        if (this.isSpin){\n            this.addNotice(Language.getString(\"noti_is_playing\"));\n            return;\n        }\n        this.isSpin = true;\n        this.isFast = false;\n        this.isAuto = true;\n        this.pauseSystemEventNode(this.btnAutoQuay, true);\n        this.pauseSystemEventNode(this.btnQuayNhanh, false);\n        this.btnStopQuay.active = true;\n        this.autoQuay();\n    },\n    runQuay() {\n        if (this._isFreeTrial){\n            this.isSpin    = true;\n            this._myMoneyTrial = this._myMoneyTrial-this.getTotalBet();\n            if (this.freeSpin < 1)\n                this.lb_sodu.string = Utils.addDotToNumber(this._myMoneyTrial);\n            if (this._myMoneyTrial < 1)\n                mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\n            this._mySession++;\n            this.VampireRun(TrialResult.getItemTrial());\n            this.freeSpin--;\n        }else{\n            this.playSpin();\n            this.isSpin    = true;\n            let betRequest = new VampireRequest.BetRequest();\n            this.showLineWin(false);\n            betRequest.setBet(this.getMoneyInRoom());\n            this.setLinesBet(betRequest);\n            if(!this.checkEnoughMoney()){\n                mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\n                return;\n            }\n            SmartFoxSDK.VampireController.ZoneInstance.send(betRequest.toSRequest());\n            // sub money\n            if (this.freeSpin < 1)\n                this.lb_sodu.string = Utils.addDotToNumber(GameVariables.Poker.getChip(SmartFoxSDK.VampireController.ZoneInstance.mySelf) - this.getTotalBet());\n        }\n    },\n    eventStopQuay: function() {\n        this.isFast = false;\n        this.isAuto = false;\n        this.btnStopQuay.active = false;\n        this.pauseSystemEventNode(this.btnAutoQuay, false);\n        this.pauseSystemEventNode(this.btnQuayNhanh, false);\n\n        let request = new VampireRequest.StopAutoPlayRequest();\n        SmartFoxSDK.VampireController.ZoneInstance.send(request.toSRequest());\n    },\n    eventPhong: function(event, data) {\n        if (this._isFreeTrial){\n            this.addNotice(Language.getString(\"noti_not_trial\"));\n            return;\n        }\n        if (this.isSpin || this.isAuto || this.isFast){\n            this.addNotice(Language.getString(\"noti_is_playing\"));\n            return;\n        }\n        this.roomNumber = (this.roomNumber + 1)%4;\n        this.roomNumber = this.roomNumber < 1 ? 1: this.roomNumber;\n        this.lb_phong.string = Helper.numberWithCommas(this.getMoneyInRoom());\n       this.setNumberStake(this.selectLines.getTotalLineSelect());\n        if(this.roomNumber == 1){\n            cc.betLevel = \"1l\";\n        }else if(this.roomNumber == 2){\n            cc.betLevel = \"1k\";\n        }else if(this.roomNumber == 3){\n            cc.betLevel = \"10k\";\n        }\n        this.updateJackpot();\n    },\n    eventSelectLines: function(){\n        if (this._isFreeTrial){\n            this.addNotice(Language.getString(\"noti_not_trial\"));\n            return;\n        }\n        if (this.isSpin || this.isAuto || this.isFast){\n            this.addNotice(Language.getString(\"noti_is_playing\"));\n            return;\n        }\n        this.selectLines.eventOpen();\n    },\n    checkEnoughMoney(){\n        let totalBet = this.getMoneyInRoom() * 25;\n        switch (this.selectLines.typeLine) {\n            case 1:\n                totalBet = this.getMoneyInRoom() * 13;\n                break;\n            case 2:\n                totalBet = this.getMoneyInRoom() * 12;\n                break;\n            case 3:\n                let listLine = [];\n                for (let i=1; i< this.selectLines.data.length; i++){\n                    if (this.selectLines.data[i]){\n                        listLine.push(i);\n                    }\n                }\n                totalBet = this.getMoneyInRoom() * listLine.length;\n                break;\n        }\n        if(GameVariables.Poker.getChip(SmartFoxSDK.VampireController.ZoneInstance.mySelf) < totalBet){\n            return false;\n        }\n        return true;\n    },\n    autoQuay() {\n        if (this._isFreeTrial){\n            if (this.freeSpin > 0){\n                this.eventQuay();\n            }\n        }else {\n            if (this.freeSpin < 1){\n                if (this.isAuto){\n                    let request    = new VampireRequest.AutoPlayRequest();\n                    request.setBet(this.getMoneyInRoom());\n                    this.setLinesBet(request);\n                    if(!this.checkEnoughMoney()){\n                        mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\n                        return;\n                    }\n                    SmartFoxSDK.VampireController.ZoneInstance.send(request.toSRequest());\n                    this.lb_sodu.string = Utils.addDotToNumber(GameVariables.Poker.getChip(SmartFoxSDK.VampireController.ZoneInstance.mySelf) - this.getTotalBet());\n                }\n            }else{\n                this.eventQuay();\n            }\n        }\n    },\n\n    getTotalBet(){\n        let bet = this.getMoneyInRoom();\n        switch (this.selectLines.typeLine) {\n            case 0: // all\n                return this.selectLines.getTotalLine() * bet;\n            case 1: // le\n                return this.selectLines.getTotalLineLe()* bet;\n            case 2: // chan\n                return this.selectLines.getTotalLineChan()* bet;\n            case 3:\n                return this.selectLines.getTotalLineSelect() * bet;\n        }\n        return bet;\n    },\n    setLinesBet(request){\n        switch (this.selectLines.typeLine) {\n            case 1:\n                request.setLineLe();\n                break;\n            case 2:\n                request.setLineChan();\n                break;\n            case 3:\n                let listLine = [];\n                for (let i=1; i< this.selectLines.data.length; i++){\n                    if (this.selectLines.data[i]){\n                        listLine.push(i);\n                    }\n                }\n                request.setLine(listLine);\n                break;\n        }\n    },\n    eventQuay: function() {\n        if(!this._isFreeTrial && !this.checkEnoughMoney()){\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\n            return;\n        }\n        this.pauseSystemEventNode(this.btnQuay, true);\n        this.runQuay();\n    },\n    pauseSystemEventNode: function(nodeEvent, isPause) {\n        Helper.setMaterialGray( nodeEvent.getComponent(cc.Sprite), isPause);\n        if (isPause){\n            nodeEvent.pauseSystemEvents(true);\n        }else\n            nodeEvent.resumeSystemEvents(true);\n    },\n    eventBack: function() {\n        if (this.isSpin || this.isAuto || this.isFast){\n            this.addNotice(Language.getString(\"noti_is_playing\"));\n            return;\n        }\n        UIManger.show(\"UIVampireLobby\", {pop: true, src: \"vampire\"});\n    },\n    eventSetting: function() {\n        this.menuSetting.active = !this.menuSetting.active;\n    },\n    eventVinhDanh: function() {\n        let request = new CasinoRequest.LeaderBoardRequest();\n        SmartFoxSDK.VampireController.ZoneInstance.send(request.toSRequest());\n    },\n    eventLichSuGiaoDich: function() {\n        let request = new CasinoRequest.HistoryRequest();\n        SmartFoxSDK.VampireController.ZoneInstance.send(request.toSRequest());\n    },\n    eventBangThuong: function() {\n        this.bgBangThuong.active = true;\n    },\n    eventCloseBangThuong: function() {\n        this.bgBangThuong.active = false;\n    },\n    VampireRun: function(data){\n        this.showLineWin(false);\n        var self = this;\n        let result = this.getDataResult(data.result);\n        Promise.all(result.map(function(cel, cel_index){\n            Promise.all(cel.map(function(icon, index){\n                self.reels[cel_index].icons[index].setIcon(icon, true);\n            }));\n        }));\n        this.lineWin    = data.lineWin;\n        this.winMoney   = data.winMoney;\n        this.freeGift   = data.freeGift;\n        this.isBonus    = data.isBonus;\n        this.isFree     = data.isFreeSpin;\n        this.session    = data.session;\n        this.isNoHu     = data.isNohu;\n        this.isThangLon = data.isThangLon;\n        this.freeSpin   = data.freeSpin;\n        this.type       = data.type;\n        this.runReels();\n        if (!data.isFreeSpin)\n            this.WinGame.updateFreeSpin();\n        if (this._isFreeTrial){\n            this.lbSession.string = \"#\"+this._mySession;\n        }else{\n            this.lbSession.string = \"#\"+this.session;\n        }\n    },\n    initRandomItems: function(numberItem) {\n        let listItem = [];\n        for (let i=0; i< numberItem; i++){\n            listItem[i] = this.random();\n        }\n        return listItem;\n    },\n    getDataResult: function(result) {\n        let self = this;\n        let newArray = [];\n        for (let i=0; i< this._TotalColumn; i++){\n            newArray[i] = [];\n        }\n        for (let i=0; i< result.length; i++) {\n            newArray[i%self._TotalColumn].push(result[i]);\n        }\n        for (let i=0; i< this._TotalColumn; i++){\n            let randomArr = this.initRandomItems(this.TotalItemRun-6);\n            newArray[i] = newArray[i].concat(randomArr);\n        }\n        for (let i=0; i<  this.lastResult.length; i++) {\n            newArray[i%self._TotalColumn].push( this.lastResult[i]);\n        }\n        this.lastResult = result;\n        return newArray;\n    },\n    reformatResult(result, size) {\n        let res = [];\n        for(let i=0;i < result.length; i = i+size)\n            res.push(result.slice(i,i+size));\n        return res;\n    },\n    runActionWon: function() {\n        this.showLineWin(true);\n        this.WinGame.runWinGame();\n        this.pauseSystemEventNode(this.btnQuay, false);\n    },\n    resume() {\n        if (this.winMoney > 0){\n            setTimeout(function(){\n                this.WinGame.runWinGame();\n            }.bind(this), 300);\n        }else {\n            this.WinGame.runWinGame();\n        }\n    },\n    setEventMainLine: function(isPause) {\n        Promise.all(this.listMainLines.children.map(function(mainLine, index){\n            if (isPause)\n                mainLine.pauseSystemEvents(true);\n            else\n                mainLine.resumeSystemEvents(true);\n        }));\n    },\n    showLineWin: function(isShow) {\n        // add money\n        let self = this;\n        if (isShow){\n            this.setEventMainLine(isShow);\n            this.totalLineWin   = this.lineWin.length;\n            this.posLineWin     = 0;\n            if (this.totalLineWin > 0){\n                Promise.all(this.lineWin.map(function(posLine){\n                    self.listMainLines.children[posLine].getComponent(\"VampireMainLine\").onEf();\n                }));\n                this.scheduleOnce(function(){\n                    Promise.all(self.lineWin.map(function(posLine){\n                        self.listMainLines.children[posLine].getComponent(\"VampireMainLine\").offEf();\n                    }));\n                    self.schedule( this.showMainLine, 1);\n                }, 2);\n            }\n        }else {\n            this.unschedule(this.showMainLine);\n            if (this.lineWin && this.lineWin.length > 0) {\n                Promise.all(this.lineWin.map(function (posLine) {\n                    self.listMainLines.children[posLine].getComponent(\"VampireMainLine\").offhover();\n                    self.listMainLines.children[posLine].pauseSystemEvents(true);\n                }));\n            }\n        }\n    },\n    showMainLine: function() {\n        if (this.lineWin.length > 0){\n            if (this.listMainLines.children[this.lineWin[this.posLineWin%this.totalLineWin]] != undefined)\n                this.listMainLines.children[this.lineWin[this.posLineWin%this.totalLineWin]].getComponent(\"VampireMainLine\").offEf();\n            this.posLineWin = (this.posLineWin+1)%this.totalLineWin;\n            if (this.listMainLines.children[this.lineWin[this.posLineWin]] != undefined)\n                this.listMainLines.children[this.lineWin[this.posLineWin]].getComponent(\"VampireMainLine\").onEf();\n        }\n    },\n    runReels: function () {\n        Promise.all(this.reels.map(function(reel, index) {\n            reel.spin(index);\n        }));\n    },\n    copy: function(){\n        Promise.all(this.reels.map(function(reel){\n            reel.icons[reel.icons.length-1].setIcon(reel.icons[2].data);\n            reel.icons[reel.icons.length-2].setIcon(reel.icons[1].data);\n            reel.icons[reel.icons.length-3].setIcon(reel.icons[0].data);\n        }));\n    },\n    random: function(){\n        return  ~~(Math.random()*this.totalSymbol);\n    },\n    getMoneyInRoom: function() {\n        return 10*Math.pow(10, this.roomNumber);\n    },\n    checkHasMoney: function() {\n        return true;\n    },\n    addNotice: function (message) {\n        let self = this;\n        this.noticeNode.active = true;\n        this.noticeNode.getChildByName(\"lb_noti\").getComponent(cc.Label).string = message;\n        setTimeout(function(){\n            self.noticeNode.active = false;\n        }, 1200);\n    }\n});\n"]}