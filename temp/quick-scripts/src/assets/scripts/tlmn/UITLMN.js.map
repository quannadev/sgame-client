{"version":3,"sources":["assets\\scripts\\tlmn\\UITLMN.js"],"names":["TLMNCard","require","TLMNEvent","Helper","cc","Class","BaseGame","properties","ChatEmojiLayer","Node","POS_4","MyHand","CardsDrop","preCard","Prefab","Fold","Fire","UnSelect","SortCard","EffectFightType","edtCheat1","EditBox","edtCheat2","TypeSord","onEnable","newMatch","_room","_data","room","_number_desk","_CURRENT_POS","poses","i","_children","length","pos","push","on","requestSitOn","active","WaitingTimer","resetUI","onDisable","nodePlayers","removeAllChildren","hideDeskEmpty","updateUserVariable","subChip","jsPlayer","_getJSPlayerByName","SmartFoxSDK","TLMNController","ZoneInstance","mySelf","name","setMoney","GameVariables","Poker","getChip","newRound","hideAllButtonAction","showAllButtonAction","isReady","isReadyFire","setMaterialGray","getComponent","Sprite","showButtonUnSelect","hideButtonUnSelect","actionFire","event","mm","audio","playButton","cardsSelect","getCardSelected","cardsByte","cardsToArrayByte","request","TLMNRequest","FireRequest","setRoomId","id","setCards","send","toSRequest","actionSortCard","self","myCards","getCardsId","newCards","TLMN","sortCardType","Promise","all","map","cardNode","index","addCard","actionFold","controller","m_tableInfo","m_currentUser","FoldRequest","actionUnSelect","refreshPositionCards","eventSelectCard","cId","selectCards","lastCard","lastCards","suggestCards","suggestNoCards","card","_getCardFromId","jsCard","_isSelected","y","height","cards","byteCard","getCard","isNoNeedTurn","me","isValidateFightNoNeedTurn","arrCardsDrop","_dealCards","m_listDesk","cb","sortCards","content","node","getChildByName","j","desk","nodePlayer","_getNodePlayerById","DeskId","_getJSPlayer","updatePosHand","instantiate","js","init","x","scale","cardIndex","addChild","posMove","getPosCardHand","scaleTo","isItMe","move","moveTo","actionScale","spwan","spawn","runAction","sequence","delayTime","callFunc","updateCardSize","addMyHand","removeFromParent","scheduleOnce","playChiaBai2","Array","isArray","detalX","width","count","reveal","Card","_removeSelect","deltaX","addEventSelect","bind","cardsId","resetLastCard","processUserFire","playerNode","log","uiCards","isValid","addLastCard","sizeCard","allIds","listCars","getCardsReady","card01","pointName","suit","showEffectWinWhite","typePerfect","animation","sp","Skeleton","setAnimation","showEffectTypeFire","type","FireEvent","ERROR","NONE","TUQUI_CHAT_HEO","TUQUI_CHAT_2HEO","TUQUI_CHAT_3DOI_THONG","THREE_DOI_THONG_CHAT_HEO","FOUR_DOI_THONG_CHAT_HEO","FOUR_DOI_THONG_CHAT_2HEO","FOUR_DOI_THONG_CHAT_3DOI_THONG","FOUR_DOI_THONG_CHAT_TUQUI","nodeFire","indexDrop","uiCard","undefined","reset","position","getPositionInOtherNode","parent","zIndex","newPos","v2","opacity","isSelected","eventBack","m_isGameStart","m_listActiveUserName","requestLeaveRoom","isSitOut","m_listUserSitOut","indexOf","sitOutRequest","SitOutRequest","setSitOut","myName","sitOnRequest","SitOnRequest","setAutoSitOn","eventCheat1","parseInt","string","trim","CheatReequst","setTypeUser","eventCheat2","eventShowChat","data","initController","onPublicMessage","messData","playerJs","sender","msg"],"mappings":";;;;;;AAAA,IAAIA,QAAQ,GAAIC,OAAO,CAAC,UAAD,CAAvB;;AACA,IAAIC,SAAS,GAAGD,OAAO,CAAC,WAAD,CAAvB;;AACA,IAAIE,MAAM,GAAMF,OAAO,CAAC,QAAD,CAAvB;;AAEAG,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,QADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,cAAc,EAAEJ,EAAE,CAACK,IADX;AAERC,IAAAA,KAAK,EAAEN,EAAE,CAACK,IAFF;AAGRE,IAAAA,MAAM,EAAEP,EAAE,CAACK,IAHH;AAIRG,IAAAA,SAAS,EAAER,EAAE,CAACK,IAJN;AAKRI,IAAAA,OAAO,EAAET,EAAE,CAACU,MALJ;AAMRC,IAAAA,IAAI,EAAEX,EAAE,CAACK,IAND;AAORO,IAAAA,IAAI,EAAEZ,EAAE,CAACK,IAPD;AAQRQ,IAAAA,QAAQ,EAAEb,EAAE,CAACK,IARL;AASRS,IAAAA,QAAQ,EAAEd,EAAE,CAACK,IATL;AAURU,IAAAA,eAAe,EAAEf,EAAE,CAACK,IAVZ;AAWRW,IAAAA,SAAS,EAAEhB,EAAE,CAACiB,OAXN;AAYRC,IAAAA,SAAS,EAAElB,EAAE,CAACiB,OAZN;AAaRE,IAAAA,QAAQ,EAAE;AAbF,GAHP;AAkBLC,EAAAA,QAlBK,sBAkBK;AACN,SAAKC,QAAL;AACA,SAAKC,KAAL,GAAa,KAAKC,KAAL,CAAWC,IAAxB;AACA,SAAKC,YAAL,GAAoB,CAApB;AACA,SAAKC,YAAL,GAAoB,KAAKpB,KAAzB;AACA,SAAKqB,KAAL,GAAa,EAAb;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKF,YAAL,CAAkBG,SAAlB,CAA4BC,MAA/C,EAAsDF,CAAC,EAAvD,EAA0D;AACtD,UAAIG,GAAG,GAAG,KAAKL,YAAL,CAAkBG,SAAlB,CAA4BD,CAA5B,CAAV;AACA,WAAKD,KAAL,CAAWK,IAAX,CAAgB,KAAKN,YAAL,CAAkBG,SAAlB,CAA4BD,CAA5B,CAAhB;AACAG,MAAAA,GAAG,CAACE,EAAJ,CAAO,UAAP,EAAmB,YAAY;AAC3B,aAAKC,YAAL;AACH,OAFD,EAEG,IAFH;AAGAH,MAAAA,GAAG,CAACI,MAAJ,GAAa,KAAb;AACH;;AACD,SAAKC,YAAL,CAAkBD,MAAlB,GAA2B,KAA3B;AACA,SAAKhB,QAAL,GAAgB,CAAhB;AACH,GAlCI;AAmCLkB,EAAAA,OAnCK,qBAmCK;AACN,SAAKD,YAAL,CAAkBD,MAAlB,GAA2B,KAA3B;AACH,GArCI;AAsCLG,EAAAA,SAtCK,uBAsCM;AACP,SAAKC,WAAL,CAAiBC,iBAAjB,CAAmC,IAAnC;AACA,SAAKC,aAAL;AACA,SAAKL,YAAL,CAAkBD,MAAlB,GAA2B,KAA3B;AACH,GA1CI;AA2CLO,EAAAA,kBA3CK,8BA2CcC,OA3Cd,EA2CsB;AACvB,QAAIC,QAAQ,GAAM,KAAKC,kBAAL,CAAwBC,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCC,MAAxC,CAA+CC,IAAvE,CAAlB;;AACAN,IAAAA,QAAQ,CAACO,QAAT,CAAkBC,aAAa,CAACC,KAAd,CAAoBC,OAApB,CAA4BR,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCC,MAApE,IAA4EN,OAA9F;AACH,GA9CI;AA+CLtB,EAAAA,QA/CK,sBA+CK;AACR,SAAKkC,QAAL;AACA,SAAKC,mBAAL;AACA,SAAKjD,MAAL,CAAYiC,iBAAZ,CAA8B,IAA9B;AACE,SAAK1B,QAAL,CAAcqB,MAAd,GAA2B,KAA3B;AACH,GApDI;AAqDLqB,EAAAA,mBArDK,iCAqDgB;AACjB,SAAK5C,IAAL,CAAUuB,MAAV,GAAuB,KAAvB;AACA,SAAKxB,IAAL,CAAUwB,MAAV,GAAuB,KAAvB;AACA,SAAKtB,QAAL,CAAcsB,MAAd,GAAuB,KAAvB;AACH,GAzDI;AA0DLsB,EAAAA,mBA1DK,iCA0DgB;AACjB,QAAIC,OAAO,GAAY,KAAKC,WAAL,EAAvB;AACA5D,IAAAA,MAAM,CAAC6D,eAAP,CAAuB,KAAKhD,IAAL,CAAUiD,YAAV,CAAuB7D,EAAE,CAAC8D,MAA1B,CAAvB,EAA0D,CAACJ,OAA3D;AACA3D,IAAAA,MAAM,CAAC6D,eAAP,CAAuB,KAAKjD,IAAL,CAAUkD,YAAV,CAAuB7D,EAAE,CAAC8D,MAA1B,CAAvB,EAA0D,KAA1D;AACA,SAAKlD,IAAL,CAAUuB,MAAV,GAAuB,IAAvB;AACA,SAAKxB,IAAL,CAAUwB,MAAV,GAAuB,IAAvB;AACH,GAhEI;AAiEL4B,EAAAA,kBAjEK,gCAiEe;AAChB,SAAKlD,QAAL,CAAcsB,MAAd,GAAuB,IAAvB;AACH,GAnEI;AAoEL6B,EAAAA,kBApEK,gCAoEe;AAChB,SAAKnD,QAAL,CAAcsB,MAAd,GAAuB,KAAvB;AACH,GAtEI;AAuEL8B,EAAAA,UAvEK,sBAuEMC,KAvEN,EAuEY;AACbC,IAAAA,EAAE,CAACC,KAAH,CAASC,UAAT;AACA,QAAIC,WAAW,GAAG,KAAKC,eAAL,EAAlB;AACA,QAAIC,SAAS,GAAG,KAAKC,gBAAL,CAAsBH,WAAtB,CAAhB;;AACA,QAAGE,SAAS,CAAC1C,MAAV,GAAmB,CAAtB,EAAwB;AACpB,UAAI4C,OAAO,GAAG,IAAIC,WAAW,CAACC,WAAhB,GAA8BC,SAA9B,CAAwC,KAAKvD,KAAL,CAAWwD,EAAnD,EAAuDC,QAAvD,CAAgEP,SAAhE,CAAd;AACA1B,MAAAA,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCgC,IAAxC,CAA6CN,OAAO,CAACO,UAAR,EAA7C;AACH;AACJ,GA/EI;AAgFLC,EAAAA,cAhFK,0BAgFUhB,KAhFV,EAgFgB;AACjBC,IAAAA,EAAE,CAACC,KAAH,CAASC,UAAT;AACA,QAAIc,IAAI,GAAU,IAAlB;AACA,QAAIC,OAAO,GAAO,KAAKC,UAAL,EAAlB;AACA,SAAKlE,QAAL,GAAkB,CAAC,KAAKA,QAAL,GAAc,CAAf,IAAkB,CAApC;AACA,QAAImE,QAAQ,GAAM1F,QAAQ,CAAC2F,IAAT,CAAcC,YAAd,CAA2BJ,OAA3B,EAAoC,KAAKjE,QAAzC,CAAlB;;AACA,QAAImE,QAAQ,CAACxD,MAAT,IAAmBsD,OAAO,CAACtD,MAA/B,EAAsC;AAClC2D,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKnF,MAAL,CAAYsB,SAAZ,CAAsB8D,GAAtB,CAA0B,UAASC,QAAT,EAAmBC,KAAnB,EAAyB;AAC3DV,QAAAA,IAAI,CAACW,OAAL,CAAaR,QAAQ,CAACO,KAAD,CAArB,EAA8BD,QAA9B;AACH,OAFW,CAAZ;AAGH;AACJ,GA3FI;AA4FLG,EAAAA,UA5FK,sBA4FM7B,KA5FN,EA4FY;AACbC,IAAAA,EAAE,CAACC,KAAH,CAASC,UAAT;;AACA,QAAG,KAAK2B,UAAL,CAAgBC,WAAhB,CAA4BC,aAA5B,IAA6CpD,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCC,MAAxC,CAA+CC,IAA/F,EAAoG;AAChG,UAAIwB,OAAO,GAAG,IAAIC,WAAW,CAACwB,WAAhB,GAA8BtB,SAA9B,CAAwC,KAAKvD,KAAL,CAAWwD,EAAnD,CAAd;AACAhC,MAAAA,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCgC,IAAxC,CAA6CN,OAAO,CAACO,UAAR,EAA7C;AACH;AACJ,GAlGI;AAmGLmB,EAAAA,cAnGK,0BAmGUlC,KAnGV,EAmGgB;AACjB,SAAKmC,oBAAL;AACH,GArGI;AAsGLC,EAAAA,eAtGK,2BAsGWC,GAtGX,EAsGe;AAChB,QAAIC,WAAW,GAAG,KAAKjC,eAAL,EAAlB;AACA,QAAIC,SAAS,GAAG,KAAKC,gBAAL,CAAsB+B,WAAtB,CAAhB;AACA,QAAIC,QAAQ,GAAO,KAAKC,SAAxB;AACA,QAAIC,YAAY,GAAG,EAAnB;AACA,QAAI,KAAKD,SAAL,CAAe5E,MAAf,GAAwB,CAA5B,EACI6E,YAAY,GAAG/G,QAAQ,CAAC2F,IAAT,CAAcoB,YAAd,CAA2BJ,GAA3B,EAAgCE,QAAhC,EAA0C,KAAKpB,UAAL,EAA1C,CAAf,CADJ,KAGIsB,YAAY,GAAG/G,QAAQ,CAAC2F,IAAT,CAAcqB,cAAd,CAA6BpC,SAA7B,EAAwC,KAAKa,UAAL,EAAxC,CAAf;;AACJ,SAAI,IAAIzD,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG+E,YAAY,CAAC7E,MAAhC,EAAuCF,CAAC,EAAxC,EAA2C;AACvC,UAAIiF,IAAI,GAAG,KAAKC,cAAL,CAAoBH,YAAY,CAAC/E,CAAD,CAAhC,CAAX;;AACA,UAAImF,MAAM,GAAGF,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAb;AACA6D,MAAAA,MAAM,CAACC,WAAP,GAAqB,IAArB;AACAH,MAAAA,IAAI,CAACI,CAAL,GAASJ,IAAI,CAACK,MAAL,GAAY,GAAZ,GAAkB,EAA3B;AACH;;AACD,QAAGV,WAAW,CAAC1E,MAAZ,IAAsB,CAAzB,EAA2B;AACvB,WAAKiC,kBAAL;AACH,KAFD,MAEK;AACD,WAAKC,kBAAL;AACH;AACJ,GA1HI;AA2HLS,EAAAA,gBA3HK,4BA2HY0C,KA3HZ,EA2HkB;AACnB,QAAIC,QAAQ,GAAG,EAAf;;AACA,SAAI,IAAIxF,CAAR,IAAauF,KAAb,EAAmB;AACf,UAAIN,IAAI,GAAGM,KAAK,CAACvF,CAAD,CAAhB;AACA,UAAImF,MAAM,GAAGF,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAb;AACAkE,MAAAA,QAAQ,CAACpF,IAAT,CAAc+E,MAAM,CAACM,OAAP,GAAiBvC,EAA/B;AACH;;AACD,WAAOsC,QAAP;AACH,GAnII;AAoILE,EAAAA,YApIK,0BAoIS;AACV,QAAIC,EAAE,GAAGzE,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCC,MAAjD;AACA,QAAG,CAAC,KAAKJ,kBAAL,CAAwB0E,EAAxB,CAAJ,EACI,OAAO,KAAP;AACJ,QAAInC,OAAO,GAAG,KAAKC,UAAL,EAAd;;AACA,QAAGzF,QAAQ,CAAC2F,IAAT,CAAciC,yBAAd,CAAwCpC,OAAxC,EAAiD,KAAKsB,SAAtD,CAAH,EAAoE;AAChE,aAAO,IAAP;AACH;;AACD,WAAO,KAAP;AACH,GA7II;AA8ILnD,EAAAA,QA9IK,sBA8IK;AACN,SAAKxC,eAAL,CAAqBoB,MAArB,GAA8B,KAA9B;AACA,SAAKuE,SAAL,GAAiB,EAAjB;AACA,SAAKlG,SAAL,CAAegC,iBAAf,CAAiC,IAAjC;AACA,SAAKiF,YAAL,GAAoB,EAApB,CAJM,CAMN;AACA;AACA;AACH,GAvJI;AAwJLC,EAAAA,UAxJK,sBAwJMC,UAxJN,EAwJkBvC,OAxJlB,EAwJ2BwC,EAxJ3B,EAwJ8B;AAAA;;AAC/B;AACAhI,IAAAA,QAAQ,CAAC2F,IAAT,CAAcsC,SAAd,CAAwBzC,OAAxB,EAAiC,KAAKjE,QAAtC;AACA,SAAKZ,MAAL,CAAYiC,iBAAZ,CAA8B,IAA9B;AACA,QAAIsF,OAAO,GAAG,KAAKC,IAAL,CAAUC,cAAV,CAAyB,SAAzB,CAAd;AACA,QAAI7C,IAAI,GAAG,IAAX;;AACA,SAAI,IAAIvD,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,EAAnB,EAAuBA,CAAC,EAAxB,EAA2B;AAAA,iCACfqG,CADe;AAEnB,YAAIC,IAAI,GAAGP,UAAU,CAACM,CAAD,CAArB;;AACA,YAAIE,UAAU,GAAG,KAAI,CAACC,kBAAL,CAAwBF,IAAI,CAACG,MAA7B,CAAjB;;AACA,YAAIzF,QAAQ,GAAG,KAAI,CAAC0F,YAAL,CAAkBH,UAAlB,CAAf;;AACAvF,QAAAA,QAAQ,CAAC2F,aAAT;AACA,YAAI1B,IAAI,GAAG7G,EAAE,CAACwI,WAAH,CAAe,KAAI,CAAC/H,OAApB,CAAX;AACA,YAAIgI,EAAE,GAAG5B,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAT;AAEAuF,QAAAA,EAAE,CAACC,IAAH,CAAQ,IAAR;AACA7B,QAAAA,IAAI,CAAC8B,CAAL,GAAS,CAAT;AACA9B,QAAAA,IAAI,CAACI,CAAL,GAAS,CAAT;AACAJ,QAAAA,IAAI,CAAC+B,KAAL,GAAa,GAAb;AACAH,QAAAA,EAAE,CAACI,SAAH,GAAejH,CAAf;AACAkG,QAAAA,OAAO,CAACgB,QAAR,CAAiBjC,IAAjB,EAAuB,EAAEjF,CAAC,GAAG+F,UAAU,CAAC7F,MAAf,GAAuBmG,CAAzB,IAA8B,GAArD;AAEA,YAAIc,OAAO,GAAGnG,QAAQ,CAACoG,cAAT,EAAd;AACA,YAAIC,OAAO,GAAG,GAAd;;AAEA,YAAGrG,QAAQ,CAACsG,MAAT,EAAH,EAAqB;AACjBH,UAAAA,OAAO,CAACJ,CAAR,GAAY,CAAC,GAAD,GAAO,CAAC/G,CAAC,GAAG,CAAL,IAAU,EAA7B;AACAqH,UAAAA,OAAO,GAAG,GAAV;AACH;;AACD,YAAIE,IAAI,GAAGnJ,EAAE,CAACoJ,MAAH,CAAU,GAAV,EAAeL,OAAf,CAAX;AACA,YAAIM,WAAW,GAAGrJ,EAAE,CAACiJ,OAAH,CAAW,GAAX,EAAgBA,OAAhB,CAAlB;AACA,YAAIK,KAAK,GAAGtJ,EAAE,CAACuJ,KAAH,CAASJ,IAAT,EAAeE,WAAf,CAAZ;AACAxC,QAAAA,IAAI,CAAC2C,SAAL,CAAexJ,EAAE,CAACyJ,QAAH,CAAYzJ,EAAE,CAAC0J,SAAH,CAAa9H,CAAC,GAAC,GAAf,CAAZ,EAAgC0H,KAAhC,EAAuCtJ,EAAE,CAAC2J,QAAH,CAAY,YAAY;AAC1E/G,UAAAA,QAAQ,CAACgH,cAAT,CAAwBnB,EAAE,CAACI,SAAH,GAAe,CAAvC;;AACA,cAAGjG,QAAQ,CAACsG,MAAT,EAAH,EAAqB;AACjB,gBAAIT,GAAE,GAAG,KAAK5E,YAAL,CAAkB,KAAKX,IAAvB,CAAT;;AACAiC,YAAAA,IAAI,CAAC0E,SAAL,CAAezE,OAAO,CAACqD,GAAE,CAACI,SAAJ,CAAtB;;AACA,gBAAGJ,GAAE,CAACI,SAAH,IAAgB,EAAnB,EAAuB;AACnB1D,cAAAA,IAAI,CAACrE,QAAL,CAAcqB,MAAd,GAAuB,IAAvB;AACAyF,cAAAA,EAAE;AACL;AACJ;;AACD,eAAKkC,gBAAL,CAAsB,IAAtB;AACH,SAXqD,EAWnDjD,IAXmD,CAAvC,CAAf;AA1BmB;;AACvB,WAAI,IAAIoB,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAIN,UAAU,CAAC7F,MAA/B,EAAsCmG,CAAC,EAAvC,EAA0C;AAAA,cAAlCA,CAAkC;AAqCzC;AACJ;;AACD,SAAK8B,YAAL,CAAkB,YAAY;AAC1B5F,MAAAA,EAAE,CAACC,KAAH,CAAS4F,YAAT;AACH,KAFD,EAEG,GAFH;AAGH,GAzMI;AA0MLH,EAAAA,SA1MK,qBA0MK1C,KA1ML,EA0MW;AACZ,QAAGA,KAAK,IAAI,IAAZ,EACI;;AACJ,QAAG8C,KAAK,CAACC,OAAN,CAAc/C,KAAd,CAAH,EAAwB;AACpB,WAAI,IAAIvF,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuF,KAAK,CAACrF,MAAzB,EAAgCF,CAAC,EAAjC,EAAoC;AAChC,YAAIiF,IAAI,GAAG7G,EAAE,CAACwI,WAAH,CAAe,KAAK/H,OAApB,CAAX;AACA,YAAIgI,EAAE,GAAG5B,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAT;AACAuF,QAAAA,EAAE,CAACC,IAAH,CAAQ,IAAR;AACA,aAAKnI,MAAL,CAAYuI,QAAZ,CAAqBjC,IAArB,EAA2B,MAAMjF,CAAjC;AACA,YAAIuI,MAAM,GAAG,CAAC,KAAK5J,MAAL,CAAY6J,KAAZ,GAAoBvD,IAAI,CAACuD,KAA1B,IAAmC,EAAhD;AACAvD,QAAAA,IAAI,CAAC8B,CAAL,GAAS,CAAC,KAAKpI,MAAL,CAAY6J,KAAb,GAAmB,CAAnB,GAAuBvD,IAAI,CAACuD,KAAL,GAAa,CAApC,GAAwCxI,CAAC,GAACuI,MAAnD;AACAtD,QAAAA,IAAI,CAACI,CAAL,GAASJ,IAAI,CAACK,MAAL,GAAY,GAArB;AAEH;AACJ,KAXD,MAWK;AACD,UAAImD,KAAK,GAAG,KAAK9J,MAAL,CAAYsB,SAAZ,CAAsBC,MAAlC;;AACA,UAAI+E,KAAI,GAAG7G,EAAE,CAACwI,WAAH,CAAe,KAAK/H,OAApB,CAAX;;AACA,UAAIgI,IAAE,GAAG5B,KAAI,CAAChD,YAAL,CAAkBgD,KAAI,CAAC3D,IAAvB,CAAT;;AACAuF,MAAAA,IAAE,CAAC6B,MAAH,CAAU,IAAI1K,QAAQ,CAAC2K,IAAb,CAAkBpD,KAAlB,CAAV;;AACAsB,MAAAA,IAAE,CAAC+B,aAAH,GAAmB,KAAnB;AACA,UAAIC,MAAM,GAAG,CAAC,KAAKlK,MAAL,CAAY6J,KAAZ,GAAoBvD,KAAI,CAACuD,KAA1B,IAAmC,EAAhD;AACAvD,MAAAA,KAAI,CAAC8B,CAAL,GAAS,CAAC,KAAKpI,MAAL,CAAY6J,KAAb,GAAmB,CAAnB,GAAuBvD,KAAI,CAACuD,KAAL,GAAa,CAApC,GAAwCC,KAAK,GAAEI,MAAxD;AACA5D,MAAAA,KAAI,CAACI,CAAL,GAASJ,KAAI,CAACK,MAAL,GAAY,GAArB;AACA,WAAK3G,MAAL,CAAYuI,QAAZ,CAAqBjC,KAArB,EAA2B,MAAMwD,KAAjC;;AACA5B,MAAAA,IAAE,CAACiC,cAAH,CAAkB,UAAUnE,GAAV,EAAe;AAC7B,aAAKD,eAAL,CAAqBC,GAArB;AACH,OAFiB,CAEhBoE,IAFgB,CAEX,IAFW,CAAlB;AAGH;AACJ,GAtOI;AAuOL7E,EAAAA,OAvOK,mBAuOG8E,OAvOH,EAuOY/D,IAvOZ,EAuOkB;AACnB,QAAI4B,EAAE,GAAG5B,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAT;AACAuF,IAAAA,EAAE,CAACC,IAAH,CAAQ,IAAI9I,QAAQ,CAAC2K,IAAb,CAAkBK,OAAlB,CAAR;AACAnC,IAAAA,EAAE,CAAC+B,aAAH,GAAmB,KAAnB;AACH,GA3OI;AA4OLK,EAAAA,aA5OK,2BA4OW;AACZ,SAAKnE,SAAL,GAAiB,EAAjB;AACH,GA9OI;AA+OLoE,EAAAA,eA/OK,2BA+OW3D,KA/OX,EA+OkB4D,UA/OlB,EA+O6B;AAC9B,SAAKrE,SAAL,GAAiBS,KAAjB;AACAnH,IAAAA,EAAE,CAACgL,GAAH,CAAO,iBAAP;AACAhL,IAAAA,EAAE,CAACgL,GAAH,CAAO,KAAKtE,SAAZ;;AACA,QAAGqE,UAAU,CAAClH,YAAX,CAAwBkH,UAAU,CAAC7H,IAAnC,EAAyCgG,MAAzC,EAAH,EAAqD;AACjD,UAAI+B,OAAO,GAAG,EAAd;;AACA,WAAI,IAAIrJ,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGuF,KAAK,CAACrF,MAAzB,EAAgCF,CAAC,EAAjC,EAAoC;AAChC,YAAIiF,IAAI,GAAG,KAAKC,cAAL,CAAoBK,KAAK,CAACvF,CAAD,CAAzB,CAAX;;AACA,YAAG5B,EAAE,CAACkL,OAAH,CAAWrE,IAAX,CAAH,EAAoB;AAChBoE,UAAAA,OAAO,CAACjJ,IAAR,CAAa6E,IAAb;AACH;AACJ;;AACD,WAAKsE,WAAL,CAAiBJ,UAAjB,EAA6BE,OAA7B;AACA,WAAK5E,oBAAL;AACH,KAVD,MAUK;AACD,WAAK8E,WAAL,CAAiBJ,UAAjB;AACA,UAAInI,QAAQ,GAAGmI,UAAU,CAAClH,YAAX,CAAwBkH,UAAU,CAAC7H,IAAnC,CAAf;AACAN,MAAAA,QAAQ,CAACwI,QAAT,IAAqBjE,KAAK,CAACrF,MAA3B;AACAc,MAAAA,QAAQ,CAACgH,cAAT,CAAwBhH,QAAQ,CAACwI,QAAjC;AACH;AACJ,GAnQI;AAoQLzH,EAAAA,WApQK,yBAoQS;AACV,QAAI0H,MAAM,GAAK,KAAKhG,UAAL,EAAf;AACA,QAAIoB,QAAQ,GAAG,KAAKC,SAApB;AACA1G,IAAAA,EAAE,CAACgL,GAAH,CAAO,aAAP;AACAhL,IAAAA,EAAE,CAACgL,GAAH,CAAOvE,QAAP;;AACA,QAAIA,QAAQ,CAAC3E,MAAT,GAAkB,CAAtB,EAAwB;AACpB,UAAIwJ,QAAQ,GAAG1L,QAAQ,CAAC2F,IAAT,CAAcgG,aAAd,CAA4B9E,QAA5B,EAAsC4E,MAAtC,CAAf;AACArL,MAAAA,EAAE,CAACgL,GAAH,CAAOM,QAAP;;AACA,WAAK,IAAI1J,CAAC,GAAC,CAAX,EAAcA,CAAC,GAAE0J,QAAQ,CAACxJ,MAA1B,EAAkCF,CAAC,EAAnC,EAAsC;AAClC,YAAI4J,MAAM,GAAG,IAAI5L,QAAQ,CAAC2K,IAAb,CAAkBe,QAAQ,CAAC1J,CAAD,CAA1B,CAAb;AACA5B,QAAAA,EAAE,CAACgL,GAAH,CAAOQ,MAAM,CAACC,SAAP,GAAmB,GAAnB,GAAuBD,MAAM,CAACE,IAArC;AACH;;AACD,aAAOJ,QAAQ,CAACxJ,MAAT,GAAkB,CAAzB;AACH,KARD,MASI,OAAO,IAAP;AAEP,GApRI;AAqRL6J,EAAAA,kBArRK,8BAqRcC,WArRd,EAqR0B;AAC3B,SAAK9K,QAAL,CAAcqB,MAAd,GAAuB,KAAvB;AACA,QAAI0J,SAAS,GAAG,KAAK9K,eAAL,CAAqB8C,YAArB,CAAkCiI,EAAE,CAACC,QAArC,CAAhB;AACA,SAAKhL,eAAL,CAAqBoB,MAArB,GAA8B,IAA9B;AACA0J,IAAAA,SAAS,CAACG,YAAV,CAAuB,CAAvB,EAAyB,WAAzB,EAAsC,IAAtC;AACA,QAAI7G,IAAI,GAAG,IAAX;AACA,SAAKpE,eAAL,CAAqByI,SAArB,CAA+BxJ,EAAE,CAACyJ,QAAH,CAAYzJ,EAAE,CAAC0J,SAAH,CAAa,CAAb,CAAZ,EAA6B1J,EAAE,CAAC2J,QAAH,CAAY,YAAY;AAChFxE,MAAAA,IAAI,CAACpE,eAAL,CAAqBoB,MAArB,GAA8B,KAA9B;AACH,KAF2D,CAA7B,CAA/B;AAGH,GA9RI;AA+RL8J,EAAAA,kBA/RK,8BA+RcC,IA/Rd,EA+RmB;AACpB,QAAGA,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBC,KAA5B,IAAqCF,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBE,IAApE,EAAyE;AACrE,WAAKtL,eAAL,CAAqBoB,MAArB,GAA8B,KAA9B;AACA;AACH;;AACD,QAAI0J,SAAS,GAAG,KAAK9K,eAAL,CAAqB8C,YAArB,CAAkCiI,EAAE,CAACC,QAArC,CAAhB;;AACA,QAAGG,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBG,cAA5B,IAA8CJ,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBI,eAA1E,IAA6FL,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBK,qBAA5H,EAAkJ;AAC9I,WAAKzL,eAAL,CAAqBoB,MAArB,GAA8B,IAA9B;AACA0J,MAAAA,SAAS,CAACG,YAAV,CAAuB,CAAvB,EAAyB,QAAzB,EAAmC,IAAnC;AACH;;AACD,QAAGE,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBM,wBAA/B,EAAwD;AACpD,WAAK1L,eAAL,CAAqBoB,MAArB,GAA8B,IAA9B;AACA0J,MAAAA,SAAS,CAACG,YAAV,CAAuB,CAAvB,EAAyB,aAAzB,EAAwC,IAAxC;AACH;;AACD,QAAGE,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBO,uBAA5B,IAAuDR,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBQ,wBAAnF,IAA+GT,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBS,8BAA3I,IACAV,IAAI,IAAIpM,SAAS,CAACqM,SAAV,CAAoBU,yBAD/B,EACyD;AACrD,WAAK9L,eAAL,CAAqBoB,MAArB,GAA8B,IAA9B;AACA0J,MAAAA,SAAS,CAACG,YAAV,CAAuB,CAAvB,EAAyB,aAAzB,EAAwC,IAAxC;AACH;;AACD,QAAI7G,IAAI,GAAG,IAAX;AACA,SAAKpE,eAAL,CAAqByI,SAArB,CAA+BxJ,EAAE,CAACyJ,QAAH,CAAYzJ,EAAE,CAAC0J,SAAH,CAAa,CAAb,CAAZ,EAA6B1J,EAAE,CAAC2J,QAAH,CAAY,YAAY;AAChFxE,MAAAA,IAAI,CAACpE,eAAL,CAAqBoB,MAArB,GAA8B,KAA9B;AACH,KAF2D,CAA7B,CAA/B;AAGH,GAtTI;AAuTLgJ,EAAAA,WAvTK,uBAuTO2B,QAvTP,EAuTiB7B,OAvTjB,EAuTyB;AAC1B,QAAI8B,SAAS,GAAG,KAAKtF,YAAL,CAAkB3F,MAAlC;AACA,SAAK2F,YAAL,CAAkBsF,SAAlB,IAA+B,EAA/B;;AACA,SAAI,IAAInL,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAK8E,SAAL,CAAe5E,MAAlC,EAAyCF,CAAC,EAA1C,EAA6C;AACzC,UAAIiF,IAAI,SAAR;AACA,UAAImG,MAAM,SAAV;;AACA,UAAG/B,OAAO,IAAIgC,SAAd,EAAwB;AACpBpG,QAAAA,IAAI,GAAG,IAAIjH,QAAQ,CAAC2K,IAAb,CAAkB,KAAK7D,SAAL,CAAe9E,CAAf,CAAlB,CAAP;AACAoL,QAAAA,MAAM,GAAGhN,EAAE,CAACwI,WAAH,CAAe,KAAK/H,OAApB,CAAT;AACA,YAAIsG,MAAM,GAAGiG,MAAM,CAACnJ,YAAP,CAAoBmJ,MAAM,CAAC9J,IAA3B,CAAb;AACA6D,QAAAA,MAAM,CAACmG,KAAP;AACAnG,QAAAA,MAAM,CAAC2B,IAAP,CAAY7B,IAAZ;AACA,YAAGiG,QAAQ,IAAIG,SAAf,EACID,MAAM,CAACG,QAAP,GAAkB,KAAKC,sBAAL,CAA4BN,QAA5B,EAAsC,KAAKtM,SAA3C,CAAlB;AACP,OARD,MAQK;AACDwM,QAAAA,MAAM,GAAG/B,OAAO,CAACrJ,CAAD,CAAhB;;AACA,YAAImF,OAAM,GAAGiG,MAAM,CAACnJ,YAAP,CAAoBmJ,MAAM,CAAC9J,IAA3B,CAAb;;AACA6D,QAAAA,OAAM,CAACyD,aAAP,GAAuB,IAAvB;AACAwC,QAAAA,MAAM,CAACG,QAAP,GAAkB,KAAKC,sBAAL,CAA4BJ,MAA5B,EAAoC,KAAKxM,SAAzC,CAAlB;AACH;;AACDwM,MAAAA,MAAM,CAACpE,KAAP,GAAe,GAAf;AACAoE,MAAAA,MAAM,CAACK,MAAP,GAAgB,KAAK7M,SAArB;AACAwM,MAAAA,MAAM,CAACM,MAAP,GAAgB,GAAhB;AACA,UAAIC,MAAM,GAAGvN,EAAE,CAACwN,EAAH,CAAM,EAAE,CAAC,KAAK9G,SAAL,CAAe5E,MAAf,GAAwB,CAAzB,IAA8B,EAAhC,IAAoC,CAApC,GAAwC,CAACF,CAAC,GAAG,CAAL,IAAU,EAAxD,EAA4D,EAA5D,CAAb;AACA,UAAIuH,IAAI,GAAGnJ,EAAE,CAACoJ,MAAH,CAAU,GAAV,EAAemE,MAAf,CAAX;AACAP,MAAAA,MAAM,CAACxD,SAAP,CAAiBL,IAAjB;AACA,WAAK1B,YAAL,CAAkBsF,SAAlB,EAA6B/K,IAA7B,CAAkCgL,MAAlC;AACH;;AACD,QAAGD,SAAS,GAAG,CAAf,EAAiB;AACb,WAAI,IAAInL,EAAC,GAAG,CAAZ,EAAeA,EAAC,GAAG,KAAK6F,YAAL,CAAkB3F,MAAlB,GAA0B,CAA7C,EAAgDF,EAAC,EAAjD,EAAoD;AAChD,YAAIuF,KAAK,GAAG,KAAKM,YAAL,CAAkB7F,EAAlB,CAAZ;;AACA,aAAI,IAAIqG,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGd,KAAK,CAACrF,MAAzB,EAAgCmG,CAAC,EAAjC,EAAoC;AAChC,cAAIpB,MAAI,GAAGM,KAAK,CAACc,CAAD,CAAhB;AACApB,UAAAA,MAAI,CAAC4G,OAAL,GAAe,GAAf;AACA5G,UAAAA,MAAI,CAACI,CAAL,GAAS,EAAT;AACH;AACJ;AACJ;AACJ,GA7VI;AA8VLZ,EAAAA,oBA9VK,kCA8ViB;AAClB,SAAI,IAAIzE,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,KAAKrB,MAAL,CAAYsB,SAAZ,CAAsBC,MAAzC,EAAgDF,CAAC,EAAjD,EAAoD;AAChD,UAAIoL,MAAM,GAAG,KAAKzM,MAAL,CAAYsB,SAAZ,CAAsBD,CAAtB,CAAb;AACA,UAAImF,MAAM,GAAGiG,MAAM,CAACnJ,YAAP,CAAoBmJ,MAAM,CAAC9J,IAA3B,CAAb;AACA6D,MAAAA,MAAM,CAACC,WAAP,GAAqB,KAArB;AACA,UAAImD,MAAM,GAAG,CAAC,KAAK5J,MAAL,CAAY6J,KAAZ,GAAoB4C,MAAM,CAAC5C,KAA5B,KAAsC,KAAK7J,MAAL,CAAYsB,SAAZ,CAAsBC,MAAtB,GAA+B,CAArE,CAAb;;AACA,UAAGqI,MAAM,IAAI6C,MAAM,CAAC5C,KAAP,GAAa,GAA1B,EAA8B;AAC1BD,QAAAA,MAAM,GAAG6C,MAAM,CAAC5C,KAAP,GAAa,GAAtB;AACH;;AACD4C,MAAAA,MAAM,CAACrE,CAAP,GAAW,EAAEwB,MAAM,IAAI,KAAK5J,MAAL,CAAYsB,SAAZ,CAAsBC,MAAtB,GAA8B,CAAlC,CAAN,GAA6CkL,MAAM,CAAC5C,KAAtD,IAA6D,CAA7D,GAAiE4C,MAAM,CAAC5C,KAAP,GAAe,CAAhF,GAAoFxI,CAAC,GAACuI,MAAjG;AACA6C,MAAAA,MAAM,CAAC/F,CAAP,GAAW+F,MAAM,CAAC9F,MAAP,GAAc,GAAzB;AACH;AACJ,GA1WI;AA2WL3C,EAAAA,eA3WK,6BA2WY;AACb,QAAI4C,KAAK,GAAG,EAAZ;;AACA,SAAI,IAAIvF,CAAR,IAAa,KAAKrB,MAAL,CAAYsB,SAAzB,EAAmC;AAC/B,UAAIgF,IAAI,GAAG,KAAKtG,MAAL,CAAYsB,SAAZ,CAAsBD,CAAtB,CAAX;AACA,UAAImF,MAAM,GAAGF,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAb;;AACA,UAAG6D,MAAM,CAAC2G,UAAP,EAAH,EAAuB;AACnBvG,QAAAA,KAAK,CAACnF,IAAN,CAAW6E,IAAX;AACH;AACJ;;AACD,WAAOM,KAAP;AACH,GArXI;AAsXL9B,EAAAA,UAtXK,wBAsXO;AACR,QAAI8B,KAAK,GAAG,EAAZ;;AACA,SAAI,IAAIvF,CAAR,IAAa,KAAKrB,MAAL,CAAYsB,SAAzB,EAAmC;AAC/B,UAAIgF,IAAI,GAAG,KAAKtG,MAAL,CAAYsB,SAAZ,CAAsBD,CAAtB,CAAX;AACA,UAAImF,MAAM,GAAGF,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAb;AACAiE,MAAAA,KAAK,CAACnF,IAAN,CAAW+E,MAAM,CAACM,OAAP,GAAiBvC,EAA5B;AACH;;AACD,WAAOqC,KAAP;AACH,GA9XI;AA+XLL,EAAAA,cA/XK,0BA+XUhC,EA/XV,EA+Xa;AACd,SAAI,IAAIlD,CAAR,IAAa,KAAKrB,MAAL,CAAYsB,SAAzB,EAAmC;AAC/B,UAAIgF,IAAI,GAAG,KAAKtG,MAAL,CAAYsB,SAAZ,CAAsBD,CAAtB,CAAX;AACA,UAAImF,MAAM,GAAGF,IAAI,CAAChD,YAAL,CAAkBgD,IAAI,CAAC3D,IAAvB,CAAb;;AACA,UAAG6D,MAAM,CAACM,OAAP,GAAiBvC,EAAjB,IAAuBA,EAA1B,EAA6B;AACzB,eAAO+B,IAAP;AACH;AACJ;;AACD,WAAO,IAAP;AACH,GAxYI;AAyYL8G,EAAAA,SAzYK,uBAyYM;AACPxJ,IAAAA,EAAE,CAACC,KAAH,CAASC,UAAT;;AACA,QAAG,CAAC,KAAK2B,UAAL,CAAgBC,WAAhB,CAA4B2H,aAA7B,IAA8C,KAAK5H,UAAL,CAAgBC,WAAhB,CAA4B4H,oBAA5B,CAAiD/L,MAAjD,IAA2D,CAA5G,EAA8G;AAC1G,WAAKgM,gBAAL;AACH,KAFD,MAEK;AACD,UAAIC,QAAQ,GAAG,IAAf;;AACA,UAAG,KAAK/H,UAAL,CAAgBC,WAAhB,CAA4B+H,gBAA5B,CAA6CC,OAA7C,CAAqDnL,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCC,MAAxC,CAA+CC,IAApG,KAA6G,CAAhH,EAAkH;AAC9G6K,QAAAA,QAAQ,GAAG,KAAX;AACH;;AACD,UAAIG,aAAa,GAAG,IAAIvJ,WAAW,CAACwJ,aAAhB,EAApB;AACAD,MAAAA,aAAa,CAACrJ,SAAd,CAAwB,KAAKvD,KAAL,CAAWwD,EAAnC;AACAoJ,MAAAA,aAAa,CAACE,SAAd,CAAwBL,QAAxB;AACAjL,MAAAA,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCgC,IAAxC,CAA6CkJ,aAAa,CAACjJ,UAAd,EAA7C;AACH;AACJ,GAvZI;AAwZL/C,EAAAA,YAxZK,0BAwZS;AACV,QAAImM,MAAM,GAAGvL,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCC,MAAxC,CAA+CC,IAA5D;;AACA,QAAG,KAAKL,kBAAL,CAAwBwL,MAAxB,KAAmC,IAAtC,EAA2C;AACvC,UAAIC,YAAY,GAAG,IAAI3J,WAAW,CAAC4J,YAAhB,GAA+B1J,SAA/B,CAAyC,KAAKvD,KAAL,CAAWwD,EAApD,EAAwD0J,YAAxD,EAAnB;AACA1L,MAAAA,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCgC,IAAxC,CAA6CsJ,YAAY,CAACrJ,UAAb,EAA7C;AACA,WAAKxC,aAAL;AACH;AACJ,GA/ZI;AAgaLgM,EAAAA,WAhaK,yBAgaS;AACV,QAAIvC,IAAI,GAAGwC,QAAQ,CAAC,KAAK1N,SAAL,CAAe2N,MAAf,CAAsBC,IAAtB,EAAD,CAAnB;AACA,QAAIN,YAAY,GAAG,IAAI3J,WAAW,CAACkK,YAAhB,GAA+BhK,SAA/B,CAAyC,KAAKvD,KAAL,CAAWwD,EAApD,EAAwDgK,WAAxD,CAAoE5C,IAApE,EAA0E,QAA1E,CAAnB;AACApJ,IAAAA,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCgC,IAAxC,CAA6CsJ,YAAY,CAACrJ,UAAb,EAA7C;AACH,GApaI;AAqaL8J,EAAAA,WAraK,yBAqaS;AACV,QAAI7C,IAAI,GAAGwC,QAAQ,CAAC,KAAK1N,SAAL,CAAe2N,MAAf,CAAsBC,IAAtB,EAAD,CAAnB;AACA,QAAIN,YAAY,GAAG,IAAI3J,WAAW,CAACkK,YAAhB,GAA+BhK,SAA/B,CAAyC,KAAKvD,KAAL,CAAWwD,EAApD,EAAwDgK,WAAxD,CAAoE5C,IAApE,EAA0E,QAA1E,CAAnB;AACApJ,IAAAA,WAAW,CAACC,cAAZ,CAA2BC,YAA3B,CAAwCgC,IAAxC,CAA6CsJ,YAAY,CAACrJ,UAAb,EAA7C;AACH,GAzaI;AA0aL+J,EAAAA,aA1aK,yBA0aS9K,KA1aT,EA0agB+K,IA1ahB,EA0asB;AACvB9K,IAAAA,EAAE,CAACC,KAAH,CAASC,UAAT;AACA,SAAKjE,cAAL,CAAoB+B,MAApB,GAA6B,CAAC,KAAK/B,cAAL,CAAoB+B,MAAlD;AACA,QAAI,KAAK/B,cAAL,CAAoB+B,MAAxB,EACI,KAAK/B,cAAL,CAAoByD,YAApB,CAAiC,gBAAjC,EAAmDqL,cAAnD,CAAkEpM,WAAW,CAACC,cAAZ,CAA2BC,YAA7F;AACP,GA/aI;AAgbLmM,EAAAA,eAhbK,2BAgbWC,QAhbX,EAgbqB;AACtB,QAAIC,QAAQ,GAAG,KAAKxM,kBAAL,CAAwBuM,QAAQ,CAACE,MAAT,CAAgBpM,IAAxC,CAAf;;AACA,QAAGmM,QAAQ,IAAI,IAAf,EAAoB;AAChBA,MAAAA,QAAQ,CAACF,eAAT,CAAyBC,QAAQ,CAACG,GAAlC;AACH;AACJ;AArbI,CAAT","sourceRoot":"/","sourcesContent":["let TLMNCard  = require('TLMNCard');\r\nlet TLMNEvent = require('TLMNEvent');\r\nlet Helper    = require(\"Helper\");\r\n\r\ncc.Class({\r\n    extends: cc.BaseGame,\r\n\r\n    properties: {\r\n        ChatEmojiLayer: cc.Node,\r\n        POS_4: cc.Node,\r\n        MyHand: cc.Node,\r\n        CardsDrop: cc.Node,\r\n        preCard: cc.Prefab,\r\n        Fold: cc.Node,\r\n        Fire: cc.Node,\r\n        UnSelect: cc.Node,\r\n        SortCard: cc.Node,\r\n        EffectFightType: cc.Node,\r\n        edtCheat1: cc.EditBox,\r\n        edtCheat2: cc.EditBox,\r\n        TypeSord: 0,\r\n    },\r\n    onEnable(){\r\n        this.newMatch();\r\n        this._room = this._data.room;\r\n        this._number_desk = 4;\r\n        this._CURRENT_POS = this.POS_4;\r\n        this.poses = [];\r\n        for(let i = 0; i < this._CURRENT_POS._children.length;i++){\r\n            let pos = this._CURRENT_POS._children[i];\r\n            this.poses.push(this._CURRENT_POS._children[i]);\r\n            pos.on(\"touchend\", function () {\r\n                this.requestSitOn();\r\n            }, this);\r\n            pos.active = false;\r\n        }\r\n        this.WaitingTimer.active = false;\r\n        this.TypeSord = 0;\r\n    },\r\n    resetUI() {\r\n        this.WaitingTimer.active = false;\r\n    },\r\n    onDisable(){\r\n        this.nodePlayers.removeAllChildren(true);\r\n        this.hideDeskEmpty();\r\n        this.WaitingTimer.active = false;\r\n    },\r\n    updateUserVariable(subChip){\r\n        let jsPlayer    = this._getJSPlayerByName(SmartFoxSDK.TLMNController.ZoneInstance.mySelf.name);\r\n        jsPlayer.setMoney(GameVariables.Poker.getChip(SmartFoxSDK.TLMNController.ZoneInstance.mySelf)-subChip)\r\n    },\r\n    newMatch(){\r\n      this.newRound();\r\n      this.hideAllButtonAction();\r\n      this.MyHand.removeAllChildren(true);\r\n        this.SortCard.active     = false;\r\n    },\r\n    hideAllButtonAction(){\r\n        this.Fire.active     = false;\r\n        this.Fold.active     = false;\r\n        this.UnSelect.active = false;\r\n    },\r\n    showAllButtonAction(){\r\n        let isReady          = this.isReadyFire();\r\n        Helper.setMaterialGray(this.Fire.getComponent(cc.Sprite), !isReady);\r\n        Helper.setMaterialGray(this.Fold.getComponent(cc.Sprite), false);\r\n        this.Fire.active     = true;\r\n        this.Fold.active     = true;\r\n    },\r\n    showButtonUnSelect(){\r\n        this.UnSelect.active = true;\r\n    },\r\n    hideButtonUnSelect(){\r\n        this.UnSelect.active = false;\r\n    },\r\n    actionFire(event){\r\n        mm.audio.playButton();\r\n        let cardsSelect = this.getCardSelected();\r\n        let cardsByte = this.cardsToArrayByte(cardsSelect);\r\n        if(cardsByte.length > 0){\r\n            let request = new TLMNRequest.FireRequest().setRoomId(this._room.id).setCards(cardsByte);\r\n            SmartFoxSDK.TLMNController.ZoneInstance.send(request.toSRequest());\r\n        }\r\n    },\r\n    actionSortCard(event){\r\n        mm.audio.playButton();\r\n        let self        = this;\r\n        let myCards     = this.getCardsId();\r\n        this.TypeSord   = (this.TypeSord+1)%3;\r\n        let newCards    = TLMNCard.TLMN.sortCardType(myCards, this.TypeSord);\r\n        if (newCards.length == myCards.length){\r\n            Promise.all(this.MyHand._children.map(function(cardNode, index){\r\n                self.addCard(newCards[index], cardNode);\r\n            }));\r\n        }\r\n    },\r\n    actionFold(event){\r\n        mm.audio.playButton();\r\n        if(this.controller.m_tableInfo.m_currentUser == SmartFoxSDK.TLMNController.ZoneInstance.mySelf.name){\r\n            let request = new TLMNRequest.FoldRequest().setRoomId(this._room.id);\r\n            SmartFoxSDK.TLMNController.ZoneInstance.send(request.toSRequest());\r\n        }\r\n    },\r\n    actionUnSelect(event){\r\n        this.refreshPositionCards();\r\n    },\r\n    eventSelectCard(cId){\r\n        let selectCards = this.getCardSelected();\r\n        let cardsByte = this.cardsToArrayByte(selectCards);\r\n        let lastCard     = this.lastCards;\r\n        let suggestCards = [];\r\n        if (this.lastCards.length > 0)\r\n            suggestCards = TLMNCard.TLMN.suggestCards(cId, lastCard, this.getCardsId());\r\n        else\r\n            suggestCards = TLMNCard.TLMN.suggestNoCards(cardsByte, this.getCardsId());\r\n        for(let i = 0; i < suggestCards.length;i++){\r\n            let card = this._getCardFromId(suggestCards[i]);\r\n            let jsCard = card.getComponent(card.name);\r\n            jsCard._isSelected = true;\r\n            card.y = card.height*0.5 + 20;\r\n        }\r\n        if(selectCards.length >= 0){\r\n            this.showButtonUnSelect();\r\n        }else{\r\n            this.hideButtonUnSelect();\r\n        }\r\n    },\r\n    cardsToArrayByte(cards){\r\n        let byteCard = [];\r\n        for(let i in cards){\r\n            let card = cards[i];\r\n            let jsCard = card.getComponent(card.name);\r\n            byteCard.push(jsCard.getCard().id);\r\n        }\r\n        return byteCard;\r\n    },\r\n    isNoNeedTurn(){\r\n        let me = SmartFoxSDK.TLMNController.ZoneInstance.mySelf;\r\n        if(!this._getJSPlayerByName(me))\r\n            return false;\r\n        let myCards = this.getCardsId();\r\n        if(TLMNCard.TLMN.isValidateFightNoNeedTurn(myCards, this.lastCards)){\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    newRound(){\r\n        this.EffectFightType.active = false;\r\n        this.lastCards = [];\r\n        this.CardsDrop.removeAllChildren(true);\r\n        this.arrCardsDrop = [];\r\n\r\n        // if(this.controller && this.controller.m_tableInfo && this.controller.m_tableInfo.m_currentUser == SmartFoxSDK.Instance.mySelf.name){\r\n        //     this.Fire.active     = true;\r\n        // }\r\n    },\r\n    _dealCards(m_listDesk, myCards, cb){\r\n        // sort card\r\n        TLMNCard.TLMN.sortCards(myCards, this.TypeSord);\r\n        this.MyHand.removeAllChildren(true);\r\n        let content = this.node.getChildByName(\"content\");\r\n        let self = this;\r\n        for(let i = 0; i < 13; i++){\r\n            for(let j = 0; j <  m_listDesk.length;j++){\r\n                let desk = m_listDesk[j];\r\n                let nodePlayer = this._getNodePlayerById(desk.DeskId);\r\n                let jsPlayer = this._getJSPlayer(nodePlayer);\r\n                jsPlayer.updatePosHand();\r\n                let card = cc.instantiate(this.preCard);\r\n                let js = card.getComponent(card.name);\r\n\r\n                js.init(null);\r\n                card.x = 0;\r\n                card.y = 0;\r\n                card.scale = 0.8;\r\n                js.cardIndex = i;\r\n                content.addChild(card, -(i * m_listDesk.length+ j) + 200);\r\n\r\n                let posMove = jsPlayer.getPosCardHand();\r\n                let scaleTo = 0.5;\r\n\r\n                if(jsPlayer.isItMe()){\r\n                    posMove.x = -400 + (i + 2) * 56;\r\n                    scaleTo = 0.7;\r\n                }\r\n                let move = cc.moveTo(0.5, posMove);\r\n                let actionScale = cc.scaleTo(0.3, scaleTo);\r\n                let spwan = cc.spawn(move, actionScale);\r\n                card.runAction(cc.sequence(cc.delayTime(i*0.2),spwan, cc.callFunc(function () {\r\n                    jsPlayer.updateCardSize(js.cardIndex + 1);\r\n                    if(jsPlayer.isItMe()){\r\n                        let js = this.getComponent(this.name);\r\n                        self.addMyHand(myCards[js.cardIndex]);\r\n                        if(js.cardIndex == 12 ){\r\n                            self.SortCard.active = true;\r\n                            cb();\r\n                        }\r\n                    }\r\n                    this.removeFromParent(true);\r\n                }, card)));\r\n            }\r\n        }\r\n        this.scheduleOnce(function () {\r\n            mm.audio.playChiaBai2();\r\n        }, 0.5)\r\n    },\r\n    addMyHand(cards){\r\n        if(cards == null)\r\n            return;\r\n        if(Array.isArray(cards)){\r\n            for(let i = 0; i < cards.length;i++){\r\n                let card = cc.instantiate(this.preCard);\r\n                let js = card.getComponent(card.name);\r\n                js.init(null);\r\n                this.MyHand.addChild(card, 100 + i);\r\n                let detalX = (this.MyHand.width - card.width) / 12;\r\n                card.x = -this.MyHand.width/2 + card.width / 2 + i*detalX;\r\n                card.y = card.height*0.5;\r\n\r\n            }\r\n        }else{\r\n            let count = this.MyHand._children.length;\r\n            let card = cc.instantiate(this.preCard);\r\n            let js = card.getComponent(card.name);\r\n            js.reveal(new TLMNCard.Card(cards));\r\n            js._removeSelect = false;\r\n            let deltaX = (this.MyHand.width - card.width) / 12;\r\n            card.x = -this.MyHand.width/2 + card.width / 2 + count *deltaX;\r\n            card.y = card.height*0.5;\r\n            this.MyHand.addChild(card, 100 + count);\r\n            js.addEventSelect(function (cId) {\r\n                this.eventSelectCard(cId);\r\n            }.bind(this));\r\n        }\r\n    },\r\n    addCard(cardsId, card) {\r\n        let js = card.getComponent(card.name);\r\n        js.init(new TLMNCard.Card(cardsId));\r\n        js._removeSelect = false;\r\n    },\r\n    resetLastCard() {\r\n        this.lastCards = [];\r\n    },\r\n    processUserFire(cards, playerNode){\r\n        this.lastCards = cards;\r\n        cc.log('processUserFire')\r\n        cc.log(this.lastCards)\r\n        if(playerNode.getComponent(playerNode.name).isItMe()){\r\n            let uiCards = [];\r\n            for(let i = 0; i < cards.length;i++){\r\n                let card = this._getCardFromId(cards[i]);\r\n                if(cc.isValid(card)){\r\n                    uiCards.push(card);\r\n                }\r\n            }\r\n            this.addLastCard(playerNode, uiCards);\r\n            this.refreshPositionCards();\r\n        }else{\r\n            this.addLastCard(playerNode);\r\n            let jsPlayer = playerNode.getComponent(playerNode.name);\r\n            jsPlayer.sizeCard -= cards.length;\r\n            jsPlayer.updateCardSize(jsPlayer.sizeCard);\r\n        }\r\n    },\r\n    isReadyFire() {\r\n        let allIds   = this.getCardsId();\r\n        let lastCard = this.lastCards;\r\n        cc.log('isReadyFire');\r\n        cc.log(lastCard);\r\n        if (lastCard.length > 0){\r\n            let listCars = TLMNCard.TLMN.getCardsReady(lastCard, allIds);\r\n            cc.log(listCars);\r\n            for (let i=0; i< listCars.length; i++){\r\n                let card01 = new TLMNCard.Card(listCars[i]);\r\n                cc.log(card01.pointName + \" \"+card01.suit);\r\n            }\r\n            return listCars.length > 0;\r\n        }else\r\n            return true\r\n\r\n    },\r\n    showEffectWinWhite(typePerfect){\r\n        this.SortCard.active = false;\r\n        let animation = this.EffectFightType.getComponent(sp.Skeleton);\r\n        this.EffectFightType.active = true;\r\n        animation.setAnimation(0,\"Toi-Trang\", true);\r\n        let self = this;\r\n        this.EffectFightType.runAction(cc.sequence(cc.delayTime(3), cc.callFunc(function () {\r\n            self.EffectFightType.active = false;\r\n        })))\r\n    },\r\n    showEffectTypeFire(type){\r\n        if(type == TLMNEvent.FireEvent.ERROR || type == TLMNEvent.FireEvent.NONE){\r\n            this.EffectFightType.active = false;\r\n            return;\r\n        }\r\n        let animation = this.EffectFightType.getComponent(sp.Skeleton);\r\n        if(type == TLMNEvent.FireEvent.TUQUI_CHAT_HEO || type == TLMNEvent.FireEvent.TUQUI_CHAT_2HEO || type == TLMNEvent.FireEvent.TUQUI_CHAT_3DOI_THONG){\r\n            this.EffectFightType.active = true;\r\n            animation.setAnimation(0,\"Tu-Quy\", true);\r\n        }\r\n        if(type == TLMNEvent.FireEvent.THREE_DOI_THONG_CHAT_HEO){\r\n            this.EffectFightType.active = true;\r\n            animation.setAnimation(0,\"3-Doi-Thong\", true);\r\n        }\r\n        if(type == TLMNEvent.FireEvent.FOUR_DOI_THONG_CHAT_HEO || type == TLMNEvent.FireEvent.FOUR_DOI_THONG_CHAT_2HEO || type == TLMNEvent.FireEvent.FOUR_DOI_THONG_CHAT_3DOI_THONG\r\n        || type == TLMNEvent.FireEvent.FOUR_DOI_THONG_CHAT_TUQUI){\r\n            this.EffectFightType.active = true;\r\n            animation.setAnimation(0,\"4-Doi-Thong\", true);\r\n        }\r\n        let self = this;\r\n        this.EffectFightType.runAction(cc.sequence(cc.delayTime(2), cc.callFunc(function () {\r\n            self.EffectFightType.active = false;\r\n        })))\r\n    },\r\n    addLastCard(nodeFire, uiCards){\r\n        let indexDrop = this.arrCardsDrop.length;\r\n        this.arrCardsDrop[indexDrop] = [];\r\n        for(let i = 0; i < this.lastCards.length;i++){\r\n            let card;\r\n            let uiCard;\r\n            if(uiCards == undefined){\r\n                card = new TLMNCard.Card(this.lastCards[i]);\r\n                uiCard = cc.instantiate(this.preCard);\r\n                let jsCard = uiCard.getComponent(uiCard.name);\r\n                jsCard.reset();\r\n                jsCard.init(card);\r\n                if(nodeFire != undefined)\r\n                    uiCard.position = this.getPositionInOtherNode(nodeFire, this.CardsDrop);\r\n            }else{\r\n                uiCard = uiCards[i];\r\n                let jsCard = uiCard.getComponent(uiCard.name);\r\n                jsCard._removeSelect = true;\r\n                uiCard.position = this.getPositionInOtherNode(uiCard, this.CardsDrop);\r\n            }\r\n            uiCard.scale = 0.6;\r\n            uiCard.parent = this.CardsDrop;\r\n            uiCard.zIndex = 500;\r\n            let newPos = cc.v2(-((this.lastCards.length + 1) * 56)/2 + (i + 1) * 56, 20);\r\n            let move = cc.moveTo(0.2, newPos);\r\n            uiCard.runAction(move);\r\n            this.arrCardsDrop[indexDrop].push(uiCard);\r\n        }\r\n        if(indexDrop > 0){\r\n            for(let i = 0; i < this.arrCardsDrop.length -1; i++){\r\n                let cards = this.arrCardsDrop[i];\r\n                for(let j = 0; j < cards.length;j++){\r\n                    let card = cards[j];\r\n                    card.opacity = 250;\r\n                    card.y = 80;\r\n                }\r\n            }\r\n        }\r\n    },\r\n    refreshPositionCards(){\r\n        for(let i = 0; i < this.MyHand._children.length;i++){\r\n            let uiCard = this.MyHand._children[i];\r\n            let jsCard = uiCard.getComponent(uiCard.name);\r\n            jsCard._isSelected = false;\r\n            let detalX = (this.MyHand.width - uiCard.width) / (this.MyHand._children.length - 1);\r\n            if(detalX >= uiCard.width*0.9){\r\n                detalX = uiCard.width*0.8;\r\n            }\r\n            uiCard.x = -(detalX * (this.MyHand._children.length -1) + uiCard.width)/2 + uiCard.width / 2 + i*detalX;\r\n            uiCard.y = uiCard.height*0.5;\r\n        }\r\n    },\r\n    getCardSelected(){\r\n        let cards = [];\r\n        for(let i in this.MyHand._children){\r\n            let card = this.MyHand._children[i];\r\n            let jsCard = card.getComponent(card.name);\r\n            if(jsCard.isSelected()){\r\n                cards.push(card);\r\n            }\r\n        }\r\n        return cards;\r\n    },\r\n    getCardsId(){\r\n        let cards = [];\r\n        for(let i in this.MyHand._children){\r\n            let card = this.MyHand._children[i];\r\n            let jsCard = card.getComponent(card.name);\r\n            cards.push(jsCard.getCard().id);\r\n        }\r\n        return cards;\r\n    },\r\n    _getCardFromId(id){\r\n        for(let i in this.MyHand._children){\r\n            let card = this.MyHand._children[i];\r\n            let jsCard = card.getComponent(card.name);\r\n            if(jsCard.getCard().id == id){\r\n                return card;\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    eventBack(){\r\n        mm.audio.playButton();\r\n        if(!this.controller.m_tableInfo.m_isGameStart || this.controller.m_tableInfo.m_listActiveUserName.length <= 1){\r\n            this.requestLeaveRoom();\r\n        }else{\r\n            let isSitOut = true;\r\n            if(this.controller.m_tableInfo.m_listUserSitOut.indexOf(SmartFoxSDK.TLMNController.ZoneInstance.mySelf.name) >= 0){\r\n                isSitOut = false;\r\n            }\r\n            let sitOutRequest = new TLMNRequest.SitOutRequest();\r\n            sitOutRequest.setRoomId(this._room.id);\r\n            sitOutRequest.setSitOut(isSitOut);\r\n            SmartFoxSDK.TLMNController.ZoneInstance.send(sitOutRequest.toSRequest());\r\n        }\r\n    },\r\n    requestSitOn(){\r\n        let myName = SmartFoxSDK.TLMNController.ZoneInstance.mySelf.name;\r\n        if(this._getJSPlayerByName(myName) == null){\r\n            let sitOnRequest = new TLMNRequest.SitOnRequest().setRoomId(this._room.id).setAutoSitOn();\r\n            SmartFoxSDK.TLMNController.ZoneInstance.send(sitOnRequest.toSRequest());\r\n            this.hideDeskEmpty();\r\n        }\r\n    },\r\n    eventCheat1() {\r\n        let type = parseInt(this.edtCheat1.string.trim());\r\n        let sitOnRequest = new TLMNRequest.CheatReequst().setRoomId(this._room.id).setTypeUser(type, \"test05\");\r\n        SmartFoxSDK.TLMNController.ZoneInstance.send(sitOnRequest.toSRequest());\r\n    },\r\n    eventCheat2() {\r\n        let type = parseInt(this.edtCheat1.string.trim());\r\n        let sitOnRequest = new TLMNRequest.CheatReequst().setRoomId(this._room.id).setTypeUser(type, \"test06\");\r\n        SmartFoxSDK.TLMNController.ZoneInstance.send(sitOnRequest.toSRequest());\r\n    },\r\n    eventShowChat(event, data) {\r\n        mm.audio.playButton();\r\n        this.ChatEmojiLayer.active = !this.ChatEmojiLayer.active;\r\n        if (this.ChatEmojiLayer.active)\r\n            this.ChatEmojiLayer.getComponent(\"ChatEmojiLayer\").initController(SmartFoxSDK.TLMNController.ZoneInstance);\r\n    },\r\n    onPublicMessage(messData) {\r\n        let playerJs = this._getJSPlayerByName(messData.sender.name);\r\n        if(playerJs != null){\r\n            playerJs.onPublicMessage(messData.msg)\r\n        }\r\n    },\r\n});\r\n"]}