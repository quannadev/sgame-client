{"version":3,"sources":["assets/scripts/baccarat/UIBaccarat.js"],"names":["BaccaratCard","require","cc","Class","VozBaseComponent","properties","ChatEmojiLayer","Node","listCau","threeCau","lbSession","Label","listNodeBet","scrollBet","ScrollView","bgThreeCau","type","SpriteFrame","bgListCau","listNodePot","_currentType","_currentBet","menuNode","Timer","ChipPrefab","Prefab","baccaratPrefab","PlayerPos","Noti","playerCard1","playerCard2","playerCard3","playerCardUp","playerBgPoint","playerPoint","bankerCard1","bankerCard2","bankerCard3","bankerCardUp","bankerBgPoint","bankerPoint","winNode","playerNode","bankerNode","girl","ListPosInGirl","fontWin","Font","fontLose","_currentTime","_dataCau","_myChipBet","_poolChip","_poolCau","_isDat","_isDatLast","_lastBet","_currentPercent","onLoad","director","getCollisionManager","enabled","self","ListChipImg","children","poolChip","i","chip","instantiate","node","addChild","active","push","listMyChipBet","listChipBet","Promise","all","map","nodeBet","index","getChildByName","getComponent","on","EventType","TOUCH_END","event","polygonCollider","PolygonCollider","Intersection","pointInPolygon","getLocation","world","points","SmartFoxSDK","BaccaratController","m_tableInfo","isBetting","mm","Toast","showToast","audio","playDatCua","sendRequestBet","onEnable","hideAll","_stopEffectWinPot","subBet","runActionChangeMoney","username","money","speed","updateUserVariable","playWin","Math","abs","fontTxt","pos","getPosFromName","nodeAvatar","moneyWin","stopAllActions","position","v2","font","string","Utils","addDotToNumber","nodeTo","runAction","sequence","moveTo","easing","easeOut","delayTime","callFunc","runEffectGirl","effectName","sp","Skeleton","setAnimation","showResult","cardPlayer","cardBanker","winpot","chipUserOnBoard","usersOnboard","angle","opacity","listCardPlayer","listCardBanker","length","Card","pointNumber","init","reveal","runActionOpenCard","runActionShowPoint","showWin","showEffectWinLose","posNode","effectname","y","nodeCard","cb","rotate1","rotateTo","rotate2","rotate3","fadeIn","fadeOut","moveEnd","moveBy","x","spawn","nodePoint","scaleY","scale","scaleTo","winPot","blink","bgWin","runActionToGirl","actionFlyChipToPlayer","getNumberCardFromChip","number10M","floor","number1M","number500k","number100k","number50k","number10k","number5k","number2k","number1k","totalActive","count","chipNode","posTo","getPositionInOtherNode","parent","positionGirl","random","removeFromParent","resumeGame","time","getChipNode","returnChipNode","showListUsers","listUserShow","nodeUser","lb_name","lb_money","user","getVariable","value","_username","name","GameVariables","getDisplayName","formatCurrency","getChip","updateChip","_turnOnTime","maxTime","setTotalProgress","setTotalRemain","turnOnTimer","_turnOffTime","turnOffTimer","showListMyChipBet","bets","_isHaveChipBet","showListChipBet","selectBetChip","betChip","playButton","currentTarget","parseInt","bet","ZoneInstance","mySelf","betRequest","BaccaratRequest","BetRequest","setBetChip","setTypePot","send","toSRequest","actionFlyChipToPot","potType","hasOwnProperty","actionFlyOneChipToPot","actionFlyMutiChipToPot","chipName","loadRes","Sprite","nodeFrom","getPosBet","listCard","allKey","Object","keys","key","positionTo","total","allChipNode","then","result","betNode","bet0","bet1","bet2","childrenCount","card","eventCloseMenu","eventOpenMenu","eventRank","Loading","show","request","CasinoRequest","LeaderBoardRequest","eventTransaction","HistoryRequest","clickExitRoom","room","getRoomByName","SmartFox","Requests","System","LeaveRoomRequest","UIManger","eventHelper","pop","src","eventSoiCau","historyRequest","HistoryDetailRequest","showSoiCau","dataCau","data","eventGapThep","eventDatLai","haveChip","eventScrollLeft","scrollToPercentHorizontal","eventScrollRight","showNoti","message","scheduleOnce","onListRender","item","idx","cau","updateCau","startPos","nodeCau","setCauInfo","updateThreeCau","totalCau","getTypeCau","spriteFrame","con","cai","typeCau","eventShowChat","initController","onPublicMessage","messData","msgItem","msg","sender","emojiBox","undefined","isEmoij","indexOf","emojiNode","boxNode","replace","Layout","updateLayout","subChip","Poker"],"mappings":"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","sourceRoot":"/","sourcesContent":["let BaccaratCard = require('BaccaratCard');\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        ChatEmojiLayer: cc.Node,\n        listCau     : cc.Node,\n        threeCau    : cc.Node,\n        lbSession   : cc.Label,\n        listNodeBet : cc.Node,\n        scrollBet   : cc.ScrollView,\n        bgThreeCau : {\n            type: cc.SpriteFrame,\n            default: []\n        },\n        bgListCau : {\n            type: cc.SpriteFrame,\n            default: []\n        },\n        listNodePot : {\n            type: cc.Node,\n            default: []\n        },\n        _currentType         : -1,\n        _currentBet          : 1000,\n        menuNode             : cc.Node,\n        Timer                : cc.Node,\n        ChipPrefab           : cc.Prefab,\n        baccaratPrefab       : cc.Prefab,\n        PlayerPos            : cc.Node,\n        Noti                 : cc.Node,\n        playerCard1          : cc.Node,\n        playerCard2          : cc.Node,\n        playerCard3          : cc.Node,\n        playerCardUp         : cc.Node,\n        playerBgPoint        : cc.Node,\n        playerPoint          : cc.Label,\n\n        bankerCard1          : cc.Node,\n        bankerCard2          : cc.Node,\n        bankerCard3          : cc.Node,\n        bankerCardUp         : cc.Node,\n        bankerBgPoint        : cc.Node,\n        bankerPoint          : cc.Label,\n        winNode              : cc.Node,\n        playerNode           : cc.Node,\n        bankerNode           : cc.Node,\n        girl                 : cc.Node,\n        ListPosInGirl        : cc.Node,\n        fontWin              : cc.Font,\n        fontLose             : cc.Font,\n        _currentTime : 0,\n        _dataCau     : [],\n        _myChipBet   : [],\n        _poolChip    : [],\n        _poolCau     : [],\n        _isDat       : false,\n        _isDatLast   : false,\n        _lastBet     : null,\n        _currentPercent     : 0,\n    },\n    onLoad(){\n        cc.director.getCollisionManager().enabled = true;\n        let self = this;\n        this._myChipBet     = [];\n        this.ListChipImg    = {\n            \"1000\"      : \"ic_chip1_small\",\n            \"2000\"      : \"ic_chip2_small\",\n            \"5000\"      : \"ic_chip3_small\",\n            \"10000\"     : \"ic_chip4_small\",\n            \"50000\"     : \"ic_chip5_small\",\n            \"100000\"    : \"ic_chip6_small\",\n            \"500000\"    : \"ic_chip7_small\",\n            \"1000000\"   : \"ic_chip8_small\",\n            \"10000000\"  : \"ic_chip9_small\"\n        };\n        this._currentBet    = 1000;\n        this._lastBet       = this.listNodeBet.children[0];\n        this._isDat         = false;\n        this._isDatLast     = false;\n        this.poolChip = [];\n        for(let i = 0; i < 20;i++){\n            let chip = cc.instantiate(this.ChipPrefab);\n            this.node.addChild(chip);\n            chip.active = false;\n            this.poolChip.push(chip);\n        }\n        this.listMyChipBet = [];\n        this.listChipBet   = [];\n        Promise.all(this.listNodePot.map(function(nodeBet, index){\n            self.listMyChipBet.push(nodeBet.getChildByName(\"bg_cuoc_ca_nhan\").getChildByName(\"mybet\").getComponent(cc.Label));\n            self.listChipBet.push(nodeBet.getChildByName(\"bg_tongcuoc\").getChildByName(\"pot\").getComponent(cc.Label));\n            nodeBet.on(cc.Node.EventType.TOUCH_END, function (event) {\n                let polygonCollider = nodeBet.getComponent(cc.PolygonCollider);\n                if (cc.Intersection.pointInPolygon(event.getLocation(), polygonCollider.world.points)) {\n                    if (!SmartFoxSDK.BaccaratController.m_tableInfo.isBetting){\n                        mm.Toast.showToast(1, \"Không được cược\");\n                        return;\n                    }\n                    self._isDat        = true;\n                    mm.audio.playDatCua();\n                    self.sendRequestBet(self._currentBet, index);\n                }\n            });\n        }));\n    },\n    onEnable(){\n        this._dataCau            = [];\n        this._currentPercent     = 0;\n        this.hideAll();\n        this._stopEffectWinPot();\n    },\n    hideAll() {\n        this.Timer.active = false;\n        this.Noti.active  = false;\n        Promise.all(this.listNodePot.map(function(nodeBet, index){\n            Promise.all(nodeBet.children.map(function(subBet, index){\n                subBet.active = false;\n            }));\n        }));\n        this.playerCard1.active     = false;\n        this.playerCard2.active     = false;\n        this.playerCard3.active     = false;\n        this.playerCardUp.active    = false;\n        this.playerBgPoint.active   = false;\n        this.bankerCard1.active     = false;\n        this.bankerCard2.active     = false;\n        this.bankerCard3.active     = false;\n        this.bankerCardUp.active    = false;\n        this.bankerPoint.active     = false;\n        this.bankerBgPoint.active   = false;\n        this.winNode.active         = false;\n        this.menuNode.active        = false;\n    },\n    runActionChangeMoney(username, money, speed) {\n        this.updateUserVariable(0);\n        if (money > 0) {\n            mm.audio.playWin();\n        }\n        if (Math.abs(money) > 0){\n            let fontTxt = money > 0? this.fontWin: this.fontLose;\n            let pos        = this.getPosFromName(username);\n            let nodeAvatar = this.PlayerPos.getChildByName(\"pos_\"+pos);\n            let moneyWin   = nodeAvatar.getChildByName(\"money_win\").getComponent(cc.Label);\n            moneyWin.node.stopAllActions();\n            moneyWin.node.active = true;\n            moneyWin.node.stopAllActions();\n            moneyWin.node.position = cc.v2(0, 20);\n            moneyWin.font        = fontTxt;\n            moneyWin.string      = money > 0? \"+\"+Utils.addDotToNumber(Math.abs(money)): \"-\"+Utils.addDotToNumber(Math.abs(money));\n            let nodeTo           = cc.v2(0, 120);\n            if (pos > 6)\n                nodeTo           = cc.v2(0, 50);\n            moneyWin.node.runAction(cc.sequence(cc.moveTo(0.5*speed, nodeTo).easing(cc.easeOut(0.5)), cc.delayTime(2*speed), cc.callFunc(function () {\n                moneyWin.node.active = false;\n            })));\n        }\n    },\n    runEffectGirl(effectName) {\n        this._isDat = false;\n        this.girl.getComponent(sp.Skeleton).setAnimation(0, effectName, false);\n    },\n    showResult(cardPlayer, cardBanker, winpot, chipUserOnBoard, usersOnboard, speed) {\n        let self = this;\n        this.runEffectGirl(\"2\");\n        this.playerCardUp.active    = true;\n        this.bankerCardUp.active    = true;\n\n        this.bankerCardUp.position  = cc.v2(-34, -46);\n        this.bankerCardUp.angle     = 0;\n        this.bankerCardUp.opacity   = 255;\n        this.bankerCardUp.stopAllActions();\n\n        this.playerCardUp.position  = cc.v2(34, -46);\n        this.playerCardUp.angle     = 0;\n        this.playerCardUp.opacity   = 255;\n        this.playerCardUp.stopAllActions();\n        let listCardPlayer = [];\n        let listCardBanker = [];\n\n        for (let i=0; i< cardPlayer.length; i++){\n            listCardPlayer.push(new BaccaratCard.Card(cardPlayer[i]));\n        }\n        for (let i=0; i< cardBanker.length; i++){\n            listCardBanker.push(new BaccaratCard.Card(cardBanker[i]));\n        }\n        this.playerPoint.string = (listCardPlayer[0].pointNumber + listCardPlayer[1].pointNumber)%10;\n        this.bankerPoint.string = (listCardBanker[0].pointNumber + listCardBanker[1].pointNumber)%10;\n\n        this.playerCard2.getComponent(\"ItemCard\").init(listCardPlayer[1]);\n        this.bankerCard2.getComponent(\"ItemCard\").init(listCardBanker[1]);\n\n        this.playerCard1.getComponent(\"ItemCard\").reveal(listCardPlayer[0], true);\n        this.bankerCard1.getComponent(\"ItemCard\").reveal(listCardBanker[0], true, function (){\n            self.runActionOpenCard(self.playerCardUp, speed, function () {\n                self.runActionShowPoint(self.playerBgPoint, speed, function () {\n                    self.runActionOpenCard(self.bankerCardUp, speed, function () {\n                        self.runActionShowPoint(self.bankerBgPoint, speed, function () {\n                            //show win\n                            if (cardPlayer.length > 2 || cardBanker.length > 2){\n                                if (cardPlayer.length == 3){\n                                    self.playerCard3.getComponent(\"ItemCard\").reveal(listCardPlayer[2], false, function (){\n                                        self.playerPoint.string = (listCardPlayer[0].pointNumber + listCardPlayer[1].pointNumber+listCardPlayer[2].pointNumber)%10;\n                                        self.showWin(winpot, chipUserOnBoard, usersOnboard, speed);\n                                    });\n                                }\n                                if (cardBanker.length == 3){\n                                    self.bankerCard3.getComponent(\"ItemCard\").reveal(listCardBanker[2], false, function (){\n                                        self.bankerPoint.string = (listCardBanker[0].pointNumber + listCardBanker[1].pointNumber+listCardBanker[2].pointNumber)%10;\n                                        self.showWin(winpot, chipUserOnBoard, usersOnboard, speed);\n                                    });\n                                }\n                            }else {\n                                self.showWin(winpot, chipUserOnBoard, usersOnboard, speed);\n                            }\n\n                        });\n                    });\n                });\n            });\n        });\n    },\n    showEffectWinLose(pos){\n        this.winNode.active = true;\n        let posNode = this.playerNode.position;\n        let effectname = \"hoa\";\n        if (pos == 0 || pos ==3){\n            effectname = \"thangcon_1\";\n            posNode = this.playerNode.position;\n        }else if (pos == 1 || pos ==4){\n            effectname = \"thangcai_1\";\n            posNode = this.bankerNode.position;\n        }else{\n            posNode = cc.v2(0,  this.bankerNode.y);\n            effectname = \"hoa_1\";\n        }\n        this.winNode.position = posNode;\n        this.winNode.getComponent(sp.Skeleton).setAnimation(0, effectname, false);\n    },\n    runActionOpenCard(nodeCard, speed, cb) {\n        let rotate1 = cc.rotateTo(0.5*speed, 6);\n        let rotate2 = cc.rotateTo(1*speed, -6);\n        let rotate3 = cc.rotateTo(0.5*speed, 0);\n        let fadeIn = cc.fadeOut(1.5*speed);\n        let moveEnd = cc.moveBy(1.5*speed, cc.v2(nodeCard.x+50, nodeCard.y-50));\n        nodeCard.runAction(cc.sequence(rotate1, rotate2, rotate3, cc.spawn(fadeIn, moveEnd), cc.callFunc(function () {\n            if (cb)\n                cb();\n        })));\n    },\n    runActionShowPoint(nodePoint, speed, cb) {\n        if (!nodePoint.active)\n            nodePoint.active = true;\n        nodePoint.stopAllActions();\n        nodePoint.scaleY = 0;\n        let scale = cc.scaleTo(0.2*speed, 1, 1);\n        nodePoint.runAction(cc.sequence(scale, cc.callFunc(function () {\n            if (cb)\n                cb();\n        })));\n    },\n    showWin(winPot, chipUserOnBoard, usersOnboard, speed) {\n        let self = this;\n        for (let i=0; i< winPot.length; i++){\n            let pos = winPot[i];\n            let blink    = cc.blink(2*speed, 8);\n            let bgWin    = this.listNodePot[pos].getChildByName(\"bg_win\");\n            bgWin.active = true;\n            bgWin.runAction(cc.sequence(blink, cc.delayTime(1*speed), cc.callFunc(function () {\n                self.runActionToGirl(function () {\n                    if (chipUserOnBoard.length > 0){\n                        Promise.all(usersOnboard.map(function(username, index){\n                            self.actionFlyChipToPlayer(username, chipUserOnBoard[index], speed);\n                        }));\n                    }\n                });\n            })));\n        }\n        this.showEffectWinLose(winPot[0]);\n    },\n    getNumberCardFromChip(money) {\n        let number10M   = Math.floor(money/10000000);\n        money           = money - number10M*10000000;\n        let number1M    =  Math.floor(money/1000000);\n        money           = money - number1M*1000000;\n        let number500k  =  Math.floor(money/500000);\n        money           = money - number500k*500000;\n        let number100k  =  Math.floor(money/100000);\n        money           = money - number100k*100000;\n        let number50k   =  Math.floor(money/50000);\n        money           = money - number50k*50000;\n        let number10k   =  Math.floor(money/10000);\n        money           = money - number10k*10000;\n        let number5k    =  Math.floor(money/5000);\n        money           = money - number5k*5000;\n        let number2k    =  Math.floor(money/2000);\n        money           = money - number2k*2000;\n        let number1k    =  Math.floor(money/1000);\n        return [number1k, number2k, number5k, number10k, number50k, number100k, number500k, number1M, number10M];\n    },\n    runActionToGirl(cb) {\n        let totalActive = 0;\n        for (let i=0; i< this.poolChip.length; i++){\n            if (this.poolChip[i].active)\n                totalActive++;\n        }\n        let count = 0;\n        for (let i=0; i< this.poolChip.length; i++){\n          let chipNode = null;\n          if (this.poolChip[i].active){\n              count ++;\n              chipNode = this.poolChip[i];\n              chipNode.position = cc.v2(0,0);\n              let posTo = this.getPositionInOtherNode(chipNode, this.ListPosInGirl);\n              chipNode.parent   = this.ListPosInGirl;\n              chipNode.position = posTo;\n              let positionGirl = cc.v2(Math.random()*50-20, Math.random()*10-10);\n              chipNode.runAction(cc.sequence(cc.moveTo(1, positionGirl).easing(cc.easeOut(0.5)), cc.delayTime(0.05*i), cc.callFunc(function () {\n                  chipNode.stopAllActions();\n                  chipNode.active = false;\n                  chipNode.removeFromParent(true);\n                  if (count >= totalActive){\n                      count = -1;\n                      if (cb)\n                          cb();\n                  }\n              })));\n          }\n      }\n    },\n    resumeGame(cardPlayer, cardBanker, winpot, time, usersOnboard, chipUserOnBoard) {\n        this.showResult(cardPlayer, cardBanker, winpot, chipUserOnBoard, usersOnboard, time/20);\n    },\n    getChipNode() {\n        for(let i = 0; i < this.poolChip.length;i++){\n            if(!this.poolChip[i].active){\n                this.poolChip[i].active = true;\n                this.poolChip[i].position = cc.v2(0,0);\n                this.poolChip[i].parent = this.node\n                return this.poolChip[i];\n            }\n        }\n        let chip = cc.instantiate(this.ChipPrefab);\n        this.node.addChild(chip);\n        chip.active = true;\n        this.poolChip.push(chip);\n        return chip;\n    },\n    returnChipNode(chipNode){\n        chipNode.active = false;\n    },\n    _stopEffectWinPot(){\n\n    },\n    showListUsers(listUserShow){\n        for(let i = 0; i < 7;i++){\n            let nodeUser = this.PlayerPos.getChildByName(\"pos_\"+i);\n            let lb_name = nodeUser.getChildByName(\"name\").getComponent(cc.Label);\n            let lb_money = nodeUser.getChildByName(\"money\").getComponent(cc.Label);\n            let user = (i >= listUserShow.length) ? null : listUserShow[i];\n            if(user && (user.getVariable(\"role\").value != \"admin\")){\n                nodeUser.active = true;\n                nodeUser._username = user.name;\n                lb_name.string = GameVariables.getDisplayName(user);\n                lb_money.string = Utils.formatCurrency(GameVariables.getChip(user));\n            }else{\n                nodeUser.active = false;\n                nodeUser._username = null;\n            }\n        }\n    },\n    getPosFromName(username){\n        for(let i = 0; i < 7;i++){\n            let nodeUser = this.PlayerPos.getChildByName(\"pos_\"+i);\n            if(nodeUser.active && nodeUser._username && nodeUser._username == username){\n                return i;\n            }\n        }\n        return 7 ;\n    },\n    updateChip(user){\n        for(let i = 0; i < 7;i++){\n            let nodeUser = this.PlayerPos.getChildByName(\"pos_\"+i);\n            let lb_money = nodeUser.getChildByName(\"money\").getComponent(cc.Label);\n            if(nodeUser.active && nodeUser._username && nodeUser._username == user.name){\n                lb_money.string = Utils.formatCurrency(GameVariables.getChip(user));\n                return;\n            }\n        }\n    },\n    _turnOnTime(time, maxTime){\n        this.Timer.active       = true;\n        this.Timer.getComponent(\"TimeSub\").setTotalProgress(maxTime);\n        this.Timer.getComponent(\"TimeSub\").setTotalRemain(time);\n        this.Timer.getComponent(\"TimeSub\").turnOnTimer();\n        this._currentTime       = time;\n        this._stopEffectWinPot();\n    },\n    _turnOffTime(){\n        this.Timer.getComponent(\"TimeSub\").turnOffTimer();\n        this.Timer.active = false;\n    },\n    showListMyChipBet(bets){\n        if (this._isHaveChipBet(bets)){\n            this._myChipBet = bets;\n        }else {\n            if (!this._isDatLast)\n                this._myChipBet = bets;\n            if (this._isDatLast)\n                this._isDatLast = false;\n        }\n        for(let i = 0; i < bets.length;i++){\n            if (bets[i] >0){\n                if (!this.listMyChipBet[i].node.parent.active)\n                    this.listMyChipBet[i].node.parent.active = true;\n                this.listMyChipBet[i].string = Utils.formatCurrency(bets[i]);\n            }else\n                this.listMyChipBet[i].node.parent.active = false;\n        }\n    },\n    showListChipBet(bets){\n        for(let i = 0; i < bets.length;i++){\n            if (!this.listChipBet[i].node.parent.active)\n                this.listChipBet[i].node.parent.active = true;\n            this.listChipBet[i].string = Utils.formatCurrency(bets[i]);\n        }\n    },\n    selectBetChip(event, betChip){\n        mm.audio.playButton();\n        this._lastBet.getChildByName(\"bg_select\").active = false;\n        event.currentTarget.getChildByName(\"bg_select\").active = true;\n        this._lastBet    = event.currentTarget;\n        this._currentBet = parseInt(betChip);\n    },\n    sendRequestBet(bet, type) {\n        this._isDatLast    = true;\n        this._currentType  = type;\n        if(this._currentType < 0 || this._currentType >= 6){\n            mm.Toast.showToast(1, \"Của đặt không hợp lệ\");\n        }else if(GameVariables.getChip(SmartFoxSDK.BaccaratController.ZoneInstance.mySelf) < bet){\n            mm.Toast.showToast(1, \"Không đủ tiền!\");\n        }else{\n            let betRequest = new BaccaratRequest.BetRequest();\n            betRequest.setBetChip(bet);\n            betRequest.setTypePot(this._currentType);\n            SmartFoxSDK.BaccaratController.ZoneInstance.send(betRequest.toSRequest());\n        }\n    },\n    actionFlyChipToPot(username, potType, money){\n        if (this.ListChipImg.hasOwnProperty(money)){\n            this.actionFlyOneChipToPot(username, potType, money);\n        }else {\n            this.actionFlyMutiChipToPot(username, potType, money);\n        }\n    },\n    actionFlyOneChipToPot(username, potType, money){\n        let pos = this.getPosFromName(username);\n        let chipName = \"ic_chip1_small\";\n        if (this.ListChipImg.hasOwnProperty(money)){\n            chipName = this.ListChipImg[money];\n            let chipNode = this.getChipNode();\n            Utils.loadRes(chipNode.getComponent(cc.Sprite),\"images/baccarat/\"+chipName);\n            let nodeAvatar = this.PlayerPos.getChildByName(\"pos_\"+pos);\n            chipNode.position = nodeAvatar.position;\n            let nodeFrom = this.getPosBet(potType);\n            let posTo = this.getPositionInOtherNode(nodeFrom, this.node);\n            chipNode.runAction(cc.sequence(cc.moveTo(0.5, cc.v2(posTo.x, posTo.y)).easing(cc.easeOut(1)), cc.callFunc(function () {\n                chipNode.position = cc.v2(0,0);\n                chipNode.parent = nodeFrom;\n            })));\n        }\n    },\n    actionFlyMutiChipToPot(username, potType, money){\n        let self = this;\n        let listCard = this.getNumberCardFromChip(money);\n        let allKey   = Object.keys(this.ListChipImg);\n        Promise.all(allKey.map(function(key, index){\n            if (listCard[index] > 0){\n                let chip = parseInt(key);\n                for (let i=0; i< listCard[index]; i++){\n                    self.actionFlyOneChipToPot(username, potType, chip);\n                }\n            }\n        }))\n    },\n    actionFlyChipToPlayer(username, money, speed){\n        let self = this;\n        let listCard = this.getNumberCardFromChip(money);\n        let allKey = Object.keys(this.ListChipImg);\n        let pos        = self.getPosFromName(username);\n        let nodeAvatar = self.PlayerPos.getChildByName(\"pos_\"+pos);\n        let positionTo = nodeAvatar.position;\n        let total = 0;\n        let allChipNode = [];\n        Promise.all(allKey.map(function(key, index){\n            if (listCard[index] > 0){\n                let chip = parseInt(key);\n                for (let i=0; i< listCard[index]; i++){\n                    let chipName = \"ic_chip1_small\";\n                    if (self.ListChipImg.hasOwnProperty(chip))\n                        chipName = self.ListChipImg[key]\n                    let chipNode = self.getChipNode();\n                    Utils.loadRes(chipNode.getComponent(cc.Sprite),\"images/baccarat/\"+chipName);\n                    chipNode.position = cc.v2(Math.random()*50-20, Math.random()*10-10);\n                    allChipNode.push(chipNode);\n                }\n            }\n        })).then(result => {\n            Promise.all(allChipNode.map(function(chipNode, index){\n                if (chipNode != null){\n                    total ++;\n                    chipNode.runAction(cc.sequence(cc.delayTime(total*0.1*speed), cc.moveTo(1*speed, positionTo).easing(cc.easeOut(1)), cc.callFunc(function () {\n                        chipNode.removeFromParent(true);\n                        chipNode.active = false;\n                    })));\n                }\n            })).then(result => {\n                self.runActionChangeMoney(username, money, speed);\n            })\n        });\n    },\n    getPosBet(potType) {\n        let betNode = null;\n        if (potType < 2){\n            let bet0 = this.listNodePot[potType].getChildByName(\"Bet0\");\n            let bet1 = this.listNodePot[potType].getChildByName(\"Bet1\");\n            let bet2 = this.listNodePot[potType].getChildByName(\"Bet2\");\n            if (bet0.childrenCount < bet1.childrenCount)\n                betNode = bet0;\n            else if (bet1.childrenCount < bet2.childrenCount){\n                betNode = bet1;\n            }else\n                betNode = bet2;\n        }else{\n            betNode = this.listNodePot[potType].getChildByName(\"Bet0\");\n        }\n        if (betNode.childrenCount > 8){\n            let card = betNode.children[0];\n            card.removeFromParent(true);\n            card.active = false;\n        }\n        if (!betNode.active)\n            betNode.active = true;\n        return betNode;\n    },\n    eventCloseMenu(){\n        mm.audio.playButton();\n        this.menuNode.active = false;\n    },\n    eventOpenMenu() {\n        mm.audio.playButton();\n        this.menuNode.active = true;\n    },\n    eventRank() {\n        mm.audio.playButton();\n        mm.Loading.show();\n        this.menuNode.active = false;\n        let request = new CasinoRequest.LeaderBoardRequest();\n        SmartFoxSDK.BaccaratController.ZoneInstance.send(request.toSRequest())\n    },\n    eventTransaction() {\n        mm.audio.playButton();\n        mm.Loading.show();\n        this.menuNode.active = false;\n        let request = new CasinoRequest.HistoryRequest();\n        SmartFoxSDK.BaccaratController.ZoneInstance.send(request.toSRequest());\n    },\n    clickExitRoom(event){\n        let room = SmartFoxSDK.BaccaratController.ZoneInstance.getRoomByName(\"baccarat\");\n        if(room){\n            SmartFoxSDK.BaccaratController.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.LeaveRoomRequest(room));\n            mm.Loading.show();\n        }else{\n            UIManger.show(\"UIHome\");\n        }\n    },\n    eventHelper() {\n        mm.audio.playButton();\n        this.show(\"UIBaccaratHelper\", {pop: true, src: 'baccarat'});\n    },\n    eventSoiCau() {\n        mm.audio.playButton();\n        mm.Loading.show();\n        if (this._dataCau.length < 1){\n            let historyRequest = new BaccaratRequest.HistoryDetailRequest();\n            SmartFoxSDK.BaccaratController.ZoneInstance.send(historyRequest.toSRequest());\n        }else {\n            this.showSoiCau(this._dataCau);\n        }\n    },\n    showSoiCau(dataCau) {\n        this._dataCau = dataCau;\n        this.show(\"UIBaccaratSoiCau\", {pop: true, src: 'baccarat', data: dataCau});\n    },\n    eventGapThep(){\n        mm.audio.playButton();\n        if (this._isHaveChipBet(this._myChipBet) &&  !this._isDat){\n            this._isDat        = true;\n            for (let i=0; i< this._myChipBet.length; i++){\n                if (this._myChipBet[i] > 0)\n                    this.sendRequestBet(2*this._myChipBet[i], i);\n            }\n        }else {\n            mm.Toast.showToast(1, \"Không có dữ liệu gấp thếp\");\n        }\n    },\n    eventDatLai() {\n        mm.audio.playButton();\n        if (this._isHaveChipBet(this._myChipBet) &&  !this._isDat){\n            this._isDat        = true;\n            for (let i=0; i< this._myChipBet.length; i++){\n                if (this._myChipBet[i] > 0)\n                    this.sendRequestBet(this._myChipBet[i], i);\n            }\n        }else{\n            mm.Toast.showToast(1, \"Không có dữ liệu đặt lại\");\n        }\n    },\n    _isHaveChipBet(listChipBet) {\n        let haveChip = false;\n        for (let i=0; i< listChipBet.length; i++){\n            if (listChipBet[i] > 0){\n                haveChip = true;\n                return haveChip;\n            }\n        }\n        return haveChip;\n    },\n    eventScrollLeft() {\n        mm.audio.playButton();\n        this._currentPercent -= 0.5;\n        if (this._currentPercent < 0)\n            this._currentPercent = 0;\n        this.scrollBet.scrollToPercentHorizontal(this._currentPercent, 1);\n    },\n    eventScrollRight() {\n        mm.audio.playButton();\n        this._currentPercent += 0.5;\n        if (this._currentPercent > 1)\n            this._currentPercent = 1;\n        this.scrollBet.scrollToPercentHorizontal(this._currentPercent, 1);\n    },\n    showNoti(message) {\n        this.Noti.active = true;\n        this.Noti.getChildByName(\"lb_noti_content\").getComponent(cc.Label).string = message;\n        this.scheduleOnce(function () {\n            this.Noti.active = false;\n        }, 1.5)\n    },\n    onListRender(item, idx) {\n        let cau = this.listCau[idx];\n        item.getComponent(item.name).init(cau);\n    },\n    updateCau(listCau) {\n        let self     = this;\n        let startPos = listCau.length - this.listCau.childrenCount;\n        if (startPos < 0)\n            startPos = 0;\n        Promise.all(this.listCau.children.map(function(nodeCau, index){\n            if (startPos+index < listCau.length){\n                let type = listCau[startPos+index].type;\n                self.setCauInfo(type, nodeCau);\n            }else {\n                nodeCau.active = false;\n            }\n        }));\n        this.updateThreeCau(listCau);\n    },\n    updateThreeCau(listCau) {\n        let threeCau = [];\n        let totalCau = listCau.length;\n        if (totalCau > 3){\n            threeCau.push(listCau[totalCau-3]);\n            threeCau.push(listCau[totalCau-2]);\n            threeCau.push(listCau[totalCau-1]);\n        }else {\n            threeCau = listCau;\n        }\n        let self = this;\n        let total = threeCau.length;\n        Promise.all(this.threeCau.children.map(function(nodeCau, index){\n            if (index < total){\n                let type = self.getTypeCau(threeCau[index].type);\n                nodeCau.getComponent(cc.Sprite).spriteFrame = self.bgThreeCau[type];\n                if (type ==0)\n                    nodeCau.getChildByName(\"lb_point\").getComponent(cc.Label).string = threeCau[index].con;\n                else if (type ==1){\n                    nodeCau.getChildByName(\"lb_point\").getComponent(cc.Label).string = threeCau[index].cai;\n                }else\n                    nodeCau.getChildByName(\"lb_point\").getComponent(cc.Label).string = threeCau[index].con;\n            }else\n                nodeCau.active = false;\n\n        }));\n    },\n    setCauInfo(type, nodeCau) {\n        let cai = nodeCau.getChildByName(\"cai\");\n        let con = nodeCau.getChildByName(\"con\");\n        cai.active = false;\n        con.active = false;\n        for (let i=0; i< type.length; i++){\n            if (type[i] > 2){\n                if (type == 3){\n                    con.active = true;\n                }else {\n                    cai.active = true;\n                }\n            }else {\n                nodeCau.getComponent(cc.Sprite).spriteFrame = this.bgListCau[type[i]];\n            }\n        }\n    },\n    getTypeCau(typeCau) {\n        if (typeCau.length <2)\n            return typeCau[0];\n        for (let i=0; i<typeCau.length; i++){\n            if (typeCau[i] < 3)\n                return typeCau[i];\n        }\n        return 2;\n    },\n    eventShowChat(event, data) {\n        this.ChatEmojiLayer.active = !this.ChatEmojiLayer.active;\n        if (this.ChatEmojiLayer.active)\n            this.ChatEmojiLayer.getComponent(\"ChatEmojiLayer\").initController(SmartFoxSDK.BaccaratController.ZoneInstance);\n    },\n    onPublicMessage(messData){\n        let msgItem    = messData.msg;\n        let pos        = this.getPosFromName(messData.sender.name);\n        let emojiBox   = this.PlayerPos.children[pos].getChildByName(\"EMOJ\");\n        if (emojiBox != undefined){\n            let self    = this;\n            let isEmoij = msgItem.indexOf(\"emoij_\") >= 0;\n            let emojiNode = emojiBox.getChildByName(\"EMOJ\");\n            let boxNode   = emojiBox.getChildByName(\"box\");\n            emojiNode.active = false;\n            boxNode.active   = false;\n            if (isEmoij){\n                emojiNode.active   = true;\n                emojiNode.opacity  = 255;\n                let type = msgItem.replace(\"emoij_\", \"\");\n                emojiNode.stopAllActions();\n                emojiNode.getComponent(sp.Skeleton).setAnimation(0, type, false);\n                emojiNode.runAction(cc.sequence(cc.delayTime(1.5), cc.fadeOut(2), cc.callFunc(function () {\n                    emojiNode.active = false;\n                })));\n            }else {\n                boxNode.active   = true;\n                boxNode.opacity  = 255;\n                boxNode.stopAllActions();\n                boxNode.getChildByName(\"lb_chat\").getComponent(cc.Label).string = msgItem;\n                boxNode.getComponent(cc.Layout).updateLayout();\n                boxNode.runAction(cc.sequence(cc.delayTime(2), cc.fadeOut(2), cc.callFunc(function () {\n                    boxNode.active = false;\n                })));\n            }\n        }\n    },\n    updateUserVariable(subChip){\n        let nodeUser = this.PlayerPos.children[0]\n        nodeUser.getChildByName(\"money\").getComponent(cc.Label).string =  Utils.formatCurrency(GameVariables.Poker.getChip(SmartFoxSDK.BaccaratController.ZoneInstance.mySelf)-subChip);\n    },\n});\n"]}