{"version":3,"sources":["assets\\scripts\\baccarat\\ItemCard.js"],"names":["cc","Class","Component","properties","_isSelected","bg","Node","_card","_cbSelect","_removeSelect","onLoad","addEventSelect","cb","isSelected","getCard","setCard","card","loadCardBack","Utils","loadRes","getComponent","Sprite","_loadCard","nameFile","init","node","active","undefined","reveal","pIsFaceUp","self","timeFlip","callFunc","skewY","action","skewBy","action2","skewTo","runAction","sequence","delayTime","switchCard","reset","_zIndex","x","y","eventSelect","mm","audio","playButton","id","setScaleCard","scaleCard","width","height"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        _isSelected: false,\r\n        bg : cc.Node,\r\n        _card: null,\r\n        _cbSelect : null,\r\n        _removeSelect: true\r\n    },\r\n    onLoad(){\r\n\r\n    },\r\n    addEventSelect(cb){\r\n        this._cbSelect = cb;\r\n    },\r\n    isSelected(){\r\n        return this._isSelected;\r\n    },\r\n    getCard(){\r\n        return this._card;\r\n    },\r\n    setCard(card){\r\n        this._card = card;\r\n    },\r\n    loadCardBack(cb){\r\n        Utils.loadRes(this.bg.getComponent(cc.Sprite), \"images/baccarat/cards/card_up\", function () {\r\n            if (cb){\r\n                cb();\r\n            }\r\n        })\r\n    },\r\n    _loadCard(){\r\n        Utils.loadRes(this.bg.getComponent(cc.Sprite), \"images/baccarat/cards/\"+this._card.nameFile)\r\n    },\r\n    init(card, _removeSelect){\r\n        this.node.active = true;\r\n        if(card == null){\r\n            this.loadCardBack();\r\n        }else{\r\n            this._card = card;\r\n            if(_removeSelect != undefined){\r\n                this._removeSelect = _removeSelect;\r\n            }else{\r\n                this._removeSelect = true;\r\n            }\r\n            this._loadCard();\r\n        }\r\n    },\r\n    reveal(card, pIsFaceUp, cb){\r\n        this.node.active = true;\r\n        this.loadCardBack();\r\n        this._card = card;\r\n        let self = this;\r\n        let timeFlip = 0.45;\r\n        let callFunc = cc.callFunc(function () {\r\n            self._loadCard();\r\n            if(!pIsFaceUp)\r\n                self.node.skewY = 170;\r\n            else\r\n                self.node.skewY = 45;\r\n        });\r\n        if(!pIsFaceUp)\r\n        {\r\n            self.node.skewY = 0;\r\n            let action = cc.skewBy(timeFlip/2,0,10);\r\n            let action2 = cc.skewTo(timeFlip/2,0,180);\r\n            self.node.runAction(cc.sequence(cc.delayTime(1), action,callFunc,action2, cc.delayTime(0.5), cc.callFunc(function () {\r\n                if (cb)\r\n                    cb();\r\n            })));\r\n        }else\r\n        {\r\n            self.node.skewY = 180;\r\n            let action = cc.skewBy(timeFlip/2,0,-35);\r\n            let action2 = cc.skewTo(timeFlip/2,0,0);\r\n            self.node.runAction(cc.sequence(cc.delayTime(1), action,callFunc,action2, cc.delayTime(0.5), cc.callFunc(function () {\r\n                if (cb)\r\n                    cb();\r\n            })));\r\n        }\r\n    },\r\n    switchCard(pIsFaceUp) {\r\n        let self = this;\r\n        let timeFlip = 0.45;\r\n        let callFunc = cc.callFunc(function () {\r\n            self._loadCard();\r\n            if(!pIsFaceUp)\r\n                self.node.skewY = 170;\r\n            else\r\n                self.node.skewY = 45;\r\n        });\r\n        self.node.skewY = 0;\r\n        let action = cc.skewBy(timeFlip/2,0,10);\r\n        let action2 = cc.skewTo(timeFlip/2,0,180);\r\n        self.node.runAction(cc.sequence(action,callFunc,action2));\r\n        if(!pIsFaceUp)\r\n        {\r\n            self.node.skewY = 0;\r\n            let action = cc.skewBy(timeFlip/2,0,10);\r\n            let action2 = cc.skewTo(timeFlip/2,0,180);\r\n            self.node.runAction(cc.sequence(action,callFunc,action2));\r\n        }else\r\n        {\r\n            self.node.skewY = 180;\r\n            let action = cc.skewBy(timeFlip/2,0,-35);\r\n            let action2 = cc.skewTo(timeFlip/2,0,0);\r\n            self.node.runAction(cc.sequence(action,callFunc,action2));\r\n        }\r\n    },\r\n    reset(){\r\n        this.loadCardBack();\r\n        this.node._zIndex = 0;\r\n        this.node.x = 0;\r\n        this.node.y = 0;\r\n        this._isSelected = false;\r\n        this._card = null;\r\n        this._cbSelect = null;\r\n        this._removeSelect = true;\r\n    },\r\n    eventSelect(){\r\n        mm.audio.playButton();\r\n        if(!this._removeSelect){\r\n            if(!this._isSelected){\r\n                this._isSelected = true;\r\n                this.node.y = this.node.y + 20;\r\n                if(this._cbSelect){\r\n                    this._cbSelect(this.getCard().id);\r\n                }\r\n            }else{\r\n                this._isSelected = false;\r\n                this.node.y = this.node.y - 20;\r\n            }\r\n        }\r\n    },\r\n    setScaleCard(scaleCard){\r\n        this.node.width  *= scaleCard;\r\n        this.node.height *= scaleCard;\r\n    }\r\n});\r\n"]}