{"version":3,"sources":["assets\\scripts\\taixiu\\UITaiXiuSoiCau.js"],"names":["Listview","require","cc","Class","VozBaseComponent","properties","totalTai","Label","totalXiu","cauTai","SpriteFrame","cauXiu","listviewCau1","listviewCau2","lineTemplate","Node","iconXX1Template","iconXX2Template","iconXX3Template","iconTaiTemplate","iconXiuTemplate","xx1Draw","xx2Draw","xx3Draw","xx123Draw","btnBack","btnNext","soiCau1","soiCau2","listCau1","listCau2","totalTaiValue","totalXiuValue","_isDraw2","onEnable","node","zIndex","lastZIndex","drawPage2","active","eventGetAllCau","soiCauRequest","TaiXiuRequest","SoiCauRequest","SmartFoxSDK","TaiXiuController","ZoneInstance","send","toSRequest","self","subCau1","subCau2","total","Promise","all","_data","map","session","index","i","dices","length","push","slice","then","result","numItems","string","getComponent","ScrollView","scrollToRight","setAllCau","allCau","mm","Loading","hide","drawPage1","updateDataCau","dice","shift","eventClose","audio","playButton","back","onListRenderCau1","item","idx","cau1","children","itemCau","taiXiu","Sprite","spriteFrame","onListRenderCau2","itemAll","cau2","lbResult","getChildByName","color","Color","BLACK","WHITE","onListSelected","selectedId","lastSelectedId","val","list","listItem","_list","str","name","selectedMode","eventShowHideCau3","target","isChecked","eventShowHideCau41","eventShowHideCau42","eventShowHideCau43","data","endPosX","startPosY","startPosY123","_i","spacingX","spacingY","removeAllChildren","score","startPosXX1","v2","startPosXX2","startPosXX3","startPosXX123","iconXX1","instantiate","parent","position","iconXX2","iconXX3","iconXX123","endPosXX1","endPosXX2","endPosXX3","endPosXX123","line","width","Utils","v2Distance","angle","v2Degrees","fromHEX","eventGotoPage2","eventGotoPage1"],"mappings":"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","sourceRoot":"/","sourcesContent":["const Listview = require('Listview');\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        totalTai        : cc.Label,\r\n        totalXiu        : cc.Label,\r\n        cauTai          : cc.SpriteFrame,\r\n        cauXiu          : cc.SpriteFrame,\r\n        listviewCau1    : Listview,\r\n        listviewCau2    : Listview,\r\n        lineTemplate    : cc.Node,\r\n        iconXX1Template    : cc.Node,\r\n        iconXX2Template    : cc.Node,\r\n        iconXX3Template    : cc.Node,\r\n        iconTaiTemplate    : cc.Node,\r\n        iconXiuTemplate    : cc.Node,\r\n\r\n        xx1Draw    : cc.Node,\r\n        xx2Draw    : cc.Node,\r\n        xx3Draw    : cc.Node,\r\n        xx123Draw    : cc.Node,\r\n        btnBack    : cc.Node,\r\n        btnNext    : cc.Node,\r\n        soiCau1    : cc.Node,\r\n        soiCau2    : cc.Node,\r\n        listCau1       : null,\r\n        listCau2       : null,\r\n        totalTaiValue       : 0,\r\n        totalXiuValue       : 0,\r\n        _isDraw2       : false,\r\n    },\r\n    onEnable(){\r\n        this._isDraw2 = false;\r\n        if (this.node.zIndex <= cc.lastZIndex){\r\n            this.node.zIndex = cc.lastZIndex;\r\n        }\r\n        this.drawPage2();\r\n        this.btnBack.active = false;\r\n        this.btnNext.active = true;\r\n        this.eventGetAllCau();\r\n    },\r\n    eventGetAllCau() {\r\n        let soiCauRequest = new TaiXiuRequest.SoiCauRequest();\r\n        SmartFoxSDK.TaiXiuController.ZoneInstance.send(soiCauRequest.toSRequest());\r\n    },\r\n    drawPage2() {\r\n        let self = this;\r\n        this.listCau1 = [];\r\n        this.listCau2 = [];\r\n        let subCau1   = [];\r\n        let subCau2   = [];\r\n        let total     = 0;\r\n        this.totalTaiValue     = 0;\r\n        this.totalXiuValue     = 0;\r\n        Promise.all(this._data.map(function(session, index){\r\n            total = 0;\r\n            for (let i=0; i< session.dices.length; i++){\r\n                total += session.dices[i];\r\n            }\r\n            //Cau 1\r\n            if (subCau1.length < 4)\r\n                subCau1.push(total)\r\n            else {\r\n                subCau1.push(total)\r\n                self.listCau1.push(subCau1);\r\n                subCau1 = [];\r\n            }\r\n\r\n            //Cau 2\r\n            if (total <= 10){\r\n                self.totalXiuValue ++;\r\n                if (subCau2.length >0){\r\n                    if (subCau2[0] <= 10){\r\n                        subCau2.push(total);\r\n                    }else{\r\n                        if (subCau2.length < 7){\r\n                            self.listCau2.push(subCau2);\r\n                        }else{\r\n                            for (let i=0; i< subCau2.length; i=i+6){\r\n                                self.listCau2.push(subCau2.slice(i, i+6));\r\n                            }\r\n                        }\r\n                        subCau2 = [];\r\n                        subCau2.push(total);\r\n                    }\r\n                }else{\r\n                    subCau2.push(total);\r\n                }\r\n\r\n            }else{\r\n                self.totalTaiValue ++;\r\n                if (subCau2.length >0){\r\n                    if (subCau2[0] > 10){\r\n                        subCau2.push(total);\r\n                    }else{\r\n                        if (subCau2.length < 7){\r\n                            self.listCau2.push(subCau2);\r\n                        }else{\r\n                            for (let i=0; i< subCau2.length; i=i+6){\r\n                                self.listCau2.push(subCau2.slice(i, i+6));\r\n                            }\r\n                        }\r\n                        subCau2 = [];\r\n                        subCau2.push(total);\r\n                    }\r\n                }else{\r\n                    subCau2.push(total);\r\n                }\r\n            }\r\n        })).then(result => {\r\n            if (subCau1.length > 0)\r\n                self.listCau1.push(subCau1);\r\n            if (subCau2.length < 7){\r\n                self.listCau2.push(subCau2);\r\n            }else{\r\n                for (let i=0; i< subCau2.length; i=i+6){\r\n                    self.listCau2.push(subCau2.slice(i, i+6));\r\n                }\r\n            }\r\n            self.listviewCau1.numItems = this.listCau1.length;\r\n            self.listviewCau2.numItems = this.listCau2.length;\r\n            self.totalXiu.string       = self.totalXiuValue;\r\n            self.totalTai.string       = self.totalTaiValue;\r\n            self.listviewCau2.node.getComponent(cc.ScrollView).scrollToRight(1);\r\n        });\r\n    },\r\n    setAllCau(allCau){\r\n        mm.Loading.hide();\r\n        this._data = allCau;\r\n        this.drawPage1();\r\n        this.drawPage2();\r\n    },\r\n    updateDataCau(dice) {\r\n        this._data.push({dices: dice});\r\n        this._data.shift();\r\n        this.drawPage1();\r\n        this.drawPage2();\r\n    },\r\n    eventClose() {\r\n        mm.audio.playButton();\r\n        this.back();\r\n    },\r\n    onListRenderCau1(item, idx) {\r\n        let self = this;\r\n        let cau1 = this.listCau1[idx];\r\n        Promise.all(item.children.map(function(itemCau, index){\r\n            itemCau.active = false;\r\n        })).then(function () {\r\n            Promise.all(cau1.map(function(taiXiu, index){\r\n                item.children[index].active = true;\r\n                if (taiXiu <= 10){\r\n                    item.children[index].getComponent(cc.Sprite).spriteFrame =  self.cauXiu;\r\n                }else\r\n                    item.children[index].getComponent(cc.Sprite).spriteFrame =  self.cauTai;\r\n            }))\r\n        })\r\n    },\r\n    onListRenderCau2(itemAll, idx) {\r\n        let self = this;\r\n        let cau2 = this.listCau2[idx];\r\n        Promise.all(itemAll.children.map(function(itemCau, index){\r\n            itemCau.active = false;\r\n        })).then(function () {\r\n            Promise.all(cau2.map(function(taiXiu, index){\r\n                itemAll.children[index].active = true;\r\n                let lbResult = itemAll.children[index].getChildByName(\"lbResult\");\r\n                lbResult.getComponent(cc.Label).string = taiXiu;\r\n                if (taiXiu < 11){\r\n                    lbResult.color = cc.Color.BLACK;\r\n                    itemAll.children[index].getComponent(cc.Sprite).spriteFrame =  self.cauXiu;\r\n                }else{\r\n                    lbResult.color = cc.Color.WHITE;\r\n                    itemAll.children[index].getComponent(cc.Sprite).spriteFrame =  self.cauTai;\r\n                }\r\n            }))\r\n        })\r\n    },\r\n    onListSelected(item, selectedId, lastSelectedId, val) {\r\n        if (!item)\r\n            return;\r\n        let list = item.listItem._list;\r\n        let str = 'Danh sách hoạt động hiện tại là:' + list.node.name + '，Lựa chọn hiện tại là：' + selectedId + '，Lựa chọn cuối cùng là：' + lastSelectedId;\r\n        if (list.selectedMode == 2) { //Nếu nó là chế độ đa lựa chọn\r\n            str += '，Giá trị hiện tại：' + val;\r\n        }\r\n    },\r\n    eventShowHideCau3(target) {\r\n        this.xx123Draw.active = target.isChecked;\r\n    },\r\n    eventShowHideCau41(target){\r\n        this.xx1Draw.active = target.isChecked;\r\n    },\r\n    eventShowHideCau42(target){\r\n        this.xx2Draw.active = target.isChecked;\r\n    },\r\n    eventShowHideCau43(target){\r\n        this.xx3Draw.active = target.isChecked;\r\n    },\r\n    drawPage1() {\r\n        this._isDraw2 = true;\r\n        let data =  this._data;\r\n        let endPosX      = 422;\r\n        let startPosY    = -222;\r\n        let startPosY123 = 16;\r\n        let _i = 0;\r\n        let spacingX = 38;\r\n        let spacingY = 38;\r\n        this.xx1Draw.removeAllChildren();\r\n        this.xx2Draw.removeAllChildren();\r\n        this.xx3Draw.removeAllChildren();\r\n        this.xx123Draw.removeAllChildren();\r\n\r\n\r\n        for (var i = data.length - 1; i >= 0; i--) {\r\n            var dices = data[i].dices;\r\n            var score = dices[0] + dices[1] + dices[2];\r\n\r\n            let startPosXX1 = cc.v2(endPosX - _i * spacingX, startPosY + (dices[0] - 1) * spacingY);\r\n            let startPosXX2 = cc.v2(endPosX - _i * spacingX, startPosY + (dices[1] - 1) * spacingY);\r\n            let startPosXX3 = cc.v2(endPosX - _i * spacingX, startPosY + (dices[2] - 1) * spacingY);\r\n            let startPosXX123 = cc.v2(endPosX - _i * spacingX, startPosY123 + (score - 3) * (spacingY / 3));\r\n\r\n            let iconXX1 = cc.instantiate(this.iconXX1Template);\r\n            iconXX1.parent = this.xx1Draw;\r\n            iconXX1.position = startPosXX1;\r\n\r\n            let iconXX2 = cc.instantiate(this.iconXX2Template);\r\n            iconXX2.parent = this.xx2Draw;\r\n            iconXX2.position = startPosXX2;\r\n\r\n            let iconXX3 = cc.instantiate(this.iconXX3Template);\r\n            iconXX3.parent = this.xx3Draw;\r\n            iconXX3.position = startPosXX3;\r\n\r\n            let iconXX123 = cc.instantiate(score >= 11 ? this.iconTaiTemplate : this.iconXiuTemplate);\r\n            iconXX123.parent = this.xx123Draw;\r\n            iconXX123.position = startPosXX123;\r\n\r\n            if (_i > 0) {\r\n                dices = data[i + 1].dices;\r\n                score = dices[0] + dices[1] + dices[2];\r\n\r\n                let endPosXX1 = cc.v2(endPosX - (_i - 1) * spacingX, startPosY + (dices[0] - 1) * spacingY);\r\n                let endPosXX2 = cc.v2(endPosX - (_i - 1) * spacingX, startPosY + (dices[1] - 1) * spacingY);\r\n                let endPosXX3 = cc.v2(endPosX - (_i - 1) * spacingX, startPosY + (dices[2] - 1) * spacingY);\r\n                let endPosXX123 = cc.v2(endPosX - (_i - 1) * spacingX, startPosY123 + (score - 3) * (spacingY / 3));\r\n\r\n                let line = cc.instantiate(this.lineTemplate);\r\n                line.parent = this.xx1Draw;\r\n                line.width = Utils.v2Distance(startPosXX1, endPosXX1);\r\n                line.position = startPosXX1;\r\n                line.angle = Utils.v2Degrees(startPosXX1, endPosXX1);\r\n                line.color = cc.Color.BLACK.fromHEX(\"#ed145b\");\r\n                line.zIndex = 0;\r\n\r\n                line = cc.instantiate(this.lineTemplate);\r\n                line.parent = this.xx2Draw;\r\n                line.width = Utils.v2Distance(startPosXX2, endPosXX2);\r\n                line.position = startPosXX2;\r\n                line.angle = Utils.v2Degrees(startPosXX2, endPosXX2);\r\n                line.color = cc.Color.BLACK.fromHEX(\"#598527\");\r\n                line.zIndex = 0;\r\n\r\n                line = cc.instantiate(this.lineTemplate);\r\n                line.parent = this.xx3Draw;\r\n                line.width = Utils.v2Distance(startPosXX3, endPosXX3);\r\n                line.position = startPosXX3;\r\n                line.angle = Utils.v2Degrees(startPosXX3, endPosXX3);\r\n                line.color = cc.Color.BLACK.fromHEX(\"#f06eaa\");\r\n                line.zIndex = 0;\r\n\r\n                line = cc.instantiate(this.lineTemplate);\r\n                line.parent = this.xx123Draw;\r\n                line.width = Utils.v2Distance(startPosXX123, endPosXX123);\r\n                line.position = startPosXX123;\r\n                line.angle = Utils.v2Degrees(startPosXX123, endPosXX123);\r\n                line.color = cc.Color.BLACK.fromHEX(\"#fedd99\");\r\n                line.zIndex = -1;\r\n            }\r\n            _i++;\r\n        }\r\n    },\r\n    eventGotoPage2() {\r\n        this.soiCau1.active = false;\r\n        this.soiCau2.active = true;\r\n        this.btnBack.active = true;\r\n        this.btnNext.active = false;\r\n        if (!this._isDraw2)\r\n            this.drawPage1();\r\n    },\r\n    eventGotoPage1(){\r\n        this.btnBack.active = false;\r\n        this.btnNext.active = true;\r\n        this.soiCau1.active = true;\r\n        this.soiCau2.active = false;\r\n    }\r\n});\r\n\r\n"]}