{"version":3,"sources":["assets/scripts/abase/Player.js"],"names":["cc","Player","Class","VozBaseComponent","properties","emoijNode","Node","state","Status","avatar","progressBar","ProgressBar","sp_avatar","Sprite","_tick","_desk","_totalTimeProgress","_remainTurnTime","_timeWarning","_cbCompleteProgress","_cbWarning","_isWarning","lb_name","Label","lb_money","SitOut","MoneyWin","zoneName","onLoad","onEnable","active","isValid","showMoneyWinEffect","money","showWinEffect","showMoneyWin","cb","pre","string","Utils","addDotToNumber","Math","abs","node","stopAllActions","position","v2","nodeTo","self","runAction","sequence","moveTo","easing","easeOut","delayTime","callFunc","setDesk","desk","turnOffTimer","updateDeskInfo","mm","audio","playWin","getChildByName","win1","animation1","getComponent","sp","Skeleton","setAnimation","win2","animation2","hideWinEffect","setNameDisplay","displayName","setMoney","UserChip","isItMe","loadRes","Config","getDefaultAvatar","DeskId","getDesk","UserName","PortalManager","getGameController","ZoneInstance","mySelf","name","undefined","formatText","addEventTimerComplete","addEventTimerWarning","setTimeWarning","timeWarning","setCurrentProgress","currentTime","setTotalProgress","totalTime","setSitOut","isSitOut","turnOnTimer","progress","Date","now","unschedule","updateTimer","schedule","dt","newTick","updatePosHand","onPreStartEvent","preStartRes","reset","onStartEvent","startEvent","onTurnEvent","userTurnRes","onFoldEvent","userFoldRes","onPublicMessage","msgItem","isEmoij","indexOf","emojiNode","boxNode","opacity","type","replace","fadeOut","Layout","updateLayout"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Player = cc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        emoijNode : cc.Node,\n        state : cc.Node,\n        Status: cc.Node,\n        avatar: cc.Node,\n        progressBar: cc.ProgressBar,\n        sp_avatar: cc.Sprite,\n        _tick: 0,\n        _desk: null,\n        _totalTimeProgress: 30,\n        _remainTurnTime: 30,\n        _timeWarning: 5,\n        _cbCompleteProgress: null,\n        _cbWarning: null,\n        _isWarning: false,\n        lb_name: cc.Label,\n        lb_money: cc.Label,\n        SitOut: cc.Node,\n        MoneyWin: cc.Label,\n        zoneName: \"portal\"\n    },\n    onLoad(){\n        // set default\n        this._totalTimeProgress = 30;\n        this._remainTurnTime = this._totalTimeProgress;\n        this._timeWarning = 5;\n        this._tick = 0;\n    },\n    onEnable(){\n        this.zoneName = \"portal\";\n        this.state.active = false;\n        this.Status.active = false;\n        this.SitOut.active = false;\n        if(cc.isValid(this.MoneyWin))\n            this.MoneyWin.active = false;\n    },\n    showMoneyWinEffect(money) {\n        if (money > 0){\n            this.showWinEffect();\n            this.showMoneyWin(money);\n        }else {\n            this.showMoneyWin(money);\n        }\n    },\n    showMoneyWin(money, cb){\n        let pre = money > 0 ? \"+\" : \"-\";\n        this.MoneyWin.string = pre + \"\"+Utils.addDotToNumber(Math.abs(money));\n        this.MoneyWin.node.active = true;\n        this.MoneyWin.node.stopAllActions();\n        this.MoneyWin.node.position = cc.v2(0, 20);\n        let nodeTo           = cc.v2(0, 120);\n        let self = this;\n        this.MoneyWin.node.runAction(cc.sequence(cc.moveTo(1, nodeTo).easing(cc.easeOut(0.5)), cc.delayTime(2), cc.callFunc(function () {\n            self.MoneyWin.string      = 0;\n            self.MoneyWin.node.active = false;\n            if (cb)\n                cb();\n        })));\n    },\n    setDesk(desk){\n        this.turnOffTimer();\n        this._desk = desk;\n        this.updateDeskInfo();\n    },\n    showWinEffect(){\n        mm.audio.playWin();\n        this.node.getChildByName(\"PokerWinEffect\").active = true;\n        let win1 = this.node.getChildByName(\"PokerWinEffect\").getChildByName(\"Win1\");\n        let animation1 = win1.getComponent(sp.Skeleton);\n        animation1.setAnimation(0,\"Idle\", true);\n\n        let win2 = this.node.getChildByName(\"PokerWinEffect\").getChildByName(\"Win2\");\n        let animation2 = win2.getComponent(sp.Skeleton);\n        animation2.setAnimation(0,\"Idle\", true);\n\n        this.node.getChildByName(\"thang-text\").active = true;\n    },\n    hideWinEffect(){\n        let win1 = this.node.getChildByName(\"PokerWinEffect\").getChildByName(\"Win1\");\n        let animation1 = win1.getComponent(sp.Skeleton);\n        animation1.setAnimation(0,\"NONE\", false);\n\n        let win2 = this.node.getChildByName(\"PokerWinEffect\").getChildByName(\"Win2\");\n        let animation2 = win2.getComponent(sp.Skeleton);\n        animation2.setAnimation(0,\"NONE\", false);\n\n        this.node.getChildByName(\"PokerWinEffect\").active = false;\n        this.node.getChildByName(\"thang-text\").active = false;\n    },\n    updateDeskInfo(){\n        if(this._desk){\n            this.setNameDisplay(this._desk.displayName);\n            this.setMoney(this._desk.UserChip);\n            // update Avatar\n            if(this.isItMe()){\n                Utils.loadRes(this.sp_avatar, \"images/avatar/\"+Config.getDefaultAvatar());\n            }else{\n                Utils.loadRes(this.sp_avatar, \"images/avatar/\"+(this._desk.DeskId +1));\n            }\n        }\n    },\n    getDesk(){\n        return this._desk;\n    },\n    isItMe(){\n        if(this._desk.UserName == PortalManager.getGameController(this.zoneName).ZoneInstance.mySelf.name){\n            return true;\n        }\n        return false;\n    },\n    setNameDisplay(name){\n        this.lb_name.string = (name == undefined || name == null) ? \"Guest\" : Utils.formatText(name, 12);\n    },\n    setMoney(money){\n        // this.lb_money.string = Utils.formatCurrency(money);\n        this.lb_money.string = Utils.addDotToNumber(money);\n    },\n    addEventTimerComplete(cb){\n        this._cbCompleteProgress = cb;\n    },\n    addEventTimerWarning(cb){\n        this._cbWarning = cb;\n    },\n    setTimeWarning(timeWarning){\n        this._timeWarning = timeWarning\n    },\n    setCurrentProgress(currentTime){\n        this._remainTurnTime = currentTime;\n    },\n    setTotalProgress(totalTime){\n        this._totalTimeProgress = totalTime;\n    },\n    setSitOut(isSitOut){\n        this.SitOut.active = isSitOut;\n    },\n    turnOnTimer(){\n        this.turnOffTimer();\n        this.progressBar.node.active = true;\n        this.progressBar.progress = 0;\n        this._tick = this._remainTurnTime * 1000  + Date.now();\n        this.unschedule(this.updateTimer, 0.1);\n        this.schedule(this.updateTimer, 0.1);\n    },\n    turnOffTimer(){\n        this._cbCompleteProgress = null;\n        this._cbWarning = null;\n        this._isWarning = false;\n        this.progressBar.node.active = false;\n        this.unschedule(this.updateTimer, 0.1);\n    },\n    updateTimer(dt){\n        let newTick = (this._totalTimeProgress * 1000 + Date.now() - this._tick) / 1000;\n        if(newTick <= this._totalTimeProgress){\n            this.progressBar.progress = newTick /this._totalTimeProgress;\n            if(!this._isWarning && (this._totalTimeProgress - newTick) <= this._timeWarning){\n                this._isWarning = true;\n                if(this._cbWarning)\n                    this._cbWarning();\n            }\n        }else{\n            if(this._cbCompleteProgress)\n                this._cbCompleteProgress();\n            this.turnOffTimer();\n        }\n    },\n    updatePosHand(){\n\n    },\n    onPreStartEvent(preStartRes){\n        this.reset();\n    },\n    onStartEvent(startEvent){\n\n    },\n    onTurnEvent(userTurnRes){\n\n    },\n    onFoldEvent(userFoldRes){\n\n    },\n    reset(){\n        this.MoneyWin.node.active = false;\n        this.state.active = false;\n        this.Status.active = false;\n        this.hideWinEffect();\n    },\n    onPublicMessage(msgItem){\n        if (this.emoijNode != undefined){\n            let self    = this;\n            let isEmoij = msgItem.indexOf(\"emoij_\") >= 0;\n            let emojiNode = this.emoijNode.getChildByName(\"EMOJ\");\n            let boxNode   = this.emoijNode.getChildByName(\"box\");\n            emojiNode.active = false;\n            boxNode.active   = false;\n            if (isEmoij){\n                emojiNode.active   = true;\n                emojiNode.opacity  = 255;\n                let type = msgItem.replace(\"emoij_\", \"\");\n                emojiNode.stopAllActions();\n                emojiNode.getComponent(sp.Skeleton).setAnimation(0, type, false);\n                emojiNode.runAction(cc.sequence(cc.delayTime(1.5), cc.fadeOut(2), cc.callFunc(function () {\n                    emojiNode.active = false;\n                })));\n            }else {\n                boxNode.active   = true;\n                boxNode.opacity  = 255;\n                boxNode.stopAllActions();\n                boxNode.getChildByName(\"lb_chat\").getComponent(cc.Label).string = msgItem;\n                boxNode.getComponent(cc.Layout).updateLayout();\n                boxNode.runAction(cc.sequence(cc.delayTime(2), cc.fadeOut(2), cc.callFunc(function () {\n                    boxNode.active = false;\n                })));\n            }\n        }\n    },\n});\n"]}