{"version":3,"sources":["assets/scripts/abase/BaseController.js"],"names":["BaseController","SmartFoxSDK","Class","extend","room","_nameUI","_ui","_src","ZoneInstance","zoneName","_inited","un","pass","ctor","nameUI","src","undefined","console","error","_initialize","setInterval","isConnected","send","SmartFox","Requests","System","PingPongRequest","bind","_reset","mm","Loading","hide","cc","currentUI","removeEvents","_socketEngine","disconnect","newInstance","Config","zoneConfig","registerEvents","loginZone","getCurrentZone","onEventLogin","params","SObject","putUtfString","loginRequest","LoginRequest","connect","setRoom","getRoom","getUI","startsWith","scene","director","getScene","nodeUI","find","getComponent","getUIByName","nameUi","uiFin","preLoadUI","data","complete","node","active","UIManger","show","addEventListenerExtension","CasinoEvent","RESPONSE_NAME","HISTORY_RES","onHistoryEvent","LEADER_BOARD_RES","onLeaderBoardEvent","addEventListener","Event","CONNECTION","onEventConnection","LOGIN","LOGIN_ERROR","onEventLoginError","USER_VARIABLES_UPDATE","onUserVariablesUpdate","PUBLIC_MESSAGE","onPublicMessage","ROOM_JOIN","onEventRoomJoin","USER_ENTER_ROOM","onEventUserEnterRoom","ROOM_JOIN_ERROR","onEventRoomJoinError","USER_EXIT_ROOM","onEventUserExitRoom","CONNECTION_LOST","onEventLost","DISCONNECT_REASON","onEventDisconnect","SOCKET_ERROR","onEventIOError","removeEventListenerExtension","removeEventListener","event","_requestJoinRoom","roomName","JoinRoomRequest","success","zone","onEventUpdateChip","self","id","msg","content","cbYes","PortalManager","disconnectAll","resetAllGameUI","pop","clearUserPass","Toast","showToast","i","_children","length","ui","_name","jsUI","updateUserVariable","subChip","includes","LeaveRoomRequest","user","isItMe","game","removePlayer","name","_showDialogDisconnect","isLogin","index","childrenCount","element","children","destroy"],"mappings":"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","sourceRoot":"/","sourcesContent":["let BaseController = SmartFoxSDK.Class.extend({\n    room: null,\n    _nameUI: null,\n    _ui: null,\n    _src: \"\",\n    ZoneInstance: null,\n    zoneName: \"\",\n    _inited: false,\n    un: \"\",\n    pass: \"\",\n    ctor(nameUI, src){\n        if(nameUI == undefined)\n            console.error(\"Undefine name UI\");\n        this._nameUI = nameUI;\n        if(src != undefined){}\n        this._src = src;\n        this.zoneName = this._src;\n        this._initialize();\n        // ping server\n        setInterval(function () {\n            if (this.ZoneInstance && this.ZoneInstance.isConnected()) {\n                this.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.PingPongRequest());\n            }\n        }.bind(this), 30 * 1000);\n    },\n    _reset(){\n        mm.Loading.hide();\n        if(this.ZoneInstance){\n            cc.currentUI = \"\";\n            this._inited = false;\n            this.removeEvents();\n            this.ZoneInstance._reset(!1);\n            this.ZoneInstance._socketEngine.disconnect(\"disconnect\");\n            this.ZoneInstance = new SmartFoxSDK.newInstance(Config.zoneConfig[this.zoneName]);\n            this.registerEvents();\n        }\n    },\n    _initialize(){\n        if(!this._inited){\n            this._inited = true;\n            if(Config.zoneConfig[this.zoneName]){\n                // src is name game\n                this.ZoneInstance = new SmartFoxSDK.newInstance(Config.zoneConfig[this.zoneName]);\n                this.registerEvents();\n            }\n        }\n    },\n    loginZone(un,pass){\n        this.un = un;\n        this.pass = pass;\n        if(this.ZoneInstance.isConnected()){\n            if(this.ZoneInstance.getCurrentZone() == this.zoneName){\n                this.onEventLogin({\"status\": true});\n            }else{\n                let params = new SmartFoxSDK.SObject();\n                params.putUtfString(\"role\", \"user\");\n                let loginRequest = new SmartFoxSDK.SmartFox.Requests.System.LoginRequest(un, pass, this.zoneName, params);\n                this.ZoneInstance.send(loginRequest);\n            }\n        }else{\n            this.ZoneInstance.connect();\n        }\n    },\n    setRoom(room){\n        this.room = room;\n        // reset UI\n        this._ui = null;\n    },\n    getRoom(){\n        return this.room;\n    },\n    getUI(){\n        if(this._ui != null)\n            return this._ui;\n        if (!this._nameUI || !this._nameUI.startsWith('UI')) {\n            return null;\n        }\n        const scene = cc.director.getScene();\n        let nodeUI =  cc.find(this._nameUI, scene);\n        if(nodeUI)\n            this._ui = nodeUI.getComponent(this._nameUI);\n        return this._ui;\n    },\n    getUIByName(nameUi){\n        if (!nameUi || !nameUi.startsWith('UI')) {\n            return null;\n        }\n        const scene = cc.director.getScene();\n        let nodeUI =  cc.find(nameUi, scene);\n        let uiFin = null;\n        if(nodeUI)\n            uiFin = nodeUI.getComponent(nameUi);\n        return uiFin;\n    },\n    preLoadUI(data, complete){\n        if(this._src != \"\")\n            data.src = this._src;\n        const scene = cc.director.getScene();\n        const node = cc.find(this._nameUI, scene);\n        if(node && node.active){\n            if(complete){\n                complete();\n                mm.Loading.hide();\n            }\n        }else{\n            UIManger.show(this._nameUI, data, function () {\n                if(complete){\n                    complete();\n                    mm.Loading.hide();\n                }\n            })\n        }\n    },\n    registerEvents(){\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.HISTORY_RES, this.onHistoryEvent, this);\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.LEADER_BOARD_RES, this.onLeaderBoardEvent, this);\n\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.CONNECTION, this.onEventConnection, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.LOGIN, this.onEventLogin, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.LOGIN_ERROR, this.onEventLoginError, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.USER_VARIABLES_UPDATE, this.onUserVariablesUpdate, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.PUBLIC_MESSAGE, this.onPublicMessage, this);\n\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.ROOM_JOIN, this.onEventRoomJoin, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.USER_ENTER_ROOM, this.onEventUserEnterRoom, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.ROOM_JOIN_ERROR, this.onEventRoomJoinError, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.USER_EXIT_ROOM, this.onEventUserExitRoom, this);\n\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.CONNECTION_LOST, this.onEventLost, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.DISCONNECT_REASON, this.onEventDisconnect, this);\n        this.ZoneInstance.addEventListener(SmartFoxSDK.SmartFox.Event.SOCKET_ERROR, this.onEventIOError, this);\n    },\n    removeEvents(){\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.HISTORY_RES, this.onHistoryEvent, this);\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.LEADER_BOARD_RES, this.onLeaderBoardEvent, this);\n\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.CONNECTION, this.onEventConnection, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.LOGIN, this.onEventLogin, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.LOGIN_ERROR, this.onEventLoginError, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.USER_VARIABLES_UPDATE, this.onUserVariablesUpdate, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.PUBLIC_MESSAGE, this.onPublicMessage, this);\n\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.ROOM_JOIN, this.onEventRoomJoin, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.USER_ENTER_ROOM, this.onEventUserEnterRoom, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.ROOM_JOIN_ERROR, this.onEventRoomJoinError, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.USER_EXIT_ROOM, this.onEventUserExitRoom, this);\n\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.CONNECTION_LOST, this.onEventLost, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.DISCONNECT_REASON, this.onEventDisconnect, this);\n        this.ZoneInstance.removeEventListener(SmartFoxSDK.SmartFox.Event.SOCKET_ERROR, this.onEventIOError, this);\n    },\n    onPublicMessage(event){\n        // let uiChat = UIManger.getUIFromName(\"UIChat\");\n        // let sender = event.sender;\n        // let msg = event.message;\n        // let data = event.data;\n        // let dataSender = data != null ? {dn: data.get(\"dn\"), fb : data.get(\"fb\")} : {dn: \"...\", fb : \"\"};\n        // let msgItem = {};\n        // msgItem.text = msg;\n        // msgItem.type = 1;\n        // dataSender.un = sender.name;\n        // if(sender && sender.isItMe){\n        //     msgItem.type = 2;\n        // }\n        // msgItem.dataSender = dataSender;\n        // if(mm.dataChat == undefined)\n        //     mm.dataChat = [];\n        // mm.dataChat.push(msgItem);\n        // if(uiChat){\n        //     let jsChat = uiChat.getComponent(uiChat.name);\n        //     jsChat.refresh(msgItem)\n        // }\n        // let uigame = UIManger.getUIFromName(\"UICotuong\");\n        // if(uigame){\n        //     uigame.getComponent(uigame.name).onPublicMessage(msgItem);\n        // }\n    },\n    onHistoryEvent(event){\n\n    },\n    onLeaderBoardEvent(event){\n\n    },\n    _requestJoinRoom(roomName){\n        this.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.JoinRoomRequest(roomName));\n    },\n    onEventConnection(event){\n        if(event.success){\n            this.loginZone(this.un, this.pass);\n        }else{\n            this._reset();\n        }\n    },\n    onEventLogin(event){\n        if (event.zone == \"portal\"){\n            this.onEventUpdateChip(0);\n        }\n    },\n    onEventLoginError(params){\n        this._reset();\n        let self = this;\n        if(params.id == 6){\n            let msg = \"Tài khoản \"+params.msg[0]+ \" đã đăng nhập ở thiết bị khác\";\n            UIManger.show('UIDialogOne', {\n                data: {\n                    content: msg,\n                    \"cbYes\": function cbYes() {\n                        PortalManager.disconnectAll();\n                        self.resetAllGameUI();\n                        UIManger.show(\"UIHome\");\n                    }\n                }, pop: true\n            });\n        }else if(params.id == 3){\n            Config.clearUserPass();\n            let msg = \"Mật khẩu không đúng\";\n            mm.Toast.showToast(1, msg);\n        }else if(params.id == 2){\n            Config.clearUserPass();\n            let msg = params.msg[0];\n            mm.Toast.showToast(1, msg);\n        }else {\n            Config.clearUserPass();\n            let msg = \"Tên đăng nhập hoặc mật khẩu không đúng\";\n            mm.Toast.showToast(1, msg);\n        }\n\n    },\n    onUserVariablesUpdate(event){\n        // sync chip to portal\n        // if(SmartFoxSDK.PortalController.ZoneInstance.mySelf){\n        //     let user = event.user;\n        //     let newChip = GameVariables.Poker.getChip(user);\n        //     GameVariables.setChip(newChip, SmartFoxSDK.PortalController.ZoneInstance.mySelf);\n        // }\n        // let scene = cc.director.getScene();\n        // for (let i = 0; i < scene._children.length; i++) {\n        //     let ui = scene._children[i];\n        //     if (ui._name.includes(\"UI\")) {\n        //         let jsUI = ui.getComponent(ui._name);\n        //         jsUI.updateUserVariable(event)\n        //     }\n        // }\n        // if (cc.currentUI == \"\"){\n        //     this.onEventUpdateChip();\n        // }\n        let scene = cc.director.getScene();\n        for (let i = 0; i < scene._children.length; i++) {\n            let ui = scene._children[i];\n            if (ui._name == \"UIHome\" && cc.currentUI == \"\") {\n                let jsUI = ui.getComponent(ui._name);\n                jsUI.updateUserVariable(0)\n            }\n        }\n    },\n    onEventUpdateChip(subChip) {\n        if (subChip == undefined || subChip == null)\n            subChip = 0;\n        let scene = cc.director.getScene();\n        for (let i = 0; i < scene._children.length; i++) {\n            let ui = scene._children[i];\n            if (ui._name.includes(\"UI\") && ui.active) {\n                let jsUI = ui.getComponent(ui._name);\n                jsUI.updateUserVariable(subChip);\n            }\n        }\n    },\n    onEventRoomJoin(event){\n        this.setRoom(event.room);\n    },\n    onEventUserEnterRoom(event){\n    },\n    onEventRoomJoinError(event){\n        mm.Loading.hide();\n        if(event == 19){\n            // leave game\n            this.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.LeaveRoomRequest(this.room));\n            mm.Loading.show();\n        }\n    },\n    onEventUserExitRoom(event){\n        let user = event.user;\n        if(user.isItMe){\n            if (this.getUI() != null)\n                this.getUI().node.active = false;\n            UIManger.show(\"UILobby\", {pop: true, data: {game: this.zoneName, ZoneInstance: this.ZoneInstance}});\n        }else if(this.getUI()){\n            this.getUI().removePlayer([user.name]);\n        }\n    },\n    onEventLost(params){\n        this._reset();\n        PortalManager.disconnectAll();\n        this._showDialogDisconnect(\"Mất kết nối ! vui lòng kết nối lại.\");\n        // if(!cc.isValid(this.getUI()))\n        //     return;\n        // let uiLobby = UIManger.getUIFromName(\"UILobby\");\n        // if(this.getUI().node.active || (uiLobby && uiLobby.active && uiLobby.getComponent(uiLobby.name)._data.game == this.zoneName)){\n        //     this._showDialogDisconnect(\"Mất kết nối ! vui lòng kết nối lại\");\n        // }\n    },\n    onEventDisconnect(params){\n        this._reset();\n        PortalManager.disconnectAll();\n        this._showDialogDisconnect(\"Mất kết nối ! vui lòng kết nối lại\");\n        // if(!cc.isValid(this.getUI()))\n        //     return;\n        // let uiLobby = UIManger.getUIFromName(\"UILobby\");\n        // if(this.getUI().node.active || (uiLobby && uiLobby.active && uiLobby.getComponent(uiLobby.name)._data.game == this.zoneName)){\n        //     this._showDialogDisconnect(\"Mất kết nối ! vui lòng kết nối lại\");\n        // }\n    },\n    onEventIOError(params){\n        this._reset();\n        PortalManager.disconnectAll();\n        this._showDialogDisconnect(\"Mất kết nối ! vui lòng kết nối lại\");\n        // this._reset();\n        // if(!cc.isValid(this.getUI()))\n        //     return;\n        // let uiLobby = UIManger.getUIFromName(\"UILobby\");\n        // if(this.getUI().node.active || (uiLobby && uiLobby.active && uiLobby.getComponent(uiLobby.name)._data.game == this.zoneName)){\n        //     this._showDialogDisconnect(\"Mất kết nối ! vui lòng kết nối lại\");\n        // }\n    },\n    _showDialogDisconnect(msg){\n        let self = this;\n        UIManger.show('UIDialogOne', {\n            data: {\n                content: msg,\n                \"cbYes\": function cbYes() {\n                    self.resetAllGameUI();\n                    UIManger.show(\"UIHome\");\n                }\n            }, pop: true\n        });\n    },\n    resetAllGameUI() {\n        mm.isLogin = false;\n        const scene = cc.director.getScene();\n        for (let index = 0; index < scene.childrenCount; index++) {\n            let element = scene.children[index];\n            if (element.name.startsWith('UI')) {\n                if (element.name != \"UIHome\"){\n                    element.destroy();\n                }\n            }\n        }\n    }\n});\nSmartFoxSDK.BaseController = BaseController;\n"]}