{"version":3,"sources":["assets\\scripts\\maubinh\\UIMauBinh.js"],"names":["require","BinhCard","MauBinhUtils","Timer","Language","cc","Class","BaseGame","properties","ChatEmojiLayer","Node","POS_4","hands","btnXepBai","mauBinhThang","nodeCards","lbBinhChi1","Label","lbBinhChi2","lbBinhChi3","PotPrefab","Prefab","preCard","TimerStart","TimerXepBai","_TIME_DELAY_CARD","_TOTAL_TIME","_currentTime","_currentPos","_currentIndex","_isChange","_isTimerXepBaiEnd","onLoad","director","getCollisionManager","enabled","PoolPot","i","pot","instantiate","node","addChild","active","push","initListCard","hideListCard","_initCard","totalCards","self","listCards","Array","fill","Promise","all","map","cardNode","index","card","parent","onEnable","_room","_data","room","_number_desk","_CURRENT_POS","poses","_children","length","pos","on","requestSitOn","addEventTimerComplete","updateUserVariable","subChip","jsPlayer","_getJSPlayerByName","SmartFoxSDK","MauBinhController","ZoneInstance","mySelf","name","setMoney","GameVariables","Poker","getChip","onStartEvent","onPreStartEvent","onDisable","nodePlayers","removeAllChildren","hideDeskEmpty","WaitingTimer","eventBack","mm","audio","playButton","controller","m_tableInfo","m_isGameStart","m_listActiveUserName","log","requestLeaveRoom","isSitOut","m_listUserSitOut","indexOf","sitOutRequest","MauBinhRequest","SitOutRequest","setRoomId","id","setSitOut","send","toSRequest","myName","sitOnRequest","SitOnRequest","setAutoSitOn","newMatch","_runCard","cb","inTime","getCurrentTime","children","slice","scheduleOnce","x","y","scale","js","getComponent","init","cardIndex","then","result","convertPosCardOnHand","nodeTo","getPositionInOtherNode","_dealCards","m_listDesk","myCards","timeSortCard","Date","getTime","totalPlayer","desk","nodePlayer","_getNodePlayerById","DeskId","_getJSPlayer","_showXepBinh","_hideUIHandPlayers","showXepBinh","nodeCard","nodeCardTo","getPosCardHand","Math","floor","posMove","move","moveTo","scaleTo","spwan","spawn","nodeRunAction","runAction","sequence","delayTime","callFunc","isItMe","hideOver","reveal","Card","_removeSelect","playChiaBai2","allPlayers","playerInfo","showXepBaiLabel","setTextXepXong","xepInfo","error","username","getString","setTextBaoBinh","isValid","hideAllCardOnHand","_showUIHandPlayers","showAllCardOnHand","getCardsId","_updateUIHandPlayers","_isPlayer","myId","_getPlayerId","myPos","maxUsers","distanceToZero","newIndex","updateHands","listCard","chi1","getChildByName","chi2","chi3","childrenCount","_addEventNodeCard","j","z","nodeCheck","EventType","TOUCH_START","event","zIndex","position","TOUCH_MOVE","delta","getDelta","TOUCH_CANCEL","TOUCH_END","checkBinh","getCard","colliderBox","BoxCollider","Intersection","pointInPolygon","getLocation","world","points","currentParent","ResultChi1","ResultChi2","ResultChi3","setTotalRemain","setTotalProgress","turnOnTimer","cardData","showAllButtonAction","allIds","getCardType","string","getTypeChi","type","text","color","isBinh12","isBiggerChi","isBinh13","sp","Skeleton","setAnimation","showWaringBinhLung","cards","jsCard","getCardsName","pointName","eventSoBai","request","XepXongRequest","setCards","eventBaoBinh","BaoBinhRequest","eventXepBai","showFinishGame","listPlayers","showResultFinishGame","moneyWin","showThangTrangResult","typeBinh","showDown","isThangTrang","showDownPlayer","eventShowChat","data","initController","onPublicMessage","messData","playerJs","sender","msg"],"mappings":"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","sourceRoot":"/","sourcesContent":["require('BaseGame')\r\nlet BinhCard     = require('BinhCard');\r\nlet MauBinhUtils = require('MauBinhUtils');\r\nlet Timer        = require('Timer');\r\nlet Language     = require('maubinhLanguage');\r\n\r\ncc.Class({\r\n    extends: cc.BaseGame,\r\n\r\n    properties: {\r\n        ChatEmojiLayer: cc.Node,\r\n        POS_4: cc.Node,\r\n        hands: cc.Node,\r\n        btnXepBai: cc.Node,\r\n        mauBinhThang: cc.Node,\r\n        nodeCards: cc.Node,\r\n        lbBinhChi1: cc.Label,\r\n        lbBinhChi2: cc.Label,\r\n        lbBinhChi3: cc.Label,\r\n        PotPrefab: cc.Prefab,\r\n        preCard: cc.Prefab,\r\n        TimerStart: Timer,\r\n        TimerXepBai: Timer,\r\n        _TIME_DELAY_CARD: 0.01,\r\n        _TOTAL_TIME: 60,\r\n        _currentTime: 60,\r\n        _currentPos: null,\r\n        _currentIndex: 0,\r\n        _isChange: true,\r\n        _isTimerXepBaiEnd: true,\r\n    },\r\n    onLoad(){\r\n        // init prefab pot\r\n        cc.director.getCollisionManager().enabled  = true;\r\n        this.PoolPot = [];\r\n        for(let i = 0; i < 9;i++){\r\n            let pot = cc.instantiate(this.PotPrefab);\r\n            this.node.addChild(pot);\r\n            pot.active = false;\r\n            this.PoolPot.push(pot);\r\n        }\r\n        this.initListCard();\r\n        this.hideListCard();\r\n        this._initCard(52);\r\n    },\r\n    _initCard(totalCards) {\r\n        let self = this;\r\n        let listCards = [];\r\n        listCards = new Array(totalCards).fill(0);\r\n        Promise.all(listCards.map(function(cardNode, index){\r\n            let card = cc.instantiate(self.preCard);\r\n            card.parent = self.nodeCards;\r\n            card.active = false;\r\n        }));\r\n    },\r\n    onEnable(){\r\n        let self = this;\r\n        this._room = this._data.room;\r\n        this._number_desk = 4;\r\n        this._CURRENT_POS = this.POS_4;\r\n        this.poses = [];\r\n        this.hands.active = false;\r\n        for(let i = 0; i < this._CURRENT_POS._children.length;i++){\r\n            let pos = this._CURRENT_POS._children[i];\r\n            this.poses.push(this._CURRENT_POS._children[i]);\r\n            pos.on(\"touchend\", function () {\r\n                this.requestSitOn();\r\n            }, this);\r\n            pos.active = false;\r\n        }\r\n        this.mauBinhThang.active = false;\r\n        this.TimerXepBai.addEventTimerComplete(function () {\r\n            self._isTimerXepBaiEnd = true;\r\n        })\r\n    },\r\n    updateUserVariable(subChip){\r\n        let jsPlayer    = this._getJSPlayerByName(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name);\r\n        jsPlayer.setMoney(GameVariables.Poker.getChip(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf)-subChip)\r\n    },\r\n    onStartEvent() {\r\n        this._isTimerXepBaiEnd = false;\r\n        this.btnXepBai.active  = false;\r\n        this.mauBinhThang.active = false;\r\n    },\r\n    onPreStartEvent() {\r\n        this.mauBinhThang.active = false;\r\n    },\r\n    onDisable(){\r\n        this.nodePlayers.removeAllChildren(true);\r\n        this.hideDeskEmpty();\r\n        this.WaitingTimer.active = false;\r\n    },\r\n    eventBack(){\r\n        mm.audio.playButton();\r\n        if(!this.controller.m_tableInfo.m_isGameStart || this.controller.m_tableInfo.m_listActiveUserName.length <= 1){\r\n            cc.log('Back')\r\n            this.requestLeaveRoom();\r\n        }else{\r\n            let isSitOut = true;\r\n            if(this.controller.m_tableInfo.m_listUserSitOut.indexOf(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name) >= 0){\r\n                isSitOut = false;\r\n            }\r\n            let sitOutRequest = new MauBinhRequest.SitOutRequest();\r\n            sitOutRequest.setRoomId(this._room.id);\r\n            sitOutRequest.setSitOut(isSitOut);\r\n            SmartFoxSDK.MauBinhController.ZoneInstance.send(sitOutRequest.toSRequest());\r\n        }\r\n    },\r\n    requestSitOn(){\r\n        let myName = SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name;\r\n        if(this._getJSPlayerByName(myName) == null){\r\n            let sitOnRequest = new MauBinhRequest.SitOnRequest().setRoomId(this._room.id).setAutoSitOn();\r\n            SmartFoxSDK.MauBinhController.ZoneInstance.send(sitOnRequest.toSRequest());\r\n            this.hideDeskEmpty();\r\n        }\r\n    },\r\n    newMatch(){\r\n        this.hands.active = false;\r\n    },\r\n    _runCard(totalCards, cb) {\r\n        let inTime = this.getCurrentTime();\r\n        if (inTime <this._TOTAL_TIME-2){\r\n            if (cb)\r\n                cb();\r\n        }else{\r\n            let self = this;\r\n            let listCards = self.nodeCards.children;\r\n            listCards = listCards.slice(0, totalCards);\r\n            Promise.all(listCards.map(function(cardNode, index){\r\n                self.scheduleOnce(function () {\r\n                    let card = cardNode;\r\n                    card.x = index*0.3;\r\n                    card.y = index*0.4;\r\n                    card.scale = 0.8;\r\n                    let js = card.getComponent(card.name);\r\n                    js.init(null);\r\n                    js.cardIndex = index;\r\n                    card.parent = self.nodeCards;\r\n                }, self._TIME_DELAY_CARD*index)\r\n            })).then(result=>{\r\n                self.scheduleOnce(function () {\r\n                    if (cb)\r\n                        cb();\r\n                }, self._TIME_DELAY_CARD*totalCards)\r\n            }, this);\r\n        }\r\n    },\r\n    convertPosCardOnHand(cardNode, nodeTo) {\r\n        return this.getPositionInOtherNode(cardNode, nodeTo);\r\n    },\r\n    _dealCards(m_listDesk, myCards, timeSortCard, cb){\r\n        let self          = this;\r\n        this._TOTAL_TIME  = timeSortCard;\r\n        this._currentTime = new Date().getTime()/1000 + timeSortCard;\r\n        let totalPlayer   =  m_listDesk.length;\r\n        let totalCards    =  13*totalPlayer;\r\n        //init pos card\r\n        for (let i=0; i< m_listDesk.length; i++){\r\n            let desk        = m_listDesk[i];\r\n            let nodePlayer  = self._getNodePlayerById(desk.DeskId);\r\n            let jsPlayer    = self._getJSPlayer(nodePlayer);\r\n        }\r\n        // init card\r\n        // myCards = MauBinhUtils.sortCards(myCards);\r\n        // myCards    = [17,4,39,26,52,28,41,15,33,45,31,29,8];\r\n        this._runCard(totalCards, function () {\r\n            let inTime = self.getCurrentTime();\r\n            if (inTime < 1)\r\n                return;\r\n            if (inTime < self._TOTAL_TIME - 2){\r\n                let listCards = self.nodeCards.children;\r\n                Promise.all(listCards.map(function(card, index){\r\n                    card.active = false;\r\n                }));\r\n                self._showXepBinh(m_listDesk);\r\n                self._hideUIHandPlayers();\r\n                self.showXepBinh(myCards, inTime);\r\n\r\n            }else {\r\n                let listCards = self.nodeCards.children;\r\n                listCards = listCards.slice(0, totalCards);\r\n                Promise.all(listCards.map(function(nodeCard, index){\r\n                    let desk        = m_listDesk[index%totalPlayer];\r\n                    let nodePlayer  = self._getNodePlayerById(desk.DeskId);\r\n                    let jsPlayer    = self._getJSPlayer(nodePlayer);\r\n                    let nodeCardTo  = jsPlayer.getPosCardHand(Math.floor(index/totalPlayer));\r\n                    let posMove     = self.convertPosCardOnHand(nodeCardTo, self.nodeCards);\r\n                    let move        = cc.moveTo(0.5, posMove);\r\n                    let scaleTo     = cc.scaleTo(0.5, 0.8);\r\n                    let spwan       = cc.spawn(move, scaleTo);\r\n                    let nodeRunAction = listCards[totalCards-index-1];\r\n                    nodeRunAction.runAction(cc.sequence(cc.delayTime(index*0.05), spwan, cc.callFunc(function () {\r\n                        nodeRunAction.active = false;\r\n                        nodeCardTo.active    = true;\r\n                        let js = nodeCardTo.getComponent(nodeCardTo.name);\r\n                        if(jsPlayer.isItMe()){\r\n                            js.hideOver();\r\n                            js.reveal(new BinhCard.Card(myCards[Math.floor(index/totalPlayer)]));\r\n                            js._removeSelect = false;\r\n                        }else {\r\n                            js.hideOver();\r\n                            js.init(null);\r\n                        }\r\n                    }, nodeRunAction)));\r\n                })).then(result=>{\r\n                    self.scheduleOnce(function () {\r\n                        let inTime = self.getCurrentTime();\r\n                        if (inTime < 1)\r\n                            return;\r\n                        self._showXepBinh(m_listDesk);\r\n                        self._hideUIHandPlayers();\r\n                        self.showXepBinh(myCards, inTime);\r\n                    }, totalCards*0.08)\r\n                }, this);\r\n            }\r\n        });\r\n        // Chia bai\r\n        this.scheduleOnce(function () {\r\n            mm.audio.playChiaBai2();\r\n        }, 0.5)\r\n    },\r\n    getCurrentTime() {\r\n        return  Math.floor(this._currentTime - new Date().getTime()/1000);\r\n    },\r\n    _showXepBinh(allPlayers) {\r\n        let  self = this;\r\n        Promise.all(allPlayers.map(function(playerInfo, index){\r\n            let nodePlayer  = self._getNodePlayerById(playerInfo.DeskId);\r\n            let jsPlayer    = self._getJSPlayer(nodePlayer);\r\n            if (!jsPlayer.isItMe())\r\n                jsPlayer.showXepBaiLabel(true, \"Xếp bài\");\r\n        }));\r\n    },\r\n    setTextXepXong(xepInfo) {\r\n        if (xepInfo.error == \"\"){\r\n            let jsPlayer = this._getJSPlayerByName(xepInfo.username);\r\n            if (!jsPlayer.isItMe())\r\n                jsPlayer.showXepBaiLabel(true, Language.getString(\"xep_xong\"));\r\n            else\r\n                this.btnXepBai.active = true;\r\n        }\r\n    },\r\n    setTextBaoBinh(xepInfo) {\r\n        if (xepInfo.error == \"\"){\r\n            let jsPlayer = this._getJSPlayerByName(xepInfo.username);\r\n            if (!jsPlayer.isItMe())\r\n                jsPlayer.showXepBaiLabel(true, Language.getString(\"bao_binh\"));\r\n            else{\r\n                //Show typebinh\r\n            }\r\n        }\r\n    },\r\n    _hideUIHandPlayers() {\r\n        let nodePlayer = this._getJSPlayerByName(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name);\r\n        if(cc.isValid(nodePlayer)){\r\n            nodePlayer.hideAllCardOnHand();\r\n        }\r\n    },\r\n    _showUIHandPlayers() {\r\n        let nodePlayer = this._getJSPlayerByName(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name);\r\n        if(cc.isValid(nodePlayer)){\r\n            nodePlayer.showAllCardOnHand(this.getCardsId(), false);\r\n        }\r\n    },\r\n    _updateUIHandPlayers() {\r\n        if(this._isPlayer(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name)){\r\n            let myId = this._getPlayerId(SmartFoxSDK.MauBinhController.ZoneInstance.mySelf.name);\r\n            let myPos = myId;\r\n            let maxUsers = this._number_desk;\r\n            let distanceToZero = maxUsers - myPos;\r\n            for(let i = 0; i < maxUsers; i++){\r\n                let nodePlayer = this._getNodePlayerById(i);\r\n                if(cc.isValid(nodePlayer)){\r\n                    let newIndex = (i + distanceToZero) % maxUsers;\r\n                    let js = this._getJSPlayer(nodePlayer);\r\n                    if (newIndex == 0){\r\n                        js.updateHands(0.8, 210);\r\n                    }else{\r\n                        if (newIndex == 3)\r\n                            js.updateHands(0.6, -180);\r\n                        else\r\n                            js.updateHands(0.6, 180);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    initListCard() {\r\n        this.listCard = [];\r\n        let chi1 = this.hands.getChildByName(\"chi1\");\r\n        let chi2 = this.hands.getChildByName(\"chi2\");\r\n        let chi3 = this.hands.getChildByName(\"chi3\");\r\n        for (let i=0; i< chi1.childrenCount; i++){\r\n            this._addEventNodeCard(chi1.children[i]);\r\n            this.listCard.push(chi1.children[i]);\r\n        }\r\n        for (let j=0; j< chi2.childrenCount; j++){\r\n            this._addEventNodeCard(chi2.children[j]);\r\n            this.listCard.push(chi2.children[j]);\r\n        }\r\n        for (let z=0; z< chi3.childrenCount; z++){\r\n            this._addEventNodeCard(chi3.children[z]);\r\n            this.listCard.push(chi3.children[z]);\r\n        }\r\n    },\r\n    hideListCard() {\r\n        Promise.all(this.listCard.map(function(nodeCheck, index){\r\n            nodeCheck.active = false;\r\n        }));\r\n    },\r\n    _addEventNodeCard(nodeCardTo) {\r\n        let self = this;\r\n        nodeCardTo.on(cc.Node.EventType.TOUCH_START, function (event) {\r\n            nodeCardTo.zIndex        = 1;\r\n            nodeCardTo.parent.zIndex = 1;\r\n            self._currentPos         = nodeCardTo.position;\r\n            for(let i =0; i<  self.listCard.length; i++){\r\n                if (nodeCardTo == self.listCard[i])\r\n                    self._currentIndex = i;\r\n            }\r\n        });\r\n        nodeCardTo.on(cc.Node.EventType.TOUCH_MOVE, function (event) {\r\n            let delta = event.getDelta();\r\n            nodeCardTo.x += delta.x;\r\n            nodeCardTo.y += delta.y;\r\n        });\r\n        nodeCardTo.on(cc.Node.EventType.TOUCH_CANCEL, function (event) {\r\n            nodeCardTo.position = self._currentPos;\r\n        });\r\n        nodeCardTo.on(cc.Node.EventType.TOUCH_END, function (event) {\r\n            nodeCardTo.zIndex        = 0;\r\n            nodeCardTo.parent.zIndex = 0;\r\n            self._isChange           = false;\r\n            self.checkBinh();\r\n            for (let i=0; i< self.listCard.length; i++){\r\n                let nodeCheck = self.listCard[i];\r\n                let index     = i;\r\n                if (nodeCheck.getComponent(nodeCheck.name).getCard().id != nodeCardTo.getComponent(nodeCardTo.name).getCard().id){\r\n                    let colliderBox = nodeCheck.getComponent(cc.BoxCollider);\r\n                    if (cc.Intersection.pointInPolygon(event.getLocation(), colliderBox.world.points)) {\r\n                        let currentParent   = nodeCardTo.parent;\r\n                        nodeCardTo.parent   = nodeCheck.parent;\r\n                        nodeCardTo.position = nodeCheck.position;\r\n                        nodeCheck.parent    = currentParent;\r\n                        nodeCheck.position  = self._currentPos;\r\n                        self.listCard[self._currentIndex] = nodeCheck;\r\n                        self.listCard[index]              = nodeCardTo;\r\n                        self._isChange      = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (!self._isChange)\r\n                nodeCardTo.position = self._currentPos;\r\n            self.checkBinh();\r\n        })\r\n    },\r\n    showXepBinh(myCards, timeSortCard) {\r\n        let self          = this;\r\n        this.hands.active = true;\r\n        let ResultChi1 = this.hands.getChildByName(\"ResultChi1\");\r\n        let ResultChi2 = this.hands.getChildByName(\"ResultChi2\");\r\n        let ResultChi3 = this.hands.getChildByName(\"ResultChi3\");\r\n        let Timer      = this.hands.getChildByName(\"Timer\").getComponent(\"Timer\");\r\n        Timer.setTotalRemain(timeSortCard);\r\n        Timer.setTotalProgress(this._TOTAL_TIME);\r\n        Timer.turnOnTimer();\r\n        ResultChi1.active = false;\r\n        ResultChi2.active = false;\r\n        ResultChi3.active = false;\r\n        ResultChi1.zIndex = 10;\r\n        ResultChi2.zIndex = 10;\r\n        ResultChi3.zIndex = 10;\r\n        Promise.all(this.listCard.map(function(nodeCardTo, index){\r\n            let js       = nodeCardTo.getComponent(\"Card\");\r\n            let cardData = new BinhCard.Card(myCards[index]);\r\n            js.init(cardData);\r\n        })).then(result=>{\r\n            self.checkBinh();\r\n            ResultChi1.active = true;\r\n            ResultChi2.active = true;\r\n            ResultChi3.active = true;\r\n        }, this);\r\n\r\n    },\r\n    showAllButtonAction(){\r\n\r\n    },\r\n    checkBinh() {\r\n        this.mauBinhThang.active = false;\r\n        let allIds = this.getCardsId();\r\n        let chi1 = MauBinhUtils.getCardType(allIds.slice(0, 5));\r\n        let chi2 = MauBinhUtils.getCardType(allIds.slice(5, 10));\r\n        let chi3 = MauBinhUtils.getCardType(allIds.slice(10, 13));\r\n\r\n        this.lbBinhChi1.string     = MauBinhUtils.getTypeChi(chi1.type).text;\r\n        this.lbBinhChi1.node.color = MauBinhUtils.getTypeChi(chi1.type).color;\r\n\r\n        this.lbBinhChi2.string     = MauBinhUtils.getTypeChi(chi2.type).text;\r\n        this.lbBinhChi2.node.color = MauBinhUtils.getTypeChi(chi2.type).color;\r\n\r\n        this.lbBinhChi3.string     = MauBinhUtils.getTypeChi(chi3.type).text;\r\n        this.lbBinhChi3.node.color = MauBinhUtils.getTypeChi(chi3.type).color;\r\n\r\n\r\n        //Check binh lung\r\n        let isBinh12 = MauBinhUtils.isBiggerChi(chi1, chi2);\r\n        let isBinh13 = MauBinhUtils.isBiggerChi(chi2, chi3);\r\n        if (isBinh12 && isBinh13){\r\n\r\n        }else{\r\n            //Binh lung\r\n            this.mauBinhThang.active = true;\r\n            this.mauBinhThang.getComponent(sp.Skeleton).setAnimation(0, \"Binh-Lung\", true);\r\n        }\r\n        //End\r\n    },\r\n    showWaringBinhLung() {\r\n\r\n    },\r\n    getCardsId(){\r\n        let cards = [];\r\n        for(let i =0; i<  this.listCard.length; i++){\r\n            let card = this.listCard[i];\r\n            let jsCard = card.getComponent(card.name);\r\n            cards.push(jsCard.getCard().id);\r\n        }\r\n        return cards;\r\n    },\r\n    getCardsName(){\r\n        let cards = [];\r\n        for(let i =0; i<  this.listCard.length; i++){\r\n            let card = this.listCard[i];\r\n            let jsCard = card.getComponent(card.name);\r\n            cards.push(jsCard.getCard().pointName);\r\n        }\r\n        return cards;\r\n    },\r\n    eventSoBai() {\r\n        mm.audio.playButton();\r\n        let allIds = this.getCardsId();\r\n        let request = new MauBinhRequest.XepXongRequest().setRoomId(this._room.id).setCards(allIds);\r\n        SmartFoxSDK.MauBinhController.ZoneInstance.send(request.toSRequest());\r\n        this.hands.active = false;\r\n        this.mauBinhThang.active = false;\r\n        this.btnXepBai.active  = true;\r\n        this._showUIHandPlayers();\r\n    },\r\n    eventBaoBinh() {\r\n        mm.audio.playButton();\r\n        let allIds = this.getCardsId();\r\n        let request = new MauBinhRequest.BaoBinhRequest().setRoomId(this._room.id).setCards(allIds);\r\n        SmartFoxSDK.MauBinhController.ZoneInstance.send(request.toSRequest());\r\n        this.hands.active = false;\r\n        this.mauBinhThang.active = false;\r\n        this.btnXepBai.active  = false;\r\n        this._showUIHandPlayers();\r\n    },\r\n    eventXepBai() {\r\n        mm.audio.playButton();\r\n        this.btnXepBai.active  = false;\r\n        this.hands.active      = true;\r\n        let Timer      = this.hands.getChildByName(\"Timer\").getComponent(\"Timer\");\r\n        Timer.setTotalRemain(this.getCurrentTime());\r\n        Timer.setTotalProgress(this._TOTAL_TIME);\r\n        Timer.turnOnTimer();\r\n        this.checkBinh();\r\n        this._hideUIHandPlayers();\r\n    },\r\n    showFinishGame(listPlayers){\r\n        this.btnXepBai.active  = false;\r\n        this.mauBinhThang.active = false;\r\n        for (let index = 0; index< listPlayers.length; index++){\r\n            let playerInfo = listPlayers[index];\r\n            let nodePlayer = this._getJSPlayerByName(playerInfo.username);\r\n            if(cc.isValid(nodePlayer)){\r\n                nodePlayer.showAllCardOnHand(playerInfo.cards, true);\r\n                nodePlayer.showResultFinishGame(playerInfo.moneyWin);\r\n                nodePlayer.showThangTrangResult(playerInfo.typeBinh);\r\n                if(nodePlayer.isItMe()){\r\n                    this.hands.active = false\r\n                }\r\n            }\r\n        }\r\n    },\r\n    showDown(listPlayers) {\r\n        let self = this;\r\n        this.btnXepBai.active    = false;\r\n        this.mauBinhThang.active = false;\r\n        if (MauBinhUtils.isThangTrang(listPlayers)){\r\n            for (let index = 0; index< listPlayers.length; index++){\r\n                let playerInfo = listPlayers[index];\r\n                let nodePlayer = self._getJSPlayerByName(playerInfo.username);\r\n                if(cc.isValid(nodePlayer)){\r\n                    nodePlayer.showAllCardOnHand(playerInfo.cards, true);\r\n                    nodePlayer.showThangTrangResult(playerInfo.typeBinh);\r\n                    if(nodePlayer.isItMe()){\r\n                        self.hands.active = false\r\n                    }\r\n                }\r\n            }\r\n        }else{\r\n            for (let index = 0; index< listPlayers.length; index++){\r\n                let playerInfo = listPlayers[index];\r\n                let nodePlayer = self._getJSPlayerByName(playerInfo.username);\r\n                if(cc.isValid(nodePlayer)){\r\n                    nodePlayer.showDownPlayer(playerInfo, index);\r\n                    if(nodePlayer.isItMe()){\r\n                        self.hands.active = false\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    eventShowChat(event, data) {\r\n        mm.audio.playButton();\r\n        this.ChatEmojiLayer.active = !this.ChatEmojiLayer.active;\r\n        if (this.ChatEmojiLayer.active)\r\n            this.ChatEmojiLayer.getComponent(\"ChatEmojiLayer\").initController(SmartFoxSDK.MauBinhController.ZoneInstance);\r\n    },\r\n    onPublicMessage(messData) {\r\n        let playerJs = this._getJSPlayerByName(messData.sender.name);\r\n        if(playerJs != null){\r\n            playerJs.onPublicMessage(messData.msg)\r\n        }\r\n    },\r\n\r\n});\r\n"]}