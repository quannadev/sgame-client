{"version":3,"sources":["assets/scripts/kimcuong/KimCuongWinGame.js"],"names":["self","Helper","require","cc","Class","VozBaseComponent","properties","lbMoneyWin","Label","BonusFreeSpine","Node","KimCuongNoHuCoin","KimCuongThangText","KimCuongThangLonCoin","FreeCount","NumberFreeSpine","onLoad","init","obj","KCV","runWinGame","bgAll","node","getChildByName","active","isThangLon","isNoHu","playBigWin","runKimCuongThangLon","playJackpot","runKimCuongNoHu","isFree","runFreeSpine","isBonus","playBonus","runBonusSpine","console","log","setMoneyWin","winMoney","updateFreeSpin","playSpinWin","numberTo","scheduleOnce","autoQuay","type","playSpinMis","freeSpin","getComponent","string","checkRunAgainWin","isAuto","sp","Skeleton","setAnimation","show","src","pop","data","freeGift","lbMoney","setPosition","v2","d","moveTo","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["let self;\nlet Helper = require(\"Helper\");\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        lbMoneyWin          : cc.Label,\n        BonusFreeSpine      : cc.Node,\n        KimCuongNoHuCoin    : cc.Node,\n        KimCuongThangText   : cc.Node,\n        KimCuongThangLonCoin: cc.Node,\n        FreeCount           : cc.Node,\n        NumberFreeSpine     : cc.Node,\n    },\n\n    onLoad () {\n        self = this;\n    },\n    init(obj) {\n        this.KCV = obj;\n    },\n    runWinGame() {\n        let bgAll     = this.node.getChildByName(\"bg_all\");\n        bgAll.active  = true;\n        if (this.KCV.isThangLon && !this.KCV.isNoHu) {\n            this.KCV.playBigWin();\n           this.runKimCuongThangLon();\n        }else if (this.KCV.isNoHu){\n            this.KCV.playJackpot();\n            this.runKimCuongNoHu();\n        }else if (this.KCV.isFree){\n            this.runFreeSpine();\n        }else if (this.KCV.isBonus){\n            this.KCV.playBonus();\n            this.runBonusSpine();\n        }else{\n            console.log(\"updateFreeSpin\")\n            self.KCV.setMoneyWin(self.KCV.winMoney);\n            self.updateFreeSpin();\n            if (this.KCV.winMoney > 0){\n                this.KCV.playSpinWin();\n                this.lbMoneyWin.node.active = true;\n                Helper.numberTo(this.lbMoneyWin, 0, this.KCV.winMoney, 1200, true, function () {\n                    self.scheduleOnce(function(){\n                        self.lbMoneyWin.node.active = false;\n                        bgAll.active  = false;\n                        self.KCV.autoQuay();\n                    }, 1);\n                });\n                this.KCV.winMoney   = 0;\n            }else{\n                bgAll.active  = false;\n                self.KCV.autoQuay();\n            }\n        }\n        if (this.KCV.type == 0)\n            this.KCV.playSpinMis();\n    },\n    updateFreeSpin() {\n        if (this.KCV.freeSpin < 1)\n            this.FreeCount.active       = false;\n        else{\n            this.FreeCount.active       = true;\n            self.FreeCount.getChildByName(\"lb_free_spine_count\").getComponent(cc.Label).string = self.KCV.freeSpin;\n        }\n    },\n    checkRunAgainWin() {\n        if (this.KCV.isBonus || this.KCV.winMoney > 0 || this.KCV.isFree || this.KCV.isNoHu || this.KCV.isThangLon || this.KCV.isAuto)\n            this.runWinGame();\n    },\n    runFreeSpine() {\n        this.KCV.isFree             = false;\n        this.BonusFreeSpine.active  = true;\n        this.NumberFreeSpine.active = true;\n        this.BonusFreeSpine.getComponent(sp.Skeleton).setAnimation(0, 'FreeSpine', true);\n        this.NumberFreeSpine.getChildByName(\"lb_number_free_spine\").getComponent(cc.Label).string = this.KCV.freeSpin;\n        this.scheduleOnce(function(){\n            self.node.getChildByName(\"bg_all\").active = false;\n            self.BonusFreeSpine.active  = false;\n            self.NumberFreeSpine.active = false;\n            self.FreeCount.active       = true;\n            self.FreeCount.getChildByName(\"lb_free_spine_count\").getComponent(cc.Label).string = self.KCV.freeSpin;\n            this.checkRunAgainWin();\n        }, 3);\n    },\n    runBonusSpine() {\n        this.KCV.isBonus            = false;\n        this.BonusFreeSpine.active  = true;\n        this.NumberFreeSpine.active = false;\n        this.BonusFreeSpine.getComponent(sp.Skeleton).setAnimation(0, 'Bonusgame', true);\n        this.scheduleOnce(function(){\n            self.BonusFreeSpine.active = false;\n            self.show(\"UIKimCuongBonusGame\", {src: 'kimcuong', pop: true, data: self.KCV.freeGift});\n        }, 2);\n    },\n    runKimCuongNoHu(){\n        this.KCV.isNoHu               = false;\n        this.KimCuongNoHuCoin.active  = true;\n        this.KimCuongThangText.active = true;\n        this.KimCuongThangText.getComponent(sp.Skeleton).setAnimation(0, \"NoHu\", true);\n        let lbMoney = self.node.getChildByName(\"lb_number_win\");\n        lbMoney.setPosition(cc.v2(0, -160));\n        lbMoney.active = true;\n        Helper.numberTo(lbMoney.getComponent(cc.Label), 0, this.KCV.winMoney, 1200, true, function () {\n            self.scheduleOnce(function(){\n                let d = cc.moveTo(0.5, cc.v2(0, 50));\n                lbMoney.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\n                    self.node.getChildByName(\"bg_all\").active  = false;\n                    self.KimCuongNoHuCoin.active  = false;\n                    self.KimCuongThangText.active = false;\n                    lbMoney.active                = false;\n                    self.checkRunAgainWin();\n                })));\n            }, 5);\n        });\n    },\n    runKimCuongThangLon(){\n        this.KCV.isThangLon = false;\n        this.KimCuongThangLonCoin.active = true;\n        this.KimCuongThangText.active    = true;\n        this.KimCuongThangText.getComponent(sp.Skeleton).setAnimation(0, \"ThangLon\", true);\n        let lbMoney = self.node.getChildByName(\"lb_number_win\");\n        lbMoney.setPosition(cc.v2(0, -100));\n        lbMoney.active = true;\n        Helper.numberTo(lbMoney.getComponent(cc.Label), 0, this.KCV.winMoney, 1200, true, function () {\n            self.scheduleOnce(function(){\n                let d = cc.moveTo(0.5, cc.v2(0, 50));\n                lbMoney.runAction(cc.sequence(d, cc.delayTime(0.5), cc.callFunc(function () {\n                    lbMoney.active = false;\n                    self.node.getChildByName(\"bg_all\").active  = false;\n                    self.KimCuongThangLonCoin.active    = false;\n                    self.KimCuongThangText.active       = false;\n                    self.checkRunAgainWin();\n                })));\n            }, 3);\n        });\n    },\n});\n"]}