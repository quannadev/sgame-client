{"version":3,"sources":["assets\\scripts\\xocdia\\XocDiaEvent.js"],"names":["XocDiaEvent","RESPONSE_NAME","LOAD_GAME_RES","BET_RES","END_BETTING","HISTORY_RESULT","LoadGameEvent","CasinoEvent","_BaseEvent","extend","ctor","_super","fromEvent","event","isBetting","getBool","time","getInt","listChipPot","getDoubleArray","listMyChipPot","result","getByteArray","winpot","BetEvent","userName","getUtfString","betChip","getDouble","typePot","getByte","EndBetting","winChip","refund","HistoryResponse","HistoryEvent","HISTORY_RES","items","ITEM_NAME","data","getSArray","i","size","sItem","get","getObject","session","toFixed","hoan_tra","ketqua","getKeQua","getIntArray","betValues","prizeValues","j","length","item","stakes","win","cuadat","push","kq","countWhite","countBlack","LeaderBoardEvent","LEADER_BOARD_RES","account","window","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["let XocDiaEvent = {};\r\nXocDiaEvent.RESPONSE_NAME = {\r\n    LOAD_GAME_RES: \"xd1\",\r\n    BET_RES: \"xd2\",\r\n    END_BETTING: \"xd3\",\r\n    HISTORY_RESULT: \"xd4\"\r\n};\r\nXocDiaEvent.LoadGameEvent = CasinoEvent._BaseEvent.extend({\r\n    ctor(){\r\n        this._super(XocDiaEvent.RESPONSE_NAME.LOAD_GAME_RES);\r\n    },\r\n    fromEvent(event){\r\n        this.isBetting = event.getBool(\"b\");\r\n        this.time = event.getInt(\"t\");\r\n        this.listChipPot = event.getDoubleArray(\"lcp\");\r\n        this.listMyChipPot = event.getDoubleArray(\"lmcp\");\r\n        if(!this.isBetting){\r\n            this.result = event.getByteArray(\"rs\");\r\n            this.winpot = event.getByteArray(\"wp\");\r\n        }\r\n        return this;\r\n    }\r\n})\r\nXocDiaEvent.BetEvent = CasinoEvent._BaseEvent.extend({\r\n    ctor(){\r\n        this._super(XocDiaEvent.RESPONSE_NAME.BET_RES);\r\n    },\r\n    fromEvent(event){\r\n        this.userName = event.getUtfString(\"un\");\r\n        this.betChip = event.getDouble(\"c\");\r\n        this.typePot = event.getByte(\"t\");\r\n        return this;\r\n    }\r\n});\r\nXocDiaEvent.EndBetting = CasinoEvent._BaseEvent.extend({\r\n    ctor(){\r\n        this._super(XocDiaEvent.RESPONSE_NAME.END_BETTING);\r\n    },\r\n    fromEvent(event){\r\n        this.result = event.getByteArray(\"rs\");\r\n        this.winChip = event.getDouble(\"wc\");\r\n        this.winpot = event.getByteArray(\"wp\");\r\n        this.refund = event.getDouble(\"rfc\");\r\n        return this;\r\n    }\r\n});\r\nXocDiaEvent.HistoryResponse = CasinoEvent._BaseEvent.extend({\r\n    ctor(){\r\n        this._super(XocDiaEvent.RESPONSE_NAME.HISTORY_RESULT);\r\n    },\r\n    fromEvent(event){\r\n        this.result = event.getByteArray(\"lr\");\r\n        return this;\r\n    }\r\n});\r\nXocDiaEvent.HistoryEvent = CasinoEvent._BaseEvent.extend({\r\n    ctor() {\r\n        this._super(CasinoEvent.RESPONSE_NAME.HISTORY_RES);\r\n        this.items = [];\r\n        this.ITEM_NAME = [\"Lẻ\", \"Chẵn\", \"3 Đen\", \"3 Trắng\", \"4 Đen\", \"4 Trắng\"];\r\n    },\r\n    fromEvent(event){\r\n        let data = event.getSArray(\"d\");\r\n        for(let i = 0; i < data.size(); i++){\r\n            let sItem = data.get(i).getObject();\r\n            let session = \"#\"+sItem.getDouble(\"id\").toFixed(0);\r\n            let time = sItem.getUtfString(\"t\");\r\n            let hoan_tra = sItem.getDouble(\"rf\");\r\n            let ketqua = this.getKeQua(sItem.getIntArray(\"rs\"));\r\n            let betValues = sItem.getDoubleArray(\"b\");\r\n            let prizeValues = sItem.getDoubleArray(\"w\");\r\n            for(let j = 0; j < betValues.length;j++){\r\n                if(betValues[j] > 0){\r\n                    let item = {};\r\n                    item.session = session;\r\n                    item.time = time;\r\n                    item.ketqua = ketqua;\r\n                    item.stakes = betValues[j];\r\n                    item.win = prizeValues[j];\r\n                    item.cuadat = this.ITEM_NAME[j]\r\n                    item.hoan_tra = 0;\r\n                    if(betValues[1] - betValues[0] > 0){\r\n                        // hoan tra cua chan\r\n                        if(j == 1)\r\n                            item.hoan_tra = hoan_tra;\r\n                    }else{\r\n                        if(j == 0)\r\n                            item.hoan_tra = hoan_tra;\r\n                    }\r\n                    this.items.push(item);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    },\r\n    getKeQua(result){\r\n        let kq = \"\";\r\n        let countWhite = 0; // black = 0\r\n        let countBlack = 0; // white = 1;\r\n        for(let i = 0; i < result.length;i++){\r\n            if(result[i] == 0)\r\n                countBlack++;\r\n            else\r\n                countWhite++;\r\n        }\r\n        if(countWhite % 2 == 0){\r\n            kq = \"Chẵn \"\r\n        }else{\r\n            kq = \"Lẻ \";\r\n        }\r\n        if(countWhite == 3){\r\n            kq += \"3 Trắng\";\r\n        }\r\n        if (countWhite == 4){\r\n            kq += \"4 Trắng\"\r\n        }\r\n        if(countWhite == 0){\r\n            kq += \"4 Đen\";\r\n        }\r\n        if(countWhite == 1){\r\n            kq += \"3 Đen\";\r\n        }\r\n        return kq;\r\n    }\r\n});\r\nXocDiaEvent.LeaderBoardEvent = CasinoEvent._BaseEvent.extend({\r\n    ctor() {\r\n        this._super(CasinoEvent.RESPONSE_NAME.LEADER_BOARD_RES);\r\n        this.items = [];\r\n    },\r\n    fromEvent(event){\r\n        let data = event.getSArray(\"d\");\r\n        for(let i = 0;i < data.size();i++){\r\n            let sItem = data.get(i).getObject();\r\n            let item = {};\r\n            item.session = i;\r\n            item.account = sItem.getUtfString(\"dn\");\r\n            item.win = sItem.getDouble(\"m\");\r\n            item.time = sItem.getUtfString(\"t\");\r\n            this.items.push(item);\r\n        }\r\n        return this;\r\n    }\r\n});\r\nwindow.XocDiaEvent = module.exports = XocDiaEvent;\r\n"]}