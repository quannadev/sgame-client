{"version":3,"sources":["assets/scripts/minipoker/MiniPokerWinGame.js"],"names":["self","Helper","require","cc","Class","VozBaseComponent","properties","lbMoneyWin","Label","lbNumberWin","animationWin","Node","winText","onLoad","init","obj","MNPK","runWinGame","active","isNoHu","runNoHu","winMoney","handWinType","Promise","all","children","map","text","index","then","result","node","y","setMoneyWin","numberTo","updateChipAll","scheduleOnce","checkRunAgainWin","autoQuay","isAuto","getComponent","sp","Skeleton","setAnimation","d","moveTo","v2","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["let self;\nlet Helper = require(\"Helper\");\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        lbMoneyWin          : cc.Label,\n        lbNumberWin         : cc.Label,\n        animationWin        : cc.Node,\n        winText             : cc.Node,\n    },\n\n    onLoad () {\n        self = this;\n    },\n    init(obj) {\n        this.MNPK = obj;\n    },\n    runWinGame() {\n        this.winText.active = false;\n        if (this.MNPK.isNoHu){\n            this.runNoHu();\n        }else {\n            if (this.MNPK.winMoney > 0){\n                if (this.MNPK.handWinType > 0){\n                    this.winText.active = true;\n                    Promise.all(this.winText.children.map(function(text, index){\n                        text.active = false;\n                    })).then(result =>{\n                        self.winText.children[this.MNPK.handWinType].active = true;\n                    });\n                    this.lbMoneyWin.node.y = -50;\n                }else\n                    this.lbMoneyWin.node.y = 0;\n                this.MNPK.setMoneyWin(this.MNPK.winMoney);\n                this.lbMoneyWin.node.active = true;\n                Helper.numberTo(this.lbMoneyWin, 0, this.MNPK.winMoney, 1200, true, function () {\n                    self.MNPK.updateChipAll();\n                    self.scheduleOnce(function () {\n                        self.lbMoneyWin.node.active = false;\n                        self.winText.active         = false;\n                        self.checkRunAgainWin();\n                    }, 1)\n                });\n                this.MNPK.winMoney   = 0;\n            }else{\n                this.MNPK.autoQuay();\n            }\n        }\n    },\n    checkRunAgainWin() {\n        if (this.MNPK.winMoney > 0 || this.MNPK.isNoHu || this.MNPK.isAuto)\n            this.runWinGame();\n    },\n    runNoHu(){\n        this.animationWin.active = true;\n        this.animationWin.getComponent(sp.Skeleton).setAnimation(0, \"Idle\", false);\n        this.lbNumberWin.node.active = true;\n        Helper.numberTo(this.lbNumberWin, 0, this.MNPK.winMoney, 1200, true, function () {\n            this.scheduleOnce(function () {\n                var d = cc.moveTo(0.5, cc.v2(-75, 170));\n                self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\n                    self.lbNumberWin.node.active = false;\n                    self.checkRunAgainWin();\n                })));\n            }, 3)\n        });\n        this.scheduleOnce(function () {\n            self.animationWin.active  = false;\n        }, 4)\n        this.MNPK.isNoHu     = false;\n    },\n});\n"]}