{"version":3,"sources":["assets/_smartfox/gui/multiResolution/ScaleBackground.js"],"names":["cc","_decorator","ccclass","property","ScaleBackground","onLoad","srcScaleForShowAll","Math","min","view","getCanvasSize","width","node","height","realWidth","realHeight","scale","max","Component"],"mappings":";;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAA8BA,EAAE,CAACC,UAAjC;AAAA,IAAQC,OAAR,kBAAQA,OAAR;AAAA,IAAiBC,QAAjB,kBAAiBA,QAAjB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;IAGqBC,kBADpBF;;;;;;;;;SAEGG,SAAA,kBAAS;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA,QAAIC,kBAAkB,GAAGC,IAAI,CAACC,GAAL,CAASR,EAAE,CAACS,IAAH,CAAQC,aAAR,GAAwBC,KAAxB,GAAgC,KAAKC,IAAL,CAAUD,KAAnD,EAA0DX,EAAE,CAACS,IAAH,CAAQC,aAAR,GAAwBG,MAAxB,GAAiC,KAAKD,IAAL,CAAUC,MAArG,CAAzB;AACA,QAAIC,SAAS,GAAG,KAAKF,IAAL,CAAUD,KAAV,GAAkBL,kBAAlC;AACA,QAAIS,UAAU,GAAG,KAAKH,IAAL,CAAUC,MAAV,GAAmBP,kBAApC,CAhBK,CAkBL;;AACA,SAAKM,IAAL,CAAUI,KAAV,GAAkBT,IAAI,CAACU,GAAL,CAASjB,EAAE,CAACS,IAAH,CAAQC,aAAR,GAAwBC,KAAxB,GAAgCG,SAAzC,EAAoDd,EAAE,CAACS,IAAH,CAAQC,aAAR,GAAwBG,MAAxB,GAAiCE,UAArF,CAAlB,CAnBK,CAqBL;AACA;AACA;AACA;AACA;AACH;;;EA3BwCf,EAAE,CAACkB","sourceRoot":"/","sourcesContent":["/**\n *\n *\n *                                                    __----~~~~~~~~~~~------___\n *                                   .  .   ~~//====......          __--~ ~~\n *                   -.            \\_|//     |||\\\\  ~~~~~~::::... /~\n *                ___-==_       _-~o~  \\/    |||  \\\\            _/~~-\n *        __---~~~.==~||\\=_    -_--~/_-~|-   |\\\\   \\\\        _/~\n *    _-~~     .=~    |  \\\\-_    '-~7  /-   /  ||    \\      /\n *  .~       .~       |   \\\\ -_    /  /-   /   ||      \\   /\n * /  ____  /         |     \\\\ ~-_/  /|- _/   .||       \\ /\n * |~~    ~~|--~~~~--_ \\     ~==-/   | \\~--===~~        .\\\n *          '         ~-|      /|    |-~\\~~       __--~~\n *                      |-~~-_/ |    |   ~\\_   _-~            /\\\n *                           /  \\     \\__   \\/~                \\__\n *                       _--~ _/ | .-~~____--~-/                  ~~==.\n *                      ((->/~   '.|||' -_|    ~~-/ ,              . _||\n *                                 -_     ~\\      ~~---l__i__i__i--~~_/\n *                                 _-~-__   ~)  \\--______________--~~\n *                               //.-~~~-~_--~- |-------~~~~~~~~\n *                                      //.-~~~--\\\n *                               神兽保佑\n *                              代码无BUG!\n */\nconst { ccclass, property } = cc._decorator;\n\n/**\n * @classdesc 背景自适应所有分辨率的脚本\n * @author caizhitao\n * @version 0.1.0\n * @since 2018-11-30\n * @description\n *\n * 用法：\n *\n *      1. 将本组件挂载在节点上即可\n *\n * 注意：\n *\n *      1. 挂载这个脚本的节点不能加入Widget组件，不然这个适配是没有效果的\n *      2. 目前只支持 SHOW_ALL 模式下的背景缩放适配，不支持其他模式的背景缩放\n *\n * @example\n ```\n // e.g.\n // 代码中设置 SHOW_ALL 模式的参考代码\n cc.view.setDesignResolutionSize(720, 1280, cc.ResolutionPolicy.SHOW_ALL);\n\n // 或者 Canvas 组件中，同时勾选 Fit Width 和 Fit Height\n ```\n */\n\n@ccclass\nexport default class ScaleBackground extends cc.Component {\n    onLoad() {\n        // if (CC_DEBUG) {\n        //     cc.log(\"调整前\");\n        //     cc.log(`屏幕分辨率: ${cc.view.getCanvasSize().width} x ${cc.view.getCanvasSize().height}`);\n        //     cc.log(`视图窗口可见区域分辨率: ${cc.view.getVisibleSize().width} x ${cc.view.getVisibleSize().height}`);\n        //     cc.log(`视图中边框尺寸: ${cc.view.getFrameSize().width} x ${cc.view.getFrameSize().height}`);\n        //     cc.log(`设备或浏览器像素比例: ${cc.view.getDevicePixelRatio()}`);\n        //     cc.log(`画布X:设计X=${cc.view.getScaleX()} ，画布Y:设计Y=${cc.view.getScaleY()}`);\n        //     cc.log(`节点宽高: ${this.node.width} x ${this.node.height}`);\n        //     cc.log(`节点缩放: ${this.node.scaleX} x ${this.node.scaleY}`);\n        // }\n\n        // this.node.scale = Math.max(cc.view.getCanvasSize().width / this.node.width, cc.view.getCanvasSize().height / this.node.height);\n        // 1. 先找到 SHOW_ALL 模式适配之后，本节点的实际宽高以及初始缩放值\n        let srcScaleForShowAll = Math.min(cc.view.getCanvasSize().width / this.node.width, cc.view.getCanvasSize().height / this.node.height);\n        let realWidth = this.node.width * srcScaleForShowAll;\n        let realHeight = this.node.height * srcScaleForShowAll;\n\n        // 2. 基于第一步的数据，再做缩放适配\n        this.node.scale = Math.max(cc.view.getCanvasSize().width / realWidth, cc.view.getCanvasSize().height / realHeight);\n\n        // if (CC_DEBUG) {\n        //     cc.log(`节点在SHOW_ALL模式下展示的宽高: ${realWidth} x ${realHeight}`);\n        //     cc.log(`节点在SHOW_ALL模式下展示的缩放: ${srcScaleForShowAll}`);\n        //     cc.log(`节点在SHOW_ALL模式下还需要进行的缩放: ${this.node.scale} 才能达到全屏`);\n        // }\n    }\n}\n"]}