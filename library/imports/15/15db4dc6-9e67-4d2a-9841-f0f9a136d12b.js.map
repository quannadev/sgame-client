{"version":3,"sources":["assets/scripts/kimcuong/KimCuongReel.js"],"names":["cc","Class","Component","properties","onLoad","onEnable","init","obj","data","KCV","icons","self","Promise","all","map","itemType","index","icon","instantiate","iconPrefab","node","addChild","getComponent","then","result","spin","stopAllActions","timeDelay","timeMove","isFast","d","moveTo","v2","x","height","easing","easeInOut","p2","callFunc","copy","y","EF","runActionWon","runAction","sequence","delayTime","stop"],"mappings":";;;;;;AACAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE,EAHP;AAOLC,EAAAA,MAPK,oBAOK,CAET,CATI;AAULC,EAAAA,QAVK,sBAUO,CAAE,CAVT;AAYLC,EAAAA,IAZK,gBAYAC,GAZA,EAYKC,IAZL,EAYU;AAAA;;AACX,SAAKC,GAAL,GAAWF,GAAX;AACA,SAAKG,KAAL,GAAa,EAAb;AACA,QAAIC,IAAI,GAAI,IAAZ;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYL,IAAI,CAACM,GAAL,CAAS,UAASC,QAAT,EAAmBC,KAAnB,EAAyB;AAC1C,UAAIC,IAAI,GAAGjB,EAAE,CAACkB,WAAH,CAAeP,IAAI,CAACF,GAAL,CAASU,UAAxB,CAAX;AACAR,MAAAA,IAAI,CAACS,IAAL,CAAUC,QAAV,CAAmBJ,IAAnB;AACAA,MAAAA,IAAI,GAAGA,IAAI,CAACK,YAAL,CAAkB,cAAlB,CAAP;AACAL,MAAAA,IAAI,CAACX,IAAL,CAAUK,IAAI,CAACF,GAAf,EAAoBM,QAApB;AACA,aAAOE,IAAP;AACH,KANW,CAAZ,EAOKM,IAPL,CAOU,UAAAC,MAAM,EAAI;AACZ,MAAA,KAAI,CAACd,KAAL,GAAac,MAAb;AACH,KATL;AAUH,GA1BI;AA2BLC,EAAAA,IAAI,EAAE,cAAST,KAAT,EAAe;AACjB,SAAKI,IAAL,CAAUM,cAAV;AACA,QAAIf,IAAI,GAAG,IAAX;AACA,QAAIgB,SAAS,GAAG,GAAhB;AACA,QAAIC,QAAQ,GAAI,GAAhB;;AACA,QAAK,KAAKnB,GAAL,CAASoB,MAAd,EAAqB;AACjBF,MAAAA,SAAS,GAAG,GAAZ;AACAC,MAAAA,QAAQ,GAAI,GAAZ;AACH;;AACD,QAAIE,CAAC,GAAG9B,EAAE,CAAC+B,MAAH,CAAUH,QAAV,EAAoB5B,EAAE,CAACgC,EAAH,CAAM,KAAKZ,IAAL,CAAUa,CAAhB,EAAkB,EAAE,KAAKb,IAAL,CAAUc,MAAV,GAAiB,GAAnB,CAAlB,CAApB,EAAgEC,MAAhE,CAAuEnC,EAAE,CAACoC,SAAH,CAAa,CAAb,CAAvE,CAAR;AACA,QAAIC,EAAE,GAAGrC,EAAE,CAACsC,QAAH,CAAY,YAAW;AAC5B,UAAItB,KAAK,KAAK,CAAd,EAAiB;AACb,aAAKP,GAAL,CAAS8B,IAAT;AACH;;AACD,WAAKnB,IAAL,CAAUoB,CAAV,GAAc,CAAd;AACH,KALQ,EAKN,IALM,CAAT;;AAOA,QAAIxB,KAAK,KAAK,CAAd,EAAgB;AACZ,UAAIyB,EAAE,GAAGzC,EAAE,CAACsC,QAAH,CAAY,YAAW;AAC5B,aAAKlB,IAAL,CAAUoB,CAAV,GAAc,CAAd;AACA,aAAK/B,GAAL,CAASiC,YAAT;AACH,OAHQ,EAGN,IAHM,CAAT;AAIA,WAAKtB,IAAL,CAAUuB,SAAV,CAAoB3C,EAAE,CAAC4C,QAAH,CAAY5C,EAAE,CAAC6C,SAAH,CAAa7B,KAAK,GAACW,SAAnB,CAAZ,EAA2CG,CAA3C,EAA8CW,EAA9C,CAApB;AACH,KAND,MAOI,KAAKrB,IAAL,CAAUuB,SAAV,CAAoB3C,EAAE,CAAC4C,QAAH,CAAY5C,EAAE,CAAC6C,SAAH,CAAa7B,KAAK,GAACW,SAAnB,CAAZ,EAA2CG,CAA3C,EAA8CO,EAA9C,CAApB;AACP,GApDI;AAqDLS,EAAAA,IAAI,EAAE,gBAAU;AACZ,SAAK1B,IAAL,CAAUM,cAAV;AACA,SAAKjB,GAAL,CAAS8B,IAAT;AACA,SAAKnB,IAAL,CAAUoB,CAAV,GAAc,CAAd;AACH;AAzDI,CAAT","sourceRoot":"/","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n\n    },\n\n    onLoad () {\n\n    },\n    onEnable () {},\n\n    init(obj, data){\n        this.KCV = obj;\n        this.icons = [];\n        var self  = this;\n        Promise.all(data.map(function(itemType, index){\n            let icon = cc.instantiate(self.KCV.iconPrefab);\n            self.node.addChild(icon);\n            icon = icon.getComponent('KimCuongItem');\n            icon.init(self.KCV, itemType);\n            return icon;\n        }))\n            .then(result => {\n                this.icons = result;\n            });\n    },\n    spin: function(index){\n        this.node.stopAllActions();\n        var self = this;\n        let timeDelay = 0.4;\n        let timeMove  = 1.8;\n        if ( this.KCV.isFast){\n            timeDelay = 0.2;\n            timeMove  = 0.9;\n        }\n        var d = cc.moveTo(timeMove, cc.v2(this.node.x,-(this.node.height-418))).easing(cc.easeInOut(1));\n        var p2 = cc.callFunc(function() {\n            if (index === 0) {\n                this.KCV.copy();\n            }\n            this.node.y = 0;\n        }, this);\n\n        if (index === 4){\n            var EF = cc.callFunc(function() {\n                this.node.y = 0;\n                this.KCV.runActionWon();\n            }, this);\n            this.node.runAction(cc.sequence(cc.delayTime(index*timeDelay), d, EF ));\n        } else\n            this.node.runAction(cc.sequence(cc.delayTime(index*timeDelay), d, p2));\n    },\n    stop: function(){\n        this.node.stopAllActions();\n        this.KCV.copy();\n        this.node.y = 0;\n    },\n});\n"]}