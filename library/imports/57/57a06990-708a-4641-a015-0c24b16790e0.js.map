{"version":3,"sources":["assets/scripts/vampire/UIVampireBonus.js"],"names":["Helper","require","cc","Class","VozBaseComponent","properties","lbTime","Label","lbLuotBoc","lbMoneyWin","lbTotalWin","resultWin","Node","totalSelect","totalTime","onEnable","active","_data","length","string","schedule","countTime","unschedule","eventClose","showMoneyWin","moneyWin","i","numberTo","scheduleOnce","eventSelect","event","data","self","target","getChildByName","getComponent","sp","Skeleton","setAnimation","setCompleteListener","trackEntry","loopCount","back"],"mappings":"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","sourceRoot":"/","sourcesContent":["let Helper = require(\"Helper\");\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        lbTime      : cc.Label,\n        lbLuotBoc   : cc.Label,\n        lbMoneyWin  : cc.Label,\n        lbTotalWin  : cc.Label,\n        resultWin   : cc.Node,\n        totalSelect : 0,\n        totalTime   : 15,\n    },\n    onEnable () {\n        this.totalTime          = 30;\n        this.resultWin.active   = false;\n        this.totalSelect        = this._data.length;\n        this.lbLuotBoc.string   = this.totalSelect;\n        this.lbTime.string      = this.totalTime;\n        this.schedule(this.countTime, 1);\n    },\n    countTime() {\n        this.totalTime--;\n        if ( this.totalTime < 1){\n            this.unschedule(this.countTime);\n            this.eventClose();\n        }\n        this.lbTime.string      = this.totalTime;\n    },\n    showMoneyWin() {\n        let moneyWin = 0;\n        for (let i=0; i< this._data.length; i++){\n            moneyWin += this._data[i];\n        }\n        this.resultWin.active = true;\n        Helper.numberTo(this.lbTotalWin, 0 ,moneyWin, 1200, true);\n        this.scheduleOnce(function (){\n            this.eventClose();\n        }, 3)\n    },\n    eventSelect(event, data) {\n        let self = this;\n        if (this.totalSelect > 0){\n            this.totalSelect--;\n            if (this._data[this.totalSelect] > 0){\n                event.target.getChildByName(\"lb_money\").active = true;\n                event.target.getChildByName(\"Vampire-BonusGame-1-1\").getComponent(sp.Skeleton).setAnimation(0, \"Attack\", false);\n                event.target.getChildByName(\"Vampire-BonusGame-1-1\").getComponent(sp.Skeleton).setCompleteListener((trackEntry, loopCount) => {\n                    Helper.numberTo(event.target.getChildByName(\"lb_money\").getComponent(cc.Label), 0 , self._data[self.totalSelect], 1200, true);\n                });\n\n            }\n            let moneyWin = 0;\n            for (let i=this._data.length-1; i>this.totalSelect; i--){\n                moneyWin += this._data[i];\n            }\n            Helper.numberTo(this.lbMoneyWin, 0 ,moneyWin, 1200, true);\n            this.lbLuotBoc.string   = this.totalSelect;\n            if (this.totalSelect == 0){\n                this.showMoneyWin();\n            }\n        }\n    },\n    eventClose() {\n        this.back();\n    }\n});\n"]}