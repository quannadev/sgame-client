{"version":3,"sources":["assets\\scripts\\vampire\\UIVampireBonus.js"],"names":["Helper","require","cc","Class","VozBaseComponent","properties","lbTime","Label","lbLuotBoc","lbMoneyWin","lbTotalWin","resultWin","Node","totalSelect","totalTime","onEnable","active","_data","length","string","schedule","countTime","unschedule","eventClose","showMoneyWin","moneyWin","i","numberTo","scheduleOnce","eventSelect","event","data","self","target","getChildByName","getComponent","sp","Skeleton","setAnimation","setCompleteListener","trackEntry","loopCount","back"],"mappings":"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","sourceRoot":"/","sourcesContent":["let Helper = require(\"Helper\");\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        lbTime      : cc.Label,\r\n        lbLuotBoc   : cc.Label,\r\n        lbMoneyWin  : cc.Label,\r\n        lbTotalWin  : cc.Label,\r\n        resultWin   : cc.Node,\r\n        totalSelect : 0,\r\n        totalTime   : 15,\r\n    },\r\n    onEnable () {\r\n        this.totalTime          = 30;\r\n        this.resultWin.active   = false;\r\n        this.totalSelect        = this._data.length;\r\n        this.lbLuotBoc.string   = this.totalSelect;\r\n        this.lbTime.string      = this.totalTime;\r\n        this.schedule(this.countTime, 1);\r\n    },\r\n    countTime() {\r\n        this.totalTime--;\r\n        if ( this.totalTime < 1){\r\n            this.unschedule(this.countTime);\r\n            this.eventClose();\r\n        }\r\n        this.lbTime.string      = this.totalTime;\r\n    },\r\n    showMoneyWin() {\r\n        let moneyWin = 0;\r\n        for (let i=0; i< this._data.length; i++){\r\n            moneyWin += this._data[i];\r\n        }\r\n        this.resultWin.active = true;\r\n        Helper.numberTo(this.lbTotalWin, 0 ,moneyWin, 1200, true);\r\n        this.scheduleOnce(function (){\r\n            this.eventClose();\r\n        }, 3)\r\n    },\r\n    eventSelect(event, data) {\r\n        let self = this;\r\n        if (this.totalSelect > 0){\r\n            this.totalSelect--;\r\n            if (this._data[this.totalSelect] > 0){\r\n                event.target.getChildByName(\"lb_money\").active = true;\r\n                event.target.getChildByName(\"Vampire-BonusGame-1-1\").getComponent(sp.Skeleton).setAnimation(0, \"Attack\", false);\r\n                event.target.getChildByName(\"Vampire-BonusGame-1-1\").getComponent(sp.Skeleton).setCompleteListener((trackEntry, loopCount) => {\r\n                    Helper.numberTo(event.target.getChildByName(\"lb_money\").getComponent(cc.Label), 0 , self._data[self.totalSelect], 1200, true);\r\n                });\r\n\r\n            }\r\n            let moneyWin = 0;\r\n            for (let i=this._data.length-1; i>this.totalSelect; i--){\r\n                moneyWin += this._data[i];\r\n            }\r\n            Helper.numberTo(this.lbMoneyWin, 0 ,moneyWin, 1200, true);\r\n            this.lbLuotBoc.string   = this.totalSelect;\r\n            if (this.totalSelect == 0){\r\n                this.showMoneyWin();\r\n            }\r\n        }\r\n    },\r\n    eventClose() {\r\n        this.back();\r\n    }\r\n});\r\n"]}