{"version":3,"sources":["assets/scripts/candy/CandyWinGame.js"],"names":["self","Helper","require","cc","Class","VozBaseComponent","properties","lbMoneyWin","Label","lbNumberWin","animationWin","Node","onLoad","init","obj","CDV","runWinGame","isThangLon","isNoHu","runThangLon","runNoHu","winMoney","setMoneyWin","node","active","numberTo","updateChipAll","scheduleOnce","checkRunAgainWin","autoQuay","finishSpin","isAuto","getComponent","sp","Skeleton","setAnimation","d","moveTo","v2","runAction","sequence","delayTime","callFunc"],"mappings":";;;;;;AAAA,IAAIA,IAAJ;;AACA,IAAIC,MAAM,GAAGC,OAAO,CAAC,QAAD,CAApB;;AACAC,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,gBADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,UAAU,EAAYJ,EAAE,CAACK,KADjB;AAERC,IAAAA,WAAW,EAAWN,EAAE,CAACK,KAFjB;AAGRE,IAAAA,YAAY,EAAUP,EAAE,CAACQ;AAHjB,GAHP;AASLC,EAAAA,MATK,oBASK;AACNZ,IAAAA,IAAI,GAAG,IAAP;AACH,GAXI;AAYLa,EAAAA,IAZK,gBAYAC,GAZA,EAYK;AACN,SAAKC,GAAL,GAAWD,GAAX;AACH,GAdI;AAeLE,EAAAA,UAfK,wBAeQ;AACT,QAAI,KAAKD,GAAL,CAASE,UAAT,IAAuB,CAAC,KAAKF,GAAL,CAASG,MAArC,EAA6C;AACzC,WAAKC,WAAL;AACH,KAFD,MAEM,IAAI,KAAKJ,GAAL,CAASG,MAAb,EAAoB;AACtB,WAAKE,OAAL;AACH,KAFK,MAEA;AACF,UAAI,KAAKL,GAAL,CAASM,QAAT,GAAoB,CAAxB,EAA0B;AACtB,aAAKN,GAAL,CAASO,WAAT,CAAqB,KAAKP,GAAL,CAASM,QAA9B;AACA,aAAKd,UAAL,CAAgBgB,IAAhB,CAAqBC,MAArB,GAA8B,IAA9B;AACAvB,QAAAA,MAAM,CAACwB,QAAP,CAAgB,KAAKlB,UAArB,EAAiC,CAAjC,EAAoC,KAAKQ,GAAL,CAASM,QAA7C,EAAuD,IAAvD,EAA6D,IAA7D,EAAmE,YAAY;AAC3ErB,UAAAA,IAAI,CAACe,GAAL,CAASW,aAAT;AACA1B,UAAAA,IAAI,CAAC2B,YAAL,CAAkB,YAAY;AAC1B3B,YAAAA,IAAI,CAACO,UAAL,CAAgBgB,IAAhB,CAAqBC,MAArB,GAA8B,KAA9B;AACAxB,YAAAA,IAAI,CAAC4B,gBAAL;AACH,WAHD,EAGG,CAHH;AAIH,SAND;AAOA,aAAKb,GAAL,CAASM,QAAT,GAAsB,CAAtB;AACH,OAXD,MAWK;AACD,aAAKN,GAAL,CAASc,QAAT;AACH;;AACD7B,MAAAA,IAAI,CAACe,GAAL,CAASe,UAAT;AACH;AACJ,GArCI;AAsCLF,EAAAA,gBAtCK,8BAsCc;AACf,QAAI,KAAKb,GAAL,CAASM,QAAT,GAAoB,CAApB,IAAyB,KAAKN,GAAL,CAASG,MAAlC,IAA4C,KAAKH,GAAL,CAASE,UAArD,IAAmE,KAAKF,GAAL,CAASgB,MAAhF,EACI,KAAKf,UAAL;AACP,GAzCI;AA0CLI,EAAAA,OA1CK,qBA0CI;AACL,SAAKV,YAAL,CAAkBc,MAAlB,GAA2B,IAA3B;AACA,SAAKd,YAAL,CAAkBsB,YAAlB,CAA+BC,EAAE,CAACC,QAAlC,EAA4CC,YAA5C,CAAyD,CAAzD,EAA4D,UAA5D,EAAwE,KAAxE;AACA,SAAK1B,WAAL,CAAiBc,IAAjB,CAAsBC,MAAtB,GAA+B,IAA/B;AACAvB,IAAAA,MAAM,CAACwB,QAAP,CAAgB,KAAKhB,WAArB,EAAkC,CAAlC,EAAqC,KAAKM,GAAL,CAASM,QAA9C,EAAwD,IAAxD,EAA8D,IAA9D,EAAoE,YAAY;AAC5E,WAAKM,YAAL,CAAkB,YAAY;AAC1B,YAAIS,CAAC,GAAGjC,EAAE,CAACkC,MAAH,CAAU,GAAV,EAAelC,EAAE,CAACmC,EAAH,CAAM,CAAC,EAAP,EAAW,GAAX,CAAf,CAAR;AACAtC,QAAAA,IAAI,CAACS,WAAL,CAAiBc,IAAjB,CAAsBgB,SAAtB,CAAgCpC,EAAE,CAACqC,QAAH,CAAYJ,CAAZ,EAAejC,EAAE,CAACsC,SAAH,CAAa,CAAb,CAAf,EAAgCtC,EAAE,CAACuC,QAAH,CAAY,YAAY;AACpF1C,UAAAA,IAAI,CAACS,WAAL,CAAiBc,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B;AACAxB,UAAAA,IAAI,CAAC4B,gBAAL;AACH,SAH+D,CAAhC,CAAhC;AAIH,OAND,EAMG,CANH;AAOH,KARD;AASA,SAAKD,YAAL,CAAkB,YAAY;AAC1B3B,MAAAA,IAAI,CAACU,YAAL,CAAkBc,MAAlB,GAA8B,KAA9B;AACH,KAFD,EAEG,GAFH;AAGA,SAAKT,GAAL,CAASG,MAAT,GAAsB,KAAtB;AACH,GA3DI;AA4DLC,EAAAA,WA5DK,yBA4DQ;AACT,SAAKT,YAAL,CAAkBc,MAAlB,GAA2B,IAA3B;AACA,SAAKd,YAAL,CAAkBsB,YAAlB,CAA+BC,EAAE,CAACC,QAAlC,EAA4CC,YAA5C,CAAyD,CAAzD,EAA4D,mBAA5D,EAAiF,KAAjF;AACA,SAAK1B,WAAL,CAAiBc,IAAjB,CAAsBC,MAAtB,GAA+B,IAA/B;AACAvB,IAAAA,MAAM,CAACwB,QAAP,CAAgB,KAAKhB,WAArB,EAAkC,CAAlC,EAAqC,KAAKM,GAAL,CAASM,QAA9C,EAAwD,IAAxD,EAA8D,IAA9D,EAAoE,YAAY;AAC5E,WAAKM,YAAL,CAAkB,YAAY;AAC1B,YAAIS,CAAC,GAAGjC,EAAE,CAACkC,MAAH,CAAU,GAAV,EAAelC,EAAE,CAACmC,EAAH,CAAM,CAAC,EAAP,EAAW,GAAX,CAAf,CAAR;AACAtC,QAAAA,IAAI,CAACS,WAAL,CAAiBc,IAAjB,CAAsBgB,SAAtB,CAAgCpC,EAAE,CAACqC,QAAH,CAAYJ,CAAZ,EAAejC,EAAE,CAACsC,SAAH,CAAa,CAAb,CAAf,EAAgCtC,EAAE,CAACuC,QAAH,CAAY,YAAY;AACpF1C,UAAAA,IAAI,CAACS,WAAL,CAAiBc,IAAjB,CAAsBC,MAAtB,GAA+B,KAA/B;AACAxB,UAAAA,IAAI,CAAC4B,gBAAL;AACH,SAH+D,CAAhC,CAAhC;AAIH,OAND,EAMG,CANH;AAOH,KARD;AASA,SAAKD,YAAL,CAAkB,YAAY;AAC1B3B,MAAAA,IAAI,CAACU,YAAL,CAAkBc,MAAlB,GAA8B,KAA9B;AACH,KAFD,EAEG,GAFH;AAGA,SAAKT,GAAL,CAASE,UAAT,GAAsB,KAAtB;AACH;AA7EI,CAAT","sourceRoot":"/","sourcesContent":["let self;\nlet Helper = require(\"Helper\");\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        lbMoneyWin          : cc.Label,\n        lbNumberWin         : cc.Label,\n        animationWin        : cc.Node,\n    },\n\n    onLoad () {\n        self = this;\n    },\n    init(obj) {\n        this.CDV = obj;\n    },\n    runWinGame() {\n        if (this.CDV.isThangLon && !this.CDV.isNoHu) {\n            this.runThangLon();\n        }else if (this.CDV.isNoHu){\n            this.runNoHu();\n        }else {\n            if (this.CDV.winMoney > 0){\n                this.CDV.setMoneyWin(this.CDV.winMoney);\n                this.lbMoneyWin.node.active = true;\n                Helper.numberTo(this.lbMoneyWin, 0, this.CDV.winMoney, 1200, true, function () {\n                    self.CDV.updateChipAll();\n                    self.scheduleOnce(function () {\n                        self.lbMoneyWin.node.active = false;\n                        self.checkRunAgainWin();\n                    }, 1);\n                });\n                this.CDV.winMoney   = 0;\n            }else{\n                this.CDV.autoQuay();\n            }\n            self.CDV.finishSpin();\n        }\n    },\n    checkRunAgainWin() {\n        if (this.CDV.winMoney > 0 || this.CDV.isNoHu || this.CDV.isThangLon || this.CDV.isAuto)\n            this.runWinGame();\n    },\n    runNoHu(){\n        this.animationWin.active = true;\n        this.animationWin.getComponent(sp.Skeleton).setAnimation(0, \"NoHu-112\", false);\n        this.lbNumberWin.node.active = true;\n        Helper.numberTo(this.lbNumberWin, 0, this.CDV.winMoney, 1200, true, function () {\n            this.scheduleOnce(function () {\n                let d = cc.moveTo(0.5, cc.v2(-75, 170));\n                self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\n                    self.lbNumberWin.node.active = false;\n                    self.checkRunAgainWin();\n                })));\n            }, 3)\n        });\n        this.scheduleOnce(function () {\n            self.animationWin.active    = false;\n        }, 2.5);\n        this.CDV.isNoHu     = false;\n    },\n    runThangLon(){\n        this.animationWin.active = true;\n        this.animationWin.getComponent(sp.Skeleton).setAnimation(0, \"ThangSieuLown-112\", false);\n        this.lbNumberWin.node.active = true;\n        Helper.numberTo(this.lbNumberWin, 0, this.CDV.winMoney, 1200, true, function () {\n            this.scheduleOnce(function () {\n                let d = cc.moveTo(0.5, cc.v2(-75, 170));\n                self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\n                    self.lbNumberWin.node.active = false;\n                    self.checkRunAgainWin();\n                })));\n            }, 3)\n        });\n        this.scheduleOnce(function () {\n            self.animationWin.active    = false;\n        }, 2.5)\n        this.CDV.isThangLon = false;\n    },\n});\n"]}