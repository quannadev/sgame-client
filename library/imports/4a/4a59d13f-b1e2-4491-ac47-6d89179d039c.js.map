{"version":3,"sources":["assets\\scripts\\candy\\CandyWinGame.js"],"names":["self","Helper","require","cc","Class","VozBaseComponent","properties","lbMoneyWin","Label","lbNumberWin","animationWin","Node","onLoad","init","obj","CDV","runWinGame","isThangLon","isNoHu","runThangLon","runNoHu","winMoney","setMoneyWin","node","active","numberTo","updateChipAll","scheduleOnce","checkRunAgainWin","autoQuay","finishSpin","isAuto","getComponent","sp","Skeleton","setAnimation","d","moveTo","v2","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["let self;\r\nlet Helper = require(\"Helper\");\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        lbMoneyWin          : cc.Label,\r\n        lbNumberWin         : cc.Label,\r\n        animationWin        : cc.Node,\r\n    },\r\n\r\n    onLoad () {\r\n        self = this;\r\n    },\r\n    init(obj) {\r\n        this.CDV = obj;\r\n    },\r\n    runWinGame() {\r\n        if (this.CDV.isThangLon && !this.CDV.isNoHu) {\r\n            this.runThangLon();\r\n        }else if (this.CDV.isNoHu){\r\n            this.runNoHu();\r\n        }else {\r\n            if (this.CDV.winMoney > 0){\r\n                this.CDV.setMoneyWin(this.CDV.winMoney);\r\n                this.lbMoneyWin.node.active = true;\r\n                Helper.numberTo(this.lbMoneyWin, 0, this.CDV.winMoney, 1200, true, function () {\r\n                    self.CDV.updateChipAll();\r\n                    self.scheduleOnce(function () {\r\n                        self.lbMoneyWin.node.active = false;\r\n                        self.checkRunAgainWin();\r\n                    }, 1);\r\n                });\r\n                this.CDV.winMoney   = 0;\r\n            }else{\r\n                this.CDV.autoQuay();\r\n            }\r\n            self.CDV.finishSpin();\r\n        }\r\n    },\r\n    checkRunAgainWin() {\r\n        if (this.CDV.winMoney > 0 || this.CDV.isNoHu || this.CDV.isThangLon || this.CDV.isAuto)\r\n            this.runWinGame();\r\n    },\r\n    runNoHu(){\r\n        this.animationWin.active = true;\r\n        this.animationWin.getComponent(sp.Skeleton).setAnimation(0, \"NoHu-112\", false);\r\n        this.lbNumberWin.node.active = true;\r\n        Helper.numberTo(this.lbNumberWin, 0, this.CDV.winMoney, 1200, true, function () {\r\n            this.scheduleOnce(function () {\r\n                let d = cc.moveTo(0.5, cc.v2(-75, 170));\r\n                self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\r\n                    self.lbNumberWin.node.active = false;\r\n                    self.checkRunAgainWin();\r\n                })));\r\n            }, 3)\r\n        });\r\n        this.scheduleOnce(function () {\r\n            self.animationWin.active    = false;\r\n        }, 2.5);\r\n        this.CDV.isNoHu     = false;\r\n    },\r\n    runThangLon(){\r\n        this.animationWin.active = true;\r\n        this.animationWin.getComponent(sp.Skeleton).setAnimation(0, \"ThangSieuLown-112\", false);\r\n        this.lbNumberWin.node.active = true;\r\n        Helper.numberTo(this.lbNumberWin, 0, this.CDV.winMoney, 1200, true, function () {\r\n            this.scheduleOnce(function () {\r\n                let d = cc.moveTo(0.5, cc.v2(-75, 170));\r\n                self.lbNumberWin.node.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\r\n                    self.lbNumberWin.node.active = false;\r\n                    self.checkRunAgainWin();\r\n                })));\r\n            }, 3)\r\n        });\r\n        this.scheduleOnce(function () {\r\n            self.animationWin.active    = false;\r\n        }, 2.5)\r\n        this.CDV.isThangLon = false;\r\n    },\r\n});\r\n"]}