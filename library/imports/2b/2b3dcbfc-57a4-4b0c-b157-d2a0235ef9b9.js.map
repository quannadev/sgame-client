{"version":3,"sources":["assets/scripts/sieuxe/SieuXeController.js"],"names":["SieuXeEvent","require","SieuXeController","SmartFoxSDK","BaseController","extend","m_tableInfo","registerEvents","_super","ZoneInstance","addEventListenerExtension","RESPONSE_NAME","BET_RES","onUserBetEvent","removeEvents","removeEventListenerExtension","onEventLogin","event","_requestJoinRoom","zoneName","onHistoryEvent","data","getSArray","items","i","size","sItem","get","getObject","item","session","getDouble","toFixed","time","getUtfString","stakes","win","resultMap","getByteArray","linewin","push","UIManger","show","pop","src","onLeaderBoardEvent","account","win_type","onEventRoomJoin","preLoadUI","getUI","showGame","bind","onEventUserExitRoom","user","isItMe","cc","currentUI","back","userBet","BetEvent","fromEvent","SieuXeRun","instance","getInstance","module","exports"],"mappings":";;;;;;AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,aAAD,CAAzB;;AACA,IAAIC,gBAAgB,GAAGC,WAAW,CAACC,cAAZ,CAA2BC,MAA3B,CAAkC;AACrDC,EAAAA,WAAW,EAAE,IADwC;AAErDC,EAAAA,cAFqD,4BAErC;AACZ,SAAKC,MAAL;;AACA,SAAKC,YAAL,CAAkBC,yBAAlB,CAA4CV,WAAW,CAACW,aAAZ,CAA0BC,OAAtE,EAA+E,KAAKC,cAApF,EAAoG,IAApG;AACH,GALoD;AAMrDC,EAAAA,YANqD,0BAMvC;AACV,SAAKN,MAAL;;AACA,SAAKC,YAAL,CAAkBM,4BAAlB,CAA+Cf,WAAW,CAACW,aAAZ,CAA0BC,OAAzE,EAAkF,KAAKC,cAAvF,EAAuG,IAAvG;AACH,GAToD;AAUrDG,EAAAA,YAVqD,wBAUxCC,KAVwC,EAUlC;AACf,SAAKT,MAAL,CAAYS,KAAZ;;AACA,SAAKC,gBAAL,CAAsB,KAAKC,QAA3B;AACH,GAboD;AAcrDC,EAAAA,cAdqD,0BActCH,KAdsC,EAchC;AACjB,QAAII,IAAI,GAAGJ,KAAK,CAACK,SAAN,CAAgB,GAAhB,CAAX;AACA,QAAIC,KAAK,GAAG,EAAZ;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGH,IAAI,CAACI,IAAL,EAAnB,EAAgCD,CAAC,EAAjC,EAAoC;AAChC,UAAIE,KAAK,GAAGL,IAAI,CAACM,GAAL,CAASH,CAAT,EAAYI,SAAZ,EAAZ;AACA,UAAIC,IAAI,GAAG,EAAX;AACAA,MAAAA,IAAI,CAACC,OAAL,GAAeJ,KAAK,CAACK,SAAN,CAAgB,IAAhB,EAAsBC,OAAtB,CAA8B,CAA9B,CAAf;AACAH,MAAAA,IAAI,CAACI,IAAL,GAAYP,KAAK,CAACQ,YAAN,CAAmB,GAAnB,CAAZ;AACAL,MAAAA,IAAI,CAACM,MAAL,GAAcT,KAAK,CAACK,SAAN,CAAgB,GAAhB,CAAd;AACAF,MAAAA,IAAI,CAACO,GAAL,GAAWV,KAAK,CAACK,SAAN,CAAgB,GAAhB,CAAX;AACAF,MAAAA,IAAI,CAACQ,SAAL,GAAiBX,KAAK,CAACY,YAAN,CAAmB,IAAnB,CAAjB;AACAT,MAAAA,IAAI,CAACU,OAAL,GAAeb,KAAK,CAACY,YAAN,CAAmB,IAAnB,CAAf;AACAf,MAAAA,KAAK,CAACiB,IAAN,CAAWX,IAAX;AACH;;AACDY,IAAAA,QAAQ,CAACC,IAAT,CAAc,qBAAd,EAAqC;AAACC,MAAAA,GAAG,EAAE,IAAN;AAAYC,MAAAA,GAAG,EAAE,QAAjB;AAA2BvB,MAAAA,IAAI,EAAE;AAACE,QAAAA,KAAK,EAAEA;AAAR;AAAjC,KAArC;AACH,GA7BoD;AA8BrDsB,EAAAA,kBA9BqD,8BA8BlC5B,KA9BkC,EA8B5B;AACrB,QAAII,IAAI,GAAGJ,KAAK,CAACK,SAAN,CAAgB,GAAhB,CAAX;AACA,QAAIC,KAAK,GAAG,EAAZ;;AACA,SAAI,IAAIC,CAAC,GAAG,CAAZ,EAAcA,CAAC,GAAGH,IAAI,CAACI,IAAL,EAAlB,EAA8BD,CAAC,EAA/B,EAAkC;AAC9B,UAAIE,KAAK,GAAGL,IAAI,CAACM,GAAL,CAASH,CAAT,EAAYI,SAAZ,EAAZ;AACA,UAAIC,IAAI,GAAG,EAAX;AACAA,MAAAA,IAAI,CAACC,OAAL,GAAeN,CAAf;AACAK,MAAAA,IAAI,CAACiB,OAAL,GAAepB,KAAK,CAACQ,YAAN,CAAmB,IAAnB,CAAf;AACAL,MAAAA,IAAI,CAACO,GAAL,GAAWV,KAAK,CAACK,SAAN,CAAgB,GAAhB,CAAX;AACAF,MAAAA,IAAI,CAACI,IAAL,GAAYP,KAAK,CAACQ,YAAN,CAAmB,GAAnB,CAAZ;AACAL,MAAAA,IAAI,CAACkB,QAAL,GAAgB,OAAhB;AACAxB,MAAAA,KAAK,CAACiB,IAAN,CAAWX,IAAX;AACH;;AACDY,IAAAA,QAAQ,CAACC,IAAT,CAAc,cAAd,EAA8B;AAACC,MAAAA,GAAG,EAAE,IAAN;AAAYC,MAAAA,GAAG,EAAE,QAAjB;AAA2BvB,MAAAA,IAAI,EAAE;AAACE,QAAAA,KAAK,EAAEA;AAAR;AAAjC,KAA9B;AACH,GA5CoD;AA6CrDyB,EAAAA,eA7CqD,2BA6CrC/B,KA7CqC,EA6C/B;AAClB,SAAKT,MAAL,CAAYS,KAAZ;;AACA,SAAKgC,SAAL,CAAe;AAACN,MAAAA,GAAG,EAAE;AAAN,KAAf,EAA4B,YAAY;AACpC,WAAKO,KAAL,GAAaC,QAAb;AACH,KAF2B,CAE1BC,IAF0B,CAErB,IAFqB,CAA5B;AAGH,GAlDoD;AAmDrDC,EAAAA,mBAnDqD,+BAmDjCpC,KAnDiC,EAmD3B;AACtB,QAAIqC,IAAI,GAAGrC,KAAK,CAACqC,IAAjB;;AACA,QAAGA,IAAI,CAACC,MAAR,EAAe;AACXC,MAAAA,EAAE,CAACC,SAAH,GAAgB,EAAhB;AACA,WAAKP,KAAL,GAAaQ,IAAb;AACH;AACJ,GAzDoD;AA0DrD7C,EAAAA,cA1DqD,0BA0DtCI,KA1DsC,EA0DhC;AACjB,QAAG,KAAKiC,KAAL,MAAgB,IAAnB,EACI;AACJ,QAAIS,OAAO,GAAG,IAAI3D,WAAW,CAAC4D,QAAhB,GAA2BC,SAA3B,CAAqC5C,KAArC,CAAd;AACA,SAAKiC,KAAL,GAAaY,SAAb,CAAuBH,OAAvB;AACH;AA/DoD,CAAlC,CAAvB;AAkEA,IAAII,QAAQ,GAAG,IAAf;;AACA,IAAIC,WAAW,GAAG,SAAdA,WAAc,GAAY;AAC1B,MAAID,QAAQ,IAAI,IAAhB,EACIA,QAAQ,GAAG,IAAI7D,gBAAJ,CAAqB,UAArB,EAAiC,QAAjC,CAAX;AACJ,SAAO6D,QAAP;AACH,CAJD;;AAKA5D,WAAW,CAACD,gBAAZ,GAA+B+D,MAAM,CAACC,OAAP,GAAkBF,WAAW,EAA5D","sourceRoot":"/","sourcesContent":["let SieuXeEvent = require('SieuXeEvent')\nlet SieuXeController = SmartFoxSDK.BaseController.extend({\n    m_tableInfo: null,\n    registerEvents(){\n        this._super();\n        this.ZoneInstance.addEventListenerExtension(SieuXeEvent.RESPONSE_NAME.BET_RES, this.onUserBetEvent, this);\n    },\n    removeEvents(){\n        this._super();\n        this.ZoneInstance.removeEventListenerExtension(SieuXeEvent.RESPONSE_NAME.BET_RES, this.onUserBetEvent, this);\n    },\n    onEventLogin(event){\n        this._super(event);\n        this._requestJoinRoom(this.zoneName);\n    },\n    onHistoryEvent(event){\n        let data = event.getSArray('d');\n        let items = [];\n        for(let i = 0; i < data.size(); i++){\n            let sItem = data.get(i).getObject();\n            let item = {};\n            item.session = sItem.getDouble(\"id\").toFixed(0);\n            item.time = sItem.getUtfString(\"t\");\n            item.stakes = sItem.getDouble(\"b\");\n            item.win = sItem.getDouble(\"w\");\n            item.resultMap = sItem.getByteArray(\"rs\");\n            item.linewin = sItem.getByteArray(\"lw\");\n            items.push(item);\n        }\n        UIManger.show(\"UISieuXeTransaction\", {pop: true, src: 'sieuxe', data: {items: items}});\n    },\n    onLeaderBoardEvent(event){\n        let data = event.getSArray(\"d\");\n        let items = [];\n        for(let i = 0;i < data.size();i++){\n            let sItem = data.get(i).getObject();\n            let item = {};\n            item.session = i;\n            item.account = sItem.getUtfString(\"dn\");\n            item.win = sItem.getDouble(\"m\");\n            item.time = sItem.getUtfString(\"t\");\n            item.win_type = \"Tháº¯ng\";\n            items.push(item);\n        }\n        UIManger.show(\"UISieuXeRank\", {pop: true, src: 'sieuxe', data: {items: items}});\n    },\n    onEventRoomJoin(event){\n        this._super(event);\n        this.preLoadUI({pop: true}, function () {\n            this.getUI().showGame();\n        }.bind(this))\n    },\n    onEventUserExitRoom(event){\n        let user = event.user;\n        if(user.isItMe){\n            cc.currentUI  = \"\";\n            this.getUI().back();\n        }\n    },\n    onUserBetEvent(event){\n        if(this.getUI() == null)\n            return;\n        let userBet = new SieuXeEvent.BetEvent().fromEvent(event);\n        this.getUI().SieuXeRun(userBet);\n    },\n\n});\nlet instance = null;\nlet getInstance = function () {\n    if (instance == null)\n        instance = new SieuXeController(\"UISieuXe\", \"sieuxe\");\n    return instance;\n}\nSmartFoxSDK.SieuXeController = module.exports =  getInstance();\n"]}