{"version":3,"sources":["assets\\scripts\\candy\\UICandy.js"],"names":["WinGame","require","Helper","reel","line","UtilsUI","Language","ListRoom","cc","Enum","Class","VozBaseComponent","properties","reels","type","listRoomNode","Toggle","iconPrefab","Prefab","noticeNode","Node","btnQuay","btnQuayNhanh","btnStopSieuToc","btnStopQuay","btnAutoQuay","listMainLines","numberLine","Sprite","edtCheat","EditBox","selectLines","isAuto","isFast","isSpin","red","lastResult","betSelect","roomNumber","posLineWin","totalLineWin","TotalItemRun","_TotalColumn","_totalLine","lb_hu","Label","betLevel","onLoad","initCandy","init","isChecked","schedule","updateJackpot","onEnable","node","zIndex","lastZIndex","currentUI","onDisable","stopAllActions","key","SmartFoxSDK","CandyController","ZoneInstance","mySelf","variableJackpot","getVariable","jackpot","value","current_lb_jackpot","string","split","join","currentHu","parseFloat","Utils","numberTo","self","lineArr1","lineArr2","lineArr3","Promise","all","map","index","lastArray","initRandomItems","push","length","then","result","concat","setMoneyWin","totalMoney","updateDataPhong","roomId","eventQuay","checkEnoughMoney","mm","Toast","showToast","getString","betRequest","CandyRequest","BetRequest","showLineWin","pauseSystemEventNode","setLinesBet","setBet","send","toSRequest","updateChipAll","request","typeLine","setLineLe","setLineChan","listLine","i","data","setLine","eventSieuToc","active","autoQuay","eventAutoQuay","eventStopAuto","eventStopSieuToc","eventPhong","event","addNotice","parseInt","eventSelectLines","eventOpen","GameVariables","Poker","getChip","nodeEvent","isPause","setMaterialGray","getComponent","pauseSystemEvents","resumeSystemEvents","eventBack","room","getRoomByName","SmartFox","Requests","System","LeaveRoomRequest","back","eventSetting","eventVinhDanh","CasinoRequest","LeaderBoardRequest","eventLichSuGiaoDich","HistoryRequest","eventOpenHelper","show","pop","src","finishSpin","CandyRun","status","getDataResult","cel","cel_index","icon","icons","setIcon","runReels","lineWin","winMoney","isNoHu","isNohu","isThangLon","resetSpin","numberItem","min","maxRandom","listItem","random","newArray","randomArr","reformatResult","size","res","slice","runActionWon","runWinGame","resume","scheduleOnce","isShow","posLine","children","showMainLine","childrenCount","unschedule","spin","copy","setNumberLines","totalLine","loadImageRes","max","Math","checkHasMoney","message","getChildByName","subChip","onEventUpdateChip"],"mappings":"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","sourceRoot":"/","sourcesContent":["let WinGame     = require(\"CandyWinGame\");\r\nlet Helper      = require(\"Helper\");\r\nlet reel        = require(\"CandyReel\");\r\nlet line        = require(\"CandyLine\");\r\nlet UtilsUI     = require(\"UtilsUI\");\r\nlet Language    = require(\"candyLanguage\");\r\nlet ListRoom = cc.Enum({\r\n    \"1l\"   : 100,\r\n    \"1k\"    : 1000,\r\n    \"5k\"    : 5000,\r\n    \"10k\"   : 10000\r\n});\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        reels: {\r\n            default: [],\r\n            type: reel,\r\n        },\r\n        listRoomNode: {\r\n            default: [],\r\n            type: cc.Toggle,\r\n        },\r\n        iconPrefab          : cc.Prefab,\r\n        noticeNode             : cc.Node,\r\n        btnQuay             : cc.Node,\r\n        btnQuayNhanh        : cc.Node,\r\n        btnStopSieuToc      : cc.Node,\r\n        btnStopQuay         : cc.Node,\r\n        btnAutoQuay         : cc.Node,\r\n        WinGame             : WinGame,\r\n        listMainLines       : cc.Node,\r\n        numberLine          : cc.Sprite,\r\n        edtCheat          : cc.EditBox,\r\n        selectLines         : line,\r\n        isAuto              : false,\r\n        isFast              : false,\r\n        isSpin              : false,\r\n        red                 : true,\r\n        lastResult          : [],\r\n        betSelect           : 0,\r\n        roomNumber          : 0,\r\n        posLineWin          : 0,\r\n        totalLineWin        : 0,\r\n        TotalItemRun        : 30,\r\n        _TotalColumn         : 3,\r\n        _totalLine          : 20,\r\n        lb_hu: cc.Label,\r\n        betLevel: \"1l\",\r\n    },\r\n    onLoad () {\r\n        this.initCandy();\r\n        this.isSpin = false;\r\n        this.WinGame.init(this);\r\n        this.selectLines.init(this);\r\n        this.betLevel = \"1k\";\r\n        this.roomNumber = ListRoom[\"1k\"];\r\n        this.listRoomNode[1].isChecked = true;\r\n        this.schedule(this.updateJackpot, 3);\r\n        this.updateJackpot();\r\n    },\r\n    onEnable() {\r\n        if (this.node.zIndex <= cc.lastZIndex){\r\n            cc.lastZIndex   += 1;\r\n            this.node.zIndex = cc.lastZIndex;\r\n        }\r\n        cc.currentUI     = \"UICandy\";\r\n        this._totalLine = 20;\r\n    },\r\n    onDisable(){\r\n        this.node.stopAllActions();\r\n    },\r\n    updateJackpot(){\r\n        let key = \"candy\"+this.betLevel;\r\n        if(SmartFoxSDK.CandyController.ZoneInstance.mySelf){\r\n            let variableJackpot = SmartFoxSDK.CandyController.ZoneInstance.mySelf.getVariable(key);\r\n            if(variableJackpot){\r\n                let jackpot = variableJackpot.value;\r\n                let current_lb_jackpot = this.lb_hu.string;\r\n                current_lb_jackpot = current_lb_jackpot.split(\".\").join(\"\");\r\n                let currentHu = parseFloat(current_lb_jackpot);\r\n                Utils.numberTo(this.lb_hu, currentHu, jackpot, 1000, true);\r\n            }\r\n        }\r\n    },\r\n    initCandy: function() {\r\n        let self = this;\r\n        let lineArr1 = [];\r\n        let lineArr2 = [];\r\n        let lineArr3 = [];\r\n        Promise.all(this.reels.map(function(reel, index) {\r\n            let lastArray = [];\r\n            lastArray = self.initRandomItems(self.TotalItemRun, 0, 6);\r\n            lineArr1.push(lastArray[lastArray.length-1]);\r\n            lineArr2.push(lastArray[lastArray.length-2]);\r\n            lineArr3.push(lastArray[lastArray.length-3]);\r\n            reel.init(self, lastArray);\r\n        })).then(result => {\r\n            self.lastResult = lineArr3.concat(lineArr2).concat(lineArr1);\r\n        });\r\n    },\r\n    setMoneyWin: function(totalMoney) {\r\n    },\r\n    updateDataPhong(roomId) {\r\n\r\n    },\r\n    eventQuay: function() {\r\n        if(!this.checkEnoughMoney()){\r\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n            return;\r\n        }\r\n        this.isSpin = true;\r\n        let betRequest = new CandyRequest.BetRequest();\r\n        this.showLineWin(false);\r\n        this.pauseSystemEventNode(this.btnQuay, true);\r\n        this.setLinesBet(betRequest);\r\n        betRequest.setBet(this.roomNumber);\r\n        SmartFoxSDK.CandyController.ZoneInstance.send(betRequest.toSRequest());\r\n        this.updateChipAll(this._totalLine*this.roomNumber);\r\n    },\r\n    setLinesBet(request){\r\n        switch (this.selectLines.typeLine) {\r\n            case 1:\r\n                request.setLineLe();\r\n                break;\r\n            case 2:\r\n                request.setLineChan();\r\n                break;\r\n            case 3:\r\n                let listLine = [];\r\n                for (let i=1; i< this.selectLines.data.length; i++){\r\n                    if (this.selectLines.data[i]){\r\n                        listLine.push(i);\r\n                    }\r\n                }\r\n                request.setLine(listLine);\r\n                break;\r\n        }\r\n    },\r\n    eventSieuToc: function() {\r\n        if(!this.checkEnoughMoney()){\r\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n            return;\r\n        }\r\n        this.isFast                = true;\r\n        this.isAuto                = true;\r\n        this.btnStopSieuToc.active = true;\r\n        this.btnStopQuay.active    = false;\r\n        this.isSpin                = true;\r\n        this.autoQuay();\r\n    },\r\n    eventAutoQuay: function() {\r\n        if(!this.checkEnoughMoney()){\r\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n            return;\r\n        }\r\n        this.isSpin                 = true;\r\n        this.isAuto                 = true;\r\n        this.isFast                 = false;\r\n        this.btnStopQuay.active     = true;\r\n        this.btnStopSieuToc.active  = false;\r\n        this.pauseSystemEventNode(this.btnQuay, true);\r\n        this.autoQuay();\r\n    },\r\n    eventStopAuto: function() {\r\n        this.isAuto = false;\r\n        this.btnStopQuay.active = false;\r\n        this.pauseSystemEventNode(this.btnQuay, false);\r\n    },\r\n    eventStopSieuToc: function() {\r\n        this.isAuto = false;\r\n        this.isFast = false;\r\n        this.btnStopSieuToc.active = false;\r\n    },\r\n    eventPhong: function(event, data) {\r\n        if (this.isSpin){\r\n            if(this.roomNumber == 100){\r\n                this.listRoomNode[0].isChecked = true;\r\n            }else if(this.roomNumber == 1000){\r\n                this.listRoomNode[1].isChecked = true;\r\n            }else if(this.roomNumber == 5000){\r\n                this.listRoomNode[2].isChecked = true;\r\n            }else if(this.roomNumber == 10000){\r\n                this.listRoomNode[3].isChecked = true;\r\n            }\r\n            this.addNotice(Language.getString(\"noti_is_playing\"));\r\n            return;\r\n        }\r\n        this.roomNumber = parseInt(data);\r\n        if(this.roomNumber == 100){\r\n            this.betLevel = \"1l\";\r\n        }else if(this.roomNumber == 1000){\r\n            this.betLevel = \"1k\";\r\n        }else if(this.roomNumber == 5000){\r\n            this.betLevel = \"5k\";\r\n        }else if(this.roomNumber == 10000){\r\n            this.betLevel = \"10k\";\r\n        }\r\n        this.updateJackpot();\r\n    },\r\n    eventSelectLines: function(){\r\n        if (this.isSpin){\r\n            this.addNotice(Language.getString(\"noti_is_playing\"));\r\n            return;\r\n        }\r\n        this.selectLines.eventOpen();\r\n    },\r\n    checkEnoughMoney(){\r\n        if(GameVariables.Poker.getChip(SmartFoxSDK.CandyController.ZoneInstance.mySelf) < this.roomNumber*this._totalLine){\r\n            return false;\r\n        }\r\n        return true;\r\n    },\r\n    pauseSystemEventNode: function(nodeEvent, isPause) {\r\n        Helper.setMaterialGray( nodeEvent.getComponent(cc.Sprite), isPause);\r\n        if (isPause){\r\n            nodeEvent.pauseSystemEvents(true);\r\n        }else\r\n            nodeEvent.resumeSystemEvents(true);\r\n    },\r\n\r\n    eventBack: function() {\r\n        if (this.isSpin){\r\n            this.addNotice(Language.getString(\"noti_is_playing\"));\r\n            return;\r\n        }\r\n        let room = SmartFoxSDK.CandyController.ZoneInstance.getRoomByName(\"candy\");\r\n        if(room){\r\n            SmartFoxSDK.CandyController.ZoneInstance.send(new SmartFoxSDK.SmartFox.Requests.System.LeaveRoomRequest(room));\r\n        }else{\r\n            this.back();\r\n        }\r\n    },\r\n    eventSetting: function() {\r\n\r\n    },\r\n    eventVinhDanh: function() {\r\n        let request = new CasinoRequest.LeaderBoardRequest();\r\n        SmartFoxSDK.CandyController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    eventLichSuGiaoDich: function() {\r\n        let request = new CasinoRequest.HistoryRequest();\r\n        SmartFoxSDK.CandyController.ZoneInstance.send(request.toSRequest());\r\n    },\r\n    eventOpenHelper: function() {\r\n        this.show(\"UICandyHelper\", {pop: true, src: 'candy'});\r\n    },\r\n    finishSpin: function (){\r\n        this.isSpin = false;\r\n    },\r\n    CandyRun: function(data){\r\n        var self = this;\r\n        if (void 0 !== data.status) {\r\n            if (data.status === 1) {\r\n                data.result = this.getDataResult(data.result);\r\n                Promise.all(data.result.map(function(cel, cel_index){\r\n                    Promise.all(cel.map(function(icon, index){\r\n                        self.reels[cel_index].icons[index].setIcon(icon, true);\r\n                    }));\r\n                })).then(result =>{\r\n                    self.runReels();\r\n                });\r\n                this.lineWin    = data.lineWin;\r\n                this.winMoney   = data.winMoney;\r\n                this.isNoHu     = data.isNohu;\r\n                this.isThangLon = data.isThangLon;\r\n            }else{\r\n                this.resetSpin();\r\n            }\r\n        }else {\r\n            this.resetSpin();\r\n        }\r\n    },\r\n    initRandomItems: function(numberItem, min, maxRandom) {\r\n        let listItem = [];\r\n        for (let i=0; i< numberItem; i++){\r\n            listItem[i] = this.random(min, maxRandom);\r\n        }\r\n        return listItem;\r\n    },\r\n    getDataResult: function(result) {\r\n        let self = this;\r\n        let newArray = [];\r\n        for (let i=0; i< this._TotalColumn; i++){\r\n            newArray[i] = [];\r\n        }\r\n        for (let i=0; i< result.length; i++) {\r\n            newArray[i%self._TotalColumn].push(result[i]);\r\n        }\r\n        for (let i=0; i< this._TotalColumn; i++){\r\n            let randomArr = this.initRandomItems(this.TotalItemRun-6, 0, 6);\r\n            newArray[i] = newArray[i].concat(randomArr);\r\n        }\r\n        for (let i=0; i<  this.lastResult.length; i++) {\r\n            newArray[i%self._TotalColumn].push( this.lastResult[i]);\r\n        }\r\n        this.lastResult = result;\r\n        return newArray;\r\n    },\r\n    reformatResult(result, size) {\r\n        let res = [];\r\n        for(let i=0;i < result.length; i = i+size)\r\n            res.push(result.slice(i,i+size));\r\n        return res;\r\n    },\r\n    runActionWon: function() {\r\n        this.WinGame.runWinGame();\r\n        this.showLineWin(true);\r\n        if (!this.isAuto)\r\n            this.pauseSystemEventNode(this.btnQuay, false);\r\n    },\r\n    resume() {\r\n        if (this.winMoney > 0){\r\n            this.scheduleOnce(function (){\r\n                this.WinGame.runWinGame();\r\n            },0.5);\r\n        }else {\r\n            this.WinGame.runWinGame();\r\n        }\r\n    },\r\n    autoQuay() {\r\n        if(!this.checkEnoughMoney()){\r\n            mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n            return;\r\n        }\r\n        if (this.isAuto){\r\n            this.scheduleOnce(function (){\r\n                this.eventQuay();\r\n            },0.5)\r\n        }\r\n    },\r\n    showLineWin: function(isShow) {\r\n        let self = this;\r\n        if (isShow){\r\n            this.totalLineWin   = this.lineWin.length;\r\n            this.posLineWin     = 0;\r\n            if (this.totalLineWin > 0){\r\n                Promise.all(this.lineWin.map(function(posLine){\r\n                    self.listMainLines.children[posLine].active = true;\r\n                }));\r\n                this.scheduleOnce(function(){\r\n\r\n                }, 2);\r\n                Promise.all(self.lineWin.map(function(posLine){\r\n                    self.listMainLines.children[posLine].active = false;\r\n                })).then(result =>{\r\n                    self.schedule( this.showMainLine, 1.5);\r\n                });\r\n            }\r\n        }else {\r\n            for (let i=0; i< this.listMainLines.childrenCount; i++)\r\n                if (this.listMainLines.children[i].active)\r\n                    this.listMainLines.children[i].active = false;\r\n            self.unschedule(this.showMainLine);\r\n        }\r\n    },\r\n    showMainLine: function() {\r\n        Promise.all(this.listMainLines.children.map(function(line, index) {\r\n            if (line.active)\r\n                line.active = false;\r\n        })).then(result =>{\r\n            this.totalLineWin = this.lineWin.length;\r\n            if (this.totalLineWin > 0){\r\n                this.posLineWin = (this.posLineWin+1)%this.totalLineWin;\r\n                this.listMainLines.children[this.lineWin[this.posLineWin]].active = true;\r\n            }\r\n        }, this);\r\n    },\r\n    runReels: function () {\r\n        Promise.all(this.reels.map(function(reel, index) {\r\n            reel.spin(index);\r\n        }));\r\n    },\r\n    copy: function(){\r\n        Promise.all(this.reels.map(function(reel){\r\n            reel.icons[reel.icons.length-1].setIcon(reel.icons[2].data);\r\n            reel.icons[reel.icons.length-2].setIcon(reel.icons[1].data);\r\n            reel.icons[reel.icons.length-3].setIcon(reel.icons[0].data);\r\n        }));\r\n    },\r\n    setNumberLines: function(totalLine) {\r\n        this._totalLine = totalLine;\r\n        UtilsUI.loadImageRes(this.numberLine, \"candy/img/number-button/\"+totalLine);\r\n    },\r\n    random: function(min, max){\r\n        return  min+ ~~(Math.random()*max);\r\n    },\r\n    resetSpin: function () {\r\n        this.isSpin                 = false;\r\n        this.isAuto                 = false;\r\n        this.isFast                 = false;\r\n        this.btnStopQuay.active     = false;\r\n        this.btnStopSieuToc.active  = false;\r\n        this.pauseSystemEventNode(this.btnQuay, false);\r\n        mm.Toast.showToast(1, Language.getString(\"noti_not_money\"));\r\n    },\r\n    checkHasMoney: function() {\r\n        return true;\r\n    },\r\n    addNotice: function (message) {\r\n        let self = this;\r\n        this.noticeNode.active = true;\r\n        this.noticeNode.getChildByName(\"lb_noti\").getComponent(cc.Label).string = message;\r\n        this.scheduleOnce(function (){\r\n            self.noticeNode.active = false;\r\n        },1.5);\r\n    },\r\n    updateChipAll(subChip) {\r\n        SmartFoxSDK.CandyController.onEventUpdateChip(subChip);\r\n    },\r\n});\r\n"]}