{"version":3,"sources":["assets/scripts/xocdia/XocDiaController.js"],"names":["XocDiaEvent","require","XocDiaController","SmartFoxSDK","BaseController","extend","m_tableInfo","registerEvents","_super","ZoneInstance","addEventListenerExtension","RESPONSE_NAME","LOAD_GAME_RES","onLoadGameEvent","BET_RES","onUserBetEvent","END_BETTING","onEndBettingEvent","HISTORY_RESULT","onHistoryResultEvent","removeEvents","removeEventListenerExtension","onHistoryEvent","event","history","HistoryEvent","fromEvent","getUI","show","pop","src","data","items","onLeaderBoardEvent","rank","LeaderBoardEvent","onEventLogin","_requestJoinRoom","zoneName","onEventRoomJoin","updateUserCount","onEventUserEnterRoom","user","addNodePlayerEnterRoom","onEventUserExitRoom","isItMe","node","active","UIManger","removeNodePlayer","preLoadUI","loadEvent","LoadGameEvent","listMyChipPot","listChipPot","isBetting","time","result","winpot","cc","lastTime","Date","getTime","controller","resumeGame","bind","Math","floor","showListMyChipBet","showListChipBet","users","push","mySelf","i","getRoom","getUserList","length","u","name","showListUsers","_stopEffectWinPot","ToastDatCua","_turnOffTime","_turnOnTime","resumeXocXoc","isWin","userBet","BetEvent","userName","betChip","typePot","actionFlyChipToPot","getUserByName","updateChip","endBetting","EndBetting","winChip","refund","xocxoc","HistoryResponse","console","log","showSoiCau","onPublicMessage","sender","msg","message","dataSender","dn","get","fb","msgItem","instance","getInstance","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["let XocDiaEvent = require('XocDiaEvent')\nlet XocDiaController = SmartFoxSDK.BaseController.extend({\n    m_tableInfo : null,\n    registerEvents(){\n        this._super();\n        this.ZoneInstance.addEventListenerExtension(XocDiaEvent.RESPONSE_NAME.LOAD_GAME_RES, this.onLoadGameEvent, this);\n        this.ZoneInstance.addEventListenerExtension(XocDiaEvent.RESPONSE_NAME.BET_RES, this.onUserBetEvent, this);\n        this.ZoneInstance.addEventListenerExtension(XocDiaEvent.RESPONSE_NAME.END_BETTING, this.onEndBettingEvent, this);\n        this.ZoneInstance.addEventListenerExtension(XocDiaEvent.RESPONSE_NAME.HISTORY_RESULT, this.onHistoryResultEvent, this);\n    },\n    removeEvents(){\n        this._super();\n        this.ZoneInstance.removeEventListenerExtension(XocDiaEvent.RESPONSE_NAME.LOAD_GAME_RES, this.onLoadGameEvent, this);\n        this.ZoneInstance.removeEventListenerExtension(XocDiaEvent.RESPONSE_NAME.BET_RES, this.onUserBetEvent, this);\n        this.ZoneInstance.removeEventListenerExtension(XocDiaEvent.RESPONSE_NAME.END_BETTING, this.onEndBettingEvent, this);\n        this.ZoneInstance.removeEventListenerExtension(XocDiaEvent.RESPONSE_NAME.HISTORY_RESULT, this.onHistoryResultEvent, this);\n    },\n    onHistoryEvent(event){\n        let history = new XocDiaEvent.HistoryEvent().fromEvent(event);\n        this.getUI().show(\"UIXocDiaTransaction\", {pop: true, src: 'xocdia', data: {items: history.items}});\n    },\n    onLeaderBoardEvent(event){\n        let rank = new XocDiaEvent.LeaderBoardEvent().fromEvent(event);\n        this.getUI().show(\"UIXocDiaRank\", {pop: true, src: 'xocdia', data: {items: rank.items}});\n    },\n    onEventLogin(event){\n        this._super(event);\n        this._requestJoinRoom(this.zoneName);\n    },\n    onEventRoomJoin(event){\n        this._super(event);\n        if(this.getUI())\n            this.getUI().updateUserCount();\n    },\n    onEventUserEnterRoom(event){\n        this._super(event);\n        let user = event.user;\n        if(this.getUI()){\n            this.getUI().updateUserCount();\n            this.getUI().addNodePlayerEnterRoom(user);\n        }\n    },\n    onEventUserExitRoom(event){\n        let user = event.user;\n        if(user.isItMe){\n            if (this.getUI() != null)\n                this.getUI().node.active = false;\n            UIManger.show(\"UIHome\");\n        }else{\n            if(this.getUI()){\n                this.getUI().updateUserCount();\n                this.getUI().removeNodePlayer(user);\n            }\n        }\n    },\n    onLoadGameEvent(event){\n        this.preLoadUI({pop: true},function () {\n            if(!this.m_tableInfo)\n                this.m_tableInfo = {};\n            let loadEvent = new XocDiaEvent.LoadGameEvent().fromEvent(event);\n            this.m_tableInfo.listMyChipPot = loadEvent.listMyChipPot;\n            this.m_tableInfo.listChipPot = loadEvent.listChipPot;\n            this.m_tableInfo.isBetting = loadEvent.isBetting;\n            this.m_tableInfo.time = loadEvent.time+1;\n            if(loadEvent.result)\n                this.m_tableInfo.result = loadEvent.result;\n            if(loadEvent.winpot)\n                this.m_tableInfo.winpot = loadEvent.winpot;\n            cc.lastTime      = this.m_tableInfo.time + new Date().getTime()/1000;\n            this.getUI().controller = this;\n            this.resumeGame();\n\n        }.bind(this))\n    },\n    resumeGame() {\n        if (this.m_tableInfo != null) {\n            this.m_tableInfo.time = Math.floor(cc.lastTime - new Date().getTime() / 1000);\n            this.getUI().showListMyChipBet(this.m_tableInfo.listMyChipPot);\n            this.getUI().showListChipBet(this.m_tableInfo.listChipPot);\n            let users = [];\n            users.push(this.ZoneInstance.mySelf);\n            for (let i = 0; i < this.getRoom().getUserList().length; i++) {\n                let u = this.getRoom().getUserList()[i];\n                if (u.name != this.ZoneInstance.mySelf.name && users.length < 6) {\n                    users.push(u);\n                }\n            }\n            this.getUI().showListUsers(users);\n            if (this.m_tableInfo.isBetting) {\n                this.getUI()._stopEffectWinPot();\n                this.getUI().ToastDatCua();\n                this.getUI()._turnOffTime();\n                this.getUI()._turnOnTime(this.m_tableInfo.time, this.m_tableInfo.isBetting);\n            } else {\n                this.getUI()._turnOffTime();\n                this.getUI().resumeXocXoc(this.m_tableInfo.result, this.m_tableInfo.winpot, this.m_tableInfo.time, this.m_tableInfo.isWin);\n            }\n        }\n    },\n    onUserBetEvent(event){\n        if(!this.m_tableInfo)\n            return;\n        let userBet = new XocDiaEvent.BetEvent().fromEvent(event);\n        let userName = userBet.userName;\n        let betChip = userBet.betChip;\n        let typePot = userBet.typePot;\n\n        this.m_tableInfo.listChipPot[typePot] += betChip;\n        this.getUI().showListChipBet(this.m_tableInfo.listChipPot);\n        if(this.ZoneInstance.mySelf.name == userName){\n            this.m_tableInfo.listMyChipPot[typePot] += betChip;\n            this.getUI().showListMyChipBet(this.m_tableInfo.listMyChipPot);\n        }\n        this.getUI().actionFlyChipToPot(userName, typePot, betChip);\n        // user bet\n        let user = this.getRoom().getUserByName(userName);\n        if(user)\n            this.getUI().updateChip(user, 0);\n    },\n    onEndBettingEvent(event){\n        let endBetting = new XocDiaEvent.EndBetting().fromEvent(event);\n        if(!this.m_tableInfo)\n            this.m_tableInfo = {};\n        this.m_tableInfo.isBetting = false;\n        this.m_tableInfo.result = endBetting.result;\n        this.m_tableInfo.winpot = endBetting.winpot;\n        this.m_tableInfo.winChip = endBetting.winChip;\n        this.m_tableInfo.isWin  = endBetting.winChip > 0;\n        this.m_tableInfo.refund = endBetting.refund;\n        this.getUI()._turnOffTime();\n        this.getUI().xocxoc(endBetting.result, endBetting.winpot,  endBetting.winChip > 0 ? true : false);\n    },\n    onHistoryResultEvent(event){\n        let history = new XocDiaEvent.HistoryResponse().fromEvent(event);\n        console.log(history.result);\n        this.getUI().showSoiCau(history.result);\n    },\n    onPublicMessage(event){\n        let sender = event.sender;\n        let msg = event.message;\n        let data = event.data;\n        let dataSender = data != null ? {dn: data.get(\"dn\"), fb : data.get(\"fb\")} : {dn: \"...\", fb : \"\"};\n        let msgItem = {};\n        msgItem.sender = sender;\n        msgItem.msg = msg;\n        msgItem.dataSender = dataSender;\n        this.getUI().onPublicMessage(msgItem);\n    },\n});\nlet instance = null;\nlet getInstance = function () {\n    if(instance == null)\n        instance = new XocDiaController('UIXocDia', 'xocdia');\n    return instance;\n}\nSmartFoxSDK.XocDiaController = module.exports = getInstance();\n"]}