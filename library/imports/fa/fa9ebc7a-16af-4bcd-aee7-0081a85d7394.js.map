{"version":3,"sources":["assets\\scripts\\abase\\BaseItemCustom.js"],"names":["SelectedType","cc","Enum","NONE","TOGGLE","SWITCH","BaseItemCustom","Class","editor","disallowMultiple","menu","executionOrder","VozBaseComponent","properties","selectedMode","type","tooltip","CC_DEV","selectedFlag","Node","visible","bool","selectedSpriteFrame","SpriteFrame","adaptiveSize","_selected","selected","get","set","val","active","spriteFrame","_unselectedSpriteFrame","_btnCom","btnCom","node","getComponent","Button","onDestroy","off","EventType","SIZE_CHANGED","_onSizeChange","_registerEvent","eventReg","_list","clickEvents","unshift","createEvt","on","_onItemAdaptive","component","handlerName","isValid","comName","name","match","pop","replace","evt","Component","EventHandler","target","handler","showAni","aniType","callFunc","del","acts","scaleTo","moveBy","height","width","push","CallFunc","_delSingleItem","n","displayData","length","listId","_listId","splice","runAction","Sequence","onClickThis","selectedId"],"mappings":"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","sourceRoot":"/","sourcesContent":["/******************************************\r\n * @author kL <klk0@qq.com>\r\n * @date 2019/5/15\r\n * @doc List Item component..\r\n * 说明：\r\n *      1. This component must be used in conjunction with the List component. (Supporting ..)\r\n * @end\r\n ******************************************/\r\nconst SelectedType = cc.Enum({\r\n    NONE: 0,\r\n    TOGGLE: 1, // Single (Single node show / hide)\r\n    SWITCH: 2, // Switch (single Sprite switch SpriteFrame)\r\n});\r\n\r\ncc.BaseItemCustom  = cc.Class({\r\n    editor: {\r\n        disallowMultiple: false,\r\n        menu: 'Custom component / List Item',\r\n        executionOrder: -5001,         // Before List\r\n    },\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        selectedMode: {\r\n            default: SelectedType.NONE,\r\n            type: SelectedType,\r\n            tooltip: CC_DEV && 'Select mode',\r\n            // get: function () {\r\n            //     return this._slideType;\r\n            // },\r\n            // set: function (val) {\r\n            //     if (val != null)\r\n            //         this._slideType = val;\r\n            // }\r\n        },\r\n        selectedFlag: {\r\n            default: null,\r\n            type: cc.Node,\r\n            visible: function () {\r\n                let bool = this.selectedMode > 0;\r\n                if (!bool)\r\n                    this.selectedFlag = null;\r\n                return bool;\r\n            },\r\n        },\r\n        selectedSpriteFrame: {\r\n            default: null,\r\n            type: cc.SpriteFrame,\r\n            visible: function () {\r\n                let bool = this.selectedMode == SelectedType.SWITCH;\r\n                if (!bool)\r\n                    this.selectedSpriteFrame = null;\r\n                return bool;\r\n            },\r\n        },\r\n        adaptiveSize: {\r\n            default: false,\r\n            tooltip: CC_DEV && 'Adaptive size (width or height)',\r\n        },\r\n        _selected: false,\r\n        selected: {\r\n            visible: false,\r\n            get() {\r\n                return this._selected;\r\n            },\r\n            set(val) {\r\n                this._selected = val;\r\n                if (!this.selectedFlag)\r\n                    return;\r\n                switch (this.selectedMode) {\r\n                    case SelectedType.TOGGLE:\r\n                        this.selectedFlag.active = val;\r\n                        break;\r\n                    case SelectedType.SWITCH:\r\n                        // this.selectedFlag.node.active = true;\r\n                        this.selectedFlag.spriteFrame = val ? this.selectedSpriteFrame : this._unselectedSpriteFrame;\r\n                        break;\r\n                }\r\n            }\r\n        },\r\n        _btnCom: null,\r\n        btnCom: {\r\n            visible: false,\r\n            get: function () {\r\n                if (!this._btnCom)\r\n                    this._btnCom = this.node.getComponent(cc.Button);\r\n                return this._btnCom;\r\n            }\r\n        },\r\n    },\r\n\r\n    onDestroy() {\r\n        this.node.off(cc.Node.EventType.SIZE_CHANGED, this._onSizeChange, this);\r\n    },\r\n\r\n    _registerEvent() {\r\n        if (!this.eventReg) {\r\n            if (this.btnCom && this._list.selectedMode > 0) {\r\n                this.btnCom.clickEvents.unshift(this.createEvt(this, 'onClickThis'));\r\n            }\r\n            if (this.adaptiveSize) {\r\n                this.node.on(cc.Node.EventType.SIZE_CHANGED, this._onSizeChange, this);\r\n            }\r\n            this.eventReg = true;\r\n        }\r\n    },\r\n\r\n    _onSizeChange() {\r\n        this._list._onItemAdaptive(this.node);\r\n    },\r\n    /**\r\n     * Create event\r\n     * @param {cc.Component} component Component script\r\n     * @param {string} handlerName Trigger function name\r\n     * @param {cc.Node} node Where the components are node（Take it without transmitting component.node）\r\n     * @returns cc.Component.EventHandler\r\n     */\r\n    createEvt(component, handlerName, node) {\r\n        if (!component.isValid)\r\n            return;//Some are loaded asynchronously, and nodes are destroyed as well.\r\n        component.comName = component.comName || component.name.match(/\\<(.*?)\\>/g).pop().replace(/\\<|>/g, '');\r\n        let evt = new cc.Component.EventHandler();\r\n        evt.target = node || component.node;\r\n        evt.component = component.comName;\r\n        evt.handler = handlerName;\r\n        return evt;\r\n    },\r\n\r\n    showAni(aniType, callFunc, del) {\r\n        let acts;\r\n        switch (aniType) {\r\n            case 0: //Disappearance\r\n                acts = [\r\n                    new cc.scaleTo(.2, .7),\r\n                    new cc.moveBy(.3, 0, this.node.height * 2),\r\n                ];\r\n                break;\r\n            case 1: //Disappear right\r\n                acts = [\r\n                    new cc.scaleTo(.2, .7),\r\n                    new cc.moveBy(.3, this.node.width * 2, 0),\r\n                ];\r\n                break;\r\n            case 2: //Disappear down\r\n                acts = [\r\n                    new cc.scaleTo(.2, .7),\r\n                    new cc.moveBy(.3, 0, this.node.height * -2),\r\n                ];\r\n                break;\r\n            case 3: //Disappear left\r\n                acts = [\r\n                    new cc.scaleTo(.2, .7),\r\n                    new cc.moveBy(.3, this.node.width * -2, 0),\r\n                ];\r\n                break;\r\n            default: // Default: zoom out\r\n                acts = [\r\n                    new cc.scaleTo(.3, .1),\r\n                ];\r\n                break;\r\n        }\r\n        if (callFunc || del) {\r\n            acts.push(new cc.CallFunc(() => {\r\n                if (del) {\r\n                    this._list._delSingleItem(this.node);\r\n                    for (let n = this._list.displayData.length - 1; n >= 0; n--) {\r\n                        if (this._list.displayData[n].listId == this.node._listId) {\r\n                            this._list.displayData.splice(n, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                callFunc();\r\n            }));\r\n        }\r\n        this.node.runAction(new cc.Sequence(acts));\r\n    },\r\n\r\n    onClickThis() {\r\n        // if (this._list.selectedMode == 1)\r\n        this._list.selectedId = this.node._listId;\r\n    },\r\n});\r\n"]}