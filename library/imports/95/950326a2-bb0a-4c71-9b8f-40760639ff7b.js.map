{"version":3,"sources":["assets\\scripts\\vampire\\VampireWinGame.js"],"names":["self","Helper","require","cc","Class","VozBaseComponent","properties","lbMoneyWin","Label","BonusFreeSpine","Node","NoHuCoin","ThangText","ThangLonCoin","FreeCount","NumberFreeSpine","onLoad","init","obj","SLV","runWinGame","bgAll","node","getChildByName","active","isThangLon","isNoHu","playBigWin","runVampireThangLon","playJackpot","runVampireNoHu","isFree","runFreeSpine","isBonus","playBonus","runBonusSpine","setMoneyWin","winMoney","updateFreeSpin","playSpinWin","numberTo","scheduleOnce","autoQuay","type","playSpinMis","freeSpin","getComponent","string","checkRunAgainWin","isAuto","sp","Skeleton","setAnimation","show","src","pop","data","freeGift","Text","lbMoney","setPosition","v2","d","moveTo","runAction","sequence","delayTime","callFunc"],"mappings":"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","sourceRoot":"/","sourcesContent":["let self;\r\nlet Helper = require(\"Helper\");\r\ncc.Class({\r\n    extends: cc.VozBaseComponent,\r\n\r\n    properties: {\r\n        lbMoneyWin          : cc.Label,\r\n        BonusFreeSpine      : cc.Node,\r\n        NoHuCoin    \t\t: cc.Node,\r\n        ThangText   \t\t: cc.Node,\r\n        ThangLonCoin\t\t: cc.Node,\r\n        FreeCount           : cc.Node,\r\n        NumberFreeSpine     : cc.Node,\r\n    },\r\n\r\n    onLoad () {\r\n        self = this;\r\n    },\r\n    init(obj) {\r\n        this.SLV = obj;\r\n    },\r\n    runWinGame() {\r\n        let bgAll     = this.node.getChildByName(\"bg_all\");\r\n        bgAll.active  = true;\r\n        if (this.SLV.isThangLon && !this.SLV.isNoHu) {\r\n            this.SLV.playBigWin();\r\n            this.runVampireThangLon();\r\n        }else if (this.SLV.isNoHu){\r\n            this.SLV.playJackpot();\r\n            this.runVampireNoHu();\r\n        }else if (this.SLV.isFree){\r\n            this.runFreeSpine();\r\n        }else if (this.SLV.isBonus){\r\n            this.SLV.playBonus();\r\n            this.runBonusSpine();\r\n        }else{\r\n            self.SLV.setMoneyWin(self.SLV.winMoney);\r\n            self.updateFreeSpin();\r\n            if (this.SLV.winMoney > 0){\r\n                this.SLV.playSpinWin();\r\n                this.lbMoneyWin.node.active = true;\r\n                Helper.numberTo(this.lbMoneyWin, 0, this.SLV.winMoney, 1200, true, function () {\r\n                    self.scheduleOnce(function(){\r\n                        self.lbMoneyWin.node.active = false;\r\n                        bgAll.active  = false;\r\n                        self.SLV.autoQuay();\r\n                    }, 1);\r\n                });\r\n                this.SLV.winMoney   = 0;\r\n            }else{\r\n                bgAll.active  = false;\r\n                self.SLV.autoQuay();\r\n            }\r\n        }\r\n        if (this.SLV.type == 0)\r\n            this.SLV.playSpinMis();\r\n    },\r\n    updateFreeSpin() {\r\n        if (this.SLV.freeSpin < 1)\r\n            this.FreeCount.active       = false;\r\n        else{\r\n            this.FreeCount.active       = true;\r\n            self.FreeCount.getChildByName(\"lb_free_spine_count\").getComponent(cc.Label).string = self.SLV.freeSpin;\r\n        }\r\n    },\r\n    checkRunAgainWin() {\r\n        if (this.SLV.isBonus || this.SLV.winMoney > 0 || this.SLV.isFree || this.SLV.isNoHu || this.SLV.isThangLon || this.SLV.isAuto)\r\n            this.runWinGame();\r\n    },\r\n    runFreeSpine() {\r\n        this.SLV.isFree             = false;\r\n        this.BonusFreeSpine.active  = true;\r\n        this.NumberFreeSpine.active = true;\r\n        this.BonusFreeSpine.getComponent(sp.Skeleton).setAnimation(0, 'FreeSpine', true);\r\n        this.NumberFreeSpine.getChildByName(\"lb_number_free_spine\").getComponent(cc.Label).string = this.SLV.freeSpin;\r\n        this.scheduleOnce(function(){\r\n            self.node.getChildByName(\"bg_all\").active = false;\r\n            self.BonusFreeSpine.active  = false;\r\n            self.NumberFreeSpine.active = false;\r\n            self.FreeCount.active       = true;\r\n            self.FreeCount.getChildByName(\"lb_free_spine_count\").getComponent(cc.Label).string = self.SLV.freeSpin;\r\n            this.checkRunAgainWin();\r\n        }, 3);\r\n    },\r\n    runBonusSpine() {\r\n        this.SLV.isBonus            = false;\r\n        this.BonusFreeSpine.active  = true;\r\n        this.NumberFreeSpine.active = false;\r\n        this.BonusFreeSpine.getComponent(sp.Skeleton).setAnimation(0, 'Bonusgame', true);\r\n        this.scheduleOnce(function(){\r\n            self.BonusFreeSpine.active = false;\r\n            self.show(\"UIVampireBonus\", {src: 'vampire', pop: true, data: self.SLV.freeGift});\r\n        }, 2);\r\n    },\r\n    runVampireNoHu(){\r\n        this.SLV.isNoHu               = false;\r\n        this.NoHuCoin.active  = true;\r\n        this.Text.active = true;\r\n        this.ThangText.getComponent(sp.Skeleton).setAnimation(0, \"NoHu\", true);\r\n        let lbMoney = self.node.getChildByName(\"lb_number_win\");\r\n        lbMoney.setPosition(cc.v2(0, -160));\r\n        lbMoney.active = true;\r\n        Helper.numberTo(lbMoney.getComponent(cc.Label), 0, this.SLV.winMoney, 1200, true, function () {\r\n            self.scheduleOnce(function(){\r\n                let d = cc.moveTo(0.5, cc.v2(0, 50));\r\n                lbMoney.runAction(cc.sequence(d, cc.delayTime(1), cc.callFunc(function () {\r\n                    self.node.getChildByName(\"bg_all\").active  = false;\r\n                    self.NoHuCoin.active  = false;\r\n                    self.ThangText.active = false;\r\n                    lbMoney.active                = false;\r\n                    self.checkRunAgainWin();\r\n                })));\r\n            }, 5);\r\n        });\r\n    },\r\n    runVampireThangLon(){\r\n        this.SLV.isThangLon = false;\r\n        this.ThangLonCoin.active = true;\r\n        this.ThangText.active    = true;\r\n        this.ThangText.getComponent(sp.Skeleton).setAnimation(0, \"ThangLon\", true);\r\n        let lbMoney = self.node.getChildByName(\"lb_number_win\");\r\n        lbMoney.setPosition(cc.v2(0, -100));\r\n        lbMoney.active = true;\r\n        Helper.numberTo(lbMoney.getComponent(cc.Label), 0, this.SLV.winMoney, 1200, true, function () {\r\n            self.scheduleOnce(function(){\r\n                let d = cc.moveTo(0.5, cc.v2(0, 50));\r\n                lbMoney.runAction(cc.sequence(d, cc.delayTime(0.5), cc.callFunc(function () {\r\n                    lbMoney.active = false;\r\n                    self.node.getChildByName(\"bg_all\").active  = false;\r\n                    self.ThangLonCoin.active    = false;\r\n                    self.ThangText.active       = false;\r\n                    self.checkRunAgainWin();\r\n                })));\r\n            }, 3);\r\n        });\r\n    },\r\n});\r\n"]}