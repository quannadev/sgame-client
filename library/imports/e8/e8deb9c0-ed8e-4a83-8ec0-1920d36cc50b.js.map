{"version":3,"sources":["assets\\scripts\\poker\\UIPoker.js"],"names":["cc","Class","BaseGame","properties","ChatEmojiLayer","Node","Action","CommunityCard","lb_total_bet","Label","PokerTextWinner","PotPrefab","Prefab","buy_in","bet","POS_6","POS_9","onLoad","PoolPot","i","pot","instantiate","node","addChild","active","push","onEnable","_data","_number_desk","number_desk","_room","room","poses","_CURRENT_POS","_children","length","pos","on","requestSitOn","countOut","onDisable","nodePlayers","removeAllChildren","getCommunityCard","reset","hideDeskEmpty","parent","hidePokerTextWinner","WaitingTimer","runActionChipToPot","betChip","cb","controller","m_tableInfo","m_listUser","player","_getJSPlayerByName","convertPosBet","getPositionInOtherNode","BetChip","requestPoolPot","position","getChildByName","getComponent","string","Utils","formatCurrency","runAction","sequence","moveTo","callFunc","animation","sp","Skeleton","setAnimation","showPokerTextWinner","nameWin","winningHands","HIGHCARD","PAIR","TWOPAIR","THREEOFAKIND","STRAIGHT","FLUSH","FULLHOUSE","FOUROFAKIND","STRAIGHTFLUSH","ROYALFLUSH","eventBack","m_isGameStart","m_listActiveUserName","requestLeaveRoom","isSitOut","m_listUserSitOut","indexOf","SmartFoxSDK","PokerController","ZoneInstance","mySelf","name","sitOutRequest","PokerRequest","SitOutRequest","setRoomId","id","setSitOut","send","toSRequest","myName","sitOnRequest","SitOnRequest","setAutoSitOn","setBuyIn","getAction","setMoneyPot","money","processBetChipToPot","m_listDesk","desk","_getJSPlayerById","DeskId","m_total_bet","m_potChip","resetBet","bind","runActionPotChipToWinner","moneyWin","winner","target","self","eventShowChat","event","data","initController","onPublicMessage","messData","playerJs","sender","msg","updateUserVariable","subChip","jsPlayer","setMoney","GameVariables","Poker","getChip"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.BaseGame,\r\n\r\n    properties: {\r\n        ChatEmojiLayer: cc.Node,\r\n        Action: cc.Node,\r\n        CommunityCard: cc.Node,\r\n        lb_total_bet: cc.Label,\r\n        PokerTextWinner: cc.Node,\r\n        PotPrefab: cc.Prefab,\r\n        buy_in: 0,\r\n        bet: 500,\r\n        POS_6: cc.Node,\r\n        POS_9: cc.Node,\r\n    },\r\n    onLoad(){\r\n        // init prefab pot\r\n        this.PoolPot = [];\r\n        for(let i = 0; i < 9;i++){\r\n            let pot = cc.instantiate(this.PotPrefab);\r\n            this.node.addChild(pot);\r\n            pot.active = false;\r\n            this.PoolPot.push(pot);\r\n        }\r\n    },\r\n    onEnable(){\r\n        this.buy_in = this._data.buy_in;\r\n        this._number_desk = this._data.number_desk;\r\n        this._room = this._data.room;\r\n        this.poses = [];\r\n        if(this._number_desk == 6){\r\n            this.POS_6.active = true;\r\n            this.POS_9.active = false;\r\n            this._CURRENT_POS = this.POS_6;\r\n        }else {\r\n            this.POS_6.active = false;\r\n            this.POS_9.active = true;\r\n            this._CURRENT_POS = this.POS_9;\r\n        }\r\n        for(let i = 0; i < this._CURRENT_POS._children.length;i++){\r\n            let pos = this._CURRENT_POS._children[i];\r\n            this.poses.push(this._CURRENT_POS._children[i]);\r\n            pos.on(\"touchend\", function () {\r\n                this.requestSitOn();\r\n            }, this);\r\n            pos.active = false;\r\n        }\r\n        this.countOut = 0;\r\n    },\r\n    onDisable(){\r\n        this.nodePlayers.removeAllChildren(true);\r\n        this.getCommunityCard().reset();\r\n        this.hideDeskEmpty();\r\n        this.lb_total_bet.node.parent.active = false;\r\n        this.hidePokerTextWinner();\r\n        this.WaitingTimer.active = false;\r\n    },\r\n    runActionChipToPot(betChip, cb){\r\n        if(betChip <= 0){\r\n            if(cb)\r\n                cb();\r\n            return;\r\n        }\r\n        for(let i = 0; i < this.controller.m_tableInfo.m_listUser.length;i++){\r\n            let player = this._getJSPlayerByName(this.controller.m_tableInfo.m_listUser[i]);\r\n            let convertPosBet = this.getPositionInOtherNode(player.BetChip, this.node);\r\n            let pot = this.requestPoolPot();\r\n            pot.position = convertPosBet;\r\n            pot.active = true;\r\n            pot.getChildByName(\"money\").getComponent(cc.Label).string = Utils.formatCurrency(betChip);\r\n            pot.runAction(cc.sequence(cc.moveTo(0.3, this.lb_total_bet.node.parent.position), cc.callFunc(function () {\r\n                this.active = false;\r\n                if(cb)\r\n                    cb();\r\n            }, pot)))\r\n        }\r\n    },\r\n    hidePokerTextWinner(){\r\n        this.PokerTextWinner.active = false;\r\n        let animation = this.PokerTextWinner.getComponent(sp.Skeleton);\r\n        animation.setAnimation(0, \"NONE\", false);\r\n    },\r\n    showPokerTextWinner(nameWin){\r\n        let winningHands = {\r\n            HIGHCARD : \"Bai-Cao\",\r\n            PAIR: \"Mot-Doi\",\r\n            TWOPAIR: \"Hai-Doi\",\r\n            THREEOFAKIND: \"Xam\",\r\n            STRAIGHT: \"Sanh\",\r\n            FLUSH: \"Thung\",\r\n            FULLHOUSE: \"Cu-Lu\",\r\n            FOUROFAKIND: \"Tu-Quy\",\r\n            STRAIGHTFLUSH: \"Sanh-Thung\",\r\n            ROYALFLUSH: \"Thung_Pha-Sanh\"\r\n        }\r\n        this.PokerTextWinner.active = true;\r\n        let animation = this.PokerTextWinner.getComponent(sp.Skeleton);\r\n        if(nameWin == \"Sanh-Thung\"){\r\n            animation.setAnimation(0, \"Sanh\", false);\r\n            animation.setAnimation(1, \"Thung\", false);\r\n        }else if(winningHands[nameWin]){\r\n            animation.setAnimation(0, winningHands[nameWin], true);\r\n        }else{\r\n            this.PokerTextWinner.active = false;\r\n        }\r\n\r\n    },\r\n    eventBack(){\r\n        if(!this.controller.m_tableInfo.m_isGameStart || this.controller.m_tableInfo.m_listActiveUserName.length <= 1){\r\n           this.requestLeaveRoom();\r\n        }else{\r\n            let isSitOut = true;\r\n            if(this.controller.m_tableInfo.m_listUserSitOut.indexOf(SmartFoxSDK.PokerController.ZoneInstance.mySelf.name) >= 0){\r\n                isSitOut = false;\r\n            }\r\n            let sitOutRequest = new PokerRequest.SitOutRequest();\r\n            sitOutRequest.setRoomId(this._room.id);\r\n            sitOutRequest.setSitOut(isSitOut);\r\n            SmartFoxSDK.PokerController.ZoneInstance.send(sitOutRequest.toSRequest());\r\n        }\r\n    },\r\n    requestSitOn(){\r\n        let myName = SmartFoxSDK.PokerController.ZoneInstance.mySelf.name;\r\n        if(this._getJSPlayerByName(myName) == null){\r\n            let sitOnRequest = new PokerRequest.SitOnRequest().setRoomId(this._room.id).setAutoSitOn().setBuyIn(this.buy_in);\r\n            SmartFoxSDK.PokerController.ZoneInstance.send(sitOnRequest.toSRequest());\r\n            this.hideDeskEmpty();\r\n        }\r\n    },\r\n    getCommunityCard(){\r\n        return this.CommunityCard.getComponent(this.CommunityCard.name);\r\n    },\r\n    getAction(){\r\n        return this.Action.getComponent(this.Action.name);\r\n    },\r\n    setMoneyPot(money){\r\n        if(money > 0){\r\n            this.lb_total_bet.string = Utils.formatCurrency(money);\r\n            this.lb_total_bet.node.parent.active = true;\r\n        }else{\r\n            this.lb_total_bet.node.parent.active = false;\r\n        }\r\n    },\r\n    processBetChipToPot(cb){\r\n        let betChip = 0;\r\n        // sum all pot of user to total pot\r\n        for(let i = 0; i < this.controller.m_tableInfo.m_listDesk.length;i++){\r\n            let desk = this.controller.m_tableInfo.m_listDesk[i];\r\n            let player = this._getJSPlayerById(desk.DeskId);\r\n            if(player){\r\n                betChip = player.m_total_bet;\r\n                this.controller.m_tableInfo.m_potChip += player.m_total_bet;\r\n                // reset bet of user\r\n                player.resetBet();\r\n            }\r\n\r\n        }\r\n        // action sum all pot of user to total pot\r\n        this.runActionChipToPot(betChip, function () {\r\n            this.lb_total_bet.string = Utils.formatCurrency(this.controller.m_tableInfo.m_potChip);\r\n            this.lb_total_bet.node.parent.active = true;\r\n            if(cb){\r\n                cb();\r\n            }\r\n        }.bind(this));\r\n    },\r\n    requestPoolPot(){\r\n        for(let i  = 0; i < this.PoolPot.length;i++){\r\n            if(!this.PoolPot[i].active){\r\n                this.PoolPot[i].active = true;\r\n                return this.PoolPot[i];\r\n            }\r\n        }\r\n        let pot = cc.instantiate(this.PotPrefab);\r\n        this.node.addChild(pot);\r\n        this.PoolPot.push(pot);\r\n        return pot;\r\n    },\r\n    runActionPotChipToWinner(moneyWin , winner, cb, target){\r\n        let player = this._getJSPlayerByName(winner);\r\n        if(player){\r\n            let pot = this.requestPoolPot();\r\n            let self = this;\r\n            let convertPosBet = this.getPositionInOtherNode(player.BetChip, this.node);\r\n            pot.position = this.lb_total_bet.node.parent.position;\r\n            pot.getChildByName(\"money\").getComponent(cc.Label).string = Utils.formatCurrency(moneyWin);\r\n            pot.runAction(cc.sequence(cc.moveTo(0.5, convertPosBet), cc.callFunc(function () {\r\n                this.active = false;\r\n                self.lb_total_bet.node.parent.active = false;\r\n                if(cb)\r\n                    cb(moneyWin, target);\r\n            }, pot)))\r\n        }\r\n    },\r\n    eventShowChat(event, data) {\r\n        this.ChatEmojiLayer.active = !this.ChatEmojiLayer.active;\r\n        if (this.ChatEmojiLayer.active)\r\n            this.ChatEmojiLayer.getComponent(\"ChatEmojiLayer\").initController(SmartFoxSDK.PokerController.ZoneInstance);\r\n    },\r\n    onPublicMessage(messData) {\r\n        let playerJs = this._getJSPlayerByName(messData.sender.name);\r\n        if(playerJs != null){\r\n            playerJs.onPublicMessage(messData.msg)\r\n        }\r\n    },\r\n    updateUserVariable(subChip){\r\n        let jsPlayer    = this._getJSPlayerByName(SmartFoxSDK.PokerController.ZoneInstance.mySelf.name);\r\n        jsPlayer.setMoney(GameVariables.Poker.getChip(SmartFoxSDK.PokerController.ZoneInstance.mySelf)-subChip)\r\n    },\r\n});\r\n"]}