{"version":3,"sources":["assets/scripts/baccarat/ItemCard.js"],"names":["cc","Class","Component","properties","_isSelected","bg","Node","_card","_cbSelect","_removeSelect","onLoad","addEventSelect","cb","isSelected","getCard","setCard","card","loadCardBack","Utils","loadRes","getComponent","Sprite","_loadCard","nameFile","init","node","active","undefined","reveal","pIsFaceUp","self","timeFlip","callFunc","skewY","action","skewBy","action2","skewTo","runAction","sequence","delayTime","switchCard","reset","_zIndex","x","y","eventSelect","mm","audio","playButton","id","setScaleCard","scaleCard","width","height"],"mappings":"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","sourceRoot":"/","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        _isSelected: false,\n        bg : cc.Node,\n        _card: null,\n        _cbSelect : null,\n        _removeSelect: true\n    },\n    onLoad(){\n\n    },\n    addEventSelect(cb){\n        this._cbSelect = cb;\n    },\n    isSelected(){\n        return this._isSelected;\n    },\n    getCard(){\n        return this._card;\n    },\n    setCard(card){\n        this._card = card;\n    },\n    loadCardBack(cb){\n        Utils.loadRes(this.bg.getComponent(cc.Sprite), \"images/baccarat/cards/card_up\", function () {\n            if (cb){\n                cb();\n            }\n        })\n    },\n    _loadCard(){\n        Utils.loadRes(this.bg.getComponent(cc.Sprite), \"images/baccarat/cards/\"+this._card.nameFile)\n    },\n    init(card, _removeSelect){\n        this.node.active = true;\n        if(card == null){\n            this.loadCardBack();\n        }else{\n            this._card = card;\n            if(_removeSelect != undefined){\n                this._removeSelect = _removeSelect;\n            }else{\n                this._removeSelect = true;\n            }\n            this._loadCard();\n        }\n    },\n    reveal(card, pIsFaceUp, cb){\n        this.node.active = true;\n        this.loadCardBack();\n        this._card = card;\n        let self = this;\n        let timeFlip = 0.45;\n        let callFunc = cc.callFunc(function () {\n            self._loadCard();\n            if(!pIsFaceUp)\n                self.node.skewY = 170;\n            else\n                self.node.skewY = 45;\n        });\n        if(!pIsFaceUp)\n        {\n            self.node.skewY = 0;\n            let action = cc.skewBy(timeFlip/2,0,10);\n            let action2 = cc.skewTo(timeFlip/2,0,180);\n            self.node.runAction(cc.sequence(cc.delayTime(1), action,callFunc,action2, cc.delayTime(0.5), cc.callFunc(function () {\n                if (cb)\n                    cb();\n            })));\n        }else\n        {\n            self.node.skewY = 180;\n            let action = cc.skewBy(timeFlip/2,0,-35);\n            let action2 = cc.skewTo(timeFlip/2,0,0);\n            self.node.runAction(cc.sequence(cc.delayTime(1), action,callFunc,action2, cc.delayTime(0.5), cc.callFunc(function () {\n                if (cb)\n                    cb();\n            })));\n        }\n    },\n    switchCard(pIsFaceUp) {\n        let self = this;\n        let timeFlip = 0.45;\n        let callFunc = cc.callFunc(function () {\n            self._loadCard();\n            if(!pIsFaceUp)\n                self.node.skewY = 170;\n            else\n                self.node.skewY = 45;\n        });\n        self.node.skewY = 0;\n        let action = cc.skewBy(timeFlip/2,0,10);\n        let action2 = cc.skewTo(timeFlip/2,0,180);\n        self.node.runAction(cc.sequence(action,callFunc,action2));\n        if(!pIsFaceUp)\n        {\n            self.node.skewY = 0;\n            let action = cc.skewBy(timeFlip/2,0,10);\n            let action2 = cc.skewTo(timeFlip/2,0,180);\n            self.node.runAction(cc.sequence(action,callFunc,action2));\n        }else\n        {\n            self.node.skewY = 180;\n            let action = cc.skewBy(timeFlip/2,0,-35);\n            let action2 = cc.skewTo(timeFlip/2,0,0);\n            self.node.runAction(cc.sequence(action,callFunc,action2));\n        }\n    },\n    reset(){\n        this.loadCardBack();\n        this.node._zIndex = 0;\n        this.node.x = 0;\n        this.node.y = 0;\n        this._isSelected = false;\n        this._card = null;\n        this._cbSelect = null;\n        this._removeSelect = true;\n    },\n    eventSelect(){\n        mm.audio.playButton();\n        if(!this._removeSelect){\n            if(!this._isSelected){\n                this._isSelected = true;\n                this.node.y = this.node.y + 20;\n                if(this._cbSelect){\n                    this._cbSelect(this.getCard().id);\n                }\n            }else{\n                this._isSelected = false;\n                this.node.y = this.node.y - 20;\n            }\n        }\n    },\n    setScaleCard(scaleCard){\n        this.node.width  *= scaleCard;\n        this.node.height *= scaleCard;\n    }\n});\n"]}