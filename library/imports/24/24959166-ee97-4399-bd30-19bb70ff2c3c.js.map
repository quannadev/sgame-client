{"version":3,"sources":["assets/scripts/portal/PortalController.js"],"names":["UIManager","require","PortalController","SmartFoxSDK","BaseController","extend","registerEvents","_super","ZoneInstance","addEventListenerExtension","CasinoEvent","RESPONSE_NAME","TRANSFER_MONEY_RES","onTransferMoney","CHANGE_PASS_RES","onChangePassword","GIFT_CODE_RES","onGiftCode","removeEvents","removeEventListenerExtension","onEventConnection","event","success","register","uiRegister","getUIFromName","getComponent","name","eventClickRegister","loginZone","un","pass","_reset","onEventLogin","mm","isLogin","UIManger","show","Config","saveUsername","savePass","onHistoryEvent","Loading","hide","data","getSArray","items","i","size","sItem","get","getObject","item","session","time","getUtfString","amount","getDouble","chip","tax","des","push","pop","src","transfer","TransferMoneyEvent","fromEvent","code","Toast","showToast","changePass","ChangePassEvent","clearUserPass","giftCodeRes","GiftCodeEvent","ec","undefined","Utils","addDotToNumber","gift_value","instance","getInstance","module","exports"],"mappings":"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","sourceRoot":"/","sourcesContent":["let UIManager = require(\"UIManager\");\nlet PortalController = SmartFoxSDK.BaseController.extend({\n    registerEvents(){\n        this._super();\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.TRANSFER_MONEY_RES, this.onTransferMoney, this);\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.CHANGE_PASS_RES, this.onChangePassword, this);\n        this.ZoneInstance.addEventListenerExtension(CasinoEvent.RESPONSE_NAME.GIFT_CODE_RES, this.onGiftCode, this);\n    },\n    removeEvents(){\n        this._super();\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.TRANSFER_MONEY_RES, this.onTransferMoney, this);\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.CHANGE_PASS_RES, this.onChangePassword, this);\n        this.ZoneInstance.removeEventListenerExtension(CasinoEvent.RESPONSE_NAME.GIFT_CODE_RES, this.onGiftCode, this);\n    },\n    onEventConnection(event){\n        if(event.success){\n            if(this.register){\n                this.register = false;\n                let uiRegister = UIManager.getUIFromName(\"UIRegister\");\n                uiRegister.getComponent(uiRegister.name).eventClickRegister();\n            }else{\n                this.loginZone(this.un, this.pass);\n            }\n        }else{\n            this._reset();\n        }\n    },\n    onEventLogin(event){\n        this._super(event);\n        mm.isLogin = true;\n        UIManger.show(\"UIHome\");\n        Config.saveUsername(this.un);\n        Config.savePass(this.pass);\n    },\n    onHistoryEvent(event){\n        mm.Loading.hide();\n        let data = event.getSArray(\"d\");\n        let items = [];\n        for(let i = 0; i < data.size(); i++){\n            let sItem = data.get(i).getObject();\n            let item = {};\n            item.session = i + 1;\n            item.time = sItem.getUtfString(\"t\");\n            item.amount = sItem.getDouble(\"am\");\n            item.chip = sItem.getDouble(\"c\");\n            item.tax = sItem.getDouble(\"tx\");\n            item.des = sItem.getUtfString(\"des\");\n            items.push(item);\n        }\n        UIManger.show(\"UIBankLog\", {pop: true, src: 'portal', data: {items: items}});\n    },\n    onTransferMoney(event){\n        let transfer = new CasinoEvent.TransferMoneyEvent().fromEvent(event);\n        let code = transfer.code;\n        if(code == 1){\n            // true\n            mm.Toast.showToast(1, \"Chuyển tiền thành công\");\n        }else if(code == 0){\n            // false\n            mm.Toast.showToast(1, \"Tài khoản nhận không đúng\");\n        }else if(code == 2){\n            mm.Toast.showToast(1, \"Bạn không đủ số dư\");\n        }\n        mm.Loading.hide();\n    },\n    onChangePassword(event){\n        let changePass = new CasinoEvent.ChangePassEvent().fromEvent(event);\n        let code = changePass.code;\n        if(code == 1){\n            // true\n            Config.clearUserPass();\n            mm.Toast.showToast(1, \"Đổi mật khẩu thành công\");\n        }else{\n            // false\n            mm.Toast.showToast(1, \"Đổi mật khẩu thất bại\");\n        }\n    },\n    onGiftCode(event){\n        mm.Loading.hide();\n        let giftCodeRes = new CasinoEvent.GiftCodeEvent().fromEvent(event);\n        if(giftCodeRes.ec !== undefined && giftCodeRes.ec !== null){\n            mm.Toast.showToast(1, giftCodeRes.ec);\n        }else{\n            mm.Toast.showToast(1, \"Bạn được quà \"+Utils.addDotToNumber(giftCodeRes.gift_value));\n        }\n    },\n\n});\nlet instance = null;\nlet getInstance = function () {\n    if(instance == null)\n        instance = new PortalController(\"UIPortal\", 'portal');\n    return instance;\n}\nSmartFoxSDK.PortalController = module.exports = getInstance();\n"]}