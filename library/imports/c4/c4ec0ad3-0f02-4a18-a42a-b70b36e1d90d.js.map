{"version":3,"sources":["assets/scripts/sinbad/UISinbadBonus.js"],"names":["Helper","require","cc","Class","VozBaseComponent","properties","character","sp","Skeleton","lbHeSoNhan","Label","lbTime","lbLuotBoc","lbMoneyWin","totalSelect","totalTime","resultBonus","Node","vongTronNode","onEnable","_data","length","string","schedule","countTime","quay","rotateBy","actionQuay","repeatForever","runAction","unschedule","eventClose","showMoneyWin","self","active","moneyWin","i","node","numberTo","setTimeout","eventSelect","event","data","target","getChildByName","idle","setAnimation","setTrackCompleteListener","stopAction","getComponent","bind","back"],"mappings":"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","sourceRoot":"/","sourcesContent":["let Helper = require(\"Helper\");\ncc.Class({\n    extends: cc.VozBaseComponent,\n\n    properties: {\n        character   : sp.Skeleton,\n        lbHeSoNhan  : cc.Label,\n        lbTime      : cc.Label,\n        lbLuotBoc   : cc.Label,\n        lbMoneyWin  : cc.Label,\n        totalSelect : 0,\n        totalTime   : 15,\n        resultBonus : cc.Node,\n        vongTronNode: cc.Node,\n    },\n    onEnable () {\n        this.totalTime          = 30;\n        this.totalSelect        = this._data.length;\n        // this.lbHeSoNhan.string  = \"x\"+Math.floor(Math.random()*30);\n        this.lbLuotBoc.string   = this.totalSelect;\n        this.lbTime.string      = this.totalTime;\n        this.schedule(this.countTime, 1);\n        let quay = cc.rotateBy(20, 360);\n        this.actionQuay = quay.repeatForever();\n        this.vongTronNode.runAction(this.actionQuay);\n    },\n    countTime() {\n        this.totalTime--;\n        if ( this.totalTime < 1){\n            this.unschedule(this.countTime);\n            this.eventClose();\n        }\n        this.lbTime.string      = this.totalTime;\n    },\n    showMoneyWin() {\n        let self = this;\n        self.resultBonus.active = true;\n        let moneyWin = 0;\n        for (let i=0; i< this._data.length; i++){\n            moneyWin += this._data[i];\n        }\n        this.lbMoneyWin.node.active = true;\n        Helper.numberTo(this.lbMoneyWin, 0 ,moneyWin, 1200, true, function () {\n            setTimeout(function(){\n                self.eventClose();\n            }, 2000);\n        });\n    },\n    eventSelect(event, data) {\n        if ( event.target.getChildByName(\"dauhoi\").active){\n            if (this.totalSelect > 0){\n                let idle = this.character.setAnimation(0, \"PhiTieu\", false);\n                this.character.setTrackCompleteListener(idle,function () {\n                    this.vongTronNode.stopAction(this.actionQuay);\n                    this.totalSelect--;\n                    if (this._data[this.totalSelect] > 0){\n                        event.target.getChildByName(\"lb_money\").active = true;\n                        event.target.getChildByName(\"dauhoi\").active   = false;\n                        event.target.getChildByName(\"truot\").active     = false;\n                        this.character.setAnimation(0, \"Thang\", false);\n                        Helper.numberTo(event.target.getChildByName(\"lb_money\").getComponent(cc.Label), 0 , this._data[this.totalSelect], 1300, true, function () {\n                            this.vongTronNode.runAction(this.actionQuay);\n                        }.bind(this));\n                    } else{\n                        event.target.getChildByName(\"dauhoi\").active   = false;\n                        event.target.getChildByName(\"truot\").active = true;\n                        this.character.setAnimation(0, \"Idle\", false);\n                        this.vongTronNode.runAction(this.actionQuay);\n                    }\n                    this.lbLuotBoc.string   = this.totalSelect;\n                    if (this.totalSelect == 0){\n                        this.showMoneyWin();\n                    }\n                }.bind(this));\n            }\n        }\n    },\n    eventClose() {\n        this.back();\n    }\n});\n"]}