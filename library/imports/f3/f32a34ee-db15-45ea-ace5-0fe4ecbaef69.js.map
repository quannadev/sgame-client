{"version":3,"sources":["assets\\scripts\\components\\SystemMessage.js"],"names":["cc","Class","Component","properties","message","RichText","isRunning","onEnable","messageBoxWidth","node","width","SmartFoxSDK","PortalController","ZoneInstance","mySelf","msg","getVariable","value","runMessage","length","stopAllActions","string","x","moveWidth","duration","self","runAction","repeatForever","sequence","moveTo","v2","callFunc"],"mappings":";;;;;;AAAAA,EAAE,CAACC,KAAH,CAAS;AACL,aAASD,EAAE,CAACE,SADP;AAGLC,EAAAA,UAAU,EAAE;AACRC,IAAAA,OAAO,EAAEJ,EAAE,CAACK,QADJ;AAERC,IAAAA,SAAS,EAAE;AAFH,GAHP;AAOLC,EAAAA,QAPK,sBAOK;AACN;AACA,SAAKC,eAAL,GAAuB,KAAKC,IAAL,CAAUC,KAAjC;;AACA,QAAGC,WAAW,CAACC,gBAAZ,CAA6BC,YAA7B,CAA0CC,MAA7C,EAAoD;AAChD,UAAIC,GAAG,GAAGJ,WAAW,CAACC,gBAAZ,CAA6BC,YAA7B,CAA0CC,MAA1C,CAAiDE,WAAjD,CAA6D,QAA7D,CAAV;;AACA,UAAGD,GAAG,IAAIA,GAAG,CAACE,KAAd,EAAoB;AAChB,aAAKC,UAAL,CAAgBH,GAAG,CAACE,KAApB;AACH;AACJ,KALD,MAKK;AACD,WAAKC,UAAL,CAAgB,sFAAhB;AACH;AACJ,GAlBI;AAmBLA,EAAAA,UAnBK,sBAmBMH,GAnBN,EAmBU;AACX,QAAIA,GAAG,CAACI,MAAJ,GAAa,CAAb,IAAkB,CAAC,KAAKb,SAA5B,EAAuC;AACnC,WAAKA,SAAL,GAAiB,IAAjB;AACA,UAAIE,eAAe,GAAG,KAAKC,IAAL,CAAUC,KAAhC;AACA,WAAKN,OAAL,CAAaK,IAAb,CAAkBW,cAAlB;AACA,WAAKhB,OAAL,CAAaiB,MAAb,GAAsBN,GAAtB;AACA,WAAKX,OAAL,CAAaK,IAAb,CAAkBa,CAAlB,GAAsBd,eAAtB;AACA,UAAIe,SAAS,GAAGf,eAAe,GAAG,KAAKJ,OAAL,CAAaK,IAAb,CAAkBC,KAApD;AACA,UAAIc,QAAQ,GAAGD,SAAS,GAAG,KAA3B;AACA,UAAIE,IAAI,GAAG,IAAX;AACA,WAAKrB,OAAL,CAAaK,IAAb,CAAkBiB,SAAlB,CAA4B1B,EAAE,CAAC2B,aAAH,CAAiB,IAAI3B,EAAE,CAAC4B,QAAP,CACzC5B,EAAE,CAAC6B,MAAH,CAAUL,QAAV,EAAoBxB,EAAE,CAAC8B,EAAH,CAAM,CAACP,SAAP,EAAkB,CAAlB,CAApB,CADyC,EAEzCvB,EAAE,CAAC+B,QAAH,CAAY,YAAY;AACpBN,QAAAA,IAAI,CAACrB,OAAL,CAAaK,IAAb,CAAkBa,CAAlB,GAAsBd,eAAtB;AACAiB,QAAAA,IAAI,CAACnB,SAAL,GAAiB,KAAjB;AACH,OAHD,CAFyC,CAAjB,CAA5B;AAOH;AACJ;AArCI,CAAT","sourceRoot":"/","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        message: cc.RichText,\r\n        isRunning: false\r\n    },\r\n    onEnable(){\r\n        // this.runMessage(\"Mua game liên hệ telegram: @mrteoem\");\r\n        this.messageBoxWidth = this.node.width;\r\n        if(SmartFoxSDK.PortalController.ZoneInstance.mySelf){\r\n            let msg = SmartFoxSDK.PortalController.ZoneInstance.mySelf.getVariable(\"sysmsg\");\r\n            if(msg && msg.value){\r\n                this.runMessage(msg.value);\r\n            }\r\n        }else{\r\n            this.runMessage(\"Chào mừng các bạn đến với cổng game Smart Fox! Cổng game quốc tế dành cho người Việt\");\r\n        }\r\n    },\r\n    runMessage(msg){\r\n        if (msg.length > 0 && !this.isRunning) {\r\n            this.isRunning = true;\r\n            let messageBoxWidth = this.node.width;\r\n            this.message.node.stopAllActions();\r\n            this.message.string = msg;\r\n            this.message.node.x = messageBoxWidth;\r\n            let moveWidth = messageBoxWidth + this.message.node.width;\r\n            let duration = moveWidth / 100.0;\r\n            let self = this;\r\n            this.message.node.runAction(cc.repeatForever(new cc.sequence(\r\n                cc.moveTo(duration, cc.v2(-moveWidth, 0)),\r\n                cc.callFunc(function () {\r\n                    self.message.node.x = messageBoxWidth;\r\n                    self.isRunning = false;\r\n                })\r\n            )));\r\n        }\r\n    }\r\n});\r\n"]}